2023-07-03 21:46:19,736 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-03 21:46:19,738 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-03 21:46:19,739 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-03 21:46:27,703 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-03 21:46:27,705 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-03 21:46:27,706 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-03 21:46:29,156 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-03 21:46:29,158 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-03 21:46:29,158 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-03 21:46:29,161 - INFO - 0-Loading...´°ÍâÓĞÊ²Ã´·ç¾°
2023-07-03 21:48:03,141 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-03 21:48:03,144 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-03 21:48:03,145 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-03 21:48:08,907 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-03 21:48:08,909 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-03 21:48:08,910 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-03 21:48:10,376 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-03 21:48:10,378 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-03 21:48:10,379 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-03 21:48:10,382 - INFO - 0-Loading...´°ÍâÓĞÊ²Ã´·ç¾°
2023-07-03 21:48:10,384 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-03 21:48:10,385 - INFO - self.temperature£º0.5
2023-07-03 21:48:10,386 - INFO - self.max_context_tokens£º-1
2023-07-03 21:48:10,386 - INFO - self.file_chunk_size£º200
2023-07-03 21:48:10,387 - INFO - self.api_key£º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
2023-07-03 21:48:10,418 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-03 21:48:10,419 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-03 21:48:10,421 - INFO - folder_path£ºdbf/gfile
2023-07-03 21:48:10,514 - INFO - Loading faiss with AVX2 support.
2023-07-03 21:48:10,515 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-03 21:48:10,515 - INFO - Loading faiss.
2023-07-03 21:48:10,598 - INFO - Successfully loaded faiss.
2023-07-03 21:48:12,310 - INFO - 2-Searching for similar documents...[Document(page_content='¡¶½ÌÊÒ´°Íâ¡·\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Ò»¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄÃÀÀöĞ£Ô°¡£Ã¿ÌìÀ´µ½ÕâÀï£¬ÎÒÃÇ¶¼³äÂúÁË¶ÔÖªÊ¶µÄºÃÆæºÍ¶ÔÉú»îµÄÈÈ°®¡£ÔÚÕâÀï£¬ÎÒÒªÏò´ó¼Ò½éÉÜÒ»¸öÈÃÎÒÁ÷Á¬Íü·µµÄµØ·½£¬ÄÇ¾ÍÊÇÎÒÃÇ½ÌÊÒ´°ÍâµÄ·ç¾°¡£', metadata={'source': 'data/file\\×÷ÎÄ.docx'}), Document(page_content='º¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î¡£\n\n<PAGE BREAK>\n\n¡¶´°ÍâµÄÆæÃîÊÀ½ç¡·\n\nÔÚº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§µÄ½ÌÊÒÀï£¬Ã¿µ±ÎÒÌ§Í·ÍûÏò´°Íâ£¬×Ü»á·¢ÏÖÒ»¸ö³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç¡£ÓÌÈçÒ»·ùÉ«²Ê°ßìµµÄ»­¾í£¬Õ¹ÏÖÔÚÎÒÑÛÇ°¡£', metadata={'source': 'data/file\\×÷ÎÄ.docx'}), Document(page_content='´°ÍâµÄ·ç¾°×ÜÊÇÄÇÃ´·á¸»¶à²Ê£¬ÈÃÎÒÃÇÔÚ¿ìÀÖÖĞ³É³¤¡£ËüÃÇ¼ûÖ¤ÁËÎÒÃÇ´ÓÖÉÄÛ×ßÏò³ÉÊìµÄ¹ı³Ì£¬Ò²¼ûÖ¤ÁËÎÒÃÇÓëÊ¦³¤¡¢Í¬°éÖ®¼äÉîºñµÄÓÑÒê¡£ÔÚÕâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°Àï£¬ÎÒÃÇÑ§»áÁËÕäÏ§Ã¿Ò»¸öÃÀºÃË²¼ä£¬¸Ğ¶÷ÕâÒ»ÇĞÅã°éÎÒÃÇ³É³¤µÄÈËºÍÊÂ¡£ÔÚÕâÀï£¬ÎÒÃÇÑ§»áÁËÓÂ¸ÒÃæ¶ÔÀ§ÄÑ£¬°ÑÎÕÃ¿Ò»¸ö»ú»áÈ¥×·ÇóÃÎÏë¡£', metadata={'source': 'data/file\\×÷ÎÄ.docx'})]
2023-07-03 21:48:12,312 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-03 21:48:14,666 - INFO - 4-Answering question...´°ÍâÓĞÉ«²Ê°ßìµµÄ»­¾í£¬³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç£¬·á¸»¶à²ÊµÄ·ç¾°¡£
2023-07-03 21:48:14,668 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-04 22:02:58,594 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:02:58,597 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:02:58,598 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:09:32,275 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:09:32,278 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:09:32,279 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:09:36,747 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:09:36,748 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:09:36,749 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:09:36,752 - INFO - Start Batch import
2023-07-04 22:12:07,364 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:12:07,366 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:12:07,367 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:12:10,455 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:12:10,457 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:12:10,458 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:12:10,461 - INFO - Start Batch import
2023-07-04 22:12:10,462 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:12:10,463 - INFO - self.temperature£º0.5
2023-07-04 22:12:10,464 - INFO - self.max_context_tokens£º-1
2023-07-04 22:12:10,464 - INFO - self.file_chunk_size£º200
2023-07-04 22:12:10,465 - INFO - self.api_key£º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
2023-07-04 22:12:10,510 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:12:10,512 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:12:12,112 - INFO - [Document(page_content='¡¶½ÌÊÒ´°Íâ¡·\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Ò»¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄÃÀÀöĞ£Ô°¡£Ã¿ÌìÀ´µ½ÕâÀï£¬ÎÒÃÇ¶¼³äÂúÁË¶ÔÖªÊ¶µÄºÃÆæºÍ¶ÔÉú»îµÄÈÈ°®¡£ÔÚÕâÀï£¬ÎÒÒªÏò´ó¼Ò½éÉÜÒ»¸öÈÃÎÒÁ÷Á¬Íü·µµÄµØ·½£¬ÄÇ¾ÍÊÇÎÒÃÇ½ÌÊÒ´°ÍâµÄ·ç¾°¡£\n\n×øÔÚ½ÌÊÒÀï£¬ÎÒ»á²»×Ô¾õµØ±»´°ÍâµÄÃÀ¾°ÎüÒı¡£´°Íâ£¬ÄÇÂÌÒâ°»È»µÄÊ÷Ä¾£¬·Â·ğÒ»¸ö¡°ÂÌÉ«É­ÁÖµ¹Ó°¡±£¬ÎªĞ£Ô°ÔöÌíÁËÒ»µÀÁÁÀöµÄ·ç¾°Ïß¡£ÔÚÄÇÆ¬ÂÌÒâÖĞ£¬ÓĞ¼¸Ö»èòèòÈçÉúµÄ¡°ÁÖÖĞÓã¡±µñËÜ£¬ËüÃÇÔÚÑô¹âµÄÕÕÉäÏÂÉÁ×Å¹âÁÁ£¬Éú¶¯¶ø¿É°®¡£ÎÒ»áÊ±²»Ê±µØÏëÏó£¬ËüÃÇÊÇ²»ÊÇÒ²ÔÚÏòÎÒÃÇÕâĞ©ÇóÖªµÄĞ¡Ñ§Éú´«µİ×ÅËüÃÇµÄÖÇ»ÛÄØ£¿\n\nÔÙÍùÇ°¿´£¬´°ÍâÊÇÄÇÌõÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ë®ÖĞµÄĞ¡Óã¶ù»¶¿ìµØÓÎ¶¯×Å£¬ÈÃÈËÌÕ×íÆäÖĞ¡£Ã¿µ±¿Î¼äĞİÏ¢£¬ÎÒÃÇ»áºÍÍ¬Ñ§ÃÇÒ»Æğ×ßµ½´°Íâ£¬ĞÀÉÍÕâĞ©ÃÀÀöµÄ¾°Îï£¬Ì¸ÂÛ×ÅÑ§Ï°ºÍÉú»îµÄÈ¤ÊÂ¡£\n\n´°Íâ»¹ÓĞÄÇ¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ÕâÀï²¼ÂúÁËÃûÑÔ¾¯¾ä£¬Ê±¿ÌÌáĞÑ×ÅÎÒÃÇÒªÇÚ·ÜÑ§Ï°£¬³ÉÎªµÂÖÇÌåÃÀÈ«Ãæ·¢Õ¹µÄÈË¡£³¤ÀÈÅÔ±ß±ãÊÇÄÇÉ«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö£¬É¢·¢×Åµ­µ­µÄ·Ò·¼£¬ÈÃÈËĞÄ¿õÉñâù¡£\n\n³ı´ËÖ®Íâ£¬»¹ÓĞÄÇÒıÈË×¢Ä¿µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±£¬ËüÃÇÔÚÌáĞÑ×ÅÎÒÃÇ£¬Ñ§Ï°ÊÇÒ»±²×ÓµÄÊÂ£¬Ö»ÓĞ²»¶ÏµØÑ§Ï°£¬²ÅÄÜÈÃ×Ô¼º±äµÃ¸ü¼ÓÓÅĞã¡£\n\n½ÌÊÒ´°ÍâµÄ·ç¾°ÃÀÀö¶ø¸»ÓĞÒâÒå£¬ÕâĞ©¾°Îï¼ûÖ¤ÁËÎÒÃÇÒ»ÌìÌìµÄ³É³¤£¬Ò²¼ûÖ¤ÁËÎÒÃÇÔÚÕâÀï¶È¹ıµÄ¿ìÀÖÊ±¹â¡£ËüÃÇ¼¤Àø×ÅÎÒÃÇÅ¬Á¦Ñ§Ï°£¬×·Çó×¿Ô½£¬³ÉÎªÒ»¸ö¡°ÌÃÌÃÕıÕıµÄÖĞ¹úÈË£¬ĞØ»³×æ¹úµÄÊÀ½çÈË¡±¡£\n\nÔÚÕâÀï£¬ÎÒÃÇÑ§»áÁËÕäÏ§Ê±¼ä£¬Ñ§»áÁË¸Ğ¶÷Ê¦³¤ºÍÍ¬°éÃÇµÄÅã°é¡£Ã¿Ò»´¦´°ÍâµÄ·ç¾°¶¼ÈÚÈëÁËÎÒÃÇ³É³¤µÄµãµÎ»ØÒä£¬ËüÃÇ²»½öÃÀ»¯ÁËÎÒÃÇµÄÊÓÒ°£¬Ò²ÃÀ»¯ÁËÎÒÃÇµÄĞÄÁé¡£\n\nÕ¾ÔÚ½ÌÊÒ´°¿Ú£¬ÎÒÏë¶Ô´°ÍâµÄ·ç¾°ËµÉùĞ»Ğ»£¬Ğ»Ğ»ËüÃÇ¸øÎÒÃÇ´øÀ´µÄÃÀºÃºÍ¿ìÀÖ¡£ÔÚÎ´À´µÄÈÕ×ÓÀï£¬ÎÒÃÇÒª¼ÌĞøÅ¬Á¦£¬ÎªÊµÏÖ×Ô¼ºµÄÃÎÏë¶øÆ´²«£¬Îª×æ¹úµÄ·±ÈÙºÍÊÀ½çµÄºÍÆ½¹±Ï××Ô¼ºµÄÁ¦Á¿¡£\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î¡£\n\n<PAGE BREAK>\n\n¡¶´°ÍâµÄÆæÃîÊÀ½ç¡·\n\nÔÚº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§µÄ½ÌÊÒÀï£¬Ã¿µ±ÎÒÌ§Í·ÍûÏò´°Íâ£¬×Ü»á·¢ÏÖÒ»¸ö³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç¡£ÓÌÈçÒ»·ùÉ«²Ê°ßìµµÄ»­¾í£¬Õ¹ÏÖÔÚÎÒÑÛÇ°¡£\n\n´°Íâ£¬ÂÌÉ«É­ÁÖµ¹Ó°µÄÊ÷Ä¾ÔÚÑô¹âÏÂÒ¡Ò·Éú×Ë£¬·Â·ğÔÚÌø¶¯×Å»¶¿ìµÄÎèµ¸¡£ÓĞÊ±£¬¼¸Ö»Ğ¡ÄñÔÚÊ÷Ö¦¼ä»¶½Ğ£¬ÎªÕâ¾²Ú×µÄĞ£Ô°´øÀ´ÁËÉúÆø¡£¾ÍÔÚÊ÷Ä¾µÄÅÔ±ß£¬ÄÇ¼¸Ö»º©Ì¬¿ÉŞäµÄ¡°ÁÖÖĞÓã¡±µñËÜºÃÏñÔÚÏòÎÒÃÇÕ£ÑÛÊ¾Òâ£¬°µÊ¾×ÅËüÃÇÒ²ÔÚÓëÎÒÃÇÒ»ÆğÌ½Ë÷ÖªÊ¶µÄº£Ñó¡£\n\n½ÌÊÒ´°ÍâµÄ¡°Ô´Í·Ë®¡±×ÜÊÇÇå³º¼ûµ×£¬Ë®ÖĞµÄĞ¡Óã¶ùÓÎµÃ»¶¿ì¶ø×ÔÓÉ¡£Ã¿µ±¿Î¼ä£¬ÎÒºÍÍ¬Ñ§ÃÇ»áÀ´µ½´°Íâ£¬Ò»±ß¹ÛÉÍÕâĞ©¿ìÀÖµÄĞ¡ÉúÃü£¬Ò»±ßÕùÂÛ×ÅË­¼ÒµÄ½ğÓã×îÃÀ¡£ÎÒÃÇµÄ»¶ÉùĞ¦Óï£¬»ã³ÉÁËÃÀÃîµÄĞıÂÉ£¬Ïì³¹ÔÚÕâÆ¬ÃÀÀöµÄĞ£Ô°Àï¡£\n\nÔÙ¿´ÄÇ¶À¾ßÌØÉ«µÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ËüÏñÒ»Î»¸ºÔğÈÎµÄÀÏÊ¦£¬ÓÃÃûÑÔ¾¯¾ä¼¤ÀøÎÒÃÇÇÚ·ÜÏòÉÏ¡£¶ø½ô°¤×Å³¤ÀÈµÄÄÇÒ»Æ¬Îå²Ê°ßìµµÄĞ¡»¨Ì³£¬¸üÊÇÈÃÈËÑÛÇ°Ò»ÁÁ¡£ÓĞÊ±ºò£¬ºûµûÔÚ»¨¶ä¼äôæôæÆğÎè£¬¸øÎÒÃÇ´øÀ´ÁËÎŞ¾¡µÄ»¶Óä¡£\n\n½ÌÊÒ´°Íâ»¹ÓĞÄÇÒıÈËÈëÊ¤µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±¡£ÕâÀï£¬ÎÒÃÇºÍÍ¬Ñ§ÃÇÒ»ÆğÍæË££¬Ò»±ßÑ§Ï°£¬Ò»±ßæÒÏ·¡£ÄÇÊ±£¬»¶Ğ¦Éù¡¢ÕÆÉù¡¢ÔŞÃÀÉù´ËÆğ±Ë·ü£¬³äÂúÁË»îÁ¦¡£\n\n´°ÍâµÄ·ç¾°×ÜÊÇÄÇÃ´·á¸»¶à²Ê£¬ÈÃÎÒÃÇÔÚ¿ìÀÖÖĞ³É³¤¡£ËüÃÇ¼ûÖ¤ÁËÎÒÃÇ´ÓÖÉÄÛ×ßÏò³ÉÊìµÄ¹ı³Ì£¬Ò²¼ûÖ¤ÁËÎÒÃÇÓëÊ¦³¤¡¢Í¬°éÖ®¼äÉîºñµÄÓÑÒê¡£ÔÚÕâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°Àï£¬ÎÒÃÇÑ§»áÁËÕäÏ§Ã¿Ò»¸öÃÀºÃË²¼ä£¬¸Ğ¶÷ÕâÒ»ÇĞÅã°éÎÒÃÇ³É³¤µÄÈËºÍÊÂ¡£ÔÚÕâÀï£¬ÎÒÃÇÑ§»áÁËÓÂ¸ÒÃæ¶ÔÀ§ÄÑ£¬°ÑÎÕÃ¿Ò»¸ö»ú»áÈ¥×·ÇóÃÎÏë¡£\n\n´°ÍâµÄ·ç¾°·Â·ğÒ²ÔÚÇÄÇÄµØ±ä»¯¡£Ëæ×Å¼¾½ÚµÄ¸üÌæ£¬´ºÅ¯»¨¿ªÊ±£¬ÎÒÃÇÔÚ¡°ÓÎÀÖÔ°¡±¾¡ÇéÍæË££¬Óë»ï°éÃÇ³©Ì¸ÃÀºÃµÄÎ´À´£»ÏÄÈÕÑ×Ñ×£¬ÎÒÃÇÔÚ¡°µØÍ¼ÅÊÑÒ±Ú¡±»Óº¹ÈçÓê£¬¶ÍÁ¶ÉíÌå£¬Ä¥Á·ÒâÖ¾£»Çï·çÏôÉªÖ®¼Ê£¬ÎÒÃÇÔÚ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±ÀïÑ°ÕÒÖÇ»ÛµÄ»ğ»¨£¬¼³È¡ÖªÊ¶µÄÓªÑø£»º®¶¬À°ÔÂ£¬ÎÒÃÇÔÚÊÒÄÚ½øĞĞ¸÷ÖÖÓĞÈ¤µÄ»î¶¯£¬Ôö½øÓÑÒê£¬ÏíÊÜ¿ìÀÖÊ±¹â¡£\n\nÕâ¸ö³äÂúÉú»úÓë»îÁ¦µÄĞ£Ô°£¬ÎªÎÒÃÇÌá¹©ÁËÒ»¸öÕ¹³á°¿ÏèµÄÎèÌ¨¡£½ÌÊÒ´°ÍâµÄ·ç¾°£¬¾ÍÏñÒ»°ÑÄ§·¨°ô£¬ÎªÎÒÃÇ´øÀ´ÁËÓÂÆø¡¢ÖÇ»ÛºÍÁ¦Á¿¡£ÎÒÃÇÒªÕäÏ§ÔÚÕâÀï¶È¹ıµÄÃ¿Ò»Ìì£¬ÓÀÔ¶Ãú¼ÇÕâĞ©ÃÀºÃµÄË²¼ä¡£\n\nÔÚÎ´À´µÄËêÔÂÀï£¬ÎÒÃÇ½«¼ÌĞøÅ¬Á¦£¬ÎªÊµÏÖÃÎÏë¶ø·Ü¶·£¬Îª×æ¹úµÄ·±ÈÙºÍÊÀ½çµÄºÍÆ½¹±Ï×ÎÒÃÇµÄÁ¦Á¿¡£¶øÄÇĞ©½ÌÊÒ´°ÍâµÄÃÀÀö·ç¾°£¬½«ÓÀÔ¶Ãú¿ÌÔÚÎÒÃÇĞÄÖĞ£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î£¬¼¤ÀøÎÒÃÇ²»¶ÏÇ°½ø¡£\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-04 22:12:12,115 - INFO - Found 13 documents in data/file
2023-07-04 22:12:12,302 - INFO - Loading faiss with AVX2 support.
2023-07-04 22:12:12,303 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-04 22:12:12,303 - INFO - Loading faiss.
2023-07-04 22:12:12,455 - INFO - Successfully loaded faiss.
2023-07-04 22:12:14,367 - INFO - error_code=invalid_api_key error_message='Incorrect API key provided: sk-bISpw***************************************GVLz. You can find your API key at https://platform.openai.com/account/api-keys.' error_param=None error_type=invalid_request_error message='OpenAI API error received' stream_error=False
2023-07-04 22:14:53,184 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:14:53,186 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:14:53,187 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:14:55,935 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:14:55,937 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:14:55,938 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:14:55,940 - INFO - Start Batch import
2023-07-04 22:14:55,941 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:14:55,943 - INFO - self.temperature£º0.5
2023-07-04 22:14:55,943 - INFO - self.max_context_tokens£º-1
2023-07-04 22:14:55,944 - INFO - self.file_chunk_size£º200
2023-07-04 22:14:55,944 - INFO - self.api_key£º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
2023-07-04 22:14:55,972 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:14:55,974 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:14:57,097 - INFO - [Document(page_content='¡¶½ÌÊÒ´°Íâ¡·\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Ò»¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄÃÀÀöĞ£Ô°¡£Ã¿ÌìÀ´µ½ÕâÀï£¬ÎÒÃÇ¶¼³äÂúÁË¶ÔÖªÊ¶µÄºÃÆæºÍ¶ÔÉú»îµÄÈÈ°®¡£ÔÚÕâÀï£¬ÎÒÒªÏò´ó¼Ò½éÉÜÒ»¸öÈÃÎÒÁ÷Á¬Íü·µµÄµØ·½£¬ÄÇ¾ÍÊÇÎÒÃÇ½ÌÊÒ´°ÍâµÄ·ç¾°¡£\n\n×øÔÚ½ÌÊÒÀï£¬ÎÒ»á²»×Ô¾õµØ±»´°ÍâµÄÃÀ¾°ÎüÒı¡£´°Íâ£¬ÄÇÂÌÒâ°»È»µÄÊ÷Ä¾£¬·Â·ğÒ»¸ö¡°ÂÌÉ«É­ÁÖµ¹Ó°¡±£¬ÎªĞ£Ô°ÔöÌíÁËÒ»µÀÁÁÀöµÄ·ç¾°Ïß¡£ÔÚÄÇÆ¬ÂÌÒâÖĞ£¬ÓĞ¼¸Ö»èòèòÈçÉúµÄ¡°ÁÖÖĞÓã¡±µñËÜ£¬ËüÃÇÔÚÑô¹âµÄÕÕÉäÏÂÉÁ×Å¹âÁÁ£¬Éú¶¯¶ø¿É°®¡£ÎÒ»áÊ±²»Ê±µØÏëÏó£¬ËüÃÇÊÇ²»ÊÇÒ²ÔÚÏòÎÒÃÇÕâĞ©ÇóÖªµÄĞ¡Ñ§Éú´«µİ×ÅËüÃÇµÄÖÇ»ÛÄØ£¿\n\nÔÙÍùÇ°¿´£¬´°ÍâÊÇÄÇÌõÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ë®ÖĞµÄĞ¡Óã¶ù»¶¿ìµØÓÎ¶¯×Å£¬ÈÃÈËÌÕ×íÆäÖĞ¡£Ã¿µ±¿Î¼äĞİÏ¢£¬ÎÒÃÇ»áºÍÍ¬Ñ§ÃÇÒ»Æğ×ßµ½´°Íâ£¬ĞÀÉÍÕâĞ©ÃÀÀöµÄ¾°Îï£¬Ì¸ÂÛ×ÅÑ§Ï°ºÍÉú»îµÄÈ¤ÊÂ¡£\n\n´°Íâ»¹ÓĞÄÇ¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ÕâÀï²¼ÂúÁËÃûÑÔ¾¯¾ä£¬Ê±¿ÌÌáĞÑ×ÅÎÒÃÇÒªÇÚ·ÜÑ§Ï°£¬³ÉÎªµÂÖÇÌåÃÀÈ«Ãæ·¢Õ¹µÄÈË¡£³¤ÀÈÅÔ±ß±ãÊÇÄÇÉ«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö£¬É¢·¢×Åµ­µ­µÄ·Ò·¼£¬ÈÃÈËĞÄ¿õÉñâù¡£\n\n³ı´ËÖ®Íâ£¬»¹ÓĞÄÇÒıÈË×¢Ä¿µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±£¬ËüÃÇÔÚÌáĞÑ×ÅÎÒÃÇ£¬Ñ§Ï°ÊÇÒ»±²×ÓµÄÊÂ£¬Ö»ÓĞ²»¶ÏµØÑ§Ï°£¬²ÅÄÜÈÃ×Ô¼º±äµÃ¸ü¼ÓÓÅĞã¡£\n\n½ÌÊÒ´°ÍâµÄ·ç¾°ÃÀÀö¶ø¸»ÓĞÒâÒå£¬ÕâĞ©¾°Îï¼ûÖ¤ÁËÎÒÃÇÒ»ÌìÌìµÄ³É³¤£¬Ò²¼ûÖ¤ÁËÎÒÃÇÔÚÕâÀï¶È¹ıµÄ¿ìÀÖÊ±¹â¡£ËüÃÇ¼¤Àø×ÅÎÒÃÇÅ¬Á¦Ñ§Ï°£¬×·Çó×¿Ô½£¬³ÉÎªÒ»¸ö¡°ÌÃÌÃÕıÕıµÄÖĞ¹úÈË£¬ĞØ»³×æ¹úµÄÊÀ½çÈË¡±¡£\n\nÔÚÕâÀï£¬ÎÒÃÇÑ§»áÁËÕäÏ§Ê±¼ä£¬Ñ§»áÁË¸Ğ¶÷Ê¦³¤ºÍÍ¬°éÃÇµÄÅã°é¡£Ã¿Ò»´¦´°ÍâµÄ·ç¾°¶¼ÈÚÈëÁËÎÒÃÇ³É³¤µÄµãµÎ»ØÒä£¬ËüÃÇ²»½öÃÀ»¯ÁËÎÒÃÇµÄÊÓÒ°£¬Ò²ÃÀ»¯ÁËÎÒÃÇµÄĞÄÁé¡£\n\nÕ¾ÔÚ½ÌÊÒ´°¿Ú£¬ÎÒÏë¶Ô´°ÍâµÄ·ç¾°ËµÉùĞ»Ğ»£¬Ğ»Ğ»ËüÃÇ¸øÎÒÃÇ´øÀ´µÄÃÀºÃºÍ¿ìÀÖ¡£ÔÚÎ´À´µÄÈÕ×ÓÀï£¬ÎÒÃÇÒª¼ÌĞøÅ¬Á¦£¬ÎªÊµÏÖ×Ô¼ºµÄÃÎÏë¶øÆ´²«£¬Îª×æ¹úµÄ·±ÈÙºÍÊÀ½çµÄºÍÆ½¹±Ï××Ô¼ºµÄÁ¦Á¿¡£\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î¡£\n\n<PAGE BREAK>\n\n¡¶´°ÍâµÄÆæÃîÊÀ½ç¡·\n\nÔÚº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§µÄ½ÌÊÒÀï£¬Ã¿µ±ÎÒÌ§Í·ÍûÏò´°Íâ£¬×Ü»á·¢ÏÖÒ»¸ö³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç¡£ÓÌÈçÒ»·ùÉ«²Ê°ßìµµÄ»­¾í£¬Õ¹ÏÖÔÚÎÒÑÛÇ°¡£\n\n´°Íâ£¬ÂÌÉ«É­ÁÖµ¹Ó°µÄÊ÷Ä¾ÔÚÑô¹âÏÂÒ¡Ò·Éú×Ë£¬·Â·ğÔÚÌø¶¯×Å»¶¿ìµÄÎèµ¸¡£ÓĞÊ±£¬¼¸Ö»Ğ¡ÄñÔÚÊ÷Ö¦¼ä»¶½Ğ£¬ÎªÕâ¾²Ú×µÄĞ£Ô°´øÀ´ÁËÉúÆø¡£¾ÍÔÚÊ÷Ä¾µÄÅÔ±ß£¬ÄÇ¼¸Ö»º©Ì¬¿ÉŞäµÄ¡°ÁÖÖĞÓã¡±µñËÜºÃÏñÔÚÏòÎÒÃÇÕ£ÑÛÊ¾Òâ£¬°µÊ¾×ÅËüÃÇÒ²ÔÚÓëÎÒÃÇÒ»ÆğÌ½Ë÷ÖªÊ¶µÄº£Ñó¡£\n\n½ÌÊÒ´°ÍâµÄ¡°Ô´Í·Ë®¡±×ÜÊÇÇå³º¼ûµ×£¬Ë®ÖĞµÄĞ¡Óã¶ùÓÎµÃ»¶¿ì¶ø×ÔÓÉ¡£Ã¿µ±¿Î¼ä£¬ÎÒºÍÍ¬Ñ§ÃÇ»áÀ´µ½´°Íâ£¬Ò»±ß¹ÛÉÍÕâĞ©¿ìÀÖµÄĞ¡ÉúÃü£¬Ò»±ßÕùÂÛ×ÅË­¼ÒµÄ½ğÓã×îÃÀ¡£ÎÒÃÇµÄ»¶ÉùĞ¦Óï£¬»ã³ÉÁËÃÀÃîµÄĞıÂÉ£¬Ïì³¹ÔÚÕâÆ¬ÃÀÀöµÄĞ£Ô°Àï¡£\n\nÔÙ¿´ÄÇ¶À¾ßÌØÉ«µÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ËüÏñÒ»Î»¸ºÔğÈÎµÄÀÏÊ¦£¬ÓÃÃûÑÔ¾¯¾ä¼¤ÀøÎÒÃÇÇÚ·ÜÏòÉÏ¡£¶ø½ô°¤×Å³¤ÀÈµÄÄÇÒ»Æ¬Îå²Ê°ßìµµÄĞ¡»¨Ì³£¬¸üÊÇÈÃÈËÑÛÇ°Ò»ÁÁ¡£ÓĞÊ±ºò£¬ºûµûÔÚ»¨¶ä¼äôæôæÆğÎè£¬¸øÎÒÃÇ´øÀ´ÁËÎŞ¾¡µÄ»¶Óä¡£\n\n½ÌÊÒ´°Íâ»¹ÓĞÄÇÒıÈËÈëÊ¤µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±¡£ÕâÀï£¬ÎÒÃÇºÍÍ¬Ñ§ÃÇÒ»ÆğÍæË££¬Ò»±ßÑ§Ï°£¬Ò»±ßæÒÏ·¡£ÄÇÊ±£¬»¶Ğ¦Éù¡¢ÕÆÉù¡¢ÔŞÃÀÉù´ËÆğ±Ë·ü£¬³äÂúÁË»îÁ¦¡£\n\n´°ÍâµÄ·ç¾°×ÜÊÇÄÇÃ´·á¸»¶à²Ê£¬ÈÃÎÒÃÇÔÚ¿ìÀÖÖĞ³É³¤¡£ËüÃÇ¼ûÖ¤ÁËÎÒÃÇ´ÓÖÉÄÛ×ßÏò³ÉÊìµÄ¹ı³Ì£¬Ò²¼ûÖ¤ÁËÎÒÃÇÓëÊ¦³¤¡¢Í¬°éÖ®¼äÉîºñµÄÓÑÒê¡£ÔÚÕâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°Àï£¬ÎÒÃÇÑ§»áÁËÕäÏ§Ã¿Ò»¸öÃÀºÃË²¼ä£¬¸Ğ¶÷ÕâÒ»ÇĞÅã°éÎÒÃÇ³É³¤µÄÈËºÍÊÂ¡£ÔÚÕâÀï£¬ÎÒÃÇÑ§»áÁËÓÂ¸ÒÃæ¶ÔÀ§ÄÑ£¬°ÑÎÕÃ¿Ò»¸ö»ú»áÈ¥×·ÇóÃÎÏë¡£\n\n´°ÍâµÄ·ç¾°·Â·ğÒ²ÔÚÇÄÇÄµØ±ä»¯¡£Ëæ×Å¼¾½ÚµÄ¸üÌæ£¬´ºÅ¯»¨¿ªÊ±£¬ÎÒÃÇÔÚ¡°ÓÎÀÖÔ°¡±¾¡ÇéÍæË££¬Óë»ï°éÃÇ³©Ì¸ÃÀºÃµÄÎ´À´£»ÏÄÈÕÑ×Ñ×£¬ÎÒÃÇÔÚ¡°µØÍ¼ÅÊÑÒ±Ú¡±»Óº¹ÈçÓê£¬¶ÍÁ¶ÉíÌå£¬Ä¥Á·ÒâÖ¾£»Çï·çÏôÉªÖ®¼Ê£¬ÎÒÃÇÔÚ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±ÀïÑ°ÕÒÖÇ»ÛµÄ»ğ»¨£¬¼³È¡ÖªÊ¶µÄÓªÑø£»º®¶¬À°ÔÂ£¬ÎÒÃÇÔÚÊÒÄÚ½øĞĞ¸÷ÖÖÓĞÈ¤µÄ»î¶¯£¬Ôö½øÓÑÒê£¬ÏíÊÜ¿ìÀÖÊ±¹â¡£\n\nÕâ¸ö³äÂúÉú»úÓë»îÁ¦µÄĞ£Ô°£¬ÎªÎÒÃÇÌá¹©ÁËÒ»¸öÕ¹³á°¿ÏèµÄÎèÌ¨¡£½ÌÊÒ´°ÍâµÄ·ç¾°£¬¾ÍÏñÒ»°ÑÄ§·¨°ô£¬ÎªÎÒÃÇ´øÀ´ÁËÓÂÆø¡¢ÖÇ»ÛºÍÁ¦Á¿¡£ÎÒÃÇÒªÕäÏ§ÔÚÕâÀï¶È¹ıµÄÃ¿Ò»Ìì£¬ÓÀÔ¶Ãú¼ÇÕâĞ©ÃÀºÃµÄË²¼ä¡£\n\nÔÚÎ´À´µÄËêÔÂÀï£¬ÎÒÃÇ½«¼ÌĞøÅ¬Á¦£¬ÎªÊµÏÖÃÎÏë¶ø·Ü¶·£¬Îª×æ¹úµÄ·±ÈÙºÍÊÀ½çµÄºÍÆ½¹±Ï×ÎÒÃÇµÄÁ¦Á¿¡£¶øÄÇĞ©½ÌÊÒ´°ÍâµÄÃÀÀö·ç¾°£¬½«ÓÀÔ¶Ãú¿ÌÔÚÎÒÃÇĞÄÖĞ£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î£¬¼¤ÀøÎÒÃÇ²»¶ÏÇ°½ø¡£\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-04 22:14:57,100 - INFO - Found 13 documents in data/file
2023-07-04 22:14:57,183 - INFO - Loading faiss with AVX2 support.
2023-07-04 22:14:57,184 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-04 22:14:57,185 - INFO - Loading faiss.
2023-07-04 22:14:57,266 - INFO - Successfully loaded faiss.
2023-07-04 22:14:59,890 - ERROR - Error loading db: Error in __cdecl faiss::FileIOReader::FileIOReader(const char *) at D:\a\faiss-wheels\faiss-wheels\faiss\faiss\impl\io.cpp:68: Error: 'f' failed: could not open dbf\gfile\gfile.faiss for reading: No such file or directory
2023-07-04 22:14:59,891 - INFO - Saved db to data/filegfile
2023-07-04 22:14:59,974 - INFO - None
2023-07-04 22:16:43,814 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:16:43,816 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:16:43,817 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:16:45,821 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:16:45,822 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:16:45,823 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:16:45,827 - INFO - 0-Loading...ÓĞ¼¸ÖÖËæ»úÊı¶Ô±ÈµÄ·½°¸
2023-07-04 22:16:45,828 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:16:45,829 - INFO - self.temperature£º0.5
2023-07-04 22:16:45,830 - INFO - self.max_context_tokens£º-1
2023-07-04 22:16:45,830 - INFO - self.file_chunk_size£º200
2023-07-04 22:16:45,831 - INFO - self.api_key£º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
2023-07-04 22:16:45,832 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:16:45,833 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-04 22:16:45,835 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:16:47,691 - INFO - 2-Searching for similar documents...[Document(page_content='ÔÙ¿´ÄÇ¶À¾ßÌØÉ«µÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ËüÏñÒ»Î»¸ºÔğÈÎµÄÀÏÊ¦£¬ÓÃÃûÑÔ¾¯¾ä¼¤ÀøÎÒÃÇÇÚ·ÜÏòÉÏ¡£¶ø½ô°¤×Å³¤ÀÈµÄÄÇÒ»Æ¬Îå²Ê°ßìµµÄĞ¡»¨Ì³£¬¸üÊÇÈÃÈËÑÛÇ°Ò»ÁÁ¡£ÓĞÊ±ºò£¬ºûµûÔÚ»¨¶ä¼äôæôæÆğÎè£¬¸øÎÒÃÇ´øÀ´ÁËÎŞ¾¡µÄ»¶Óä¡£\n\n½ÌÊÒ´°Íâ»¹ÓĞÄÇÒıÈËÈëÊ¤µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±¡£ÕâÀï£¬ÎÒÃÇºÍÍ¬Ñ§ÃÇÒ»ÆğÍæË££¬Ò»±ßÑ§Ï°£¬Ò»±ßæÒÏ·¡£ÄÇÊ±£¬»¶Ğ¦Éù¡¢ÕÆÉù¡¢ÔŞÃÀÉù´ËÆğ±Ë·ü£¬³äÂúÁË»îÁ¦¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='´°ÍâµÄ·ç¾°·Â·ğÒ²ÔÚÇÄÇÄµØ±ä»¯¡£Ëæ×Å¼¾½ÚµÄ¸üÌæ£¬´ºÅ¯»¨¿ªÊ±£¬ÎÒÃÇÔÚ¡°ÓÎÀÖÔ°¡±¾¡ÇéÍæË££¬Óë»ï°éÃÇ³©Ì¸ÃÀºÃµÄÎ´À´£»ÏÄÈÕÑ×Ñ×£¬ÎÒÃÇÔÚ¡°µØÍ¼ÅÊÑÒ±Ú¡±»Óº¹ÈçÓê£¬¶ÍÁ¶ÉíÌå£¬Ä¥Á·ÒâÖ¾£»Çï·çÏôÉªÖ®¼Ê£¬ÎÒÃÇÔÚ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±ÀïÑ°ÕÒÖÇ»ÛµÄ»ğ»¨£¬¼³È¡ÖªÊ¶µÄÓªÑø£»º®¶¬À°ÔÂ£¬ÎÒÃÇÔÚÊÒÄÚ½øĞĞ¸÷ÖÖÓĞÈ¤µÄ»î¶¯£¬Ôö½øÓÑÒê£¬ÏíÊÜ¿ìÀÖÊ±¹â¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='ÔÙÍùÇ°¿´£¬´°ÍâÊÇÄÇÌõÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ë®ÖĞµÄĞ¡Óã¶ù»¶¿ìµØÓÎ¶¯×Å£¬ÈÃÈËÌÕ×íÆäÖĞ¡£Ã¿µ±¿Î¼äĞİÏ¢£¬ÎÒÃÇ»áºÍÍ¬Ñ§ÃÇÒ»Æğ×ßµ½´°Íâ£¬ĞÀÉÍÕâĞ©ÃÀÀöµÄ¾°Îï£¬Ì¸ÂÛ×ÅÑ§Ï°ºÍÉú»îµÄÈ¤ÊÂ¡£\n\n´°Íâ»¹ÓĞÄÇ¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ÕâÀï²¼ÂúÁËÃûÑÔ¾¯¾ä£¬Ê±¿ÌÌáĞÑ×ÅÎÒÃÇÒªÇÚ·ÜÑ§Ï°£¬³ÉÎªµÂÖÇÌåÃÀÈ«Ãæ·¢Õ¹µÄÈË¡£³¤ÀÈÅÔ±ß±ãÊÇÄÇÉ«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö£¬É¢·¢×Åµ­µ­µÄ·Ò·¼£¬ÈÃÈËĞÄ¿õÉñâù¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-04 22:16:47,693 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-04 22:16:48,941 - INFO - 4-Answering question...I don't know.
2023-07-04 22:16:48,944 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-04 22:19:32,350 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:19:32,352 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:19:32,353 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:19:36,424 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:19:36,426 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:19:36,427 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:19:36,430 - INFO - Start Batch import
2023-07-04 22:19:36,431 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:19:36,432 - INFO - self.temperature£º0.5
2023-07-04 22:19:36,432 - INFO - self.max_context_tokens£º-1
2023-07-04 22:19:36,433 - INFO - self.file_chunk_size£º200
2023-07-04 22:19:36,433 - INFO - self.api_key£º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
2023-07-04 22:19:36,463 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:19:36,464 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:19:36,465 - INFO - filename£ºliudongxingpipei.docx
2023-07-04 22:19:37,553 - INFO - filename£º×÷ÎÄ.docx
2023-07-04 22:19:37,640 - INFO - filename£ºËæ»úÊıĞÔÄÜ¶Ô±È.html
2023-07-04 22:19:37,709 - INFO - [Document(page_content='¡¶½ÌÊÒ´°Íâ¡·\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Ò»¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄÃÀÀöĞ£Ô°¡£Ã¿ÌìÀ´µ½ÕâÀï£¬ÎÒÃÇ¶¼³äÂúÁË¶ÔÖªÊ¶µÄºÃÆæºÍ¶ÔÉú»îµÄÈÈ°®¡£ÔÚÕâÀï£¬ÎÒÒªÏò´ó¼Ò½éÉÜÒ»¸öÈÃÎÒÁ÷Á¬Íü·µµÄµØ·½£¬ÄÇ¾ÍÊÇÎÒÃÇ½ÌÊÒ´°ÍâµÄ·ç¾°¡£\n\n×øÔÚ½ÌÊÒÀï£¬ÎÒ»á²»×Ô¾õµØ±»´°ÍâµÄÃÀ¾°ÎüÒı¡£´°Íâ£¬ÄÇÂÌÒâ°»È»µÄÊ÷Ä¾£¬·Â·ğÒ»¸ö¡°ÂÌÉ«É­ÁÖµ¹Ó°¡±£¬ÎªĞ£Ô°ÔöÌíÁËÒ»µÀÁÁÀöµÄ·ç¾°Ïß¡£ÔÚÄÇÆ¬ÂÌÒâÖĞ£¬ÓĞ¼¸Ö»èòèòÈçÉúµÄ¡°ÁÖÖĞÓã¡±µñËÜ£¬ËüÃÇÔÚÑô¹âµÄÕÕÉäÏÂÉÁ×Å¹âÁÁ£¬Éú¶¯¶ø¿É°®¡£ÎÒ»áÊ±²»Ê±µØÏëÏó£¬ËüÃÇÊÇ²»ÊÇÒ²ÔÚÏòÎÒÃÇÕâĞ©ÇóÖªµÄĞ¡Ñ§Éú´«µİ×ÅËüÃÇµÄÖÇ»ÛÄØ£¿\n\nÔÙÍùÇ°¿´£¬´°ÍâÊÇÄÇÌõÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ë®ÖĞµÄĞ¡Óã¶ù»¶¿ìµØÓÎ¶¯×Å£¬ÈÃÈËÌÕ×íÆäÖĞ¡£Ã¿µ±¿Î¼äĞİÏ¢£¬ÎÒÃÇ»áºÍÍ¬Ñ§ÃÇÒ»Æğ×ßµ½´°Íâ£¬ĞÀÉÍÕâĞ©ÃÀÀöµÄ¾°Îï£¬Ì¸ÂÛ×ÅÑ§Ï°ºÍÉú»îµÄÈ¤ÊÂ¡£\n\n´°Íâ»¹ÓĞÄÇ¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ÕâÀï²¼ÂúÁËÃûÑÔ¾¯¾ä£¬Ê±¿ÌÌáĞÑ×ÅÎÒÃÇÒªÇÚ·ÜÑ§Ï°£¬³ÉÎªµÂÖÇÌåÃÀÈ«Ãæ·¢Õ¹µÄÈË¡£³¤ÀÈÅÔ±ß±ãÊÇÄÇÉ«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö£¬É¢·¢×Åµ­µ­µÄ·Ò·¼£¬ÈÃÈËĞÄ¿õÉñâù¡£\n\n³ı´ËÖ®Íâ£¬»¹ÓĞÄÇÒıÈË×¢Ä¿µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±£¬ËüÃÇÔÚÌáĞÑ×ÅÎÒÃÇ£¬Ñ§Ï°ÊÇÒ»±²×ÓµÄÊÂ£¬Ö»ÓĞ²»¶ÏµØÑ§Ï°£¬²ÅÄÜÈÃ×Ô¼º±äµÃ¸ü¼ÓÓÅĞã¡£\n\n½ÌÊÒ´°ÍâµÄ·ç¾°ÃÀÀö¶ø¸»ÓĞÒâÒå£¬ÕâĞ©¾°Îï¼ûÖ¤ÁËÎÒÃÇÒ»ÌìÌìµÄ³É³¤£¬Ò²¼ûÖ¤ÁËÎÒÃÇÔÚÕâÀï¶È¹ıµÄ¿ìÀÖÊ±¹â¡£ËüÃÇ¼¤Àø×ÅÎÒÃÇÅ¬Á¦Ñ§Ï°£¬×·Çó×¿Ô½£¬³ÉÎªÒ»¸ö¡°ÌÃÌÃÕıÕıµÄÖĞ¹úÈË£¬ĞØ»³×æ¹úµÄÊÀ½çÈË¡±¡£\n\nÔÚÕâÀï£¬ÎÒÃÇÑ§»áÁËÕäÏ§Ê±¼ä£¬Ñ§»áÁË¸Ğ¶÷Ê¦³¤ºÍÍ¬°éÃÇµÄÅã°é¡£Ã¿Ò»´¦´°ÍâµÄ·ç¾°¶¼ÈÚÈëÁËÎÒÃÇ³É³¤µÄµãµÎ»ØÒä£¬ËüÃÇ²»½öÃÀ»¯ÁËÎÒÃÇµÄÊÓÒ°£¬Ò²ÃÀ»¯ÁËÎÒÃÇµÄĞÄÁé¡£\n\nÕ¾ÔÚ½ÌÊÒ´°¿Ú£¬ÎÒÏë¶Ô´°ÍâµÄ·ç¾°ËµÉùĞ»Ğ»£¬Ğ»Ğ»ËüÃÇ¸øÎÒÃÇ´øÀ´µÄÃÀºÃºÍ¿ìÀÖ¡£ÔÚÎ´À´µÄÈÕ×ÓÀï£¬ÎÒÃÇÒª¼ÌĞøÅ¬Á¦£¬ÎªÊµÏÖ×Ô¼ºµÄÃÎÏë¶øÆ´²«£¬Îª×æ¹úµÄ·±ÈÙºÍÊÀ½çµÄºÍÆ½¹±Ï××Ô¼ºµÄÁ¦Á¿¡£\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î¡£\n\n<PAGE BREAK>\n\n¡¶´°ÍâµÄÆæÃîÊÀ½ç¡·\n\nÔÚº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§µÄ½ÌÊÒÀï£¬Ã¿µ±ÎÒÌ§Í·ÍûÏò´°Íâ£¬×Ü»á·¢ÏÖÒ»¸ö³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç¡£ÓÌÈçÒ»·ùÉ«²Ê°ßìµµÄ»­¾í£¬Õ¹ÏÖÔÚÎÒÑÛÇ°¡£\n\n´°Íâ£¬ÂÌÉ«É­ÁÖµ¹Ó°µÄÊ÷Ä¾ÔÚÑô¹âÏÂÒ¡Ò·Éú×Ë£¬·Â·ğÔÚÌø¶¯×Å»¶¿ìµÄÎèµ¸¡£ÓĞÊ±£¬¼¸Ö»Ğ¡ÄñÔÚÊ÷Ö¦¼ä»¶½Ğ£¬ÎªÕâ¾²Ú×µÄĞ£Ô°´øÀ´ÁËÉúÆø¡£¾ÍÔÚÊ÷Ä¾µÄÅÔ±ß£¬ÄÇ¼¸Ö»º©Ì¬¿ÉŞäµÄ¡°ÁÖÖĞÓã¡±µñËÜºÃÏñÔÚÏòÎÒÃÇÕ£ÑÛÊ¾Òâ£¬°µÊ¾×ÅËüÃÇÒ²ÔÚÓëÎÒÃÇÒ»ÆğÌ½Ë÷ÖªÊ¶µÄº£Ñó¡£\n\n½ÌÊÒ´°ÍâµÄ¡°Ô´Í·Ë®¡±×ÜÊÇÇå³º¼ûµ×£¬Ë®ÖĞµÄĞ¡Óã¶ùÓÎµÃ»¶¿ì¶ø×ÔÓÉ¡£Ã¿µ±¿Î¼ä£¬ÎÒºÍÍ¬Ñ§ÃÇ»áÀ´µ½´°Íâ£¬Ò»±ß¹ÛÉÍÕâĞ©¿ìÀÖµÄĞ¡ÉúÃü£¬Ò»±ßÕùÂÛ×ÅË­¼ÒµÄ½ğÓã×îÃÀ¡£ÎÒÃÇµÄ»¶ÉùĞ¦Óï£¬»ã³ÉÁËÃÀÃîµÄĞıÂÉ£¬Ïì³¹ÔÚÕâÆ¬ÃÀÀöµÄĞ£Ô°Àï¡£\n\nÔÙ¿´ÄÇ¶À¾ßÌØÉ«µÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ËüÏñÒ»Î»¸ºÔğÈÎµÄÀÏÊ¦£¬ÓÃÃûÑÔ¾¯¾ä¼¤ÀøÎÒÃÇÇÚ·ÜÏòÉÏ¡£¶ø½ô°¤×Å³¤ÀÈµÄÄÇÒ»Æ¬Îå²Ê°ßìµµÄĞ¡»¨Ì³£¬¸üÊÇÈÃÈËÑÛÇ°Ò»ÁÁ¡£ÓĞÊ±ºò£¬ºûµûÔÚ»¨¶ä¼äôæôæÆğÎè£¬¸øÎÒÃÇ´øÀ´ÁËÎŞ¾¡µÄ»¶Óä¡£\n\n½ÌÊÒ´°Íâ»¹ÓĞÄÇÒıÈËÈëÊ¤µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±¡£ÕâÀï£¬ÎÒÃÇºÍÍ¬Ñ§ÃÇÒ»ÆğÍæË££¬Ò»±ßÑ§Ï°£¬Ò»±ßæÒÏ·¡£ÄÇÊ±£¬»¶Ğ¦Éù¡¢ÕÆÉù¡¢ÔŞÃÀÉù´ËÆğ±Ë·ü£¬³äÂúÁË»îÁ¦¡£\n\n´°ÍâµÄ·ç¾°×ÜÊÇÄÇÃ´·á¸»¶à²Ê£¬ÈÃÎÒÃÇÔÚ¿ìÀÖÖĞ³É³¤¡£ËüÃÇ¼ûÖ¤ÁËÎÒÃÇ´ÓÖÉÄÛ×ßÏò³ÉÊìµÄ¹ı³Ì£¬Ò²¼ûÖ¤ÁËÎÒÃÇÓëÊ¦³¤¡¢Í¬°éÖ®¼äÉîºñµÄÓÑÒê¡£ÔÚÕâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°Àï£¬ÎÒÃÇÑ§»áÁËÕäÏ§Ã¿Ò»¸öÃÀºÃË²¼ä£¬¸Ğ¶÷ÕâÒ»ÇĞÅã°éÎÒÃÇ³É³¤µÄÈËºÍÊÂ¡£ÔÚÕâÀï£¬ÎÒÃÇÑ§»áÁËÓÂ¸ÒÃæ¶ÔÀ§ÄÑ£¬°ÑÎÕÃ¿Ò»¸ö»ú»áÈ¥×·ÇóÃÎÏë¡£\n\n´°ÍâµÄ·ç¾°·Â·ğÒ²ÔÚÇÄÇÄµØ±ä»¯¡£Ëæ×Å¼¾½ÚµÄ¸üÌæ£¬´ºÅ¯»¨¿ªÊ±£¬ÎÒÃÇÔÚ¡°ÓÎÀÖÔ°¡±¾¡ÇéÍæË££¬Óë»ï°éÃÇ³©Ì¸ÃÀºÃµÄÎ´À´£»ÏÄÈÕÑ×Ñ×£¬ÎÒÃÇÔÚ¡°µØÍ¼ÅÊÑÒ±Ú¡±»Óº¹ÈçÓê£¬¶ÍÁ¶ÉíÌå£¬Ä¥Á·ÒâÖ¾£»Çï·çÏôÉªÖ®¼Ê£¬ÎÒÃÇÔÚ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±ÀïÑ°ÕÒÖÇ»ÛµÄ»ğ»¨£¬¼³È¡ÖªÊ¶µÄÓªÑø£»º®¶¬À°ÔÂ£¬ÎÒÃÇÔÚÊÒÄÚ½øĞĞ¸÷ÖÖÓĞÈ¤µÄ»î¶¯£¬Ôö½øÓÑÒê£¬ÏíÊÜ¿ìÀÖÊ±¹â¡£\n\nÕâ¸ö³äÂúÉú»úÓë»îÁ¦µÄĞ£Ô°£¬ÎªÎÒÃÇÌá¹©ÁËÒ»¸öÕ¹³á°¿ÏèµÄÎèÌ¨¡£½ÌÊÒ´°ÍâµÄ·ç¾°£¬¾ÍÏñÒ»°ÑÄ§·¨°ô£¬ÎªÎÒÃÇ´øÀ´ÁËÓÂÆø¡¢ÖÇ»ÛºÍÁ¦Á¿¡£ÎÒÃÇÒªÕäÏ§ÔÚÕâÀï¶È¹ıµÄÃ¿Ò»Ìì£¬ÓÀÔ¶Ãú¼ÇÕâĞ©ÃÀºÃµÄË²¼ä¡£\n\nÔÚÎ´À´µÄËêÔÂÀï£¬ÎÒÃÇ½«¼ÌĞøÅ¬Á¦£¬ÎªÊµÏÖÃÎÏë¶ø·Ü¶·£¬Îª×æ¹úµÄ·±ÈÙºÍÊÀ½çµÄºÍÆ½¹±Ï×ÎÒÃÇµÄÁ¦Á¿¡£¶øÄÇĞ©½ÌÊÒ´°ÍâµÄÃÀÀö·ç¾°£¬½«ÓÀÔ¶Ãú¿ÌÔÚÎÒÃÇĞÄÖĞ£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î£¬¼¤ÀøÎÒÃÇ²»¶ÏÇ°½ø¡£\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-04 22:19:37,711 - INFO - Found 13 documents in data/file
2023-07-04 22:19:37,806 - INFO - Loading faiss with AVX2 support.
2023-07-04 22:19:37,806 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-04 22:19:37,807 - INFO - Loading faiss.
2023-07-04 22:19:37,887 - INFO - Successfully loaded faiss.
2023-07-04 22:19:40,734 - ERROR - Error loading db: Error in __cdecl faiss::FileIOReader::FileIOReader(const char *) at D:\a\faiss-wheels\faiss-wheels\faiss\faiss\impl\io.cpp:68: Error: 'f' failed: could not open dbf\gfile\gfile.faiss for reading: No such file or directory
2023-07-04 22:19:40,735 - INFO - Saved db to data/filegfile
2023-07-04 22:19:40,858 - INFO - None
2023-07-04 22:19:40,941 - INFO - None
2023-07-04 22:19:41,146 - INFO - utf-8
2023-07-04 22:21:42,424 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:21:42,427 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:21:42,428 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:22:16,764 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:22:16,766 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:22:16,767 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:22:18,233 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:22:18,235 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:22:18,236 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:22:18,239 - INFO - 0-Loading...Ëæ»úÊıĞÔÄÜ¶Ô±ÈÓĞÄÄ¼¸ÖÖ·½°¸
2023-07-04 22:22:18,240 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:22:18,241 - INFO - self.temperature£º0.5
2023-07-04 22:22:18,242 - INFO - self.max_context_tokens£º-1
2023-07-04 22:22:18,242 - INFO - self.file_chunk_size£º200
2023-07-04 22:22:18,243 - INFO - self.api_key£º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
2023-07-04 22:22:18,268 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:22:18,270 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-04 22:22:18,272 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:22:18,355 - INFO - Loading faiss with AVX2 support.
2023-07-04 22:22:18,356 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-04 22:22:18,356 - INFO - Loading faiss.
2023-07-04 22:22:18,431 - INFO - Successfully loaded faiss.
2023-07-04 22:22:19,923 - INFO - 2-Searching for similar documents...[Document(page_content='´°ÍâµÄ·ç¾°·Â·ğÒ²ÔÚÇÄÇÄµØ±ä»¯¡£Ëæ×Å¼¾½ÚµÄ¸üÌæ£¬´ºÅ¯»¨¿ªÊ±£¬ÎÒÃÇÔÚ¡°ÓÎÀÖÔ°¡±¾¡ÇéÍæË££¬Óë»ï°éÃÇ³©Ì¸ÃÀºÃµÄÎ´À´£»ÏÄÈÕÑ×Ñ×£¬ÎÒÃÇÔÚ¡°µØÍ¼ÅÊÑÒ±Ú¡±»Óº¹ÈçÓê£¬¶ÍÁ¶ÉíÌå£¬Ä¥Á·ÒâÖ¾£»Çï·çÏôÉªÖ®¼Ê£¬ÎÒÃÇÔÚ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±ÀïÑ°ÕÒÖÇ»ÛµÄ»ğ»¨£¬¼³È¡ÖªÊ¶µÄÓªÑø£»º®¶¬À°ÔÂ£¬ÎÒÃÇÔÚÊÒÄÚ½øĞĞ¸÷ÖÖÓĞÈ¤µÄ»î¶¯£¬Ôö½øÓÑÒê£¬ÏíÊÜ¿ìÀÖÊ±¹â¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='ÔÙ¿´ÄÇ¶À¾ßÌØÉ«µÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ËüÏñÒ»Î»¸ºÔğÈÎµÄÀÏÊ¦£¬ÓÃÃûÑÔ¾¯¾ä¼¤ÀøÎÒÃÇÇÚ·ÜÏòÉÏ¡£¶ø½ô°¤×Å³¤ÀÈµÄÄÇÒ»Æ¬Îå²Ê°ßìµµÄĞ¡»¨Ì³£¬¸üÊÇÈÃÈËÑÛÇ°Ò»ÁÁ¡£ÓĞÊ±ºò£¬ºûµûÔÚ»¨¶ä¼äôæôæÆğÎè£¬¸øÎÒÃÇ´øÀ´ÁËÎŞ¾¡µÄ»¶Óä¡£\n\n½ÌÊÒ´°Íâ»¹ÓĞÄÇÒıÈËÈëÊ¤µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±¡£ÕâÀï£¬ÎÒÃÇºÍÍ¬Ñ§ÃÇÒ»ÆğÍæË££¬Ò»±ßÑ§Ï°£¬Ò»±ßæÒÏ·¡£ÄÇÊ±£¬»¶Ğ¦Éù¡¢ÕÆÉù¡¢ÔŞÃÀÉù´ËÆğ±Ë·ü£¬³äÂúÁË»îÁ¦¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='³ı´ËÖ®Íâ£¬»¹ÓĞÄÇÒıÈË×¢Ä¿µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±£¬ËüÃÇÔÚÌáĞÑ×ÅÎÒÃÇ£¬Ñ§Ï°ÊÇÒ»±²×ÓµÄÊÂ£¬Ö»ÓĞ²»¶ÏµØÑ§Ï°£¬²ÅÄÜÈÃ×Ô¼º±äµÃ¸ü¼ÓÓÅĞã¡£\n\n½ÌÊÒ´°ÍâµÄ·ç¾°ÃÀÀö¶ø¸»ÓĞÒâÒå£¬ÕâĞ©¾°Îï¼ûÖ¤ÁËÎÒÃÇÒ»ÌìÌìµÄ³É³¤£¬Ò²¼ûÖ¤ÁËÎÒÃÇÔÚÕâÀï¶È¹ıµÄ¿ìÀÖÊ±¹â¡£ËüÃÇ¼¤Àø×ÅÎÒÃÇÅ¬Á¦Ñ§Ï°£¬×·Çó×¿Ô½£¬³ÉÎªÒ»¸ö¡°ÌÃÌÃÕıÕıµÄÖĞ¹úÈË£¬ĞØ»³×æ¹úµÄÊÀ½çÈË¡±¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-04 22:22:19,925 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-04 22:22:21,510 - INFO - 4-Answering question...
I don't know.
2023-07-04 22:22:21,513 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-04 22:22:35,825 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:22:35,827 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:22:35,828 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:22:37,653 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:22:37,655 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:22:37,656 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:22:37,660 - INFO - 0-Loading...½éÉÜÏÂÈıÖÖÊ¹ÓÃËæ»úÊı·½Ê½
2023-07-04 22:22:37,661 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:22:37,662 - INFO - self.temperature£º0.5
2023-07-04 22:22:37,663 - INFO - self.max_context_tokens£º-1
2023-07-04 22:22:37,663 - INFO - self.file_chunk_size£º200
2023-07-04 22:22:37,664 - INFO - self.api_key£º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
2023-07-04 22:22:37,665 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:22:37,666 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-04 22:22:37,667 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:22:39,330 - INFO - 2-Searching for similar documents...[Document(page_content='ÔÙ¿´ÄÇ¶À¾ßÌØÉ«µÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ËüÏñÒ»Î»¸ºÔğÈÎµÄÀÏÊ¦£¬ÓÃÃûÑÔ¾¯¾ä¼¤ÀøÎÒÃÇÇÚ·ÜÏòÉÏ¡£¶ø½ô°¤×Å³¤ÀÈµÄÄÇÒ»Æ¬Îå²Ê°ßìµµÄĞ¡»¨Ì³£¬¸üÊÇÈÃÈËÑÛÇ°Ò»ÁÁ¡£ÓĞÊ±ºò£¬ºûµûÔÚ»¨¶ä¼äôæôæÆğÎè£¬¸øÎÒÃÇ´øÀ´ÁËÎŞ¾¡µÄ»¶Óä¡£\n\n½ÌÊÒ´°Íâ»¹ÓĞÄÇÒıÈËÈëÊ¤µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±¡£ÕâÀï£¬ÎÒÃÇºÍÍ¬Ñ§ÃÇÒ»ÆğÍæË££¬Ò»±ßÑ§Ï°£¬Ò»±ßæÒÏ·¡£ÄÇÊ±£¬»¶Ğ¦Éù¡¢ÕÆÉù¡¢ÔŞÃÀÉù´ËÆğ±Ë·ü£¬³äÂúÁË»îÁ¦¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='´°ÍâµÄ·ç¾°·Â·ğÒ²ÔÚÇÄÇÄµØ±ä»¯¡£Ëæ×Å¼¾½ÚµÄ¸üÌæ£¬´ºÅ¯»¨¿ªÊ±£¬ÎÒÃÇÔÚ¡°ÓÎÀÖÔ°¡±¾¡ÇéÍæË££¬Óë»ï°éÃÇ³©Ì¸ÃÀºÃµÄÎ´À´£»ÏÄÈÕÑ×Ñ×£¬ÎÒÃÇÔÚ¡°µØÍ¼ÅÊÑÒ±Ú¡±»Óº¹ÈçÓê£¬¶ÍÁ¶ÉíÌå£¬Ä¥Á·ÒâÖ¾£»Çï·çÏôÉªÖ®¼Ê£¬ÎÒÃÇÔÚ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±ÀïÑ°ÕÒÖÇ»ÛµÄ»ğ»¨£¬¼³È¡ÖªÊ¶µÄÓªÑø£»º®¶¬À°ÔÂ£¬ÎÒÃÇÔÚÊÒÄÚ½øĞĞ¸÷ÖÖÓĞÈ¤µÄ»î¶¯£¬Ôö½øÓÑÒê£¬ÏíÊÜ¿ìÀÖÊ±¹â¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='´°Íâ£¬ÂÌÉ«É­ÁÖµ¹Ó°µÄÊ÷Ä¾ÔÚÑô¹âÏÂÒ¡Ò·Éú×Ë£¬·Â·ğÔÚÌø¶¯×Å»¶¿ìµÄÎèµ¸¡£ÓĞÊ±£¬¼¸Ö»Ğ¡ÄñÔÚÊ÷Ö¦¼ä»¶½Ğ£¬ÎªÕâ¾²Ú×µÄĞ£Ô°´øÀ´ÁËÉúÆø¡£¾ÍÔÚÊ÷Ä¾µÄÅÔ±ß£¬ÄÇ¼¸Ö»º©Ì¬¿ÉŞäµÄ¡°ÁÖÖĞÓã¡±µñËÜºÃÏñÔÚÏòÎÒÃÇÕ£ÑÛÊ¾Òâ£¬°µÊ¾×ÅËüÃÇÒ²ÔÚÓëÎÒÃÇÒ»ÆğÌ½Ë÷ÖªÊ¶µÄº£Ñó¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-04 22:22:39,332 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-04 22:22:40,332 - INFO - 4-Answering question...I don't know.
2023-07-04 22:22:40,334 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-04 22:22:51,033 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:22:51,034 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:22:51,035 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:22:52,587 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:22:52,589 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:22:52,590 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:22:52,593 - INFO - 0-Loading...½éÉÜÏÂJMH ²âÊÔ´úÂë
2023-07-04 22:22:52,594 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:22:52,595 - INFO - self.temperature£º0.5
2023-07-04 22:22:52,596 - INFO - self.max_context_tokens£º-1
2023-07-04 22:22:52,597 - INFO - self.file_chunk_size£º200
2023-07-04 22:22:52,597 - INFO - self.api_key£º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
2023-07-04 22:22:52,598 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:22:52,599 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-04 22:22:52,600 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:22:54,388 - INFO - 2-Searching for similar documents...[Document(page_content='´°Íâ£¬ÂÌÉ«É­ÁÖµ¹Ó°µÄÊ÷Ä¾ÔÚÑô¹âÏÂÒ¡Ò·Éú×Ë£¬·Â·ğÔÚÌø¶¯×Å»¶¿ìµÄÎèµ¸¡£ÓĞÊ±£¬¼¸Ö»Ğ¡ÄñÔÚÊ÷Ö¦¼ä»¶½Ğ£¬ÎªÕâ¾²Ú×µÄĞ£Ô°´øÀ´ÁËÉúÆø¡£¾ÍÔÚÊ÷Ä¾µÄÅÔ±ß£¬ÄÇ¼¸Ö»º©Ì¬¿ÉŞäµÄ¡°ÁÖÖĞÓã¡±µñËÜºÃÏñÔÚÏòÎÒÃÇÕ£ÑÛÊ¾Òâ£¬°µÊ¾×ÅËüÃÇÒ²ÔÚÓëÎÒÃÇÒ»ÆğÌ½Ë÷ÖªÊ¶µÄº£Ñó¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='´°ÍâµÄ·ç¾°·Â·ğÒ²ÔÚÇÄÇÄµØ±ä»¯¡£Ëæ×Å¼¾½ÚµÄ¸üÌæ£¬´ºÅ¯»¨¿ªÊ±£¬ÎÒÃÇÔÚ¡°ÓÎÀÖÔ°¡±¾¡ÇéÍæË££¬Óë»ï°éÃÇ³©Ì¸ÃÀºÃµÄÎ´À´£»ÏÄÈÕÑ×Ñ×£¬ÎÒÃÇÔÚ¡°µØÍ¼ÅÊÑÒ±Ú¡±»Óº¹ÈçÓê£¬¶ÍÁ¶ÉíÌå£¬Ä¥Á·ÒâÖ¾£»Çï·çÏôÉªÖ®¼Ê£¬ÎÒÃÇÔÚ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±ÀïÑ°ÕÒÖÇ»ÛµÄ»ğ»¨£¬¼³È¡ÖªÊ¶µÄÓªÑø£»º®¶¬À°ÔÂ£¬ÎÒÃÇÔÚÊÒÄÚ½øĞĞ¸÷ÖÖÓĞÈ¤µÄ»î¶¯£¬Ôö½øÓÑÒê£¬ÏíÊÜ¿ìÀÖÊ±¹â¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='ÔÙÍùÇ°¿´£¬´°ÍâÊÇÄÇÌõÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ë®ÖĞµÄĞ¡Óã¶ù»¶¿ìµØÓÎ¶¯×Å£¬ÈÃÈËÌÕ×íÆäÖĞ¡£Ã¿µ±¿Î¼äĞİÏ¢£¬ÎÒÃÇ»áºÍÍ¬Ñ§ÃÇÒ»Æğ×ßµ½´°Íâ£¬ĞÀÉÍÕâĞ©ÃÀÀöµÄ¾°Îï£¬Ì¸ÂÛ×ÅÑ§Ï°ºÍÉú»îµÄÈ¤ÊÂ¡£\n\n´°Íâ»¹ÓĞÄÇ¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ÕâÀï²¼ÂúÁËÃûÑÔ¾¯¾ä£¬Ê±¿ÌÌáĞÑ×ÅÎÒÃÇÒªÇÚ·ÜÑ§Ï°£¬³ÉÎªµÂÖÇÌåÃÀÈ«Ãæ·¢Õ¹µÄÈË¡£³¤ÀÈÅÔ±ß±ãÊÇÄÇÉ«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö£¬É¢·¢×Åµ­µ­µÄ·Ò·¼£¬ÈÃÈËĞÄ¿õÉñâù¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-04 22:22:54,390 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-04 22:22:55,216 - INFO - 4-Answering question...I don't know.
2023-07-04 22:22:55,218 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-04 22:23:16,092 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:23:16,093 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:23:16,095 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:23:17,794 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:23:17,796 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:23:17,797 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:23:17,801 - INFO - 0-Loading...½éÉÜÏÂ¼ÓÈ¨×Ê½ğÔËÓÃ
2023-07-04 22:23:17,802 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:23:17,803 - INFO - self.temperature£º0.5
2023-07-04 22:23:17,804 - INFO - self.max_context_tokens£º-1
2023-07-04 22:23:17,804 - INFO - self.file_chunk_size£º200
2023-07-04 22:23:17,805 - INFO - self.api_key£º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
2023-07-04 22:23:17,806 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:23:17,807 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-04 22:23:17,809 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:23:19,365 - INFO - 2-Searching for similar documents...[Document(page_content='´°ÍâµÄ·ç¾°·Â·ğÒ²ÔÚÇÄÇÄµØ±ä»¯¡£Ëæ×Å¼¾½ÚµÄ¸üÌæ£¬´ºÅ¯»¨¿ªÊ±£¬ÎÒÃÇÔÚ¡°ÓÎÀÖÔ°¡±¾¡ÇéÍæË££¬Óë»ï°éÃÇ³©Ì¸ÃÀºÃµÄÎ´À´£»ÏÄÈÕÑ×Ñ×£¬ÎÒÃÇÔÚ¡°µØÍ¼ÅÊÑÒ±Ú¡±»Óº¹ÈçÓê£¬¶ÍÁ¶ÉíÌå£¬Ä¥Á·ÒâÖ¾£»Çï·çÏôÉªÖ®¼Ê£¬ÎÒÃÇÔÚ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±ÀïÑ°ÕÒÖÇ»ÛµÄ»ğ»¨£¬¼³È¡ÖªÊ¶µÄÓªÑø£»º®¶¬À°ÔÂ£¬ÎÒÃÇÔÚÊÒÄÚ½øĞĞ¸÷ÖÖÓĞÈ¤µÄ»î¶¯£¬Ôö½øÓÑÒê£¬ÏíÊÜ¿ìÀÖÊ±¹â¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='³ı´ËÖ®Íâ£¬»¹ÓĞÄÇÒıÈË×¢Ä¿µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±£¬ËüÃÇÔÚÌáĞÑ×ÅÎÒÃÇ£¬Ñ§Ï°ÊÇÒ»±²×ÓµÄÊÂ£¬Ö»ÓĞ²»¶ÏµØÑ§Ï°£¬²ÅÄÜÈÃ×Ô¼º±äµÃ¸ü¼ÓÓÅĞã¡£\n\n½ÌÊÒ´°ÍâµÄ·ç¾°ÃÀÀö¶ø¸»ÓĞÒâÒå£¬ÕâĞ©¾°Îï¼ûÖ¤ÁËÎÒÃÇÒ»ÌìÌìµÄ³É³¤£¬Ò²¼ûÖ¤ÁËÎÒÃÇÔÚÕâÀï¶È¹ıµÄ¿ìÀÖÊ±¹â¡£ËüÃÇ¼¤Àø×ÅÎÒÃÇÅ¬Á¦Ñ§Ï°£¬×·Çó×¿Ô½£¬³ÉÎªÒ»¸ö¡°ÌÃÌÃÕıÕıµÄÖĞ¹úÈË£¬ĞØ»³×æ¹úµÄÊÀ½çÈË¡±¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='ÔÙ¿´ÄÇ¶À¾ßÌØÉ«µÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ËüÏñÒ»Î»¸ºÔğÈÎµÄÀÏÊ¦£¬ÓÃÃûÑÔ¾¯¾ä¼¤ÀøÎÒÃÇÇÚ·ÜÏòÉÏ¡£¶ø½ô°¤×Å³¤ÀÈµÄÄÇÒ»Æ¬Îå²Ê°ßìµµÄĞ¡»¨Ì³£¬¸üÊÇÈÃÈËÑÛÇ°Ò»ÁÁ¡£ÓĞÊ±ºò£¬ºûµûÔÚ»¨¶ä¼äôæôæÆğÎè£¬¸øÎÒÃÇ´øÀ´ÁËÎŞ¾¡µÄ»¶Óä¡£\n\n½ÌÊÒ´°Íâ»¹ÓĞÄÇÒıÈËÈëÊ¤µÄ¡°°®ÒòË¹Ì¹¹«Ê½Â·¡±ºÍ¡°Ó¢Óï×ÖÄ¸µÊ¡±¡£ÕâÀï£¬ÎÒÃÇºÍÍ¬Ñ§ÃÇÒ»ÆğÍæË££¬Ò»±ßÑ§Ï°£¬Ò»±ßæÒÏ·¡£ÄÇÊ±£¬»¶Ğ¦Éù¡¢ÕÆÉù¡¢ÔŞÃÀÉù´ËÆğ±Ë·ü£¬³äÂúÁË»îÁ¦¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-04 22:23:19,367 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-04 22:23:20,152 - INFO - 4-Answering question...I don't know.
2023-07-04 22:23:20,154 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-04 22:29:19,716 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:29:19,719 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:29:19,720 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:29:22,518 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:29:22,520 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:29:22,520 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:29:22,524 - INFO - Start Batch import
2023-07-04 22:29:22,525 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:29:22,526 - INFO - self.temperature£º0.5
2023-07-04 22:29:22,527 - INFO - self.max_context_tokens£º-1
2023-07-04 22:29:22,527 - INFO - self.file_chunk_size£º200
2023-07-04 22:29:22,528 - INFO - self.api_key£º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
2023-07-04 22:29:22,556 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:29:22,558 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:29:22,558 - INFO - filename£ºliudongxingpipei.docx
2023-07-04 22:29:23,637 - INFO - filename£º×÷ÎÄ.docx
2023-07-04 22:29:23,725 - INFO - filename£ºËæ»úÊıĞÔÄÜ¶Ô±È.html
2023-07-04 22:29:23,727 - INFO - Found 13 documents in data/file
2023-07-04 22:29:23,810 - INFO - Loading faiss with AVX2 support.
2023-07-04 22:29:23,811 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-04 22:29:23,811 - INFO - Loading faiss.
2023-07-04 22:29:23,890 - INFO - Successfully loaded faiss.
2023-07-04 22:34:59,809 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:34:59,811 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:34:59,812 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:35:04,506 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:35:04,509 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:35:04,510 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:35:04,514 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:35:04,515 - INFO - self.temperature£º0.5
2023-07-04 22:35:04,515 - INFO - self.max_context_tokens£º-1
2023-07-04 22:35:04,516 - INFO - self.file_chunk_size£º200
2023-07-04 22:35:04,516 - INFO - self.api_key£º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
2023-07-04 22:35:04,517 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:35:04,519 - INFO - 1-Reading document...
2023-07-04 22:35:04,520 - INFO - {'FileName': 'liudongxingpipei.docx', 'FileType': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'}
2023-07-04 22:35:04,521 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:35:04,631 - INFO - Found 4 documents in data/file\liudongxingpipei.docx
2023-07-04 22:35:07,011 - ERROR - Error loading db: Error in __cdecl faiss::FileIOReader::FileIOReader(const char *) at D:\a\faiss-wheels\faiss-wheels\faiss\faiss\impl\io.cpp:68: Error: 'f' failed: could not open dbf\gfile\gfile.faiss for reading: No such file or directory
2023-07-04 22:35:07,012 - INFO - Saved db to liudongxingpipei.docxgfile
2023-07-04 22:35:07,139 - INFO - None
2023-07-04 22:35:17,971 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:35:17,973 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:35:17,973 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:35:19,479 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-04 22:35:19,481 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-04 22:35:19,482 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:35:19,487 - INFO - 0-Loading...½éÉÜÏÂÁ÷¶¯ĞÔÆ¥ÅäÂÊ
2023-07-04 22:35:19,488 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-04 22:35:19,489 - INFO - self.temperature£º0.5
2023-07-04 22:35:19,490 - INFO - self.max_context_tokens£º-1
2023-07-04 22:35:19,490 - INFO - self.file_chunk_size£º200
2023-07-04 22:35:19,491 - INFO - self.api_key£º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
2023-07-04 22:35:19,492 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-04 22:35:19,493 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-04 22:35:19,494 - INFO - folder_path£ºdbf/gfile
2023-07-04 22:35:21,517 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-04 22:35:36,135 - INFO - 4-Answering question... Á÷¶¯ĞÔÆ¥ÅäÂÊÊÇºâÁ¿ÉÌÒµÒøĞĞÖ÷Òª×Ê²úÓë¸ºÕ®µÄÆÚÏŞÅäÖÃ½á¹¹µÄÖ¸±ê£¬Ö¼ÔÚÒıµ¼ÉÌÒµÒøĞĞºÏÀíÅäÖÃ³¤ÆÚÎÈ¶¨¸ºÕ®¡¢¸ßÁ÷¶¯ĞÔ»ò¶ÌÆÚ×Ê²ú£¬±ÜÃâ¹ı¶ÈÒÀÀµ¶ÌÆÚ×Ê½ğÖ§³Ö³¤ÆÚÒµÎñ·¢Õ¹£¬Ìá¸ßÁ÷¶¯ĞÔ·çÏÕµÖÓùÄÜÁ¦¡£Á÷¶¯ĞÔÆ¥ÅäÂÊµÄ¼ÆËã·½Ê½ÊÇ¼ÓÈ¨×Ê½ğÀ´Ô´³ıÒÔ¼ÓÈ¨×Ê½ğÔËÓÃµÄ°Ù·Ö±È¡£¼ÓÈ¨×Ê½ğÀ´Ô´°üÀ¨À´×ÔÖĞÑëÒøĞĞµÄ×Ê½ğ¡¢¸÷Ïî´æ¿î¡¢Í¬Òµ´æ¿î¡¢Í¬Òµ²ğÈë¼°Âô³ö»Ø¹º¡¢·¢ĞĞÕ®È¯¼°·¢ĞĞÍ¬Òµ´æµ¥µÈ£»¼ÓÈ¨×Ê½ğÔËÓÃ°üÀ¨¸÷Ïî´û¿î¡¢´æ·ÅÍ¬Òµ¼°Í¶×ÊÍ¬Òµ´æµ¥¡¢²ğ·ÅÍ¬Òµ¼°ÂòÈë·µÊÛ¡¢ÆäËûÍ¶×ÊºÍÓÉÒøĞĞÒµ¼à¶½¹ÜÀí»ú¹¹ÊÓÇéĞÎÈ·¶¨µÄÏîÄ¿µÈ¡£
2023-07-04 22:35:36,138 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-05 07:12:35,512 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:12:35,549 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:12:35,550 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:12:40,121 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:12:40,123 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:12:40,124 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:12:40,126 - INFO - Start Batch import
2023-07-05 07:12:40,127 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:12:40,128 - INFO - self.temperature£º0.5
2023-07-05 07:12:40,129 - INFO - self.max_context_tokens£º-1
2023-07-05 07:12:40,129 - INFO - self.file_chunk_size£º200
2023-07-05 07:12:40,130 - INFO - self.api_key£º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
2023-07-05 07:12:40,201 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-05 07:12:40,203 - INFO - folder_path£ºdbf/gfile
2023-07-05 07:12:40,203 - INFO - filename£ºliudongxingpipei.docx
2023-07-05 07:12:41,537 - INFO - filename£º×÷ÎÄ.docx
2023-07-05 07:15:05,407 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:15:05,408 - INFO - self.temperature£º0
2023-07-05 07:15:05,409 - INFO - self.max_context_tokens£º-1
2023-07-05 07:15:05,409 - INFO - self.file_chunk_size£º200
2023-07-05 07:15:05,410 - INFO - self.api_key£º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
2023-07-05 07:15:05,441 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-05 07:15:05,477 - INFO - folder_path£ºdbf/clw
2023-07-05 07:15:05,478 - INFO - filename£ºliudongxingpipei.docx
2023-07-05 07:15:06,507 - INFO - filename£º×÷ÎÄ.docx
2023-07-05 07:15:06,714 - INFO - Loading faiss with AVX2 support.
2023-07-05 07:15:06,715 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-05 07:15:06,716 - INFO - Loading faiss.
2023-07-05 07:15:06,895 - INFO - Successfully loaded faiss.
2023-07-05 07:16:11,761 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:16:11,762 - INFO - self.temperature£º0
2023-07-05 07:16:11,763 - INFO - self.max_context_tokens£º-1
2023-07-05 07:16:11,763 - INFO - self.file_chunk_size£º200
2023-07-05 07:16:11,764 - INFO - self.api_key£º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
2023-07-05 07:16:11,793 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-05 07:16:11,794 - INFO - folder_path£ºdbf/clw
2023-07-05 07:16:11,795 - INFO - filename£ºliudongxingpipei.docx
2023-07-05 07:16:12,805 - INFO - filename£º×÷ÎÄ.docx
2023-07-05 07:16:12,971 - INFO - Loading faiss with AVX2 support.
2023-07-05 07:16:12,972 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-05 07:16:12,973 - INFO - Loading faiss.
2023-07-05 07:16:13,080 - INFO - Successfully loaded faiss.
2023-07-05 07:16:16,326 - ERROR - Error loading db: Error in __cdecl faiss::FileIOReader::FileIOReader(const char *) at D:\a\faiss-wheels\faiss-wheels\faiss\faiss\impl\io.cpp:68: Error: 'f' failed: could not open dbf\clw\clw.faiss for reading: No such file or directory
2023-07-05 07:16:16,327 - INFO - Saved db to data/fileclw
2023-07-05 07:16:16,327 - INFO - folder_path£ºdbf/clw
2023-07-05 07:17:28,941 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:17:28,943 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:17:28,944 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:17:37,831 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:17:37,833 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:17:37,834 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:17:37,837 - INFO - Start Batch import
2023-07-05 07:17:37,838 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:17:37,840 - INFO - self.temperature£º0.5
2023-07-05 07:17:37,840 - INFO - self.max_context_tokens£º-1
2023-07-05 07:17:37,841 - INFO - self.file_chunk_size£º200
2023-07-05 07:17:37,841 - INFO - self.api_key£º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
2023-07-05 07:17:37,874 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-05 07:17:37,877 - INFO - folder_path£ºdbf/gfile
2023-07-05 07:17:37,877 - INFO - filename£ºliudongxingpipei.docx
2023-07-05 07:17:38,973 - INFO - filename£º×÷ÎÄ.docx
2023-07-05 07:17:39,139 - INFO - Loading faiss with AVX2 support.
2023-07-05 07:17:39,140 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-05 07:17:39,141 - INFO - Loading faiss.
2023-07-05 07:17:39,266 - INFO - Successfully loaded faiss.
2023-07-05 07:17:42,443 - ERROR - Error loading db: Error in __cdecl faiss::FileIOReader::FileIOReader(const char *) at D:\a\faiss-wheels\faiss-wheels\faiss\faiss\impl\io.cpp:68: Error: 'f' failed: could not open dbf\gfile\gfile.faiss for reading: No such file or directory
2023-07-05 07:17:42,444 - INFO - Saved db to data/filegfile
2023-07-05 07:17:42,569 - INFO - None
2023-07-05 07:17:42,662 - INFO - None
2023-07-05 07:18:18,400 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:18:18,402 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:18:18,403 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:18:20,232 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:18:20,234 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:18:20,235 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:18:20,238 - INFO - 0-Loading...Á÷¶¯ĞÔ¸²¸ÇÂÊµÄ¹«Ê½
2023-07-05 07:18:20,283 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:18:20,285 - INFO - self.temperature£º0.5
2023-07-05 07:18:20,285 - INFO - self.max_context_tokens£º-1
2023-07-05 07:18:20,286 - INFO - self.file_chunk_size£º200
2023-07-05 07:18:20,286 - INFO - self.api_key£º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
2023-07-05 07:18:20,287 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-05 07:18:20,288 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-05 07:18:20,289 - INFO - folder_path£ºdbf/gfile
2023-07-05 07:18:21,844 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-05 07:18:23,999 - INFO - 4-Answering question... Á÷¶¯ĞÔÆ¥ÅäÂÊ=¼ÓÈ¨×Ê½ğÀ´Ô´/¼ÓÈ¨×Ê½ğÔËÓÃ¡Á100%
2023-07-05 07:18:24,001 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-05 07:42:31,954 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:42:31,956 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:42:31,957 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:42:44,602 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:42:44,604 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:42:44,605 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:45:45,162 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:45:45,165 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:45:45,166 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:47:40,059 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:47:40,062 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:47:40,062 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:47:50,916 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:47:50,918 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:47:50,919 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:48:51,126 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:48:51,128 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:48:51,129 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:48:57,162 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:48:57,164 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:48:57,166 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-05 07:49:02,227 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-05 07:49:02,228 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-05 07:49:02,229 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-07 22:33:02,285 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-07 22:33:02,294 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-07 22:33:02,295 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 10:21:46,053 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 10:21:46,057 - INFO - self.temperature£º0
2023-07-08 10:21:46,057 - INFO - self.max_context_tokens£º-1
2023-07-08 10:21:46,058 - INFO - self.file_chunk_size£º200
2023-07-08 10:21:46,058 - INFO - self.api_key£º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
2023-07-08 10:21:46,105 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 10:21:46,108 - INFO - folder_path£ºdbf/clw
2023-07-08 10:21:46,239 - INFO - Loading faiss with AVX2 support.
2023-07-08 10:21:46,240 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 10:21:46,241 - INFO - Loading faiss.
2023-07-08 10:21:46,328 - INFO - Successfully loaded faiss.
2023-07-08 10:22:18,480 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 10:22:18,482 - INFO - self.temperature£º0
2023-07-08 10:22:18,483 - INFO - self.max_context_tokens£º-1
2023-07-08 10:22:18,484 - INFO - self.file_chunk_size£º200
2023-07-08 10:22:18,484 - INFO - self.api_key£º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
2023-07-08 10:22:18,516 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 10:22:18,517 - INFO - folder_path£ºdbf/gfile
2023-07-08 10:22:18,608 - INFO - Loading faiss with AVX2 support.
2023-07-08 10:22:18,609 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 10:22:18,611 - INFO - Loading faiss.
2023-07-08 10:22:18,630 - INFO - Successfully loaded faiss.
2023-07-08 10:22:21,151 - INFO - error_code=invalid_api_key error_message='Incorrect API key provided: sk-k8SIQ***************************************C4va. You can find your API key at https://platform.openai.com/account/api-keys.' error_param=None error_type=invalid_request_error message='OpenAI API error received' stream_error=False
2023-07-08 10:42:30,673 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 10:42:30,673 - INFO - self.temperature£º0
2023-07-08 10:42:30,674 - INFO - self.max_context_tokens£º-1
2023-07-08 10:42:30,674 - INFO - self.file_chunk_size£º200
2023-07-08 10:42:30,675 - INFO - self.api_key£º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
2023-07-08 10:42:30,703 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 10:42:30,704 - INFO - folder_path£ºdbf/gfile
2023-07-08 10:42:30,798 - INFO - Loading faiss with AVX2 support.
2023-07-08 10:42:30,798 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 10:42:30,799 - INFO - Loading faiss.
2023-07-08 10:42:30,816 - INFO - Successfully loaded faiss.
2023-07-08 10:47:49,471 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 10:47:49,472 - INFO - self.temperature£º0
2023-07-08 10:47:49,473 - INFO - self.max_context_tokens£º-1
2023-07-08 10:47:49,473 - INFO - self.file_chunk_size£º200
2023-07-08 10:47:49,474 - INFO - self.api_key£º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
2023-07-08 10:47:49,503 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 10:47:49,504 - INFO - folder_path£ºdbf/gfile
2023-07-08 10:47:49,595 - INFO - Loading faiss with AVX2 support.
2023-07-08 10:47:49,596 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 10:47:49,596 - INFO - Loading faiss.
2023-07-08 10:47:49,614 - INFO - Successfully loaded faiss.
2023-07-08 10:49:43,893 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 10:49:43,895 - INFO - self.temperature£º0
2023-07-08 10:49:43,895 - INFO - self.max_context_tokens£º-1
2023-07-08 10:49:43,896 - INFO - self.file_chunk_size£º200
2023-07-08 10:49:43,896 - INFO - self.api_key£º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
2023-07-08 10:49:43,924 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 10:49:43,925 - INFO - folder_path£ºdbf/gfile
2023-07-08 10:49:44,016 - INFO - Loading faiss with AVX2 support.
2023-07-08 10:49:44,017 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 10:49:44,017 - INFO - Loading faiss.
2023-07-08 10:49:44,034 - INFO - Successfully loaded faiss.
2023-07-08 10:51:46,568 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 10:51:46,569 - INFO - self.temperature£º0
2023-07-08 10:51:46,570 - INFO - self.max_context_tokens£º-1
2023-07-08 10:51:46,570 - INFO - self.file_chunk_size£º200
2023-07-08 10:51:46,571 - INFO - self.api_key£º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
2023-07-08 10:51:46,603 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 10:51:46,604 - INFO - folder_path£ºdbf/gfile
2023-07-08 10:51:46,696 - INFO - Loading faiss with AVX2 support.
2023-07-08 10:51:46,697 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 10:51:46,698 - INFO - Loading faiss.
2023-07-08 10:51:46,715 - INFO - Successfully loaded faiss.
2023-07-08 10:59:13,097 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 10:59:13,098 - INFO - self.temperature£º0
2023-07-08 10:59:13,099 - INFO - self.max_context_tokens£º-1
2023-07-08 10:59:13,099 - INFO - self.file_chunk_size£º200
2023-07-08 10:59:13,100 - INFO - self.api_key£º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
2023-07-08 10:59:13,131 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 10:59:13,132 - INFO - folder_path£ºdbf/gfile
2023-07-08 10:59:13,223 - INFO - Loading faiss with AVX2 support.
2023-07-08 10:59:13,224 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 10:59:13,224 - INFO - Loading faiss.
2023-07-08 10:59:13,241 - INFO - Successfully loaded faiss.
2023-07-08 11:04:37,883 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:04:37,885 - INFO - self.temperature£º0
2023-07-08 11:04:37,885 - INFO - self.max_context_tokens£º-1
2023-07-08 11:04:37,886 - INFO - self.file_chunk_size£º200
2023-07-08 11:04:37,886 - INFO - self.api_key£º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
2023-07-08 11:04:37,917 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 11:04:37,918 - INFO - folder_path£ºdbf/gfile
2023-07-08 11:04:38,008 - INFO - Loading faiss with AVX2 support.
2023-07-08 11:04:38,009 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 11:04:38,010 - INFO - Loading faiss.
2023-07-08 11:04:38,026 - INFO - Successfully loaded faiss.
2023-07-08 11:42:26,121 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:42:26,124 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:42:26,125 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:43:04,124 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:43:04,126 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:43:04,127 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:43:04,132 - INFO - Start Batch import
2023-07-08 11:43:04,133 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:43:04,135 - INFO - self.temperature£º0.5
2023-07-08 11:43:04,136 - INFO - self.max_context_tokens£º-1
2023-07-08 11:43:04,136 - INFO - self.file_chunk_size£º200
2023-07-08 11:43:04,137 - INFO - self.api_key£º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
2023-07-08 11:43:04,167 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 11:44:54,529 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:44:54,529 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:44:54,532 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:44:54,532 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:44:54,534 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:44:54,534 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:44:58,217 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:44:58,217 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:44:58,219 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:44:58,219 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:44:58,220 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:44:58,220 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:44:58,226 - INFO - Start Batch import
2023-07-08 11:44:58,226 - INFO - Start Batch import
2023-07-08 11:44:58,227 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:44:58,227 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:44:58,229 - INFO - self.temperature£º0.5
2023-07-08 11:44:58,229 - INFO - self.temperature£º0.5
2023-07-08 11:44:58,230 - INFO - self.max_context_tokens£º-1
2023-07-08 11:44:58,230 - INFO - self.max_context_tokens£º-1
2023-07-08 11:44:58,231 - INFO - self.file_chunk_size£º200
2023-07-08 11:44:58,231 - INFO - self.file_chunk_size£º200
2023-07-08 11:44:58,231 - INFO - self.api_key£º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
2023-07-08 11:44:58,231 - INFO - self.api_key£º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
2023-07-08 11:44:58,232 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 11:44:58,232 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 11:44:58,234 - INFO - folder_path£ºdbf/pfile
2023-07-08 11:44:58,234 - INFO - folder_path£ºdbf/pfile
2023-07-08 11:44:58,235 - INFO - filename£ºfile.rar
2023-07-08 11:44:58,235 - INFO - filename£ºfile.rar
2023-07-08 11:44:58,236 - INFO - filename£ºwiki.csv
2023-07-08 11:44:58,236 - INFO - filename£ºwiki.csv
2023-07-08 11:44:58,326 - INFO - Loading faiss with AVX2 support.
2023-07-08 11:44:58,326 - INFO - Loading faiss with AVX2 support.
2023-07-08 11:44:58,327 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 11:44:58,327 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 11:44:58,328 - INFO - Loading faiss.
2023-07-08 11:44:58,328 - INFO - Loading faiss.
2023-07-08 11:44:58,414 - INFO - Successfully loaded faiss.
2023-07-08 11:44:58,414 - INFO - Successfully loaded faiss.
2023-07-08 11:46:05,648 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:46:05,648 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:46:05,651 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:46:05,651 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:46:05,652 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:46:05,652 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:46:05,658 - INFO - Start Batch import
2023-07-08 11:46:05,658 - INFO - Start Batch import
2023-07-08 11:46:05,660 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:46:05,660 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:46:05,662 - INFO - self.temperature£º0.5
2023-07-08 11:46:05,662 - INFO - self.temperature£º0.5
2023-07-08 11:46:05,663 - INFO - self.max_context_tokens£º-1
2023-07-08 11:46:05,663 - INFO - self.max_context_tokens£º-1
2023-07-08 11:46:05,664 - INFO - self.file_chunk_size£º200
2023-07-08 11:46:05,664 - INFO - self.file_chunk_size£º200
2023-07-08 11:46:05,665 - INFO - self.api_key£º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
2023-07-08 11:46:05,665 - INFO - self.api_key£º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
2023-07-08 11:46:05,666 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 11:46:05,666 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 11:46:05,667 - INFO - folder_path£ºdbf/pfile
2023-07-08 11:46:05,667 - INFO - folder_path£ºdbf/pfile
2023-07-08 11:46:05,668 - INFO - filename£ºfile.rar
2023-07-08 11:46:05,668 - INFO - filename£ºfile.rar
2023-07-08 11:46:05,669 - INFO - filename£ºwiki.csv
2023-07-08 11:46:05,669 - INFO - filename£ºwiki.csv
2023-07-08 11:47:13,491 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:47:13,493 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:47:13,494 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:47:16,523 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:47:16,525 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:47:16,526 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:47:16,531 - INFO - Start Batch import
2023-07-08 11:47:16,533 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:47:16,535 - INFO - self.temperature£º0.5
2023-07-08 11:47:16,536 - INFO - self.max_context_tokens£º-1
2023-07-08 11:47:16,537 - INFO - self.file_chunk_size£º200
2023-07-08 11:47:16,537 - INFO - self.api_key£º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
2023-07-08 11:47:16,574 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 11:47:16,575 - INFO - folder_path£ºdbf/pfile
2023-07-08 11:47:16,576 - INFO - filename£ºfile.rar
2023-07-08 11:47:16,577 - INFO - filename£ºwiki.csv
2023-07-08 11:47:16,668 - INFO - Loading faiss with AVX2 support.
2023-07-08 11:47:16,669 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 11:47:16,669 - INFO - Loading faiss.
2023-07-08 11:47:16,744 - INFO - Successfully loaded faiss.
2023-07-08 11:52:25,611 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:52:25,613 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:52:25,614 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:52:59,218 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:52:59,219 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:52:59,220 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:53:02,318 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:53:02,320 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:53:02,321 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:53:02,356 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:53:02,357 - INFO - self.temperature£º0.5
2023-07-08 11:53:02,358 - INFO - self.max_context_tokens£º-1
2023-07-08 11:53:02,358 - INFO - self.file_chunk_size£º200
2023-07-08 11:53:02,359 - INFO - self.api_key£º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
2023-07-08 11:53:02,387 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 11:53:02,389 - INFO - 1-Reading document...
2023-07-08 11:53:02,390 - INFO - {'FileName': 'wiki.csv'}
2023-07-08 11:53:02,390 - INFO - folder_path£ºdbf/pfile
2023-07-08 11:53:02,401 - INFO - [Document(page_content='id: 382\nversion: 9\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Pythonµ÷ÓÃCÀ©Õ¹&&Javaµ÷ÓÃso\nslug: special/python-call-c-extension-and-java-jna-call-so/\ncontent: == `Python`µ÷ÓÃ`C`À©Õ¹\n\n=== ¹¹½¨`c`¿â\n\n´´½¨¹Ç¼Ü\n\n```lang=shell\npip install pyd-tpl\npyd-tpl cextdemo\n```\n\n±à¼­ `.c` ÎÄ¼ş\n\n```lang=c,lines=12\n#include <Python.h>\n\nPyObject *add(PyObject *self, PyObject *args)\n{\n    int ok;\n    int i, j;\n    ok = PyArg_ParseTuple(args, "ii", &i, &j);\n    if (ok) {\n        return PyLong_FromLong(i + j);\n    } else {\n        return PyLong_FromLong(0);\n    }\n}\n\nstatic PyMethodDef cextdemoModuleMethods[] = {\n\t{"add",add,METH_VARARGS,"add function"},\n\t{NULL, NULL, 0, NULL}\n};\n\nstatic PyModuleDef cextdemoModule = {\n\tPyModuleDef_HEAD_INIT,\n\t"cextdemo",\n\t"cextdemo Module",\n\t0,\n\tcextdemoModuleMethods\n};\n\nPyMODINIT_FUNC PyInit_cextdemo() {\n\treturn PyModule_Create(&cextdemoModule);\n}\n```\n\nÉú³É¿â\n\n```lang=shell\npython setup_cextdemo.py\n```\n\nÖ´ĞĞºó½«Éú³É `cextdemo.cpython-39-x86_64-linux-gnu.so`\n\n=== µ÷ÓÃ`c`¿â\n\n¼òµ¥²âÊÔ\n\n```lang=python\nfrom cextdemo import add as demoadd\n\nprint("python call C/C++ function:", demoadd, demoadd(1, 2))\n```\n\nĞÔÄÜ²âÊÔ\n\n```lang=python\nimport datetime\nfrom cextdemo import add as demoadd\n\nstart_time = datetime.datetime.now()\n\nfor i in range(100000000):\n    demoadd(1, 2)\n\nend_time = datetime.datetime.now()\nprint(end_time - start_time)\n```\n\n=== ²âÊÔ½á¹û\n\n```lang=txt\n00:00:08.789391\n```\n\nÒ²¾ÍÊÇ `10000000+` `TPS`\n\n== `Java`Í¨¹ı`jna`µ÷ÓÃ`so`\n\n=== Í¨¹ı`jna`µ÷ÓÃ`so`\n\n==== ¹¹½¨`c`¿â\n\ndemoadd.h\n\n```lang=c\n#ifndef DEMO_ADD_H\n\n#define DEMO_ADD_H\n\n#include <stdio.h>\n\nint add(int i, int j);\n\n#endif\n```\n\ndemoadd.c\n\n```lang=c\n#include "demoadd.h"\n\nint add(int i, int j)\n{\n    return i + j;\n}\n```\n\n±àÒë\n\n```lang=sh\ngcc -I . -L . -shared -o libdemoadd.so demoadd.c demoadd.h\n```\n\n½«Éú³É `libdemoadd.so`\n\n==== µ÷ÓÃ`c`¿â\n\nÒÀÀµ¿â\n\n```lang=xml\n<dependency>\n    <groupId>net.java.dev.jna</groupId>\n    <artifactId>jna</artifactId>\n    <version>5.10.0</version>\n</dependency>\n```\n\n´úÂëÖ÷Ìå\n\n```lang=java,lines=12\npublic class JnaLittleFuncInvoker {\n\n    static {\n        System.setProperty("jna.library.path", "/home/helly/code/java/IdeaProjects/DemoCode@Gradle/native_lib");\n    }\n\n    private static final NativeLibrary LIB = NativeLibrary.getInstance("demoadd");\n    private static final Function FUNC_ADD = LIB.getFunction("add");\n\n    public static int add(int i, int j) {\n        return ((Integer) FUNC_ADD.invoke(Integer.class, new Object[]{i, j})).intValue();\n    }\n}\n```\n\n==== ²âÊÔ´úÂë\n\n```lang=java\npublic class LittleFuncInvokerTest {\n\n    @Test\n    public void add() {\n        Assert.assertEquals(5, LittleFuncInvoker.add(2, 3));\n    }\n\n}\n```\n\n=== Í¨¹ı`jnr-ffi`µ÷ÓÃ`so`\n\n==== ¹¹½¨`c`¿â\nÍ¬ÉÏ\n\n==== µ÷ÓÃ`c`¿â\n\nÒÀÀµ¿â\n\n```lang=xml\n<dependency>\n    <groupId>com.github.jnr</groupId>\n    <artifactId>jnr-ffi</artifactId>\n    <version>2.2.11</version>\n</dependency>\n```\n\n´úÂëÖ÷Ìå\n\n```lang=java,lines=12\npublic class JnrLittleFuncInvoker {\n\n    static {\n        System.setProperty("java.library.path", "/home/helly/code/java/IdeaProjects/DemoCode@Gradle/native_lib");\n    }\n    private static final LibDemoAdd LIB = LibraryLoader.create(LibDemoAdd.class).load("demoadd");\n\n\n    public static int add(int i, int j) {\n        return LIB.add(i, j);\n    }\n}\n```\n\n==== ²âÊÔ´úÂë\n\n```lang=java\npublic class JnrLittleFuncInvokerTest {\n\n    @Test\n    public void add() {\n        Assert.assertEquals(5, JnrLittleFuncInvoker.add(2, 3));\n    }\n\n}\n```\n\n=== Í¨¹ı`jni`µ÷ÓÃ`so`\n\n==== ±àĞ´º¬ `native` Àà\n\n´úÂëÖ÷Ìå\n\n```lang=java,lines=12\npublic class JniLittleFuncInvoker {\n\n    //-Djava.library.path=/home/helly/code/java/IdeaProjects/DemoCode@Gradle/native_lib\n    static {\n        System.loadLibrary("jnidemoadd");\n    }\n\n    private static final JniLittleFuncInvoker INVOKER = new JniLittleFuncInvoker();\n\n    public static native int add(int i, int j);\n}\n```\n\n==== Ê¹ÓÃ `javah` Éú³ÉÍ·ÎÄ¼ş\n\n```lang=sh\njavah -cp classes nativelib.demo.JniLittleFuncInvoker\n```\n\n==== ±àĞ´ `c` ´úÂë\n\n```lang=c\n#include "nativelib_demo_JniLittleFuncInvoker.h"\n\nJNIEXPORT jint JNICALL Java_nativelib_demo_JniLittleFuncInvoker_add\n  (JNIEnv *env, jobject thisObject, jint i, jint j)\n{\n    return i + j;\n}\n```\n\n==== Éú³É¿â\n\n```lang=sh\ngcc -I $JAVA_HOME/include -I $JAVA_HOME/include/linux -I . -L . -shared -o libjnidemoadd.so nativelib_demo_JniLittleFuncInvoker.c nativelib_demo_JniLittleFuncInvoker.h\n```\n\n==== ²âÊÔ´úÂë\n\n```lang=java\npublic class JnrLittleFuncInvokerTest {\n\n    @Test\n    public void add() {\n        Assert.assertEquals(5, JnrLittleFuncInvoker.add(2, 3));\n    }\n\n}\n```\n\n=== ĞÔÄÜ»ù×¼\n\n==== ´úÂë\n\n```lang=java,lines=12\n@Fork(value = 3, jvmArgs = {"-Djava.library.path=/home/helly/code/java/IdeaProjects/DemoCode@Gradle/native_lib"})\n@Threads(value = 8)\n@Warmup(iterations = 3, time = 1)\n@Measurement(iterations = 5, time = 1)\n@OutputTimeUnit(TimeUnit.MICROSECONDS)\npublic class LittleFuncInvokerBenchmark {\n\n    @Benchmark\n    public void testJna(Blackhole blackhole) {\n        blackhole.consume(JnaLittleFuncInvoker.add(2, 3));\n    }\n\n    @Benchmark\n    public void testJnr(Blackhole blackhole) {\n        blackhole.consume(JnrLittleFuncInvoker.add(2, 3));\n    }\n\n    @Benchmark\n    public void testJni(Blackhole blackhole) {\n        blackhole.consume(JniLittleFuncInvoker.add(2, 3));\n    }\n\n    @Benchmark\n    public void testJava(Blackhole blackhole) {\n        blackhole.consume(2 + 3);\n    }\n\n}\n```\n\n==== ²âÊÔ½á¹û\n\n```lang=txt\nBenchmark                             Mode  Cnt     Score     Error   Units\nLittleFuncInvokerBenchmark.testJava  thrpt   15  1276.411 ¡À 314.245  ops/us\nLittleFuncInvokerBenchmark.testJna   thrpt   15     4.807 ¡À   0.301  ops/us\nLittleFuncInvokerBenchmark.testJni   thrpt   15   324.734 ¡À  11.982  ops/us\nLittleFuncInvokerBenchmark.testJnr   thrpt   15   157.963 ¡À  14.459  ops/us\n```\n\n== ×Ü½á\n\n`python`->`c` ±È `java`->`c`(`jna`) ĞÔÄÜ´ó¸Å¸ß1±¶¡£\n`java`->`c`(`ffi`) ±È `python`->`c` ĞÔÄÜ´ó¸Å¸ß20±¶¡£\n`jni`>`jnr`>`jna`\nÄ¿Ç°ÊÇ×î¼òµ¥µÄ»ù±¾ÀàĞÍ´«µİ£¬Éæ¼°¸ü¸´ÔÓµÄÀàĞÍ£¬ĞÔÄÜ½«½øÒ»²½ÏÂ½µ¡£¿çÓïÑÔµÄµ÷ÓÃ£¬ĞÔÄÜËğÊ§»¹ÊÇÓĞµã´ó¡£\ndateCreated: 1642413680\ndateModified: 1642413680\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-vhy5hhawskqmbl4k3ehb\ndocumentPHID: PHID-WIKI-gnlscezpkxdrpzsxy73a', metadata={'source': 'data/file\\wiki.csv', 'row': 0}), Document(page_content='id: 735\nversion: 6\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÈçºÎÔÚnginxÏÂÅäÖÃÖ¤Êé\nslug: special/nginx-cert/\ncontent: ÔÚnginx.confÖĞÌí¼ÓÅäÖÃ\n\n```lang=txt\n        ssl_certificate "/etc/nginx/cert.crt";\n        ssl_certificate_key "/etc/nginx/cert.key";\n        ssl_session_cache shared:SSL:1m;\n        ssl_session_timeout  10m;\n        ssl_ciphers HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers on;\n        ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;\n```\n\nÍêÕû°æ±¾ {F632504}\n\n```lang=txt,lines=16\n# For more information on configuration, see:\n#   * Official English Documentation: http://nginx.org/en/docs/\n#   * Official Russian Documentation: http://nginx.org/ru/docs/\n\nuser nginx;\nworker_processes auto;\nerror_log /var/log/nginx/error.log;\npid /run/nginx.pid;\n\n# Load dynamic modules. See /usr/share/nginx/README.dynamic.\ninclude /usr/share/nginx/modules/*.conf;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                      \'$status $body_bytes_sent "$http_referer" \'\n                      \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile            on;\n    tcp_nopush          on;\n    tcp_nodelay         on;\n    keepalive_timeout   65;\n    types_hash_max_size 2048;\n\n    include             /etc/nginx/mime.types;\n    default_type        application/octet-stream;\n\n    # Load modular configuration files from the /etc/nginx/conf.d directory.\n    # See http://nginx.org/en/docs/ngx_core_module.html#include\n    # for more information.\n    include /etc/nginx/conf.d/*.conf;\n\n# Settings for a TLS enabled server.\n\n    server {\n        listen       443 ssl http2 default_server;\n        listen       [::]:443 ssl http2 default_server;\n        server_name  demo.com;\n        server_tokens off;\n        root         /usr/share/nginx/html;\n\n        ssl_certificate "/etc/nginx/cert.crt";\n        ssl_certificate_key "/etc/nginx/cert.key";\n        ssl_session_cache shared:SSL:1m;\n        ssl_session_timeout  10m;\n        ssl_ciphers HIGH:!aNULL:!MD5;\n        ssl_prefer_server_ciphers on;\n        ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;\n\n        add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;\n\n        include /etc/nginx/agent_deny.conf;\n        include /etc/nginx/not_self_deny.conf;\n\n        # Load configuration files for the default server block.\n        include /etc/nginx/default.d/*.conf;\n\n        location / {\n            limit_except GET POST {\n                deny all;\n            }\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n    }\n\n}\n```\n\n(IMPORTANT)ÒÔÏÂÅäÖÃÒÑ¹ıÊ±\n\n```lang=txt\nserver {   \n    listen          80;   \n    listen          443 default ssl;   \n\n    ssl_certificate      cert.pem;   \n    ssl_certificate_key  cert.key;   \n    ssl_session_timeout  5m;   \n    ssl_protocols  SSLv2 SSLv3 TLSv1;   \n    ssl_ciphers  HIGH:!aNULL:!MD5;   \n    ssl_prefer_server_ciphers   on;\n```\n\n(IMPORTANT)ÔÚnginxÖĞ£¬±ØĞëÊ¹ÓÃÎŞÃÜÂëµÄÃÜÔ¿ÎÄ¼ş£¬·ñÔò `Linux` ÏÂÆô¶¯ `nginx` »á±¨´í`[alert] 6584#7060: the event "ngx_master_6584" was not signaled for 5s`£¬`Windows` ÏÂ»áÒªÇóÊäÈëÃÜÔ¿ÎÄ¼şÃÜÂë²ÅÄÜÆô¶¯\n\n**½â¾ö·½·¨**\n\n\n```lang=shell\n# ½«Ö¤ÊéÃÜÔ¿ÎÄ¼şÌæ»»ÎªÎŞÃÜÂëÃÜÔ¿ÎÄ¼ş\nopenssl rsa -in cert.key -out cert.key.unsecure\n\n# ½«Ö¤Êéº¬ÃÜÂëÃÜÔ¿¸ÄÃû\nmv cert.key cert.key.withpwd\n\n# ½«²»º¬ÃÜÂëÎÄ¼şÃüÃûÎªcert.key\nmv cert.key.unsecure cert.key\n```\ndateCreated: 1669625811\ndateModified: 1669625811\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-bssx2oyntjtkqufrbqvy\ndocumentPHID: PHID-WIKI-qgr3bx5hyhp7p6xkf6qu', metadata={'source': 'data/file\\wiki.csv', 'row': 1}), Document(page_content="id: 662\nversion: 4\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÈçºÎÍ¨¹ıopensslÉú³É×ÔÇ©Ö¤Êé\nslug: special/openssl-cert/\ncontent: = »ù´¡×¼±¸\n```lang=shell\nmkdir ca\ncd ca\nmkdir newcerts private\n```\n\n**ĞèÒªµÄÅäÖÃÎÄ¼ş**£º`openssl.cnf`/`openssl2.cnf`¸½¼ş\n{F517530}\n{F517531}\nÎÄÄ©Ò²ÒÑÌá¹©\n\n\n= ´´½¨ÆÕÍ¨×ÔÇ©Ö¤Êé\n```lang=shell\nopenssl req -new -x509 -keyout cert.key -out cert.pem -days 3650 -config ./openssl.cnf\n```\n\n= ´´½¨×ÔÇ©¸ùÖ¤Êé\n```lang=shell\n#×ÔÇ©¸ùÖ¤Êé\necho '01' > serial\ntouch index.txt\nopenssl req -new -x509 -extensions v3_ca -keyout private/cakey.pem -out cacert.pem -days 3650 -config ./openssl.cnf\n```\n\n= ´´½¨¶ş¼¶Ö¤Êé\n```lang=shell\n#¶ş¼¶CAÖ¤Êé£¬·½·¨1\necho '01' > serial2\ntouch index2.txt\nopenssl req -new -extensions v3_ca -out ca2req.pem -keyout private/ca2key.pem -config ./openssl.cnf\nopenssl ca -extensions v3_ca -out ca2cert.pem -config ./openssl.cnf -infiles ca2req.pem\n\n\n#¶ş¼¶CAÖ¤Êé£¬·½·¨2\nopenssl genrsa 2048 > private/ca2key.pem\nopenssl req -new -key private/ca2key.pem -out ca2cert.csr -config ./openssl.cnf\nopenssl ca -extensions v3_ca -in ca2cert.csr -out ca2cert.pem -config ./openssl.cnf\n```\n\n= Ç©·¢Èı¼¶Ö¤Êé\n```lang=shell\n#¶ş¼¶CAÇ©·¢Èı¼¶Ö¤Êé£¬·½·¨1\nopenssl req -new -out req.pem -config ./openssl.cnf\nopenssl ca -cert ca2cert.pem -keyfile private/ca2key.pem -in req.pem -out cert.pem -config ./openssl.cnf\n\n\n#¶ş¼¶CAÇ©·¢Èı¼¶Ö¤Êé£¬·½·¨2\nopenssl req -new -out req.pem -config ./openssl.cnf\nopenssl x509 -req -in req.pem -CA ca2cert.pem -CAkey private/ca2key.pem -CAserial serial2 -out cert.pem\n\n\n#¶ş¼¶CAÇ©·¢Èı¼¶Ö¤Êé£¬·½·¨3\nopenssl genrsa 2048 > key.pem\nopenssl req -new -key key.pem -out cert.csr -config ./openssl2.cnf\nopenssl ca -in cert.csr -out cert.pem -config ./openssl2.cnf\n\n\n#¶ş¼¶CAÇ©·¢Èı¼¶Ö¤Êé£¬·½·¨4\nopenssl genrsa 2048 > key2.pem\nopenssl req -new -key key2.pem -out cert.csr -config ./openssl.cnf\nopenssl ca -cert ca2cert.pem -keyfile private/ca2key.pem -in cert.csr -out cert.pem -config ./openssl.cnf\n```\n\n= openssl.cnf\n```lang=txt,lines=12\ndir = .\n\n[ req ]\ndefault_bits = 2048 # Size of keys\ndefault_keyfile = key.pem # name of generated keys\ndefault_md = sha256 # message digest algorithm\nstring_mask = nombstr # permitted characters\ndistinguished_name = req_distinguished_name\nreq_extensions = v3_req\n\n[ req_distinguished_name ]\n# Variable name   Prompt string\n#----------------------   ----------------------------------\n0.organizationName = Organization Name (company)\norganizationalUnitName = Organizational Unit Name (department, division)\nemailAddress = Email Address\nemailAddress_max = 40\nlocalityName = Locality Name (city, district)\nstateOrProvinceName = State or Province Name (full name)\ncountryName = Country Name (2 letter code)\ncountryName_min = 2\ncountryName_max = 2\ncommonName = Common Name (hostname, IP, or your name)\ncommonName_max = 64\n\n# Default values for the above , for consistency and less typing. \n# Variable name   Value\n#------------------------------   ------------------------------\n0.organizationName_default = Erayt Company\nlocalityName_default = Hangzhou\nstateOrProvinceName_default = Zhejiang\ncountryName_default = CN\n\n[ v3_ca ]\nbasicConstraints = CA:TRUE\nsubjectKeyIdentifier = hash\nauthorityKeyIdentifier = keyid:always, issuer:always\n\n[ v3_req ]\nbasicConstraints = CA:FALSE\nsubjectKeyIdentifier = hash\n\n[ ca ]\ndefault_ca = CA_default\n\n[ CA_default ]\nserial = $dir/serial\ndatabase = $dir/index.txt\nnew_certs_dir = $dir/newcerts\ncertificate = $dir/cacert.pem\nprivate_key = $dir/private/cakey.pem\ndefault_days = 3650\ndefault_md = sha256\npreserve = no\nemail_in_dn = no\nnameopt = default_ca\ncertopt = default_ca\npolicy = policy_match\n\n[ policy_match ]\ncountryName = match\nstateOrProvinceName = match\norganizationName = match\norganizationalUnitName = optional\ncommonName = supplied\nemailAddress = optional\n```\n\n= openssl2.cnf\n```lang=txt,lines=12\ndir = .\n\n[ req ]\ndefault_bits = 2048 # Size of keys\ndefault_keyfile = key.pem # name of generated keys\ndefault_md = sha256 # message digest algorithm\nstring_mask = nombstr # permitted characters\ndistinguished_name = req_distinguished_name\nreq_extensions = v3_req\n\n[ req_distinguished_name ]\n# Variable name   Prompt string\n#----------------------   ----------------------------------\n0.organizationName = Organization Name (company)\norganizationalUnitName = Organizational Unit Name (department, division)\nemailAddress = Email Address\nemailAddress_max = 40\nlocalityName = Locality Name (city, district)\nstateOrProvinceName = State or Province Name (full name)\ncountryName = Country Name (2 letter code)\ncountryName_min = 2\ncountryName_max = 2\ncommonName = Common Name (hostname, IP, or your name)\ncommonName_max = 64\n\n# Default values for the above , for consistency and less typing. \n# Variable name   Value\n#------------------------------   ------------------------------\n0.organizationName_default = Erayt Company\nlocalityName_default = Hangzhou\nstateOrProvinceName_default = Zhejiang\ncountryName_default = CN\n\n[ v3_ca ]\nbasicConstraints = CA:TRUE\nsubjectKeyIdentifier = hash\nauthorityKeyIdentifier = keyid:always, issuer:always\n\n[ v3_req ]\nbasicConstraints = CA:FALSE\nsubjectKeyIdentifier = hash\n\n[ ca ]\ndefault_ca = CA_default\n\n[ CA_default ]\nserial = $dir/serial2\ndatabase = $dir/index2.txt\nnew_certs_dir = $dir/newcerts\ncertificate = $dir/ca2cert.pem\nprivate_key = $dir/private/ca2key.pem\ndefault_days = 3650\ndefault_md = sha256\npreserve = no\nemail_in_dn = no\nnameopt = default_ca\ncertopt = default_ca\npolicy = policy_match\n\n[ policy_match ]\ncountryName = match\nstateOrProvinceName = match\norganizationName = match\norganizationalUnitName = optional\ncommonName = supplied\nemailAddress = optional\n```\n\n= ËµÃ÷\n·şÎñ¶ËÖ»ĞèÒªcert.pem(Èı¼¶Ö¤Êé)\n¿Í»§¶ËĞèµ¼Èëcacert.pem(CA¸ùÖ¤Êé)/ca2cert.pem(¶ş¼¶CAÖ¤Êé)\ndateCreated: 1656058880\ndateModified: 1656058880\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-uwql4puicbyp6ncczlkz\ndocumentPHID: PHID-WIKI-efhu4nm7moturdbro33q", metadata={'source': 'data/file\\wiki.csv', 'row': 2}), Document(page_content='id: 367\nversion: 4\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Pythonµ÷ÓÃCÀ©Õ¹&&JavaÍ¨¹ıjnaµ÷ÓÃso&&JavaÍ¨¹ıjnr-ffiµ÷ÓÃso\nslug: special/python-call-c-extension-and-java-jna-call-so/\ncontent: == Pythonµ÷ÓÃCÀ©Õ¹\n\n[[ http://192.168.10.74:8082/inner-open-sources/py_c_ext_demo | py_c_ext_demo ]]\n\n=== ¹¹½¨c¿â\n\n´´½¨¹Ç¼Ü\n\n```lang=shell\npip install pyd-tpl\npyd-tpl cextdemo\n```\n\n±à¼­ .c ÎÄ¼ş\n\n```lang=c,lines=12\n#include <Python.h>\n\nPyObject* test(PyObject* self, PyObject* args) {\n\treturn Py_BuildValue("");\n}\n\nPyObject *add(PyObject *self, PyObject *args)\n{\n    int ok;\n    int i, j;\n    ok = PyArg_ParseTuple(args, "ii", &i, &j);\n    if (ok) {\n        return PyLong_FromLong(i + j);\n    } else {\n        return PyLong_FromLong(0);\n    }\n}\n\nstatic PyMethodDef cextdemoModuleMethods[] = {\n\t{"test",test,METH_VARARGS,"test function"},\n\t{"add",add,METH_VARARGS,"add function"},\n\t{NULL, NULL, 0, NULL}\n};\n\nstatic PyModuleDef cextdemoModule = {\n\tPyModuleDef_HEAD_INIT,\n\t"cextdemo",\n\t"cextdemo Module",\n\t0,\n\tcextdemoModuleMethods\n};\n\nPyMODINIT_FUNC PyInit_cextdemo() {\n\treturn PyModule_Create(&cextdemoModule);\n}\n```\n\nÉú³É¿â\n\n```lang=shell\npython setup_cextdemo.py\n```\n\nÖ´ĞĞºó½«Éú³É `cextdemo.cpython-39-x86_64-linux-gnu.so`\n\n=== µ÷ÓÃc¿â\n\n¼òµ¥²âÊÔ\n\n```lang=python\nfrom cextdemo import add as demoadd\n\nprint("python call C/C++ function:", demoadd, demoadd(1, 2))\n```\n\nĞÔÄÜ²âÊÔ\n\n```lang=python\nimport datetime\nfrom cextdemo import add as demoadd\n\nstart_time = datetime.datetime.now()\n\nfor i in range(100000000):\n    demoadd(1, 2)\n\nend_time = datetime.datetime.now()\nprint(end_time - start_time)\n```\n\n=== ²âÊÔ½á¹û\n\n```lang=txt\n00:00:08.789391\n```\n\nÒ²¾ÍÊÇ `10000000+` `TPS`\n\n== JavaÍ¨¹ıjnaµ÷ÓÃso\n\n=== ¹¹½¨c¿â\n\njnademo.h\n\n```lang=c\n#ifndef JNADEMO_H\n\n#define JANDEMO_H\n\n#include <stdio.h>\n\nint add(int i, int j);\n\n#endif\n```\n\njnademo.c\n\n```lang=c\n#include "jnademo.h"\n\nint add(int i, int j)\n{\n    return i + j;\n}\n```\n\n±àÒë\n\n```lang=sh\n#!/bin/sh\n\ngcc -I . -L . -shared -o libjnademo.so jnademo.c jnademo.h\n```\n\n½«Éú³É `libjnademo.so`\n\n=== µ÷ÓÃc¿â\n\nÒÀÀµ¿â\n\n```lang=xml\n<dependency>\n    <groupId>net.java.dev.jna</groupId>\n    <artifactId>jna</artifactId>\n    <version>5.10.0</version>\n</dependency>\n```\n\n´úÂëÖ÷Ìå\n\n```lang=java,lines=12\npublic class LittleFuncInvoker {\n\n    static {\n        System.setProperty("jna.library.path", "/home/helly/code/java/IdeaProjects/DemoCode@Gradle/jnademo");\n    }\n\n    private static final NativeLibrary LIB = NativeLibrary.getInstance("jnademo");\n    private static final Function FUNC_ADD = LIB.getFunction("add");\n\n    private static final ThreadLocal<Object[]> PARAM_LOCAL = new ObjectArrayThreadLocal();\n\n    public static int add(int i, int j) {\n        Object[] args = PARAM_LOCAL.get();\n        args[0] = i;\n        args[1] = j;\n        return ((Integer) FUNC_ADD.invoke(Integer.class, args)).intValue();\n    }\n\n    public static int add1(int i, int j) {\n        return ((Integer) FUNC_ADD.invoke(Integer.class, new Object[]{i, j})).intValue();\n    }\n\n    private static class ObjectArrayThreadLocal extends ThreadLocal<Object[]> {\n        @Override\n        protected Object[] initialValue() {\n            return new Object[2];\n        }\n    }\n}\n```\n\n²âÊÔ´úÂë\n\n```lang=java\npublic class LittleFuncInvokerTest {\n\n    @Test\n    public void add() {\n        Assert.assertEquals(5, LittleFuncInvoker.add(2, 3));\n    }\n\n}\n```\n\nĞÔÄÜ»ù×¼´úÂë\n\n```lang=java\n@Fork(value = 3)\n@Threads(value = 8)\n@Warmup(iterations = 3, time = 1)\n@Measurement(iterations = 5, time = 1)\npublic class LittleFuncInvokerBenchmark {\n\n    @Benchmark\n    public void testJna(Blackhole blackhole) {\n        blackhole.consume(LittleFuncInvoker.add(2, 3));\n    }\n\n    @Benchmark\n    public void testJna1(Blackhole blackhole) {\n        blackhole.consume(LittleFuncInvoker.add1(2, 3));\n    }\n\n    @Benchmark\n    public void testJava(Blackhole blackhole) {\n        blackhole.consume(2 + 3);\n    }\n\n}\n```\n\n=== ²âÊÔ½á¹û\n\n```lang=txt\nBenchmark                             Mode  Cnt           Score           Error  Units\nLittleFuncInvokerBenchmark.testJava  thrpt   15  1055776915.490 ¡À 102753282.139  ops/s\nLittleFuncInvokerBenchmark.testJna   thrpt   15     5075237.343 ¡À     81011.821  ops/s\nLittleFuncInvokerBenchmark.testJna1  thrpt   15     5137793.540 ¡À     65053.444  ops/s\n```\n\n== JavaÍ¨¹ıjnr-ffiµ÷ÓÃso\n\n=== ¹¹½¨c¿â\nÍ¬ÉÏ\n\n=== µ÷ÓÃc¿â\n\nÒÀÀµ¿â\n\n```lang=xml\n<dependency>\n    <groupId>com.github.jnr</groupId>\n    <artifactId>jnr-ffi</artifactId>\n    <version>2.2.11</version>\n</dependency>\n```\n\n´úÂëÖ÷Ìå\n\n```lang=java,lines=12\npublic class LittleFuncInvoker2 {\n\n    static {\n        System.setProperty("java.library.path", "/home/helly/code/java/IdeaProjects/DemoCode@Gradle/jnademo");\n    }\n    private static final LibJnaDemo LIB = LibraryLoader.create(LibJnaDemo.class).load("jnademo");\n\n\n    public static int add(int i, int j) {\n        return LIB.add(i, j);\n    }\n}\n```\n\n²âÊÔ´úÂë\n\n```lang=java\npublic class LittleFuncInvoker2Test {\n\n    @Test\n    public void add() {\n        Assert.assertEquals(5, LittleFuncInvoker2.add(2, 3));\n    }\n\n}\n```\n\nĞÔÄÜ»ù×¼´úÂë\n\n```lang=java\n@Fork(value = 3)\n@Threads(value = 8)\n@Warmup(iterations = 3, time = 1)\n@Measurement(iterations = 5, time = 1)\npublic class LittleFuncInvokerBenchmark {\n\n    @Benchmark\n    public void testFfi(Blackhole blackhole) {\n        blackhole.consume(LittleFuncInvoker2.add(2, 3));\n    }\n\n}\n```\n\n=== ²âÊÔ½á¹û\n\n```lang=txt\nBenchmark                             Mode  Cnt  Score    Error   Units\nLittleFuncInvokerBenchmark.testFfi   thrpt   15  0.195 ¡À  0.041  ops/ns\nLittleFuncInvokerBenchmark.testJava  thrpt   15  1.152 ¡À  0.024  ops/ns\nLittleFuncInvokerBenchmark.testJna   thrpt   15  0.005 ¡À  0.001  ops/ns\nLittleFuncInvokerBenchmark.testJna1  thrpt   15  0.005 ¡À  0.001  ops/ns\n```\n\n\n== ×Ü½á\n\n`python`->`c` ±È `java`->`c`(`jna`) ĞÔÄÜ´ó¸Å¸ß1±¶¡£\n`java`->`c`(`ffi`) ±È `python`->`c` ĞÔÄÜ´ó¸Å¸ß20±¶¡£\nÄ¿Ç°ÊÇ×î¼òµ¥µÄ»ù±¾ÀàĞÍ´«µİ£¬Éæ¼°¸ü¸´ÔÓµÄÀàĞÍ£¬ĞÔÄÜ½«½øÒ»²½ÏÂ½µ¡£¿çÓïÑÔµÄµ÷ÓÃ£¬ĞÔÄÜËğÊ§»¹ÊÇÓĞµã´ó¡£\ndateCreated: 1642166289\ndateModified: 1642166289\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-dxu7rm2hfuflocxqfe3k\ndocumentPHID: PHID-WIKI-gnlscezpkxdrpzsxy73a', metadata={'source': 'data/file\\wiki.csv', 'row': 3}), Document(page_content='id: 366\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Pythonµ÷ÓÃCÀ©Õ¹&&JavaÍ¨¹ıjnaµ÷ÓÃso\nslug: special/python-call-c-extension-and-java-jna-call-so/\ncontent: == Pythonµ÷ÓÃCÀ©Õ¹\n\n[[ http://192.168.10.74:8082/inner-open-sources/py_c_ext_demo | py_c_ext_demo ]]\n\n=== ¹¹½¨c¿â\n\n´´½¨¹Ç¼Ü\n\n```lang=shell\npip install pyd-tpl\npyd-tpl cextdemo\n```\n\n±à¼­ .c ÎÄ¼ş\n\n```lang=c,lines=12\n#include <Python.h>\n\nPyObject* test(PyObject* self, PyObject* args) {\n\treturn Py_BuildValue("");\n}\n\nPyObject *add(PyObject *self, PyObject *args)\n{\n    int ok;\n    int i, j;\n    ok = PyArg_ParseTuple(args, "ii", &i, &j);\n    if (ok) {\n        return PyLong_FromLong(i + j);\n    } else {\n        return PyLong_FromLong(0);\n    }\n}\n\nstatic PyMethodDef cextdemoModuleMethods[] = {\n\t{"test",test,METH_VARARGS,"test function"},\n\t{"add",add,METH_VARARGS,"add function"},\n\t{NULL, NULL, 0, NULL}\n};\n\nstatic PyModuleDef cextdemoModule = {\n\tPyModuleDef_HEAD_INIT,\n\t"cextdemo",\n\t"cextdemo Module",\n\t0,\n\tcextdemoModuleMethods\n};\n\nPyMODINIT_FUNC PyInit_cextdemo() {\n\treturn PyModule_Create(&cextdemoModule);\n}\n```\n\nÉú³É¿â\n\n```lang=shell\npython setup_cextdemo.py\n```\n\nÖ´ĞĞºó½«Éú³É `cextdemo.cpython-39-x86_64-linux-gnu.so`\n\n=== µ÷ÓÃc¿â\n\n¼òµ¥²âÊÔ\n\n```lang=python\nfrom cextdemo import add as demoadd\n\nprint("python call C/C++ function:", demoadd, demoadd(1, 2))\n```\n\nĞÔÄÜ²âÊÔ\n\n```lang=python\nimport datetime\nfrom cextdemo import add as demoadd\n\nstart_time = datetime.datetime.now()\n\nfor i in range(100000000):\n    demoadd(1, 2)\n\nend_time = datetime.datetime.now()\nprint(end_time - start_time)\n```\n\n=== ²âÊÔ½á¹û\n\n```lang=txt\n00:00:08.789391\n```\n\nÒ²¾ÍÊÇ `10000000+` `TPS`\n\n== JavaÍ¨¹ıjnaµ÷ÓÃso\n\n=== ¹¹½¨c¿â\n\njnademo.h\n\n```lang=c\n#ifndef JNADEMO_H\n\n#define JANDEMO_H\n\n#include <stdio.h>\n\nint add(int i, int j);\n\n#endif\n```\n\njnademo.c\n\n```lang=c\n#include "jnademo.h"\n\nint add(int i, int j)\n{\n    return i + j;\n}\n```\n\n±àÒë\n\n```lang=sh\n#!/bin/sh\n\ngcc -I . -L . -shared -o libjnademo.so jnademo.c jnademo.h\n```\n\n½«Éú³É `libjnademo.so`\n\n=== µ÷ÓÃc¿â\n\nÒÀÀµ¿â\n\n```lang=xml\n<dependency>\n    <groupId>net.java.dev.jna</groupId>\n    <artifactId>jna</artifactId>\n    <version>5.10.0</version>\n</dependency>\n```\n\n´úÂëÖ÷Ìå\n\n```lang=java,lines=12\npublic class LittleFuncInvoker {\n\n    static {\n        System.setProperty("jna.library.path", "/home/helly/code/java/IdeaProjects/DemoCode@Gradle/jnademo");\n    }\n\n    private static final NativeLibrary LIB = NativeLibrary.getInstance("jnademo");\n    private static final Function FUNC_ADD = LIB.getFunction("add");\n\n    private static final ThreadLocal<Object[]> PARAM_LOCAL = new ObjectArrayThreadLocal();\n\n    public static int add(int i, int j) {\n        Object[] args = PARAM_LOCAL.get();\n        args[0] = i;\n        args[1] = j;\n        return ((Integer) FUNC_ADD.invoke(Integer.class, args)).intValue();\n    }\n\n    public static int add1(int i, int j) {\n        return ((Integer) FUNC_ADD.invoke(Integer.class, new Object[]{i, j})).intValue();\n    }\n\n    private static class ObjectArrayThreadLocal extends ThreadLocal<Object[]> {\n        @Override\n        protected Object[] initialValue() {\n            return new Object[2];\n        }\n    }\n}\n```\n\n²âÊÔ´úÂë\n\n```lang=java\npublic class LittleFuncInvokerTest {\n\n    @Test\n    public void add() {\n        Assert.assertEquals(5, LittleFuncInvoker.add(2, 3));\n    }\n\n}\n```\n\nĞÔÄÜ»ù×¼´úÂë\n\n```lang=java\n@Fork(value = 3)\n@Threads(value = 8)\n@Warmup(iterations = 3, time = 1)\n@Measurement(iterations = 5, time = 1)\npublic class LittleFuncInvokerBenchmark {\n\n    @Benchmark\n    public void testJna(Blackhole blackhole) {\n        blackhole.consume(LittleFuncInvoker.add(2, 3));\n    }\n\n    @Benchmark\n    public void testJna1(Blackhole blackhole) {\n        blackhole.consume(LittleFuncInvoker.add1(2, 3));\n    }\n\n    @Benchmark\n    public void testJava(Blackhole blackhole) {\n        blackhole.consume(2 + 3);\n    }\n\n}\n```\n\n=== ²âÊÔ½á¹û\n\n```lang=txt\nBenchmark                             Mode  Cnt           Score           Error  Units\nLittleFuncInvokerBenchmark.testJava  thrpt   15  1055776915.490 ¡À 102753282.139  ops/s\nLittleFuncInvokerBenchmark.testJna   thrpt   15     5075237.343 ¡À     81011.821  ops/s\nLittleFuncInvokerBenchmark.testJna1  thrpt   15     5137793.540 ¡À     65053.444  ops/s\n```\n\n== JavaÍ¨¹ıjnaµ÷ÓÃso v2\n\n=== ¹¹½¨c¿â\nÍ¬ÉÏ\n\n=== µ÷ÓÃc¿â\n\nÒÀÀµ¿â\n\n```lang=xml\n<dependency>\n    <groupId>com.github.jnr</groupId>\n    <artifactId>jnr-ffi</artifactId>\n    <version>2.2.11</version>\n</dependency>\n```\n\n´úÂëÖ÷Ìå\n\n```lang=java,lines=12\npublic class LittleFuncInvoker2 {\n\n    static {\n        System.setProperty("java.library.path", "/home/helly/code/java/IdeaProjects/DemoCode@Gradle/jnademo");\n    }\n    private static final LibJnaDemo LIB = LibraryLoader.create(LibJnaDemo.class).load("jnademo");\n\n\n    public static int add(int i, int j) {\n        return LIB.add(i, j);\n    }\n}\n```\n\n²âÊÔ´úÂë\n\n```lang=java\npublic class LittleFuncInvoker2Test {\n\n    @Test\n    public void add() {\n        Assert.assertEquals(5, LittleFuncInvoker2.add(2, 3));\n    }\n\n}\n```\n\nĞÔÄÜ»ù×¼´úÂë\n\n```lang=java\n@Fork(value = 3)\n@Threads(value = 8)\n@Warmup(iterations = 3, time = 1)\n@Measurement(iterations = 5, time = 1)\npublic class LittleFuncInvokerBenchmark {\n\n    @Benchmark\n    public void testFfi(Blackhole blackhole) {\n        blackhole.consume(LittleFuncInvoker2.add(2, 3));\n    }\n\n}\n```\n\n=== ²âÊÔ½á¹û\n\n```lang=txt\nBenchmark                             Mode  Cnt  Score    Error   Units\nLittleFuncInvokerBenchmark.testFfi   thrpt   15  0.195 ¡À  0.041  ops/ns\nLittleFuncInvokerBenchmark.testJava  thrpt   15  1.152 ¡À  0.024  ops/ns\nLittleFuncInvokerBenchmark.testJna   thrpt   15  0.005 ¡À  0.001  ops/ns\nLittleFuncInvokerBenchmark.testJna1  thrpt   15  0.005 ¡À  0.001  ops/ns\n```\n\n\n== ×Ü½á\n\n`python`->`c` ±È `java`->`c`(`jna`) ĞÔÄÜ´ó¸Å¸ß1±¶¡£\n`java`->`c`(`ffi`) ±È `python`->`c` ĞÔÄÜ´ó¸Å¸ß20±¶¡£\nÄ¿Ç°ÊÇ×î¼òµ¥µÄ»ù±¾ÀàĞÍ´«µİ£¬Éæ¼°¸ü¸´ÔÓµÄÀàĞÍ£¬ĞÔÄÜ½«½øÒ»²½ÏÂ½µ¡£¿çÓïÑÔµÄµ÷ÓÃ£¬ĞÔÄÜËğÊ§»¹ÊÇÓĞµã´ó¡£\ndateCreated: 1642165828\ndateModified: 1642165828\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-auuqgmjrrove7y6tx3x4\ndocumentPHID: PHID-WIKI-gnlscezpkxdrpzsxy73a', metadata={'source': 'data/file\\wiki.csv', 'row': 4}), Document(page_content='id: 649\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: NginxµäĞÍÅäÖÃ\nslug: special/nginx-config/\ncontent: ## ËµÃ÷\n\n¸ÃÅäÖÃÓÃÓÚÖ±½Ó±©Â¶µ½»¥ÁªÍøµÄnginx»·¾³\nÏà¹ØÅäÖÃ´ò°üÎÄ¼ş£º{F489061}\n\n**°üº¬**\n\n1. ¾²Ì¬ÎÄ¼şÅäÖÃ\n2. ·´Ïò´úÀíÅäÖÃ\n3. gzipÑ¹ËõÅäÖÃ\n4. Ö¤ÊéÅäÖÃ\n5. 80×Ô¶¯×ª443ÅäÖÃ\n6. ·´ÅÀ³æÅäÖÃ\n\n## nginx.conf\n\n```lang=txt,lines=16\n\nuser  nginx;\n# ¹¤×÷½ø³ÌÊı\nworker_processes  1;\n\n# ÈÕÖ¾Â·¾¶\nerror_log  /var/log/nginx/error.log warn;\n# pidÎÄ¼ş£¬¹©½Å±¾¶ÁÈ¡½ø³ÌĞÅÏ¢£¬¿ÉÌá¹©¸økillÊ¹ÓÃ\npid        /var/run/nginx.pid;\n\n\nevents {\n    # ¹¤×÷Á¬½Ó\n    worker_connections  1024;\n}\n\n\nhttp {\n    # mimeÀàĞÍÅäÖÃ£¬Ä¬ÈÏ\n    include       /etc/nginx/mime.types;\n    # Ä¬ÈÏµÄÀàĞÍ\n    default_type  application/octet-stream;\n\n    # ÈÕÖ¾¸ñÊ½\n    log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                      \'$status $body_bytes_sent "$http_referer" \'\n                      \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    # access_log Â·¾¶\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    # Á¬½Ó±£³ÖÊ±¼ä\n    keepalive_timeout  65;\n\n    # ÊÇ·ñÆôÓÃgzip\n    #gzip  on;\n\n    # ÒıÈëÆäËûÅäÖÃ\n    include /etc/nginx/conf.d/*.conf;\n}\n\n```\n\n## agent_deny.conf\n\n```lang=txt\n#½ûÖ¹Ö¸¶¨UAµÄ·ÃÎÊ\nif ($http_user_agent ~* "Scrapy|Wget|Curl|HttpClient|masscan|Python-urllib|libwww-perl|python|pdrlabs|FBI|Scanbot|zgrab|Cloud|Bunjalloo|Nintendo|Telesphoreo|FeedDemon|CPython|Alexa Toolbar|AskTbFXTV|AhrefsBot|CrawlDaddy|CoolpadWebkit|Feedly|UniversalFeedParser|Apache-HttpClient|java|ApacheBench|Microsoft URL Control|Swiftbot|ZmEu|oBot|jaunty|lightDeckReports|Bot|YYSpider|DigExt|HttpClient|MJ12bot|heritrix|EasouSpider|Ezooms") {\n     return 403;             \n}\n#½ûÖ¹UAÎª¿ÕµÄ·ÃÎÊ\nif ($http_user_agent ~* (^-?$)) {\n     return 403;             \n}\n#½ûÖ¹·ÇGET|POST·½Ê½µÄ×¥È¡\nif ($request_method !~ ^(GET|POST)$) {\n    return 403;\n}\n```\n\n## nginx2tomcat.conf\n\n```lang=txt,lines=20\nserver {\n    # 80 Ç¿ÖÆ×ª 443\n    listen 80;\n    server_name *.demo.domain;\n    return 301 https://$http_host$request_uri;\n}\nserver {\n    listen          443 default ssl;\n    server_name *.demo.domain;\n\n    ssl_certificate      cert.crt;\n    ssl_certificate_key  cert.key;\n\n    ssl_session_timeout  5m;\n\n    # sslÖ§³ÖµÄĞ­Òé£¬µ±Ç°»·¾³ÏÂ½¨ÒéÖ»ÅäÖÃ TLSv1.3\n    ssl_protocols  TLSv1.1 TLSv1.2 TLSv1.3;\n    ssl_ciphers  HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers   on;\n\n    # ¾²Ì¬ÎÄ¼ş»º´æÊ±³¤\n    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;\n\n    # access_log Â·¾¶£¬×Ô¶¨ÒåµÄ\n    access_log      /var/log/nginx/nginx2back.log;\n\n    # ÒıÈëagentÆÁ±Î\n    include /etc/nginx/agent_deny.conf;\n\n    # gzip Ïà¹ØÅäÖÃ\n    gzip on;\n    gzip_disable "MSIE [1-6].";\n    gzip_min_length 1k;\n    gzip_buffers 16 64k;\n    gzip_http_version 1.1;\n    gzip_comp_level 6;\n    gzip_types text/plain text/javascript application/json application/x-javascript text/css application/xml;\n    gzip_vary on;\n\n    # Ö¸¶¨Æ¥Åä uri Îª /cdn/ µÄ£¬µ½rootÖ¸¶¨µÄÄ¿Â¼È¥²éÕÒÎÄ¼ş\n    location ~ \\/cdn\\/ {\n\t\tlimit_except GET POST {\n\t\t\tdeny all;\n\t\t}\n        root /app/palmpulse_cdn_dir;\n    }\n    # Ö¸¶¨Æ¥Åä uri ºó×ºÎª wgt µÄ£¬µ½rootÖ¸¶¨µÄÄ¿Â¼È¥²éÕÒÎÄ¼ş\n    location ~ \\.wgt$ {\n\t\tlimit_except GET POST {\n\t\t\tdeny all;\n\t\t}\n        root /app/palmpulse_update_dir;\n    }\n    # Ö¸¶¨Æ¥Åä uri ºó×ºÎª apk µÄ£¬µ½rootÖ¸¶¨µÄÄ¿Â¼È¥²éÕÒÎÄ¼ş\n    location ~ \\.apk$ {\n\t\tlimit_except GET POST {\n\t\t\tdeny all;\n\t\t}\n        root /app/palmpulse_update_dir;\n    }\n    # Ö¸¶¨ /info ÎÄ¸ù·´Ïò´úÀíµ½±¾»ú 8081 ¶Ë¿Ú\n    location /info {\n\t\tlimit_except GET POST {\n\t\t\tdeny all;\n\t\t}\n        proxy_pass      http://127.0.0.1:8081;\n        # Ö¸¶¨²»Ê¹ÓÃÖØ¶¨Ïò\n        proxy_redirect  off;\n        # ¶îÍâÌí¼ÓÒ»Ğ©header£¬Í¸´«ÕæÊµIP£¨Ö»ÄÜÊÇ¾¡¿ÉÄÜÕæÊµµÄIP£©\n        proxy_set_header        Host            $host;\n        proxy_set_header        X-Real-IP       $remote_addr;\n        proxy_set_header        X-Forwarded-For $proxy_add_https://pha.erayt.com:8000/w/special/nginx-config/x_forwarded_for;\n    }\n    # Ö¸¶¨ /ecas ÎÄ¸ù·´Ïò´úÀíµ½±¾»ú 8082 ¶Ë¿Ú\n    location /ecas {\n\t\tlimit_except GET POST {\n\t\t\tdeny all;\n\t\t}\n        proxy_pass      http://127.0.0.1:8082;\n        proxy_redirect  off;\n        proxy_set_header        Host            $host;\n        proxy_set_header        X-Real-IP       $remote_addr;\n        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n    # Ö¸¶¨ /egate ÎÄ¸ù·´Ïò´úÀíµ½±¾»ú 8088 ¶Ë¿Ú\n    location /egate {\n\t\tlimit_except GET POST {\n\t\t\tdeny all;\n\t\t}\n        proxy_pass      http://127.0.0.1:8088;\n        proxy_redirect  off;\n        proxy_set_header        Host            $host;\n        proxy_set_header        X-Real-IP       $remote_addr;\n        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n    # Ö¸¶¨ / ÎÄ¸ù·´Ïò´úÀíµ½±¾»ú 8082 ¶Ë¿Ú\n    location / {\n\t\tlimit_except GET POST {\n\t\t\tdeny all;\n\t\t}\n        proxy_pass      http://127.0.0.1:8082;\n        proxy_redirect  off;\n        proxy_set_header        Host            $host;\n        proxy_set_header        X-Real-IP       $remote_addr;\n        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}\n```\ndateCreated: 1654675010\ndateModified: 1654675010\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-wxhseczeyodotqbav5zc\ndocumentPHID: PHID-WIKI-dpcbc3gipdlxsqo4hyaq', metadata={'source': 'data/file\\wiki.csv', 'row': 5}), Document(page_content="id: 252\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: openssl´´½¨Èı¼¶Ö¤ÊéÁ´\nslug: special/openssl-cert/\ncontent: = »ù´¡×¼±¸\n```lang=shell\nmkdir ca\ncd ca\nmkdir newcerts private\n```\n\n= ´´½¨ÆÕÍ¨×ÔÇ©Ö¤Êé\n```lang=shell\nopenssl req -new -x509 -keyout cert.key -out cert.pem -days 3650 -config ./openssl.cnf\n```\n\n= ´´½¨×ÔÇ©¸ùÖ¤Êé\n```lang=shell\n#×ÔÇ©¸ùÖ¤Êé\necho '01' > serial\ntouch index.txt\nopenssl req -new -x509 -extensions v3_ca -keyout private/cakey.pem -out cacert.pem -days 3650 -config ./openssl.cnf\n```\n\n= ´´½¨¶ş¼¶Ö¤Êé\n```lang=shell\n#¶ş¼¶CAÖ¤Êé£¬·½·¨1\necho '01' > serial2\ntouch index2.txt\nopenssl req -new -extensions v3_ca -out ca2req.pem -keyout private/ca2key.pem -config ./openssl.cnf\nopenssl ca -extensions v3_ca -out ca2cert.pem -config ./openssl.cnf -infiles ca2req.pem\n\n\n#¶ş¼¶CAÖ¤Êé£¬·½·¨2\nopenssl genrsa 2048 > private/ca2key.pem\nopenssl req -new -key private/ca2key.pem -out ca2cert.csr -config ./openssl.cnf\nopenssl ca -extensions v3_ca -in ca2cert.csr -out ca2cert.pem -config ./openssl.cnf\n```\n\n= Ç©·¢Èı¼¶Ö¤Êé\n```lang=shell\n#¶ş¼¶CAÇ©·¢Èı¼¶Ö¤Êé£¬·½·¨1\nopenssl req -new -out req.pem -config ./openssl.cnf\nopenssl ca -cert ca2cert.pem -keyfile private/ca2key.pem -in req.pem -out cert.pem -config ./openssl.cnf\n\n\n#¶ş¼¶CAÇ©·¢Èı¼¶Ö¤Êé£¬·½·¨2\nopenssl req -new -out req.pem -config ./openssl.cnf\nopenssl x509 -req -in req.pem -CA ca2cert.pem -CAkey private/ca2key.pem -CAserial serial2 -out cert.pem\n\n\n#¶ş¼¶CAÇ©·¢Èı¼¶Ö¤Êé£¬·½·¨3\nopenssl genrsa 2048 > key.pem\nopenssl req -new -key key.pem -out cert.csr -config ./openssl2.cnf\nopenssl ca -in cert.csr -out cert.pem -config ./openssl2.cnf\n\n\n#¶ş¼¶CAÇ©·¢Èı¼¶Ö¤Êé£¬·½·¨4\nopenssl genrsa 2048 > key2.pem\nopenssl req -new -key key2.pem -out cert.csr -config ./openssl.cnf\nopenssl ca -cert ca2cert.pem -keyfile private/ca2key.pem -in cert.csr -out cert.pem -config ./openssl.cnf\n```\n\n= openssl.cnf\n```lang=txt,lines=12\ndir = .\n\n[ req ]\ndefault_bits = 2048 # Size of keys\ndefault_keyfile = key.pem # name of generated keys\ndefault_md = sha256 # message digest algorithm\nstring_mask = nombstr # permitted characters\ndistinguished_name = req_distinguished_name\nreq_extensions = v3_req\n\n[ req_distinguished_name ]\n# Variable name   Prompt string\n#----------------------   ----------------------------------\n0.organizationName = Organization Name (company)\norganizationalUnitName = Organizational Unit Name (department, division)\nemailAddress = Email Address\nemailAddress_max = 40\nlocalityName = Locality Name (city, district)\nstateOrProvinceName = State or Province Name (full name)\ncountryName = Country Name (2 letter code)\ncountryName_min = 2\ncountryName_max = 2\ncommonName = Common Name (hostname, IP, or your name)\ncommonName_max = 64\n\n# Default values for the above , for consistency and less typing. \n# Variable name   Value\n#------------------------------   ------------------------------\n0.organizationName_default = Erayt Company\nlocalityName_default = Hangzhou\nstateOrProvinceName_default = Zhejiang\ncountryName_default = CN\n\n[ v3_ca ]\nbasicConstraints = CA:TRUE\nsubjectKeyIdentifier = hash\nauthorityKeyIdentifier = keyid:always, issuer:always\n\n[ v3_req ]\nbasicConstraints = CA:FALSE\nsubjectKeyIdentifier = hash\n\n[ ca ]\ndefault_ca = CA_default\n\n[ CA_default ]\nserial = $dir/serial\ndatabase = $dir/index.txt\nnew_certs_dir = $dir/newcerts\ncertificate = $dir/cacert.pem\nprivate_key = $dir/private/cakey.pem\ndefault_days = 3650\ndefault_md = sha256\npreserve = no\nemail_in_dn = no\nnameopt = default_ca\ncertopt = default_ca\npolicy = policy_match\n\n[ policy_match ]\ncountryName = match\nstateOrProvinceName = match\norganizationName = match\norganizationalUnitName = optional\ncommonName = supplied\nemailAddress = optional\n```\n\n= openssl2.cnf\n```lang=txt,lines=12\ndir = .\n\n[ req ]\ndefault_bits = 2048 # Size of keys\ndefault_keyfile = key.pem # name of generated keys\ndefault_md = sha256 # message digest algorithm\nstring_mask = nombstr # permitted characters\ndistinguished_name = req_distinguished_name\nreq_extensions = v3_req\n\n[ req_distinguished_name ]\n# Variable name   Prompt string\n#----------------------   ----------------------------------\n0.organizationName = Organization Name (company)\norganizationalUnitName = Organizational Unit Name (department, division)\nemailAddress = Email Address\nemailAddress_max = 40\nlocalityName = Locality Name (city, district)\nstateOrProvinceName = State or Province Name (full name)\ncountryName = Country Name (2 letter code)\ncountryName_min = 2\ncountryName_max = 2\ncommonName = Common Name (hostname, IP, or your name)\ncommonName_max = 64\n\n# Default values for the above , for consistency and less typing. \n# Variable name   Value\n#------------------------------   ------------------------------\n0.organizationName_default = Erayt Company\nlocalityName_default = Hangzhou\nstateOrProvinceName_default = Zhejiang\ncountryName_default = CN\n\n[ v3_ca ]\nbasicConstraints = CA:TRUE\nsubjectKeyIdentifier = hash\nauthorityKeyIdentifier = keyid:always, issuer:always\n\n[ v3_req ]\nbasicConstraints = CA:FALSE\nsubjectKeyIdentifier = hash\n\n[ ca ]\ndefault_ca = CA_default\n\n[ CA_default ]\nserial = $dir/serial2\ndatabase = $dir/index2.txt\nnew_certs_dir = $dir/newcerts\ncertificate = $dir/ca2cert.pem\nprivate_key = $dir/private/ca2key.pem\ndefault_days = 3650\ndefault_md = sha256\npreserve = no\nemail_in_dn = no\nnameopt = default_ca\ncertopt = default_ca\npolicy = policy_match\n\n[ policy_match ]\ncountryName = match\nstateOrProvinceName = match\norganizationName = match\norganizationalUnitName = optional\ncommonName = supplied\nemailAddress = optional\n```\n\n= ËµÃ÷\n·şÎñ¶ËÖ»ĞèÒªcert.pem(Èı¼¶Ö¤Êé)\n¿Í»§¶ËĞèµ¼Èëcacert.pem(CA¸ùÖ¤Êé)/ca2cert.pem(¶ş¼¶CAÖ¤Êé)\ndateCreated: 1640306971\ndateModified: 1640306971\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-tcott25rfzm4kmfl3knx\ndocumentPHID: PHID-WIKI-efhu4nm7moturdbro33q", metadata={'source': 'data/file\\wiki.csv', 'row': 6}), Document(page_content='id: 316\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ĞÂµÄJVM£ºGraalVM\nslug: special/new-mixed-vm-graalvm/\ncontent: Ò»¸öĞÂÍæ¾ß\n\n== ×¼±¸¹¤×÷\n\n```lang=java\npublic class A {\n    public static void main(String[] args){\n        System.out.println("hello, world!");\n        System.out.println("args length: " + args.length);\n        System.out.println("args0: " + args[0]);\n    }\n}\n```\n\n== ±àÒëÎª¾²Ì¬ÎÄ¼ş\n\n```lang=shell\nrm -rf A.class a.build_artifacts.txt a\njavac A.java\njava A x\n# µ÷ÓÃ graalvm Éú³É¶¯Ì¬¿â\nnative-image A\n./a x\n```\n\n== ±àÒëÎª¶¯Ì¬¿â¹© `c` µ÷ÓÃ\n\n```lang=c\n#include "liba.h"\n\nint main()\n{\n    char *array[] = {"good\\0"};\n    /* µ÷ÓÃ liba.h ÀïµÄº¯Êı¡£*/\n    /* ×¢Òâ£¬ÕâÀïĞèÒª´Ó1¿ªÊ¼Ëã²ÎÊı£¬0ÊÇ±íÊ¾Ö´ĞĞ´úÂë×ÔÉíÃû×Ö¡£ËùÒÔ×Ü³¤ÊÇ²ÎÊı³¤+1¡£ËùÒÔÊÇ 2¡£ */\n    run_main(2, array);\n    return 0;\n}\n\n```\n\n```lang=shell\nrm -rf A.class liba.so graal_isolate_dynamic.h graal_isolate.h liba_dynamic.h liba.h liba.build_artifacts.txt x\njavac A.java\njava A x\n# µ÷ÓÃ graalvm Éú³É¶¯Ì¬¿â\nnative-image A liba --shared\ngcc -I . -L . -la -o x x.c liba.so\nsudo cp liba.so /usr/lib\n./x\n```\n\n== ±àÒëÎª¶¯Ì¬¿â¹© `python` µ÷ÓÃ\n\n```lang=java\npublic class A {\n    public static void main(String[] args){\n        System.out.println("hello, world!");\n        // Î´ÄÜ½â¾ö´«²Î£¬ËùÒÔÉ¾³ıÁíÁ½ĞĞ\n    }\n}\n```\n\n```lang=python\n"""Simple example of loading and using the C library from Python"""\nimport sys, platform\nimport ctypes, ctypes.util\n\n# Get a handle to the C library\ntry:\n    liba = ctypes.CDLL(\'./liba.so\')\nexcept OSError:\n    print("Unable to load the C library")\n    sys.exit()\n\nprint(f\'Successfully loaded the library from "{liba}"\')\n\n# Ä¿Ç°ÉĞÎ´½â¾ö´«²Î£¬Ö»ÄÜÏÈÓÃ¿Õµ÷ÓÃÆğ\nliba.run_main(1, None)\n```\n\n```lang=shell\nrm -rf A.class liba.so graal_isolate_dynamic.h graal_isolate.h liba_dynamic.h liba.h liba.build_artifacts.txt\njavac A.java\njava A x\n# µ÷ÓÃ graalvm Éú³É¶¯Ì¬¿â\nnative-image A liba --shared\npython x.py\n```\n\n== ²Î¿¼\n\n- [[ https://www.graalvm.org/reference-manual/native-image/#build-a-native-image | build-a-native-image ]]\n- [[ https://www.graalvm.org/reference-manual/native-image/#build-a-shared-library | build-a-shared-library ]]\ndateCreated: 1641573547\ndateModified: 1641573547\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-22bgnd3aghubadl6nbud\ndocumentPHID: PHID-WIKI-vh5i2jale3g2rzst6iyb', metadata={'source': 'data/file\\wiki.csv', 'row': 7}), Document(page_content='id: 653\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ¸ºÔØ¾ùºâÆ÷×¨Ïî\nslug: special/load-balance/\ncontent: == ¸ºÔØ¾ùºâÆ÷½éÉÜ\n\n- [[ https://baike.baidu.com/item/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%99%A8/8852239 | ¸ºÔØ¾ùºâÆ÷-°Ù¶È°Ù¿Æ ]]\n- [[ https://www.f5.com.cn/services/resources/glossary/load-balancer | ¸ºÔØ¾ùºâÆ÷³§¼Ò-F5ÎÄµµ ]]\n\n== µäĞÍÓ²¼ş²úÆ·\n\n- [[ http://www.radware.com.cn/ | RedWare ]]\n- [[ https://www.f5.com.cn/ | F5 ]]\n\n== µäĞÍÈí¼ş²úÆ·\n\n- Nginx\n- keepalive\n- LVS\n- haproxy\n- °¢ÀïÔÆSLB\n\n== Ïà¹Ø¹ÊÕÏ´¦ÖÃ\n\n- [[ https://pha.erayt.com:8000/w/troubleshot/f5-cause-tcp-10045/ | ¸ºÔØ¾ùºâÆ÷µ¼ÖÂµÄTCP 10045ÎÊÌâ ]]\n- [[ https://pha.erayt.com:8000/w/troubleshot/load-balance-test-alive/ | ¸ºÔØ¾ùºâÆ÷Ì½»î¿ÉÄÜµ¼ÖÂÏµÍ³Òì³£ ]]\n\n== Ïà¹Ø³¡¾°±¸Íü\n\n=== xnetd\n\n¸ºÔØ¾ùºâ»·¾³ÏÂ£¬Ò»°ã»á¶Ô¼àÌıµÄ¶Ë¿Ú½øĞĞÌ½»î¡£ÒÑÖª `xnetd` ÔÚÌ½»îÇé¿öÏÂ²»»á·¢Éú¹ÊÕÏ£¬µ«ÈÕÖ¾ÖĞ»á³öÏÖÒÔÏÂÄÚÈİ£º\n{F490498}\nÀàËÆ¹ÊÕÏ [[ https://pha.erayt.com:8000/w/troubleshot/load-balance-test-alive/ | ¸ºÔØ¾ùºâÆ÷Ì½»î¿ÉÄÜµ¼ÖÂÏµÍ³Òì³£ ]] ¡£\n\nÊµ¼ÊÉÏ£¬¾ÍÊÇ¸ºÔØ¾ùºâÆ÷¶Ô`TCP`Ö®Àà¶Ë¿ÚÎŞ·¨×öµ½Í¨ÓÃÌ½»î¡£Ö»ÄÜÍ¨¹ı`connect-reset`Ä£Ê½±£Ö¤¶Ë¿ÚÊÇ»î×ÅµÄ¡£\ndateCreated: 1654753531\ndateModified: 1654753531\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-ej3xpptkbtzjvqtv3264\ndocumentPHID: PHID-WIKI-u7h54exzynvaujcekdaa', metadata={'source': 'data/file\\wiki.csv', 'row': 8}), Document(page_content='id: 270\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: CAÖ¤ÊéÊÇÉ¶\nslug: special/cert/\ncontent: 1. ÏòµÚÈı·½»ú¹¹CAÌá½»¹«Ô¿¡¢×éÖ¯ĞÅÏ¢¡¢¸öÈËĞÅÏ¢(ÓòÃû)µÈĞÅÏ¢²¢ÉêÇëÈÏÖ¤;\n2. CAÍ¨¹ıÏßÉÏ¡¢ÏßÏÂµÈ¶àÖÖÊÖ¶ÎÑéÖ¤ÉêÇëÕßÌá¹©ĞÅÏ¢µÄÕæÊµĞÔ£¬Èç×éÖ¯ÊÇ·ñ´æÔÚ¡¢ÆóÒµÊÇ·ñºÏ·¨£¬ÊÇ·ñÓµÓĞÓòÃûµÄËùÓĞÈ¨µÈ;\n3. ÈçĞÅÏ¢ÉóºËÍ¨¹ı£¬CA»áÏòÉêÇëÕßÇ©·¢ÈÏÖ¤ÎÄ¼ş-Ö¤Êé¡£\n\n**Ö¤Êé°üº¬ÒÔÏÂĞÅÏ¢£º**\n\n- ÉêÇëÕß¹«Ô¿\n- ÉêÇëÕßµÄ×éÖ¯ĞÅÏ¢ºÍ¸öÈËĞÅÏ¢\n- Ç©·¢»ú¹¹ CAµÄĞÅÏ¢\n- ÓĞĞ§Ê±¼ä\n- Ö¤ÊéĞòÁĞºÅµÈĞÅÏ¢µÄÃ÷ÎÄ\n- Í¬Ê±°üº¬Ò»¸öÇ©Ãû¡£\n\nÆäÖĞÇ©ÃûµÄ²úÉúÊÇÕâÑù×ÓµÄ£º\n\n1. Ê¹ÓÃÉ¢ÁĞº¯Êı¶Ô¹«¿ªµÄÃ÷ÎÄĞÅÏ¢£¨¹«Ô¿ºÍÆäËûĞÅÏ¢£©½øĞĞ¼ÆËãµÃµ½ĞÅÏ¢ÕªÒª\n2. ²ÉÓÃ CA µÄË½Ô¿¶ÔĞÅÏ¢ÕªÒª½øĞĞ¼ÓÃÜµÃµ½ÃÜÎÄ£¬Õâ¸öÃÜÎÄ¾ÍÊÇÇ©Ãû\ndateCreated: 1640311529\ndateModified: 1640311529\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-vt72euwpy6fm3q3qg76e\ndocumentPHID: PHID-WIKI-qesd5ldbd53hiid22id6', metadata={'source': 'data/file\\wiki.csv', 'row': 9}), Document(page_content='id: 324\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÖÕ¶ËÍË³öÊ±Ó¦ÓÃ³ÖĞøÔËĞĞ\nslug: special/terminal-quit/\ncontent: ÎÒÃÇ¾­³£»áÅöµ½ÕâÑùµÄÎÊÌâ£¬ÓÃ `telnet`/`ssh` µÇÂ¼ÁËÔ¶³ÌµÄ `Linux` ·şÎñÆ÷£¬ÔËĞĞÁËÒ»Ğ©ºÄÊ±½Ï³¤µÄÈÎÎñ£¬ ½á¹ûÈ´ÓÉÓÚÍøÂçµÄ²»ÎÈ¶¨µ¼ÖÂÈÎÎñÖĞÍ¾Ê§°Ü¡£ÈçºÎÈÃÃüÁîÌá½»ºó²»ÊÜ±¾µØ¹Ø±ÕÖÕ¶Ë´°¿Ú/ÍøÂç¶Ï¿ªÁ¬½ÓµÄ¸ÉÈÅÄØ£¿\n\nµ±ÓÃ»§×¢Ïú£¨`logout`£©»òÕßÍøÂç¶Ï¿ªÊ±£¬ÖÕ¶Ë»áÊÕµ½ `HUP`£¨`hangup`£©ĞÅºÅ´Ó¶ø¹Ø±ÕÆäËùÓĞ×Ó½ø³Ì¡£\n\n# nohup\n\nNohup: no-hangup ¾ÍÊÇÈÃÌá½»µÄÃüÁîºöÂÔhangupĞÅºÅ\n\n```lang=shell\n$ nohup sh test.sh &  \n```\n\n(NOTE)Ê¹ÓÃÁËnohupÖ®ºó£¬ºÜ¶àÈË¾ÍÕâÑù²»¹ÜÁË£¬ÆäÊµÕâÑùÓĞ¿ÉÄÜÔÚµ±Ç°ÕË»§·ÇÕı³£ÍË³ö»òÕß½áÊøµÄÊ±ºò£¬ÃüÁî»¹ÊÇ×Ô¼º½áÊøÁË¡£ËùÒÔÔÚÊ¹ÓÃ `nohup` ÃüÁîºóÌ¨ÔËĞĞÃüÁîÖ®ºó£¬ĞèÒªÊ¹ÓÃ `exit` Õı³£ÍË³öµ±Ç°ÕË»§£¬ÕâÑù²ÅÄÜ±£Ö¤ÃüÁîÒ»Ö±ÔÚºóÌ¨ÔËĞĞ¡£\n\n# setsid\n\n`setsid`: `setsid` º¯Êı½«´´½¨ĞÂµÄ»á»°£¬²¢Ê¹µÃµ÷ÓÃ `setsid` º¯ÊıµÄ½ø³Ì³ÉÎªĞÂ»á»°µÄÁìÍ·½ø³Ì¡£µ÷ÓÃ`setsid` º¯ÊıµÄ½ø³ÌÊÇĞÂ´´½¨»á»°ÖĞµÄÎ©Ò»µÄ½ø³Ì×é£¬½ø³Ì×é`ID`Îªµ÷ÓÃ½ø³ÌµÄ½ø³ÌºÅ¡£\nÕâÊÇÒ»¸ö `Linux` Ìá¹©µÄº¯Êı£¬Í¬Ê±Ò²ÊÇÒ»¸öÃüÁî£¬¿ÉÔÚ `shell` ÖĞµ÷ÓÃ¡£\n\n```lang=shell\n$ setsid sh test.sh &\n```\n\n# trap\n\n×ÔĞĞÔÚ½Å±¾ÖĞÊµÏÖ `no hup`£¬µ±´¥·¢ `HUP` ĞÅºÅÊ±£¬²»×öÈÎºÎ²Ù×÷¡£\n\n```lang=shell\n#!/bin/sh  \ntrap "" HUP\nwhile true; do\n    date >> /tmp/test.txt\n    sleep 1\ndone\n```\n\n```lang=shell\n$ sh test.sh &\n```\n\n(NOTE) ÕâÊÇ trap µÄ¼ò½é\n\n```lang=txt\ntrap command  signal\n\ntrap²¶»ñĞÅºÅ£¨ÈíÖĞ¶Ï£©£¬commandÒ»°ãÊÇlinuxÃüÁî ÈôÎª\' \'±íÊ¾·¢ÉúÏİÚåÊ±Îª¿ÕÖ¸Áî£¬\'-\'±íÊ¾·¢ÉúÏİÚåÊ±²ÉÓÃÈ±Ê¡Ö¸Áî\n\nsignal:\n\nHUP(1) ¹ÒÆğ£»Ò»°ãÒòÖÕ¶ËµôÏß»òÓÃ»§ÍË³ö¶øÒı·¢\nINT(2£©ÖĞ¶Ï£»Ò»°ãÒò°´ÏÂ"Ctrl+C"×éºÏ¼üÒı·¢\nQUIT(3) ÍË³ö£»Ò»°ãÒò°´ÏÂ"Ctrl+\\"×éºÏ¼üÒı·¢\nABRT(6) Òì³£ÖÕÖ¹£»Ò»°ãÒòÄ³Ğ©ÑÏÖØµÄÖ´ĞĞ´íÎó¶øÒı·¢\nALRM(14) ÄÖÖÓ£»Ò»°ãÊÇ³¬Ê±Ê±ÖÓµ½À´¶øÒı·¢\nTREM(15) ÖÕÖ¹£»Ò»°ãÊÇÓÉÏµÍ³ÔÚ¹Ø»úÊ±·¢³ö\n```\n\n# ²Î¿¼\n\n- [[ https://zhuanlan.zhihu.com/p/59297350 | linuxºóÌ¨Ö´ĞĞÃüÁî£º&ÓënohupµÄÓÃ·¨ ]]\n- [[ https://zhuanlan.zhihu.com/p/53212013 | LinuxÃüÁîÖ®nohup/setsid/& ]]\ndateCreated: 1641778878\ndateModified: 1641778878\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-uoycpoofw2qumi4kwla4\ndocumentPHID: PHID-WIKI-icl5uu7dhobcuxscrx5x', metadata={'source': 'data/file\\wiki.csv', 'row': 10}), Document(page_content="id: 287\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Bash½âÎö½Å±¾ÊÇÊµÊ±µÄ£¡£¡£¡\nslug: special/bash-parse-shell-in-realtime/\ncontent: ÕâÊÇ»ùÓÚÒ»¸öÕæÊµÊÀ½çµÄ¹ÊÕÏ£º[[ https://www.cnbeta.com/articles/tech/1220137.htm | ÈÕ±¾»İÆÕ¶ªÊ§ÁËÈÕ±¾¾©¶¼´óÑ§ 77TB Êı¾İ ]]\n\n**Ô­ÒòËµÃ÷**\n`Bash`ÔÚ½âÎö½Å±¾ÎÄ¼ş²¢Ö´ĞĞÊ±£¬²¢²»ÊÇÖ±½Ó¶ÁÈëÄÚ´æ£¬¶øÊÇÊµÊ±¶ÁÈ¡×îĞÂÄÚÈİ¡£\n\n**¸´ÏÖ**\n1. ¹¹½¨½Å±¾¡£Õâ¸ö½Å±¾»áÃ¿¸ôÒ»ÃëÊä³öÒ»¸öÊı×Ö£¬×îºó´òÓ¡`hello,world`\n\n```lang=shell\n#!/bin/bash\n\ni=0\nwhile [ $i -le 10 ]\ndo\n    echo $i\n    let i++\n    sleep 1\ndone\n\necho hello,world\n```\n\n2. Ö´ĞĞ¸Ã½Å±¾¡£²¢ÔÚÖ´ĞĞ¹ı³ÌÖĞ£¬½«×îºóÒ»¾ä¸ÄÎª `echo goodbye,world`\n\n```lang=shell\nsed -i 's/hello/goodbye/' a.sh\n```\n\n3. Êä³ö½á¹û²»ÔÙÊÇ½Å±¾Ô­ÏÈµÄ`hello`£¬¶ø³ÉÁË`goodbye`\n\n```lang=txt\n$ bash a.sh\n0\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\ngoodbye,world\n```\n\n**¶¯»­ÑİÊ¾**\n{F339057}\n\n**½â¶Á**\nÒª±ÜÃâÔÚ³¤Ê±¼äÔËĞĞ½Å±¾Ê±Ö±½ÓĞŞ¸Ä½Å±¾¡£ÌØ±ğÊÇÒÔÎª±¸·İÁË¾É½Å±¾£¬Ö±½ÓĞŞ¸Äµ±Ç°½Å±¾¡£\n\n(IMPORTANT)ÕâÑù²»ĞĞ\n\n```lang=shell\n# ÕıÔÚÖ´ĞĞa.sh\ncp a.sh a.sh.bak\nvi a.sh # ĞŞ¸Ä»áµ¼ÖÂÆäºóÖ´ĞĞµÄÓï¾ä±»Ö´ĞĞµ½\n```\n\n(IMPORTANT)ÕâÑù²»ĞĞ v2\n\n```lang=shell\n# ÕıÔÚÖ´ĞĞa.sh\ncp a.sh b.sh\nmv a.sh new.sh\ncp b.sh a.sh\nvi new.sh # inodeÎ´±ä£¬ĞŞ¸ÄÈÔÈ»»áµ¼ÖÂÆäºóÖ´ĞĞµÄÓï¾ä±»Ö´ĞĞµ½\n```\n\n**ËµÃ÷**\nÒÑ¾­Ö´ĞĞµÄ½Å±¾ĞĞ£¬²»ÊÜÓ°Ïì\nÓ°ÏìµÄ£¬ÊÇµ±Ç°Ö´ĞĞĞĞºóÃæµÄ½Å±¾ĞĞ\n\n»»¾ä»°Ëµ£¬¶Ô³¤Ê±¼äÖ´ĞĞ½Å±¾À´Ëµ£¬Õâ¸öÊÇ´æÔÚÒ»¶¨·çÏÕµÄ¡£±ÈÈç×öÊı¾İ¿âÇ¨ÒÆÊ±£¬¸Ä¶¯½Å±¾¡£\ndateCreated: 1640921621\ndateModified: 1640921621\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-6e4rele6235fmgldrkrp\ndocumentPHID: PHID-WIKI-fb5zx6x7epzflg4bksca", metadata={'source': 'data/file\\wiki.csv', 'row': 11}), Document(page_content='id: 115\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÎªÊ²Ã´²»½¨ÒéÖ±½ÓÊ¹ÓÃ Async ×¢½â£¿\nslug: special/spring-async/\ncontent: ²»½¨ÒéÖ±½ÓÊ¹ÓÃ `@Async`\nÈ·ĞèÒªÊ¹ÓÃ£¬±ØĞë×ÔĞĞÉè¶¨Ïß³Ì³Ø\n- ÖØĞÂÊµÏÖ½Ó¿Ú `AsyncConfigurer`\n- ¼Ì³Ğ `AsyncConfigurerSupport`\n- ÅäÖÃÓÉ×Ô¶¨ÒåµÄ `TaskExecutor` Ìæ´úÄÚÖÃµÄÈÎÎñÖ´ĞĞÆ÷\n²Î¿¼ÎÄµµ£º[[ https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247531371&idx=2&sn=3bc670e982329c42786c19fb9748bf8c&chksm=fa4a04dacd3d8dccb4d380dabb62800b36db9318a73ca73b1e21b8137ec9210f732fb86bc207&mpshare=1&scene=1&srcid=1108ESxyx3die26blikcAd2F&sharer_sharetime=1636339805048&sharer_shareid=ca827079a201d4b8bc2c75d8c4d8f7c9&exportkey=AZMGNtH8A4Zv%2BL5NmQtHLPk%3D&pass_ticket=X%2BLnpfgw0SC1yHWFvY4UbTMMfzLOCO7urdiu6cqo0JBRpFUhZSlexGE7W3Rrvv69&wx_header=0#rd | ÎªÊ²Ã´²»½¨ÒéÖ±½ÓÊ¹ÓÃ Async ×¢½â£¿ ]]\ndateCreated: 1637217769\ndateModified: 1637217769\ndescription: \nchangeType: 2\nchangeRef: 19\nphid: PHID-WRDS-fivcarafpgz5fqgouwwn\ndocumentPHID: PHID-WIKI-lq72kuyxpogxtdnqngkb', metadata={'source': 'data/file\\wiki.csv', 'row': 12}), Document(page_content='id: 667\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÔÚ Linux ÉÏ±£»¤ SSH ·şÎñÆ÷Á¬½ÓµÄ 8 ÖÖ·½·¨\nslug: special/ssh-server-secrity/\ncontent: `SSH` ÊÇÒ»ÖÖ¹ã·ºÊ¹ÓÃµÄĞ­Òé£¬ÓÃÓÚ°²È«µØ·ÃÎÊ `Linux` ·şÎñÆ÷¡£´ó¶àÊıÓÃ»§Ê¹ÓÃÄ¬ÈÏÉèÖÃµÄ `SSH` Á¬½ÓÀ´Á¬½Óµ½Ô¶³Ì·şÎñÆ÷¡£µ«ÊÇ£¬²»°²È«µÄÄ¬ÈÏÅäÖÃÒ²»á´øÀ´¸÷ÖÖ°²È«·çÏÕ¡£\n\n¾ßÓĞ¿ª·Å `SSH` ·ÃÎÊÈ¨ÏŞµÄ·şÎñÆ÷µÄ `root` ÕÊ»§¿ÉÄÜ´æÔÚ·çÏÕ¡£ÓÈÆäÊÇÈç¹ûÄúÊ¹ÓÃµÄÊÇ¹«¹² `IP` µØÖ·£¬ÔòÆÆ½â `root` ÃÜÂëÒªÈİÒ×µÃ¶à¡£Òò´Ë£¬ÓĞ±ØÒªÁË½â `SSH` °²È«ĞÔ¡£\n\n## ±£»¤ `SSH` ·şÎñÆ÷Á¬½Ó¡£\n\nÕâÊÇÔÚ `Linux` ÉÏ±£»¤ `SSH` ·şÎñÆ÷Á¬½ÓµÄ·½·¨¡£\n\n### ½ûÓÃrootÓÃ»§µÇÂ¼\nÎª´Ë£¬Ê×ÏÈ£¬½ûÓÃ `root` ÓÃ»§µÄ SSH ·ÃÎÊ²¢´´½¨Ò»¸ö¾ßÓĞ `root` È¨ÏŞµÄĞÂÓÃ»§¡£¹Ø±Õ `root` ÓÃ»§µÄ·şÎñÆ÷·ÃÎÊÊÇÒ»ÖÖ·ÀÓù²ßÂÔ£¬¿ÉÒÔ·ÀÖ¹¹¥»÷ÕßÊµÏÖÈëÇÖÏµÍ³µÄÄ¿±ê¡£ÀıÈç£¬Äú¿ÉÒÔ´´½¨Ò»¸öÃûÎª`exampleroot`µÄÓÃ»§£¬ÈçÏÂËùÊ¾£º\n\n```lang=shell\nuseradd -m exampleroot\npasswd exampleroot\nusermod -aG sudo exampleroot\n```\n\nÒÔÏÂÊÇÉÏÊöÃüÁîµÄ¼òÒªËµÃ÷£º\n\n- useradd´´½¨Ò»¸öĞÂÓÃ»§£¬²¢ÇÒ-m²ÎÊıÔÚÄú´´½¨µÄÓÃ»§µÄÖ÷Ä¿Â¼ÏÂ´´½¨Ò»¸öÎÄ¼ş¼Ğ¡£\n- passwdÃüÁîÓÃÓÚÎªĞÂÓÃ»§·ÖÅäÃÜÂë¡£Çë¼Ç×¡£¬Äú·ÖÅä¸øÓÃ»§µÄÃÜÂëÓ¦¸ÃºÜ¸´ÔÓÇÒÄÑÒÔ²Â²â¡£\n- usermod -aG sudo½«ĞÂ´´½¨µÄÓÃ»§Ìí¼Óµ½¹ÜÀíÔ±×é¡£\n\nÔÚÓÃ»§´´½¨¹ı³ÌÖ®ºó£¬ĞèÒª¶Ô`sshd_config`ÎÄ¼ş½øĞĞÒ»Ğ©¸ü¸Ä¡£Äú¿ÉÒÔÔÚ`/etc/ssh/sshd_config`ÕÒµ½´ËÎÄ¼ş¡£Ê¹ÓÃÈÎºÎÎÄ±¾±à¼­Æ÷´ò¿ªÎÄ¼ş²¢¶ÔÆä½øĞĞÒÔÏÂ¸ü¸Ä£º\n\n```lang=txt\n# Authentication: \n#LoginGraceTime 2m \nPermitRootLogin no \nAllowUsers exampleroot\n```\n\n`PermitRootLogin` ĞĞ½«×èÖ¹ `root` ÓÃ»§Ê¹ÓÃ `SSH` »ñµÃÔ¶³Ì·ÃÎÊ¡£ÔÚ`AllowUsers` ÁĞ±íÖĞ°üº¬ `exampleroot` »áÏòÓÃ»§ÊÚÓè±ØÒªµÄÈ¨ÏŞ¡£\n\n×îºó£¬Ê¹ÓÃÒÔÏÂÃüÁîÖØÆô `SSH` ·şÎñ£º\n\n```lang=shell\nlinuxmi@linuxmi /home/linuxmi/www.linuxmi.com                              \n? sudo systemctl restart ssh\n```\n\nÈç¹ûÊ§°Ü²¢ÇÒÄúÊÕµ½´íÎóÏûÏ¢£¬Çë³¢ÊÔÒÔÏÂÃüÁî¡£Õâ¿ÉÄÜÒòÄúÊ¹ÓÃµÄ Linux ·¢ĞĞ°æ¶øÒì¡£\n\n```lang=shell\nlinuxmi@linuxmi /home/linuxmi/www.linuxmi.com\n sudo systemctl restart sshd\n```\n\n### ¸ü¸ÄÄ¬ÈÏ¶Ë¿Ú\nÄ¬ÈÏµÄ `SSH` Á¬½Ó¶Ë¿ÚÊÇ `22`¡£µ±È»£¬ËùÓĞµÄ¹¥»÷Õß¶¼ÖªµÀÕâÒ»µã£¬Òò´ËĞèÒª¸ü¸ÄÄ¬ÈÏ¶Ë¿ÚºÅÒÔÈ·±£ `SSH` °²È«¡£¾¡¹Ü¹¥»÷Õß¿ÉÒÔÍ¨¹ı `Nmap` É¨ÃèÇáËÉÕÒµ½ĞÂµÄ¶Ë¿ÚºÅ£¬µ«ÕâÀïµÄÄ¿±êÊÇÈÃ¹¥»÷ÕßµÄ¹¤×÷¸ü¼ÓÀ§ÄÑ¡£\n\nÒª¸ü¸Ä¶Ë¿ÚºÅ£¬Çë´ò¿ª`/etc/ssh/sshd_config`²¢¶ÔÎÄ¼ş½øĞĞÒÔÏÂ¸ü¸Ä£º\n\n```lang=txt\nInclude /etc/ssh/sshd_config.d/*.conf\nPort 22099\n```\n\n\nÔÚÕâÒ»²½Ö®ºó£¬Ê¹ÓÃ`sudo systemctl restart ssh`ÔÙ´ÎÖØÆô `SSH` ·şÎñ¡£ÏÖÔÚÄú¿ÉÒÔÊ¹ÓÃ¸Õ¸Õ¶¨ÒåµÄ¶Ë¿Ú·ÃÎÊÄúµÄ·şÎñÆ÷¡£Èç¹ûÄúÊ¹ÓÃµÄÊÇ·À»ğÇ½£¬Ôò»¹±ØĞëÔÚ´Ë´¦½øĞĞ±ØÒªµÄ¹æÔò¸ü¸Ä¡£ÔÚÔËĞĞ`netstat -tlpn`ÃüÁîÊ±£¬Äú¿ÉÒÔ¿´µ½ÄúµÄ `SSH` ¶Ë¿ÚºÅÒÑ¸ü¸Ä¡£\n\n### ½ûÖ¹Ê¹ÓÃ¿Õ°×ÃÜÂëµÄÓÃ»§·ÃÎÊ\nÔÚÄúµÄÏµÍ³ÉÏ¿ÉÄÜÓĞÄú²»Ğ¡ĞÄ´´½¨µÄÃ»ÓĞÃÜÂëµÄÓÃ»§¡£Òª·ÀÖ¹´ËÀàÓÃ»§·ÃÎÊ·şÎñÆ÷£¬Äú¿ÉÒÔ½«`sshd_config`ÎÄ¼şÖĞµÄ`PermitEmptyPasswords`ĞĞÖµÉèÖÃÎª`no`¡£\n\n```lang=shell\nPermitEmptyPasswords no\n```\n\n### ÏŞÖÆµÇÂ¼/·ÃÎÊ³¢ÊÔ\nÄ¬ÈÏÇé¿öÏÂ£¬Äú¿ÉÒÔ¸ù¾İĞèÒª³¢ÊÔ¶à´ÎÊäÈëÃÜÂëÀ´·ÃÎÊ·şÎñÆ÷¡£µ«ÊÇ£¬¹¥»÷Õß¿ÉÒÔÀûÓÃ´ËÂ©¶´¶Ô·şÎñÆ÷½øĞĞ±©Á¦ÆÆ½â¡£Í¨¹ıÖ¸¶¨ÔÊĞíµÄÃÜÂë³¢ÊÔ´ÎÊı£¬Äú¿ÉÒÔÔÚ³¢ÊÔÒ»¶¨´ÎÊıºó×Ô¶¯ÖÕÖ¹`SSH` Á¬½Ó¡£\n\nÎª´Ë£¬Çë¸ü¸Ä`sshd_config`ÎÄ¼şÖĞµÄ`MaxAuthTries`Öµ¡£\n\n```lang=txt\nMaxAuthTries 3\n```\n\n### Ê¹ÓÃ `SSH` °æ±¾ `2`\n`SSH` µÄµÚ¶ş¸ö°æ±¾·¢²¼ÊÇÒòÎªµÚÒ»¸ö°æ±¾ÖĞ´æÔÚĞí¶àÂ©¶´¡£Ä¬ÈÏÇé¿öÏÂ£¬Äú¿ÉÒÔÍ¨¹ı½«`Protocol`²ÎÊıÌí¼Óµ½`sshd_config`ÎÄ¼şÀ´ÆôÓÃ·şÎñÆ÷Ê¹ÓÃµÚ¶ş¸ö°æ±¾¡£ÕâÑù£¬ÄúÎ´À´µÄËùÓĞÁ¬½Ó¶¼½«Ê¹ÓÃµÚ¶ş¸ö°æ±¾µÄ `SSH`¡£\n\n```lang=txt\nInclude /etc/ssh/sshd_config.d/*.conf \nProtocol 2\n```\n\n### ¹Ø±Õ`TCP`¶Ë¿Ú×ª·¢ºÍ`X11`×ª·¢\n¹¥»÷Õß¿ÉÒÔ³¢ÊÔÍ¨¹ı `SSH` Á¬½ÓµÄ¶Ë¿Ú×ª·¢À´·ÃÎÊÄúµÄÆäËûÏµÍ³¡£ÎªÁË·ÀÖ¹ÕâÖÖÇé¿ö£¬Äú¿ÉÒÔÔÚ`sshd_config`ÎÄ¼şÖĞ¹Ø±Õ`AllowTcpForwarding`ºÍ`X11Forwarding`¹¦ÄÜ¡£\n\n```lang=txt\nX11Forwarding no \nAllowTcpForwarding no\n```\n\n### Ê¹ÓÃ `SSH` ÃÜÔ¿Á¬½Ó\nÁ¬½Óµ½·şÎñÆ÷µÄ×î°²È«·½·¨Ö®Ò»ÊÇÊ¹ÓÃ `SSH` ÃÜÔ¿¡£Ê¹ÓÃ `SSH` ÃÜÔ¿Ê±£¬ÎŞĞèÃÜÂë¼´¿É·ÃÎÊ·şÎñÆ÷¡£ÁíÍâ£¬Äú¿ÉÒÔÍ¨¹ı¸ü¸Ä`sshd_config`ÎÄ¼şÖĞÓëÃÜÂëÏà¹ØµÄ²ÎÊıÀ´ÍêÈ«¹Ø±Õ¶Ô·şÎñÆ÷µÄÃÜÂë·ÃÎÊ¡£\n\n´´½¨ `SSH` ÃÜÔ¿Ê±£¬ÓĞÁ½¸öÃÜÔ¿£º`Public`ºÍ`Private`¡£¹«Ô¿½«ÉÏ´«µ½ÄúÒªÁ¬½ÓµÄ·şÎñÆ÷£¬¶øË½Ô¿Ôò´æ´¢ÔÚÄú½«ÓÃÀ´½¨Á¢Á¬½ÓµÄ¼ÆËã»úÉÏ¡£\n\nÔÚÄúµÄ¼ÆËã»úÉÏÊ¹ÓÃ`ssh-keygen`ÃüÁî´´½¨ `SSH` ÃÜÔ¿¡£²»Òª½«ÃÜÂë¶ÌÓï×Ö¶ÎÁô¿Õ²¢¼Ç×¡ÄúÔÚ´Ë´¦ÊäÈëµÄÃÜÂë¡£Èç¹û½«ÆäÁô¿Õ£¬Äú½«Ö»ÄÜÊ¹ÓÃ `SSH` ÃÜÔ¿ÎÄ¼ş·ÃÎÊËü¡£µ«ÊÇ£¬Èç¹ûÄúÉèÖÃÁËÃÜÂë£¬Ôò¿ÉÒÔ·ÀÖ¹ÓµÓĞÃÜÔ¿ÎÄ¼şµÄ¹¥»÷Õß·ÃÎÊËü¡£ÀıÈç£¬Äú¿ÉÒÔÊ¹ÓÃÒÔÏÂÃüÁî´´½¨ `SSH` ÃÜÔ¿£º\n\n```lang=shell\nssh-keygen\n```\n\n### `SSH` Á¬½ÓµÄ `IP` ÏŞÖÆ\n\n´ó¶àÊıÇé¿öÏÂ£¬·À»ğÇ½Ê¹ÓÃ×Ô¼ºµÄ±ê×¼¿ò¼Ü×èÖ¹·ÃÎÊ£¬Ö¼ÔÚ±£»¤·şÎñÆ÷¡£µ«ÊÇ£¬Õâ²¢²»×ÜÊÇ×ã¹»µÄ£¬ÄúĞèÒªÔö¼ÓÕâÖÖ°²È«Ç±Á¦¡£\n\nÎª´Ë£¬Çë´ò¿ª`/etc/hosts.allow`ÎÄ¼ş¡£Í¨¹ı¶Ô¸ÃÎÄ¼ş½øĞĞµÄÌí¼Ó£¬Äú¿ÉÒÔÏŞÖÆ `SSH` È¨ÏŞ£¬ÔÊĞíÌØ¶¨ `IP` ¿é£¬»òÊäÈëµ¥¸ö `IP` ²¢Ê¹ÓÃ¾Ü¾øÃüÁî×èÖ¹ËùÓĞÊ£ÓàµÄ `IP` µØÖ·¡£\n\nÏÂÃæÄú½«¿´µ½Ò»Ğ©Ê¾ÀıÉèÖÃ¡£Íê³ÉÕâĞ©Ö®ºó£¬ÏñÍù³£Ò»ÑùÖØĞÂÆô¶¯ `SSH` ·şÎñÒÔ±£´æ¸ü¸Ä¡£\n\n\n## `Linux` ·şÎñÆ÷°²È«µÄÖØÒªĞÔ\nËùÓĞ·şÎñÆ÷¹ÜÀíÔ±¶¼Ó¦¸Ã¿¼ÂÇÊı¾İºÍÊı¾İ°²È«ÎÊÌâ¡£·şÎñÆ÷°²È«ÊÇÒ»¸ö·Ç³£Ãô¸ĞµÄÎÊÌâ£¬ÒòÎª¹¥»÷µÄÖ÷Òª½¹µãÊÇ `Web` ·şÎñÆ÷£¬ËüÃÇ¼¸ºõ°üº¬ÓĞ¹ØÏµÍ³µÄËùÓĞĞÅÏ¢¡£ÓÉÓÚ´ó¶àÊı·şÎñÆ÷¶¼ÔÚ `Linux` »ù´¡¼Ü¹¹ÉÏÔËĞĞ£¬Òò´ËÊìÏ¤ `Linux` ÏµÍ³ºÍ·şÎñÆ÷¹ÜÀí·Ç³£ÖØÒª¡£\n\n`SSH` °²È«Ö»ÊÇ±£»¤·şÎñÆ÷µÄ·½·¨Ö®Ò»¡£¿ÉÒÔÍ¨¹ıÍ£Ö¹¡¢×èµ²»ò¼õ»º¹¥»÷À´×î´ó³Ì¶ÈµØ¼õÉÙÄúÊÜµ½µÄÉËº¦¡£³ıÁËÌá¹© `SSH` °²È«ĞÔÖ®Íâ£¬Äú»¹¿ÉÒÔÊµÊ©Ğí¶à²»Í¬µÄ·½·¨À´±£»¤ÄúµÄ `Linux` ·şÎñÆ÷¡£\n\n## ²Î¿¼Á¬½Ó\n\n[[ https://www.linuxmi.com/secure-ssh-connections-linux.html | ÔÚ Linux ÉÏ±£»¤ SSH ·şÎñÆ÷Á¬½ÓµÄ 8 ÖÖ·½·¨ ]]\ndateCreated: 1657069473\ndateModified: 1657069473\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-j6iixcpzm2tfhwzv7le4\ndocumentPHID: PHID-WIKI-akli2ssjf44gjpydvwaz', metadata={'source': 'data/file\\wiki.csv', 'row': 13}), Document(page_content='id: 248\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ¹ØÓÚTCPµÄ¼¸ÕÅÍ¼\nslug: special/tcp-pic/\ncontent: TCP °üÍ·½á¹¹\n{F332039}\n\nTCP Èı´ÎÎÕÊÖ\n{F332043}\n{F332047}\n\nTCP ËÄ´Î»ÓÊÖ\n{F332045}\n{F332049}\n\nTCP 2MSL\n{F332037}\ndateCreated: 1640251826\ndateModified: 1640251826\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-d6r6ihgxizcsbsgmdphz\ndocumentPHID: PHID-WIKI-7vmatfyvca7zgdzsc76m', metadata={'source': 'data/file\\wiki.csv', 'row': 14}), Document(page_content='id: 670\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: WebSphereÏÂ¸üĞÂÄ³warµÄweb.xml\nslug: special/websphere-update-war-web.xml/\ncontent: Ö±½Ó¸üĞÂ`war`°²×°Â·¾¶ÏÂµÄ`web.xml`ÊÇ²»¹»µÄ\n`WebSphere`µÄ»úÖÆ¶Ô`WAR`ÓĞÌØÊâ¹ÜÀí£¬»¹ÓĞµØ·½´æ´¢×Å£¬ĞèÒªÒ»²¢¸üĞÂ\n¼òµ¥×ö·¨£º\nµ½½ÚµãÂ·¾¶ÏÂ£¬±ÈÈç `/opt/IBM/WebSphere/AppServer/profiles/AppSvr01`£¬\nÖ´ĞĞ£º\n\n```lang=shell\nfind . -name "web.xml" | grep ecas # ecas ¿É¸ÄÎªÆäËû°üÃû\n```\n\nÕâÀïÎÒÁĞ³öÒ»·Ö¿ÉÄÜµÄ½á¹û£º\n\n```lang=verilog\n[wasadmin@E193089 AppSvr01]$ find . -name "web.xml" | grep ecas\n./installedApps/E193089Cell01/ecas-web-5_1-BETA_war.ear/ecas-web-5.1-BETA.war/WEB-INF/web.xml\n./config/cells/E193089Cell01/applications/ecas-web-5_1-BETA_war.ear/deployments/ecas-web-5_1-BETA_war/ecas-web-5.1-BETA.war/WEB-INF/web.xml\n```\n\n¶¼ÕıÈ·ĞŞ¸Äºó£¬¾Í¿ÉÒÔÁË\ndateCreated: 1657185990\ndateModified: 1657185990\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-xkiw7pm62xb2idiesc3a\ndocumentPHID: PHID-WIKI-zydgahc4ovs4mwrkc53d', metadata={'source': 'data/file\\wiki.csv', 'row': 15}), Document(page_content='id: 111\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: SpringÏà¹ØÖªÊ¶\nslug: special/\ncontent: **SpringÏà¹ØÖªÊ¶**\n- [[ https://pha.erayt.com:8000/w/spring/spring-async/ | ÎªÊ²Ã´²»½¨ÒéÖ±½ÓÊ¹ÓÃ Async ×¢½â£¿ ]]\ndateCreated: 1637217667\ndateModified: 1637217667\ndescription: \nchangeType: 2\nchangeRef: 16\nphid: PHID-WRDS-ggkfhgqaadzbrfkrexus\ndocumentPHID: PHID-WIKI-bcdlzd4fllc2izpccsda', metadata={'source': 'data/file\\wiki.csv', 'row': 16}), Document(page_content='id: 661\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: PythonÖªÊ¶ÊÖ²á\nslug: special/python-booklet/\ncontent: ÈçÌâ\n\n{F517490}\ndateCreated: 1656058476\ndateModified: 1656058476\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-tqubkyjfci2bucjy5lhm\ndocumentPHID: PHID-WIKI-wtr4fsf35eu5vmnz5vuo', metadata={'source': 'data/file\\wiki.csv', 'row': 17}), Document(page_content='id: 119\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ğ¡°×BashÖ¸ÄÏ\nslug: special/bash-freshman/\ncontent: # Bash ½Å±¾ÈëÃÅ\n\n½Å±¾£¨script£©¾ÍÊÇ°üº¬Ò»ÏµÁĞÃüÁîµÄÒ»¸öÎÄ±¾ÎÄ¼ş¡£Shell ¶ÁÈ¡Õâ¸öÎÄ¼ş£¬ÒÀ´ÎÖ´ĞĞÀïÃæµÄËùÓĞÃüÁî£¬¾ÍºÃÏñÕâĞ©ÃüÁîÖ±½ÓÊäÈëµ½ÃüÁîĞĞÒ»Ñù¡£ËùÓĞÄÜ¹»ÔÚÃüÁîĞĞÍê³ÉµÄÈÎÎñ£¬¶¼ÄÜ¹»ÓÃ½Å±¾Íê³É¡£\n\n½Å±¾µÄºÃ´¦ÊÇ¿ÉÒÔÖØ¸´Ê¹ÓÃ£¬Ò²¿ÉÒÔÖ¸¶¨ÔÚÌØ¶¨³¡ºÏ×Ô¶¯µ÷ÓÃ£¬±ÈÈçÏµÍ³Æô¶¯»ò¹Ø±ÕÊ±×Ô¶¯Ö´ĞĞ½Å±¾¡£\n\n## Shebang ĞĞ\n\n½Å±¾µÄµÚÒ»ĞĞÍ¨³£ÊÇÖ¸¶¨½âÊÍÆ÷£¬¼´Õâ¸ö½Å±¾±ØĞëÍ¨¹ıÊ²Ã´½âÊÍÆ÷Ö´ĞĞ¡£ÕâÒ»ĞĞÒÔ`#!`×Ö·û¿ªÍ·£¬Õâ¸ö×Ö·û³ÆÎª Shebang£¬ËùÒÔÕâÒ»ĞĞ¾Í½Ğ×ö Shebang ĞĞ¡£\n\n`#!`ºóÃæ¾ÍÊÇ½Å±¾½âÊÍÆ÷µÄÎ»ÖÃ£¬Bash ½Å±¾µÄ½âÊÍÆ÷Ò»°ãÊÇ`/bin/sh`»ò`/bin/bash`¡£\n\n```\n#!/bin/sh\n# »òÕß\n#!/bin/bash\n```\n\n`#!`Óë½Å±¾½âÊÍÆ÷Ö®¼äÓĞÃ»ÓĞ¿Õ¸ñ£¬¶¼ÊÇ¿ÉÒÔµÄ¡£\n\nÈç¹û Bash ½âÊÍÆ÷²»·ÅÔÚÄ¿Â¼`/bin`£¬½Å±¾¾ÍÎŞ·¨Ö´ĞĞÁË¡£ÎªÁË±£ÏÕ£¬¿ÉÒÔĞ´³ÉÏÂÃæÕâÑù¡£\n\n```\n#!/usr/bin/env bash\n```\n\nÉÏÃæÃüÁîÊ¹ÓÃ`env`ÃüÁî£¨Õâ¸öÃüÁî×ÜÊÇÔÚ`/usr/bin`Ä¿Â¼£©£¬·µ»Ø Bash ¿ÉÖ´ĞĞÎÄ¼şµÄÎ»ÖÃ¡£`env`ÃüÁîµÄÏêÏ¸½éÉÜ£¬Çë¿´ºóÎÄ¡£\n\nShebang ĞĞ²»ÊÇ±ØĞèµÄ£¬µ«ÊÇ½¨Òé¼ÓÉÏÕâĞĞ¡£Èç¹ûÈ±ÉÙ¸ÃĞĞ£¬¾ÍĞèÒªÊÖ¶¯½«½Å±¾´«¸ø½âÊÍÆ÷¡£¾ÙÀıÀ´Ëµ£¬½Å±¾ÊÇ`script.sh`£¬ÓĞ Shebang ĞĞµÄÊ±ºò£¬¿ÉÒÔÖ±½Óµ÷ÓÃÖ´ĞĞ¡£\n\n```\n$ ./script.sh\n```\n\nÉÏÃæÀı×ÓÖĞ£¬`script.sh`ÊÇ½Å±¾ÎÄ¼şÃû¡£½Å±¾Í¨³£Ê¹ÓÃ`.sh`ºó×ºÃû£¬²»¹ıÕâ²»ÊÇ±ØĞèµÄ¡£\n\nÈç¹ûÃ»ÓĞ Shebang ĞĞ£¬¾ÍÖ»ÄÜÊÖ¶¯½«½Å±¾´«¸ø½âÊÍÆ÷À´Ö´ĞĞ¡£\n\n```\n$ /bin/sh ./script.sh\n# »òÕß\n$ bash ./script.sh\n```\n\n## Ö´ĞĞÈ¨ÏŞºÍÂ·¾¶\n\nÇ°ÃæËµ¹ı£¬Ö»ÒªÖ¸¶¨ÁË Shebang ĞĞµÄ½Å±¾£¬¿ÉÒÔÖ±½ÓÖ´ĞĞ¡£ÕâÓĞÒ»¸öÇ°ÌáÌõ¼ş£¬¾ÍÊÇ½Å±¾ĞèÒªÓĞÖ´ĞĞÈ¨ÏŞ¡£¿ÉÒÔÊ¹ÓÃÏÂÃæµÄÃüÁî£¬¸³Óè½Å±¾Ö´ĞĞÈ¨ÏŞ¡£\n\n```\n# ¸øËùÓĞÓÃ»§Ö´ĞĞÈ¨ÏŞ\n$ chmod +x script.sh\n\n# ¸øËùÓĞÓÃ»§¶ÁÈ¨ÏŞºÍÖ´ĞĞÈ¨ÏŞ\n$ chmod +rx script.sh\n# »òÕß\n$ chmod 755 script.sh\n\n# Ö»¸ø½Å±¾ÓµÓĞÕß¶ÁÈ¨ÏŞºÍÖ´ĞĞÈ¨ÏŞ\n$ chmod u+rx script.sh\n```\n\n½Å±¾µÄÈ¨ÏŞÍ¨³£ÉèÎª`755`£¨ÓµÓĞÕßÓĞËùÓĞÈ¨ÏŞ£¬ÆäËûÈËÓĞ¶ÁºÍÖ´ĞĞÈ¨ÏŞ£©»òÕß`700`£¨Ö»ÓĞÓµÓĞÕß¿ÉÒÔÖ´ĞĞ£©¡£\n\n³ıÁËÖ´ĞĞÈ¨ÏŞ£¬½Å±¾µ÷ÓÃÊ±£¬Ò»°ãĞèÒªÖ¸¶¨½Å±¾µÄÂ·¾¶£¨±ÈÈç`path/script.sh`£©¡£Èç¹û½«½Å±¾·ÅÔÚ»·¾³±äÁ¿`$PATH`Ö¸¶¨µÄÄ¿Â¼ÖĞ£¬¾Í²»ĞèÒªÖ¸¶¨Â·¾¶ÁË¡£ÒòÎª Bash »á×Ô¶¯µ½ÕâĞ©Ä¿Â¼ÖĞ£¬Ñ°ÕÒÊÇ·ñ´æÔÚÍ¬ÃûµÄ¿ÉÖ´ĞĞÎÄ¼ş¡£\n\n½¨ÒéÔÚÖ÷Ä¿Â¼ĞÂ½¨Ò»¸ö`~/bin`×ÓÄ¿Â¼£¬×¨ÃÅ´æ·Å¿ÉÖ´ĞĞ½Å±¾£¬È»ºó°Ñ`~/bin`¼ÓÈë`$PATH`¡£\n\n```\nexport PATH=$PATH:~/bin\n```\n\nÉÏÃæÃüÁî¸Ä±ä»·¾³±äÁ¿`$PATH`£¬½«`~/bin`Ìí¼Óµ½`$PATH`µÄÄ©Î²¡£¿ÉÒÔ½«ÕâÒ»ĞĞ¼Óµ½`~/.bashrc`ÎÄ¼şÀïÃæ£¬È»ºóÖØĞÂ¼ÓÔØÒ»´Î`.bashrc`£¬Õâ¸öÅäÖÃ¾Í¿ÉÒÔÉúĞ§ÁË¡£\n\n```\n$ source ~/.bashrc\n```\n\nÒÔºó²»¹ÜÔÚÊ²Ã´Ä¿Â¼£¬Ö±½ÓÊäÈë½Å±¾ÎÄ¼şÃû£¬½Å±¾¾Í»áÖ´ĞĞ¡£\n\n```\n$ script.sh\n```\n\nÉÏÃæÃüÁîÃ»ÓĞÖ¸¶¨½Å±¾Â·¾¶£¬ÒòÎª`script.sh`ÔÚ`$PATH`Ö¸¶¨µÄÄ¿Â¼ÖĞ¡£\n\n## env ÃüÁî\n\n`env`ÃüÁî×ÜÊÇÖ¸Ïò`/usr/bin/env`ÎÄ¼ş£¬»òÕßËµ£¬Õâ¸ö¶ş½øÖÆÎÄ¼ş×ÜÊÇÔÚÄ¿Â¼`/usr/bin`¡£\n\n`#!/usr/bin/env NAME`Õâ¸öÓï·¨µÄÒâË¼ÊÇ£¬ÈÃ Shell ²éÕÒ`$PATH`»·¾³±äÁ¿ÀïÃæµÚÒ»¸öÆ¥ÅäµÄ`NAME`¡£Èç¹ûÄã²»ÖªµÀÄ³¸öÃüÁîµÄ¾ßÌåÂ·¾¶£¬»òÕßÏ£Íû¼æÈİÆäËûÓÃ»§µÄ»úÆ÷£¬ÕâÑùµÄĞ´·¨¾ÍºÜÓĞÓÃ¡£\n\n`/usr/bin/env bash`µÄÒâË¼¾ÍÊÇ£¬·µ»Ø`bash`¿ÉÖ´ĞĞÎÄ¼şµÄÎ»ÖÃ£¬Ç°ÌáÊÇ`bash`µÄÂ·¾¶ÊÇÔÚ`$PATH`ÀïÃæ¡£ÆäËû½Å±¾ÎÄ¼şÒ²¿ÉÒÔÊ¹ÓÃÕâ¸öÃüÁî¡£±ÈÈç Node.js ½Å±¾µÄ Shebang ĞĞ£¬¿ÉÒÔĞ´³ÉÏÂÃæÕâÑù¡£\n\n```\n#!/usr/bin/env node\n```\n\n`env`ÃüÁîµÄ²ÎÊıÈçÏÂ¡£\n\n- `-i`, `--ignore-environment`£º²»´ø»·¾³±äÁ¿Æô¶¯¡£\n- `-u`, `--unset=NAME`£º´Ó»·¾³±äÁ¿ÖĞÉ¾³ıÒ»¸ö±äÁ¿¡£\n- `--help`£ºÏÔÊ¾°ïÖú¡£\n- `--version`£ºÊä³ö°æ±¾ĞÅÏ¢¡£\n\nÏÂÃæÊÇÒ»¸öÀı×Ó£¬ĞÂ½¨Ò»¸ö²»´øÈÎºÎ»·¾³±äÁ¿µÄ Shell¡£\n\n```\n$ env -i /bin/sh\n```\n\n## ×¢ÊÍ\n\nBash ½Å±¾ÖĞ£¬`#`±íÊ¾×¢ÊÍ£¬¿ÉÒÔ·ÅÔÚĞĞÊ×£¬Ò²¿ÉÒÔ·ÅÔÚĞĞÎ²¡£\n\n```\n# ±¾ĞĞÊÇ×¢ÊÍ\necho \'Hello World!\'\n\necho \'Hello World!\' # ¾®ºÅºóÃæµÄ²¿·ÖÒ²ÊÇ×¢ÊÍ\n```\n\n½¨ÒéÔÚ½Å±¾¿ªÍ·£¬Ê¹ÓÃ×¢ÊÍËµÃ÷µ±Ç°½Å±¾µÄ×÷ÓÃ£¬ÕâÑùÓĞÀûÓÚÈÕºóµÄÎ¬»¤¡£\n\n## ½Å±¾²ÎÊı\n\nµ÷ÓÃ½Å±¾µÄÊ±ºò£¬½Å±¾ÎÄ¼şÃûºóÃæ¿ÉÒÔ´øÓĞ²ÎÊı¡£\n\n```\n$ script.sh word1 word2 word3\n```\n\nÉÏÃæÀı×ÓÖĞ£¬`script.sh`ÊÇÒ»¸ö½Å±¾ÎÄ¼ş£¬`word1`¡¢`word2`ºÍ`word3`ÊÇÈı¸ö²ÎÊı¡£\n\n½Å±¾ÎÄ¼şÄÚ²¿£¬¿ÉÒÔÊ¹ÓÃÌØÊâ±äÁ¿£¬ÒıÓÃÕâĞ©²ÎÊı¡£\n\n- `$0`£º½Å±¾ÎÄ¼şÃû£¬¼´`script.sh`¡£\n- `$1`~`$9`£º¶ÔÓ¦½Å±¾µÄµÚÒ»¸ö²ÎÊıµ½µÚ¾Å¸ö²ÎÊı¡£\n- `$#`£º²ÎÊıµÄ×ÜÊı¡£\n- `$@`£ºÈ«²¿µÄ²ÎÊı£¬²ÎÊıÖ®¼äÊ¹ÓÃ¿Õ¸ñ·Ö¸ô¡£\n- `$*`£ºÈ«²¿µÄ²ÎÊı£¬²ÎÊıÖ®¼äÊ¹ÓÃ±äÁ¿`$IFS`ÖµµÄµÚÒ»¸ö×Ö·û·Ö¸ô£¬Ä¬ÈÏÎª¿Õ¸ñ£¬µ«ÊÇ¿ÉÒÔ×Ô¶¨Òå¡£\n\nÈç¹û½Å±¾µÄ²ÎÊı¶àÓÚ9¸ö£¬ÄÇÃ´µÚ10¸ö²ÎÊı¿ÉÒÔÓÃ`${10}`µÄĞÎÊ½ÒıÓÃ£¬ÒÔ´ËÀàÍÆ¡£\n\n×¢Òâ£¬Èç¹ûÃüÁîÊÇ`command -o foo bar`£¬ÄÇÃ´`-o`ÊÇ`$1`£¬`foo`ÊÇ`$2`£¬`bar`ÊÇ`$3`¡£\n\nÏÂÃæÊÇÒ»¸ö½Å±¾ÄÚ²¿¶ÁÈ¡ÃüÁîĞĞ²ÎÊıµÄÀı×Ó¡£\n\n```\n#!/bin/bash\n# script.sh\n\necho "È«²¿²ÎÊı£º" $@\necho "ÃüÁîĞĞ²ÎÊıÊıÁ¿£º" $#\necho \'$0 = \' $0\necho \'$1 = \' $1\necho \'$2 = \' $2\necho \'$3 = \' $3\n```\n\nÖ´ĞĞ½á¹ûÈçÏÂ¡£\n\n```\n$ ./script.sh a b c\nÈ«²¿²ÎÊı£ºa b c\nÃüÁîĞĞ²ÎÊıÊıÁ¿£º3\n$0 =  script.sh\n$1 =  a\n$2 =  b\n$3 =  c\n```\n\nÓÃ»§¿ÉÒÔÊäÈëÈÎÒâÊıÁ¿µÄ²ÎÊı£¬ÀûÓÃ`for`Ñ­»·£¬¿ÉÒÔ¶ÁÈ¡Ã¿Ò»¸ö²ÎÊı¡£\n\n```\n#!/bin/bash\n\nfor i in "$@"; do\n  echo $i\ndone\n```\n\nÉÏÃæÀı×ÓÖĞ£¬`$@`·µ»ØÒ»¸öÈ«²¿²ÎÊıµÄÁĞ±í£¬È»ºóÊ¹ÓÃ`for`Ñ­»·±éÀú¡£\n\nÈç¹û¶à¸ö²ÎÊı·ÅÔÚË«ÒıºÅÀïÃæ£¬ÊÓÎªÒ»¸ö²ÎÊı¡£\n\n```\n$ ./script.sh "a b"\n```\n\nÉÏÃæÀı×ÓÖĞ£¬Bash »áÈÏÎª`"a b"`ÊÇÒ»¸ö²ÎÊı£¬`$1`»á·µ»Ø`a b`¡£×¢Òâ£¬·µ»ØÊ±²»°üÀ¨Ë«ÒıºÅ¡£\n\n## shift ÃüÁî\n\n`shift`ÃüÁî¿ÉÒÔ¸Ä±ä½Å±¾²ÎÊı£¬Ã¿´ÎÖ´ĞĞ¶¼»áÒÆ³ı½Å±¾µ±Ç°µÄµÚÒ»¸ö²ÎÊı£¨`$1`£©£¬Ê¹µÃºóÃæµÄ²ÎÊıÏòÇ°Ò»Î»£¬¼´`$2`±ä³É`$1`¡¢`$3`±ä³É`$2`¡¢`$4`±ä³É`$3`£¬ÒÔ´ËÀàÍÆ¡£\n\n`while`Ñ­»·½áºÏ`shift`ÃüÁî£¬Ò²¿ÉÒÔ¶ÁÈ¡Ã¿Ò»¸ö²ÎÊı¡£\n\n```\n#!/bin/bash\n\necho "Ò»¹²ÊäÈëÁË $# ¸ö²ÎÊı"\n\nwhile [ "$1" != "" ]; do\n  echo "Ê£ÏÂ $# ¸ö²ÎÊı"\n  echo "²ÎÊı£º$1"\n  shift\ndone\n```\n\nÉÏÃæÀı×ÓÖĞ£¬`shift`ÃüÁîÃ¿´ÎÒÆ³ıµ±Ç°µÚÒ»¸ö²ÎÊı£¬´Ó¶øÍ¨¹ı`while`Ñ­»·±éÀúËùÓĞ²ÎÊı¡£\n\n`shift`ÃüÁî¿ÉÒÔ½ÓÊÜÒ»¸öÕûÊı×÷Îª²ÎÊı£¬Ö¸¶¨ËùÒªÒÆ³ıµÄ²ÎÊı¸öÊı£¬Ä¬ÈÏÎª`1`¡£\n\n```\nshift 3\n```\n\nÉÏÃæµÄÃüÁîÒÆ³ıÇ°Èı¸ö²ÎÊı£¬Ô­À´µÄ`$4`±ä³É`$1`¡£\n\n## getopts ÃüÁî\n\n`getopts`ÃüÁîÓÃÔÚ½Å±¾ÄÚ²¿£¬¿ÉÒÔ½âÎö¸´ÔÓµÄ½Å±¾ÃüÁîĞĞ²ÎÊı£¬Í¨³£Óë`while`Ñ­»·Ò»ÆğÊ¹ÓÃ£¬È¡³ö½Å±¾ËùÓĞµÄ´øÓĞÇ°ÖÃÁ¬´ÊÏß£¨`-`£©µÄ²ÎÊı¡£\n\n```\ngetopts optstring name\n```\n\nËü´øÓĞÁ½¸ö²ÎÊı¡£µÚÒ»¸ö²ÎÊı`optstring`ÊÇ×Ö·û´®£¬¸ø³ö½Å±¾ËùÓĞµÄÁ¬´ÊÏß²ÎÊı¡£±ÈÈç£¬Ä³¸ö½Å±¾¿ÉÒÔÓĞÈı¸öÅäÖÃÏî²ÎÊı`-l`¡¢`-h`¡¢`-a`£¬ÆäÖĞÖ»ÓĞ`-a`¿ÉÒÔ´øÓĞ²ÎÊıÖµ£¬¶ø`-l`ºÍ`-h`ÊÇ¿ª¹Ø²ÎÊı£¬ÄÇÃ´`getopts`µÄµÚÒ»¸ö²ÎÊıĞ´³É`lha:`£¬Ë³Ğò²»ÖØÒª¡£×¢Òâ£¬`a`ºóÃæÓĞÒ»¸öÃ°ºÅ£¬±íÊ¾¸Ã²ÎÊı´øÓĞ²ÎÊıÖµ£¬`getopts`¹æ¶¨´øÓĞ²ÎÊıÖµµÄÅäÖÃÏî²ÎÊı£¬ºóÃæ±ØĞë´øÓĞÒ»¸öÃ°ºÅ£¨`:`£©¡£`getopts`µÄµÚ¶ş¸ö²ÎÊı`name`ÊÇÒ»¸ö±äÁ¿Ãû£¬ÓÃÀ´±£´æµ±Ç°È¡µ½µÄÅäÖÃÏî²ÎÊı£¬¼´`l`¡¢`h`»ò`a`¡£\n\nÏÂÃæÊÇÒ»¸öÀı×Ó¡£\n\n```\nwhile getopts \'lha:\' OPTION; do\n  case "$OPTION" in\n    l)\n      echo "linuxconfig"\n      ;;\n\n    h)\n      echo "h stands for h"\n      ;;\n\n    a)\n      avalue="$OPTARG"\n      echo "The value provided is $OPTARG"\n      ;;\n    ?)\n      echo "script usage: $(basename $0) [-l] [-h] [-a somevalue]" >&2\n      exit 1\n      ;;\n  esac\ndone\nshift "$(($OPTIND - 1))"\n```\n\nÉÏÃæÀı×ÓÖĞ£¬`while`Ñ­»·²»¶ÏÖ´ĞĞ`getopts \'lha:\' OPTION`ÃüÁî£¬Ã¿´ÎÖ´ĞĞ¾Í»á¶ÁÈ¡Ò»¸öÁ¬´ÊÏß²ÎÊı£¨ÒÔ¼°¶ÔÓ¦µÄ²ÎÊıÖµ£©£¬È»ºó½øÈëÑ­»·Ìå¡£±äÁ¿`OPTION`±£´æµÄÊÇ£¬µ±Ç°´¦ÀíµÄÄÇÒ»¸öÁ¬´ÊÏß²ÎÊı£¨¼´`l`¡¢`h`»ò`a`£©¡£Èç¹ûÓÃ»§ÊäÈëÁËÃ»ÓĞÖ¸¶¨µÄ²ÎÊı£¨±ÈÈç`-x`£©£¬ÄÇÃ´`OPTION`µÈÓÚ`?`¡£Ñ­»·ÌåÄÚÊ¹ÓÃ`case`ÅĞ¶Ï£¬´¦ÀíÕâËÄÖÖ²»Í¬µÄÇé¿ö¡£\n\nÈç¹ûÄ³¸öÁ¬´ÊÏß²ÎÊı´øÓĞ²ÎÊıÖµ£¬±ÈÈç`-a foo`£¬ÄÇÃ´´¦Àí`a`²ÎÊıµÄÊ±ºò£¬»·¾³±äÁ¿`$OPTARG`±£´æµÄ¾ÍÊÇ²ÎÊıÖµ¡£\n\n×¢Òâ£¬Ö»ÒªÓöµ½²»´øÁ¬´ÊÏßµÄ²ÎÊı£¬`getopts`¾Í»áÖ´ĞĞÊ§°Ü£¬´Ó¶øÍË³ö`while`Ñ­»·¡£±ÈÈç£¬`getopts`¿ÉÒÔ½âÎö`command -l foo`£¬µ«²»¿ÉÒÔ½âÎö`command foo -l`¡£ÁíÍâ£¬¶à¸öÁ¬´ÊÏß²ÎÊıĞ´ÔÚÒ»ÆğµÄĞÎÊ½£¬±ÈÈç`command -lh`£¬`getopts`Ò²¿ÉÒÔÕıÈ·´¦Àí¡£\n\n±äÁ¿`$OPTIND`ÔÚ`getopts`¿ªÊ¼Ö´ĞĞÇ°ÊÇ`1`£¬È»ºóÃ¿´ÎÖ´ĞĞ¾Í»á¼Ó`1`¡£µÈµ½ÍË³ö`while`Ñ­»·£¬¾ÍÒâÎ¶×ÅÁ¬´ÊÏß²ÎÊıÈ«²¿´¦ÀíÍê±Ï¡£ÕâÊ±£¬`$OPTIND - 1`¾ÍÊÇÒÑ¾­´¦ÀíµÄÁ¬´ÊÏß²ÎÊı¸öÊı£¬Ê¹ÓÃ`shift`ÃüÁî½«ÕâĞ©²ÎÊıÒÆ³ı£¬±£Ö¤ºóÃæµÄ´úÂë¿ÉÒÔÓÃ`$1`¡¢`$2`µÈ´¦ÀíÃüÁîµÄÖ÷²ÎÊı¡£\n\n## ÅäÖÃÏî²ÎÊıÖÕÖ¹·û `--`\n\n`-`ºÍ`--`¿ªÍ·µÄ²ÎÊı£¬»á±» Bash µ±×÷ÅäÖÃÏî½âÊÍ¡£µ«ÊÇ£¬ÓĞÊ±ËüÃÇ²»ÊÇÅäÖÃÏî£¬¶øÊÇÊµÌå²ÎÊıµÄÒ»²¿·Ö£¬±ÈÈçÎÄ¼şÃû½Ğ×ö`-f`»ò`--file`¡£\n\n```\n$ cat -f\n$ cat --file\n```\n\nÉÏÃæÃüÁîµÄÔ­ÒâÊÇÊä³öÎÄ¼ş`-f`ºÍ`--file`µÄÄÚÈİ£¬µ«ÊÇ»á±» Bash µ±×÷ÅäÖÃÏî½âÊÍ¡£\n\nÕâÊ±¾Í¿ÉÒÔÊ¹ÓÃÅäÖÃÏî²ÎÊıÖÕÖ¹·û`--`£¬ËüµÄ×÷ÓÃÊÇ¸æËß Bash£¬ÔÚËüºóÃæµÄ²ÎÊı¿ªÍ·µÄ`-`ºÍ`--`²»ÊÇÅäÖÃÏî£¬Ö»ÄÜµ±×÷ÊµÌå²ÎÊı½âÊÍ¡£\n\n```\n$ cat -- -f\n$ cat -- --file\n```\n\nÉÏÃæÃüÁî¿ÉÒÔÕıÈ·Õ¹Ê¾ÎÄ¼ş`-f`ºÍ`--file`µÄÄÚÈİ£¬ÒòÎªËüÃÇ·ÅÔÚ`--`µÄºóÃæ£¬¿ªÍ·µÄ`-`ºÍ`--`¾Í²»ÔÙµ±×÷ÅäÖÃÏî½âÊÍÁË¡£\n\nÈç¹ûÒªÈ·±£Ä³¸ö±äÁ¿²»»á±»µ±×÷ÅäÖÃÏî½âÊÍ£¬¾ÍÒªÔÚËüÇ°Ãæ·ÅÉÏ²ÎÊıÖÕÖ¹·û`--`¡£\n\n```\n$ ls -- $myPath\n```\n\nÉÏÃæÊ¾ÀıÖĞ£¬`--`Ç¿ÖÆ±äÁ¿`$myPath`Ö»ÄÜµ±×÷ÊµÌå²ÎÊı£¨¼´Â·¾¶Ãû£©½âÊÍ¡£Èç¹û±äÁ¿²»ÊÇÂ·¾¶Ãû£¬¾Í»á±¨´í¡£\n\n```\n$ myPath="-l"\n$ ls -- $myPath\nls: ÎŞ·¨·ÃÎÊ\'-l\': Ã»ÓĞÄÇ¸öÎÄ¼ş»òÄ¿Â¼\n```\n\nÉÏÃæÀı×ÓÖĞ£¬±äÁ¿`myPath`µÄÖµÎª`-l`£¬²»ÊÇÂ·¾¶¡£µ«ÊÇ£¬`--`Ç¿ÖÆ`$myPath`Ö»ÄÜ×÷ÎªÂ·¾¶½âÊÍ£¬µ¼ÖÂ±¨´í¡°²»´æÔÚ¸ÃÂ·¾¶¡±¡£\n\nÏÂÃæÊÇÁíÒ»¸öÊµ¼ÊµÄÀı×Ó£¬Èç¹ûÏëÔÚÎÄ¼şÀïÃæËÑË÷`--hello`£¬ÕâÊ±Ò²ÒªÊ¹ÓÃ²ÎÊıÖÕÖ¹·û`--`¡£\n\n```\n$ grep -- "--hello" example.txt\n```\n\nÉÏÃæÃüÁîÔÚ`example.txt`ÎÄ¼şÀïÃæ£¬ËÑË÷×Ö·û´®`--hello`¡£Õâ¸ö×Ö·û´®ÊÇ`--`¿ªÍ·£¬Èç¹û²»ÓÃ²ÎÊıÖÕÖ¹·û£¬`grep`ÃüÁî¾Í»á°Ñ`--hello`µ±×÷ÅäÖÃÏî²ÎÊı£¬´Ó¶ø±¨´í¡£\n\n## exit ÃüÁî\n\n`exit`ÃüÁîÓÃÓÚÖÕÖ¹µ±Ç°½Å±¾µÄÖ´ĞĞ£¬²¢Ïò Shell ·µ»ØÒ»¸öÍË³öÖµ¡£\n\n```\n$ exit\n```\n\nÉÏÃæÃüÁîÖĞÖ¹µ±Ç°½Å±¾£¬½«×îºóÒ»ÌõÃüÁîµÄÍË³ö×´Ì¬£¬×÷ÎªÕû¸ö½Å±¾µÄÍË³ö×´Ì¬¡£\n\n`exit`ÃüÁîºóÃæ¿ÉÒÔ¸ú²ÎÊı£¬¸Ã²ÎÊı¾ÍÊÇÍË³ö×´Ì¬¡£\n\n```\n# ÍË³öÖµÎª0£¨³É¹¦£©\n$ exit 0\n\n# ÍË³öÖµÎª1£¨Ê§°Ü£©\n$ exit 1\n```\n\nÍË³öÊ±£¬½Å±¾»á·µ»ØÒ»¸öÍË³öÖµ¡£½Å±¾µÄÍË³öÖµ£¬`0`±íÊ¾Õı³££¬`1`±íÊ¾·¢Éú´íÎó£¬`2`±íÊ¾ÓÃ·¨²»¶Ô£¬`126`±íÊ¾²»ÊÇ¿ÉÖ´ĞĞ½Å±¾£¬`127`±íÊ¾ÃüÁîÃ»ÓĞ·¢ÏÖ¡£Èç¹û½Å±¾±»ĞÅºÅ`N`ÖÕÖ¹£¬ÔòÍË³öÖµÎª`128 + N`¡£¼òµ¥À´Ëµ£¬Ö»ÒªÍË³öÖµ·Ç0£¬¾ÍÈÏÎªÖ´ĞĞ³ö´í¡£\n\nÏÂÃæÊÇÒ»¸öÀı×Ó¡£\n\n```\nif [ $(id -u) != "0" ]; then\n  echo "¸ùÓÃ»§²ÅÄÜÖ´ĞĞµ±Ç°½Å±¾"\n  exit 1\nfi\n```\n\nÉÏÃæµÄÀı×ÓÖĞ£¬`id -u`ÃüÁî·µ»ØÓÃ»§µÄ ID£¬Ò»µ©ÓÃ»§µÄ ID ²»µÈÓÚ`0`£¨¸ùÓÃ»§µÄ ID£©£¬½Å±¾¾Í»áÍË³ö£¬²¢ÇÒÍË³öÂëÎª`1`£¬±íÊ¾ÔËĞĞÊ§°Ü¡£\n\n`exit`Óë`return`ÃüÁîµÄ²î±ğÊÇ£¬`return`ÃüÁîÊÇº¯ÊıµÄÍË³ö£¬²¢·µ»ØÒ»¸öÖµ¸øµ÷ÓÃÕß£¬½Å±¾ÒÀÈ»Ö´ĞĞ¡£`exit`ÊÇÕû¸ö½Å±¾µÄÍË³ö£¬Èç¹ûÔÚº¯ÊıÖ®ÖĞµ÷ÓÃ`exit`£¬ÔòÍË³öº¯Êı£¬²¢ÖÕÖ¹½Å±¾Ö´ĞĞ¡£\n\n## ÃüÁîÖ´ĞĞ½á¹û\n\nÃüÁîÖ´ĞĞ½áÊøºó£¬»áÓĞÒ»¸ö·µ»ØÖµ¡£`0`±íÊ¾Ö´ĞĞ³É¹¦£¬·Ç`0`£¨Í¨³£ÊÇ`1`£©±íÊ¾Ö´ĞĞÊ§°Ü¡£»·¾³±äÁ¿`$?`¿ÉÒÔ¶ÁÈ¡Ç°Ò»¸öÃüÁîµÄ·µ»ØÖµ¡£\n\nÀûÓÃÕâÒ»µã£¬¿ÉÒÔÔÚ½Å±¾ÖĞ¶ÔÃüÁîÖ´ĞĞ½á¹û½øĞĞÅĞ¶Ï¡£\n\n```\ncd $some_directory\nif [ "$?" = "0" ]; then\n  rm *\nelse\n  echo "ÎŞ·¨ÇĞ»»Ä¿Â¼£¡" 1>&2\n  exit 1\nfi\n```\n\nÉÏÃæÀı×ÓÖĞ£¬`cd $some_directory`Õâ¸öÃüÁîÈç¹ûÖ´ĞĞ³É¹¦£¨·µ»ØÖµµÈÓÚ`0`£©£¬¾ÍÉ¾³ı¸ÃÄ¿Â¼ÀïÃæµÄÎÄ¼ş£¬·ñÔòÍË³ö½Å±¾£¬Õû¸ö½Å±¾µÄ·µ»ØÖµ±äÎª`1`£¬±íÊ¾Ö´ĞĞÊ§°Ü¡£\n\nÓÉÓÚ`if`¿ÉÒÔÖ±½ÓÅĞ¶ÏÃüÁîµÄÖ´ĞĞ½á¹û£¬Ö´ĞĞÏàÓ¦µÄ²Ù×÷£¬ÉÏÃæµÄ½Å±¾¿ÉÒÔ¸ÄĞ´³ÉÏÂÃæµÄÑù×Ó¡£\n\n```\nif cd $some_directory; then\n  rm *\nelse\n  echo "Could not change directory! Aborting." 1>&2\n  exit 1\nfi\n```\n\n¸ü¼ò½àµÄĞ´·¨ÊÇÀûÓÃÁ½¸öÂß¼­ÔËËã·û`&&`£¨ÇÒ£©ºÍ`||`£¨»ò£©¡£\n\n```\n# µÚÒ»²½Ö´ĞĞ³É¹¦£¬²Å»áÖ´ĞĞµÚ¶ş²½\ncd $some_directory && rm *\n\n# µÚÒ»²½Ö´ĞĞÊ§°Ü£¬²Å»áÖ´ĞĞµÚ¶ş²½\ncd $some_directory || exit 1\n```\n\n## source ÃüÁî\n\n`source`ÃüÁîÓÃÓÚÖ´ĞĞÒ»¸ö½Å±¾£¬Í¨³£ÓÃÓÚÖØĞÂ¼ÓÔØÒ»¸öÅäÖÃÎÄ¼ş¡£\n\n```\n$ source .bashrc\n```\n\n`source`ÃüÁî×î´óµÄÌØµãÊÇÔÚµ±Ç° Shell Ö´ĞĞ½Å±¾£¬²»ÏñÖ±½ÓÖ´ĞĞ½Å±¾Ê±£¬»áĞÂ½¨Ò»¸ö×Ó Shell¡£ËùÒÔ£¬`source`ÃüÁîÖ´ĞĞ½Å±¾Ê±£¬²»ĞèÒª`export`±äÁ¿¡£\n\n```\n#!/bin/bash\n# test.sh\necho $foo\n```\n\nÉÏÃæ½Å±¾Êä³ö`$foo`±äÁ¿µÄÖµ¡£\n\n```\n# µ±Ç° Shell ĞÂ½¨Ò»¸ö±äÁ¿ foo\n$ foo=1\n\n# ´òÓ¡Êä³ö 1\n$ source test.sh\n1\n\n# ´òÓ¡Êä³ö¿Õ×Ö·û´®\n$ bash test.sh\n```\n\nÉÏÃæÀı×ÓÖĞ£¬µ±Ç° Shell µÄ±äÁ¿`foo`²¢Ã»ÓĞ`export`£¬ËùÒÔÖ±½ÓÖ´ĞĞÎŞ·¨¶ÁÈ¡£¬µ«ÊÇ`source`Ö´ĞĞ¿ÉÒÔ¶ÁÈ¡¡£\n\n`source`ÃüÁîµÄÁíÒ»¸öÓÃÍ¾£¬ÊÇÔÚ½Å±¾ÄÚ²¿¼ÓÔØÍâ²¿¿â¡£\n\n```\n#!/bin/bash\n\nsource ./lib.sh\n\nfunction_from_lib\n```\n\nÉÏÃæ½Å±¾ÔÚÄÚ²¿Ê¹ÓÃ`source`ÃüÁî¼ÓÔØÁËÒ»¸öÍâ²¿¿â£¬È»ºó¾Í¿ÉÒÔÔÚ½Å±¾ÀïÃæ£¬Ê¹ÓÃÕâ¸öÍâ²¿¿â¶¨ÒåµÄº¯Êı¡£\n\n`source`ÓĞÒ»¸ö¼òĞ´ĞÎÊ½£¬¿ÉÒÔÊ¹ÓÃÒ»¸öµã£¨`.`£©À´±íÊ¾¡£\n\n```\n$ . .bashrc\n```\n\n## ±ğÃû£¬alias ÃüÁî\n\n`alias`ÃüÁîÓÃÀ´ÎªÒ»¸öÃüÁîÖ¸¶¨±ğÃû£¬ÕâÑù¸ü±ãÓÚ¼ÇÒä¡£ÏÂÃæÊÇ`alias`µÄ¸ñÊ½¡£\n\n```\nalias NAME=DEFINITION\n```\n\nÉÏÃæÃüÁîÖĞ£¬`NAME`ÊÇ±ğÃûµÄÃû³Æ£¬`DEFINITION`ÊÇ±ğÃû¶ÔÓ¦µÄÔ­Ê¼ÃüÁî¡£×¢Òâ£¬µÈºÅÁ½²à²»ÄÜÓĞ¿Õ¸ñ£¬·ñÔò»á±¨´í¡£\n\nÒ»¸ö³£¼ûµÄÀı×ÓÊÇÎª`grep`ÃüÁîÆğÒ»¸ö`search`µÄ±ğÃû¡£\n\n```\nalias search=grep\n```\n\n`alias`Ò²¿ÉÒÔÓÃÀ´Îª³¤ÃüÁîÖ¸¶¨Ò»¸ö¸ü¶ÌµÄ±ğÃû¡£ÏÂÃæÊÇÍ¨¹ı±ğÃû¶¨ÒåÒ»¸ö`today`µÄÃüÁî¡£\n\n```\n$ alias today=\'date +"%A, %B %-d, %Y"\'\n$ today\nĞÇÆÚÒ», Ò»ÔÂ 6, 2020\n```\n\nÓĞÊ±ÎªÁË·ÀÖ¹ÎóÉ¾³ıÎÄ¼ş£¬¿ÉÒÔÖ¸¶¨`rm`ÃüÁîµÄ±ğÃû¡£\n\n```\n$ alias rm=\'rm -i\'\n```\n\nÉÏÃæÃüÁîÖ¸¶¨`rm`ÃüÁîÊÇ`rm -i`£¬Ã¿´ÎÉ¾³ıÎÄ¼şÖ®Ç°£¬¶¼»áÈÃÓÃ»§È·ÈÏ¡£\n\n`alias`¶¨ÒåµÄ±ğÃûÒ²¿ÉÒÔ½ÓÊÜ²ÎÊı£¬²ÎÊı»áÖ±½Ó´«ÈëÔ­Ê¼ÃüÁî¡£\n\n```\n$ alias echo=\'echo It says: \'\n$ echo hello world\nIt says: hello world\n```\n\nÉÏÃæÀı×ÓÖĞ£¬±ğÃû¶¨ÒåÁË`echo`ÃüÁîµÄÇ°Á½¸ö²ÎÊı£¬µÈÍ¬ÓÚĞŞ¸ÄÁË`echo`ÃüÁîµÄÄ¬ÈÏĞĞÎª¡£\n\nÖ¸¶¨±ğÃûÒÔºó£¬¾Í¿ÉÒÔÏñÊ¹ÓÃÆäËûÃüÁîÒ»ÑùÊ¹ÓÃ±ğÃû¡£Ò»°ãÀ´Ëµ£¬¶¼»á°Ñ³£ÓÃµÄ±ğÃûĞ´ÔÚ`~/.bashrc`µÄÄ©Î²¡£ÁíÍâ£¬Ö»ÄÜÎªÃüÁî¶¨Òå±ğÃû£¬ÎªÆäËû²¿·Ö£¨±ÈÈçºÜ³¤µÄÂ·¾¶£©¶¨Òå±ğÃûÊÇÎŞĞ§µÄ¡£\n\nÖ±½Óµ÷ÓÃ`alias`ÃüÁî£¬¿ÉÒÔÏÔÊ¾ËùÓĞ±ğÃû¡£\n\n```\n$ alias\n```\n\n`unalias`ÃüÁî¿ÉÒÔ½â³ı±ğÃû¡£\n\n```\n$ unalias lt\n```\n\n## ²Î¿¼Á´½Ó\n\n- [How to use getopts to parse a script options](https://linuxconfig.org/how-to-use-getopts-to-parse-a-script-options), Egidio Docile\n\nÎÄµµÀ´Ô´£º[[ https://wangdoc.com/bash/script.html | Bash ½Å±¾ÈëÃÅ ]]\nbash_freshman.pdf£º{F317508}\ndateCreated: 1637290420\ndateModified: 1637290420\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-pks6oa7hiv3dn3qkvgxu\ndocumentPHID: PHID-WIKI-tr2f2vjukhw4674p6d2h', metadata={'source': 'data/file\\wiki.csv', 'row': 18}), Document(page_content='id: 720\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Linux Java Awt Headless Ä£Ê½\nslug: special/linux_java_awt_headless/\ncontent: `OracleJDK`/`OpenJDK` Çø±ğÖ®Ò»£º\n\n`libawt_headless.so` ÔÚ `OracleJDK` ÊÇÄ¬ÈÏÌá¹©µÄ£¬¶øÔÚ `OpenJDK` ÖĞ£¬ĞèÒª¶îÍâ°²×°¡£\n\n`RHEL`/`Fedora` ÏÂ£º\n\n```lang=shell\nyum install java-1.8.0-openjdk-headless\n```\n\nÎªÈ·±£ÄÜÔÚÎŞÍ¼ĞÎ½çÃæµÄ `Linux` ÉÏÍ¨¹ı `java` Éú³ÉÍ¼Æ¬£¬±ØĞëÂú×ãÒÔÏÂÁ½µã£º\n\n1. È·±£ `libawt_headless.so` ´æÔÚ£¬ÕıÈ·°²×°\n2. ÆôÓÃ `-Djava.awt.headless = true`\ndateCreated: 1666170440\ndateModified: 1666170440\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-z5dubqevjotjws2lepad\ndocumentPHID: PHID-WIKI-6j25l3uwfvkh2pt3ity4', metadata={'source': 'data/file\\wiki.csv', 'row': 19}), Document(page_content='id: 375\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JavaÅÅÕÏÈı°å¸«\nslug: special/jvm-troubleshoot-methods/\ncontent: = Èı°å¸«\n\n- ½â¾ö `CPU` ¹ı¸ß\n- ½â¾öËÀËø£¬`deadlock`\n- ½â¾öÄÚ´æĞ¹Â¶\n\n= ½â¾ö `CPU` ¹ı¸ß\n\n1. ÓÃtopÃüÁî²é¿´cpuÕ¼ÓÃÇé¿ö\n2. ÓÃtop -HpÃüÁî²é¿´Ïß³ÌµÄÇé¿ö\n3. °ÑÏß³ÌºÅ×ª»»Îª16½øÖÆ\n4. ÓÃjstack¹¤¾ß²é¿´Ïß³ÌÕ»Çé¿ö\n5. ÓÃgrep²éÕÒ×ª»»Îª16½øÖÆºóµÄÏß³ÌID\n\n= ½â¾öËÀËø£¬`deadlock`\n\n1. ÓÃps/top/jps²éÕÒjava½ø³Ì\n2. jstack²é¿´ËÀËøÎÊÌâ\n\n= ½â¾öÄÚ´æĞ¹Â¶\n\n1. ÓÃps/top/jps²éÕÒjava½ø³Ì\n2. ÓÃjmapµ¼³öÄÚ´æĞÅÏ¢\n3. ÓÃjvisialvm/mat·ÖÎö\n\n= ×Ü½á\n\nÕâĞ©·½·¨ÆäÊµ¶¼±È½Ï¼òµ¥£¬Ò²±È½Ï³õ¼¶¡£ÓĞĞ©ÎÊÌâÄÜÍ¨¹ıÕâĞ©·½·¨½â¾ö£¬ÓĞĞ©Ö»ÄÜ¸ø³ö·½Ïò£¬ĞèÒª½øÒ»²½·ÖÎö¡£\n\nÁí£¬Õâ¶¼ÊÇ `Oracle JDK` µÄ·¨×Ó£¬`IBM JDK` ¹¤¾ßÊÇÁíÒ»Ì×£º\n\n- jca£¬·ÖÎöÏß³Ì {F343813}\n\n```lang=shell\njava -jar jca469.jar\n```\n\n- ha£¬·ÖÎö¶Ñ {F343812}\n\n```lang=shell\n# ¶Ñ´óĞ¡¿Éµ÷½Ú£¬Ò»°ãÒª±ÈĞèÒª´ò¿ªµÄ¶Ñ´ó1-2G\njava -Xms10240m -Xmx10240m -jar ha457.jar\n```\n\n- ga£¬·ÖÎögcÈÕÖ¾ {F343814}\n\n```lang=shell\njava -jar ga458.jar\n```\n\n\n= ²Î¿¼\n\nÈı°å¸« [[ https://mp.weixin.qq.com/s?__biz=Mzg4MjU0OTM1OA==&mid=2247499173&idx=1&sn=b4ef46c3d2bac53bf5af44acfe3a76c6&chksm=cf564aa4f821c3b291e83b2e48995b5f4c0564156b2ea4e5900fac30f7bbef7d09d64e507e18&mpshare=1&scene=1&srcid=0110tqFNHKP5n2hw4XMHfggt&sharer_sharetime=1641797668751&sharer_shareid=ca827079a201d4b8bc2c75d8c4d8f7c9&exportkey=AcMXFoemT5NlTFiZ4XrlaE4%3D&pass_ticket=x5XfeenC0oPscm4EpTXA7KyH79FDvtkI%2BNgvEbBQJnuLO8yEw3kfVxIYdh5jHhQe&wx_header=0#rd | JVMÅÅÕÏ ]]\ndateCreated: 1642381272\ndateModified: 1642381272\ndescription: \nchangeType: 2\nchangeRef: 106\nphid: PHID-WRDS-lgwgxqxn77ug4hbhsz6a\ndocumentPHID: PHID-WIKI-ybp2emyikzvf6odwufag', metadata={'source': 'data/file\\wiki.csv', 'row': 20}), Document(page_content='id: 288\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÔÚJDKÖĞÊ¹ÓÃÖ¤Êé\nslug: special/jdk-cert/\ncontent: `JDK`ÖĞÊ¹ÓÃÖ¤ÊéĞèÒªÓÃ`jks`¸ñÊ½£¨Java Key Store(JKS)ÎÄ¼ş£©\n\n×ª»»½Å±¾£º\n\n```lang=shell,lines=12\n#!/bin/sh\n\necho rm the old file\nrm -rf _.xfunds.com.p12 xfunds.jks\n\n# Í¨¹ıopensslºÏ²¢pemºÍkey\necho use openssl to mix pem and key\n#openssl pkcs12 -export -in _.xfunds.com.pem -inkey _.xfunds.com.key -out _.xfunds.com.p12 -name x-funds.com -CAfile ssl.com.der -caname ssl.com -chain\nopenssl pkcs12 -export -in _.xfunds.com.pem -inkey _.xfunds.com.key -out _.xfunds.com.p12 -name x-funds.com -CAfile ssl.com.der -caname ssl.com\n\n# ½«Ö¤Êéµ¼Èëjks\necho use keytool to import der to keystore\nkeytool -importcert -keystore xfunds.jks -alias USERTrust -file USERTrust.der -trustcacerts -v\nkeytool -importcert -keystore xfunds.jks -alias ca.ssl.com -file ssl.com.der -trustcacerts -v\n#keytool -importcert -keystore xfunds.jks -alias x-funds.com -file _.xfunds.com.der -trustcacerts -v\nkeytool -importkeystore -deststorepass 123456 -destkeystore xfunds.jks -srckeystore _.xfunds.com.p12 -srcstoretype PKCS12 -srcstorepass 123456 -alias x-funds.com\n\n# ²é¿´jksÖĞÖ¤ÊéĞÅÏ¢\necho use keytool to list certs in keystore\nkeytool -list -keystore xfunds.jks -v\n```\ndateCreated: 1641091551\ndateModified: 1641091551\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-e2d4kbaemv44luradam7\ndocumentPHID: PHID-WIKI-ogq6ty43yzf26mny5c24', metadata={'source': 'data/file\\wiki.csv', 'row': 21}), Document(page_content='id: 253\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÈçºÎÍ¨¹ıiKeymanÉú³É×ÔÇ©Ö¤Êé\nslug: special/ikeyman-cert/\ncontent: = Éú³ÉÆÕÍ¨×ÔÇ©Ö¤Êé\n\n´ò¿ªiKeyMan£¬Éú³ÉCMSÀàĞÍµÄÃÜÔ¿¿â\n{F332354}\n\nÊäÈëÃÜÂë£¬¼ÇµÃÒª¹´ÉÏ±£´æÃÜÂëÎÄ¼ş£¬·ñÔòIHSÎŞ·¨Ê¹ÓÃ\n{F332357}\n\nÑ¡Ôñ¸öÈËÖ¤Êé£¬Ñ¡ÔñĞÂÔö×ÔÇ©Ãû\n{F332360}\n{F332362}\n{F332365}\n\n= Éú³ÉÈı¼¶Ö¤Êé\n\n´ò¿ªiKeyMan£¬Éú³ÉCMSÀàĞÍµÄÃÜÔ¿¿â\n{F332367}\n\nÊäÈëÃÜÂë£¬¼ÇµÃÒª¹´ÉÏ±£´æÃÜÂëÎÄ¼ş£¬·ñÔòIHSÎŞ·¨Ê¹ÓÃ\n{F332369}\n\nÑ¡Ôñ¸öÈËÖ¤ÊéÇëÇó£¬Ñ¡ÔñĞÂÔö(×¢ÒâÊ¹ÓÃopensslÄ£ÄâÇ©ÊğµÄ»°£¬ÕâÀï¡°×éÖ¯¡±Ãû³ÆĞèÓëopensslµÄÄ£ÄâCAÃû³ÆÒ»ÖÂ)\n{F332371}\n{F332373}\n{F332375}\n\n½«ÎÄ¼şcertreq.arm½»ÈÏÖ¤ÖĞĞÄÈÏÖ¤£¬ÕâÀïÒÔopensslÄ£ÄâCAÉú³ÉÖ¤Êé\n```lang=shell\nopenssl ca -cert ca2cert.pem -keyfile private/ca2key.pem -in certreq.arm -out cert.pem -config ./openssl2.cnf\n```\n\n½«openssl¸ùÖ¤Êé¼°Ä£ÄâCAÖ¤Êéµ¼Èë\n{F332377}\n{F332379}\n{F332381}\n{F332383}\n\n½«Ä£ÄâÉú³ÉµÄÖ¤Êé½ÓÊÕ\n{F332385}\n{F332387}\ndateCreated: 1640308616\ndateModified: 1640308616\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-w272rs6f72tt55nfmay6\ndocumentPHID: PHID-WIKI-u73tsyzgcxalaxzc7gnx', metadata={'source': 'data/file\\wiki.csv', 'row': 22}), Document(page_content='id: 259\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÈçºÎÔÚIHSÏÂÅäÖÃÖ¤Êé\nslug: special/ihs-cert/\ncontent: ÆôÓÃmod_ibm_ssl\n```lang=txt\nLoadModule ibm_ssl_module modules/mod_ibm_ssl.so\n```\n\nÌí¼ÓÅäÖÃ\n```lang=txt\n<IfModule mod_ibm_ssl.c>  \n    Listen 0.0.0.0:443  \n\n    <VirtualHost *:443>    \n        SSLEnable  \n    </VirtualHost>\n</IfModule>\n\nSSLDisable       \n\nKeyFile "C:\\Program Files\\IBM\\SSLKeyDB\\key.kdb"\n```\ndateCreated: 1640308913\ndateModified: 1640308913\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-xymsoopyrc3mwj5eeb4v\ndocumentPHID: PHID-WIKI-jetvddnulbvzwywyfs3x', metadata={'source': 'data/file\\wiki.csv', 'row': 23}), Document(page_content='id: 265\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: CAÖ¤Êé\nslug: special/cert/\ncontent: 1. ÏòµÚÈı·½»ú¹¹CAÌá½»¹«Ô¿¡¢×éÖ¯ĞÅÏ¢¡¢¸öÈËĞÅÏ¢(ÓòÃû)µÈĞÅÏ¢²¢ÉêÇëÈÏÖ¤;\n2. CAÍ¨¹ıÏßÉÏ¡¢ÏßÏÂµÈ¶àÖÖÊÖ¶ÎÑéÖ¤ÉêÇëÕßÌá¹©ĞÅÏ¢µÄÕæÊµĞÔ£¬Èç×éÖ¯ÊÇ·ñ´æÔÚ¡¢ÆóÒµÊÇ·ñºÏ·¨£¬ÊÇ·ñÓµÓĞÓòÃûµÄËùÓĞÈ¨µÈ;\n3. ÈçĞÅÏ¢ÉóºËÍ¨¹ı£¬CA»áÏòÉêÇëÕßÇ©·¢ÈÏÖ¤ÎÄ¼ş-Ö¤Êé¡£\n\n**Ö¤Êé°üº¬ÒÔÏÂĞÅÏ¢£º**\n\n- ÉêÇëÕß¹«Ô¿\n- ÉêÇëÕßµÄ×éÖ¯ĞÅÏ¢ºÍ¸öÈËĞÅÏ¢\n- Ç©·¢»ú¹¹ CAµÄĞÅÏ¢\n- ÓĞĞ§Ê±¼ä\n- Ö¤ÊéĞòÁĞºÅµÈĞÅÏ¢µÄÃ÷ÎÄ\n- Í¬Ê±°üº¬Ò»¸öÇ©Ãû¡£\n\nÆäÖĞÇ©ÃûµÄ²úÉúÊÇÕâÑù×ÓµÄ£º\n\n1. Ê¹ÓÃÉ¢ÁĞº¯Êı¶Ô¹«¿ªµÄÃ÷ÎÄĞÅÏ¢£¨¹«Ô¿ºÍÆäËûĞÅÏ¢£©½øĞĞ¼ÆËãµÃµ½ĞÅÏ¢ÕªÒª\n2. ²ÉÓÃ CA µÄË½Ô¿¶ÔĞÅÏ¢ÕªÒª½øĞĞ¼ÓÃÜµÃµ½ÃÜÎÄ£¬Õâ¸öÃÜÎÄ¾ÍÊÇÇ©Ãû\ndateCreated: 1640310225\ndateModified: 1640310225\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-cnyrcswfy42jukafuwkc\ndocumentPHID: PHID-WIKI-qesd5ldbd53hiid22id6', metadata={'source': 'data/file\\wiki.csv', 'row': 24}), Document(page_content='id: 263\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: HTTPSÊÇÉ¶\nslug: special/what-is-https/\ncontent: = HTTPS ÊÇÉ¶\n{F332417}\n{F332419}\n\n= HTTPS Á÷³Ì\n{F332422}\n{F332421}\n{F332423}\n\n= ²Î¿¼\n- [[ https://zhuanlan.zhihu.com/p/79367346 | HttpºÍhttps½¨Á¢Á¬½ÓÈ«¹ı³Ì ]]\n- [[ https://www.jianshu.com/p/dc5f73e4cef3 | ÁÄÒ»ÁÄHTTPSµÄ»ù±¾Ô­ÀíÓë¹¤×÷Á÷³Ì ]]\n- [[ https://tech.youzan.com/web-https-engineering/ | Ç³Ì¸ÍÆ½øÈ«Õ¾ HTTPS ÏîÄ¿-¹¤³ÌÆª ]]\ndateCreated: 1640309771\ndateModified: 1640309771\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-73j3ah5c2jjfuqubsxdb\ndocumentPHID: PHID-WIKI-7gjy6c36hn4euypt7xhn', metadata={'source': 'data/file\\wiki.csv', 'row': 25}), Document(page_content='id: 376\nversion: 4\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JavaÅÅÕÏÈı°å¸«\nslug: troubleshot/jvm-troubleshoot-methods/\ncontent: \ndateCreated: 1642381272\ndateModified: 1642381272\ndescription: \nchangeType: 3\nchangeRef: 118\nphid: PHID-WRDS-57mhrxdndtsijjljtl3x\ndocumentPHID: PHID-WIKI-7nbw3nmbzjtdifykzqky', metadata={'source': 'data/file\\wiki.csv', 'row': 26}), Document(page_content='id: 273\nversion: 4\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: RCSÊı¾İ¿âÊÂÎñ¿ØÖÆÎÊÌâµ¼ÖÂËÀËø\nslug: troubleshot/rcs-deadlock/\ncontent: = ÎÊÌâºËĞÄ\n`EOPS` µ÷¶È£¬Ä¬ÈÏÆôÓÃ´óÊÂÎñ¡£\n\n # CA¼ÇÂ¼µÚÒ»²½£¬¸ù¾İÕ®È¯¶¨ÒåÏÖ½ğÁ÷£¬×Ô¶¯¸üĞÂCA¼ÆÁ¿ÈÎÎñµÄ·½·¨£¬´æÔÚÉ¾³ıÎŞĞ§ÅúÁ¿ÈÎÎñµÄÇé¿ö¡£\n # È»ºó²éÑ¯´ı´¦ÀíµÄ¼ÆÁ¿ÈÎÎñ£¬Ñ­»·µ÷ÓÃ¶àÏß³Ì´¦Àí¡£\n   - ¶àÏß³ÌÀïÃæ£¬´¦ÀíÍê³Éºó£¬»á¸üĞÂ¼ÆÁ¿ÈÎÎñµÄ×´Ì¬¡£\n\n(IMPORTANT)¼´Ç¶Ì×ÊÂÎñ£¬ÄÚ²ãµÄÊÂÎñºÍ¶àÏß³Ì¿ªÆôµÄĞÂÊÂÎñ£¬Í¬Ê±²Ù×÷Ò»Ìõ¼ÇÂ¼¡£\n\n= ´úÂë·ÖÎö\n\n== Java ´úÂë\nºóÏßÊ¹ÓÃ `EOPS` °üÀïÃæ£¬¸ù¾İ `EOPS` Æ½Ì¨»áµ÷ÆğµÄÖ¸Áî£¬Ö´ĞĞ±í´ïÊ½ÅäÖÃµÄº¯Êı¡£\n{F320584}\n¶ø `ProxyService.doScript` ÀïÃæ´æ×ÅÊÖ¹¤¿ªÆôÊÂÎñµÄ´úÂë\n{F320586}\n\n== Spring XML ÅäÖÃ\n¸ù¾İ `datasource` ÊÂÎñ `aop` ÅäÖÃ£¬»á±»´úÀí¡£\n{F320588}\n\n== ½áÂÛ\nÒò´ËËäÈ»ºóÏßµÄ·½·¨Ã»ÓĞÊÂÎñ£¬µ«ÊÇ¶¼»á¼ÓÈëµ½Íâ²¿ÆôÓÃµÄ´óÊÂÎñÖĞ¡£\n\n== ÈÕÖ¾¶ÔÓ¦\n¾ßÌå´òÓ¡³öÀ´µÄÈÕÖ¾\n{F320590}\n¶ÔÓ¦ÉÏÃæ2¸öÊÂÎñ\n\n= ¸Ä½ø·½°¸\n # ÓÉÓÚ `ProxyService.doScript` ÀïÃæ´æ×ÅÊÖ¹¤¿ªÆôÊÂÎñµÄ´úÂë£¬¿ÉÒÔÍ¨¹ıµ÷ÕûEOPSÅäÖÃ½â¾ö£¬¼´ £º    \n\n```lang=txt\n#½«Õâ¶ÎÅäÖÃ×¢ÊÍµô¡£xnetClient.com.erayt.solar.module.schedule.LocalSchedulerFactoryBean.transactionManager=transactionManager\n```\n\n # Õë¶ÔµÚÒ»¸öÊÂÎñ£¬Èç¹û¿ÉÒÔÍ¨¹ı `Spring-DataSource.xml` ÅäÖÃÊÂÎñÀ¹½ØÆ÷µÄµØ·½¹ıÂËµô£¬¾Í¿ÉÒÔ½â¾öÎÊÌâ¡£\n # Èç¹û `Spring-DataSource.xml` ÄÇ¸öµÄÊÂÎñÀ¹½ØÆ÷ÎŞ·¨¹ıÂË£¬ÄÇÃ´Ö»ÄÜ¸ÄÔìºóÏßµÄÅúÁ¿´úÂë£¬Íâ²¿¸üĞÂ±íÊı¾İ¶¼ÒªÆğ¶ÀÁ¢ÊÂÎñÈ¥½â¾ö¡£Í¬Ê±ÅÅ²éÆäËûµÄÅúÁ¿²½ÖèÊÇ·ñÓĞÀàËÆÎÊÌâ¡£\n # ÈÕÖ¾·½Ãæ£¬ËùÓĞÕë¶ÔÅúÁ¿É¾³ıµÄ´úÂë£¬ÇëÔÚÅúÁ¿É¾³ıÇ°£¬ÈÕÖ¾´òÓ¡´ıÉ¾³ıµÄĞÅÏ¢¡££¨ÅúÁ¿É¾³ı£¬`SQL` ÈÕÖ¾¶¼²»»á´òÓ¡²ÎÊı£©\n\nÀ´×Ô×Ê½ğ·çÏÕ²¿²Ì°º·É( @caiangfei )µÄ·ÖÎö¡£\ndateCreated: 1640597835\ndateModified: 1640597835\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-tbsyq7pofdphj2hbj42c\ndocumentPHID: PHID-WIKI-qvfyb6a6cr5br5fy57mn', metadata={'source': 'data/file\\wiki.csv', 'row': 27}), Document(page_content='id: 595\nversion: 4\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÄÚ²¿ÎÊÌâÍ¨±¨0006,ÕıÈ·Ê¹ÓÃMina×÷Îª¿Í»§¶Ë\nslug: troubleshot/mina-cli-wrang-usage/\ncontent: ## ´íÎóÊ¾Àı\n\n```lang=java,lines=10\npublic  byte[] sendMessageCall(String host,int port,byte[] sendBuffer){\n    byte[] receivedBuffer = null;//½ÓÊÕ±¨ÎÄ\n    NioSocketConnector connector = null;\n    IoSession session = null;//»á»°\n    try{\n        logger.info("************Á¬½Ó¶Ô·½·şÎñÆ÷¿ªÊ¼************");\n        connector = new NioSocketConnector();\n        connector.getFilterChain().addLast("codec", new ProtocolCodecFilter(new MinaClientCodecFactory()));\n        connector.setConnectTimeoutMillis(timeOutMillis);\n        connector.getSessionConfig().setUseReadOperation(true); //mina»á×Ô¶¯Ìí¼ÓÒ»¸öÄ¬ÈÏµÄIoHandlerÊµÏÖ\n        ConnectFuture connect=connector.connect(new InetSocketAddress(host, port));\n        connect.awaitUninterruptibly();\n        if(connect.isConnected()){\n            logger.info("************Á¬½Ó¶Ô·½·şÎñÆ÷³É¹¦************");\n            session = connect.getSession();//»á»°\n        }else{\n            logger.info("************Á¬½Ó¶Ô·½·şÎñÆ÷Ê§°Ü£¬Çë¼ì²éÅäÖÃĞÅÏ¢ÊÇ·ñÕıÈ·***************");\n            throw new ServicesException("Á¬½Ó¶Ô·½·şÎñÆ÷Ê§°Ü£¬Çë¼ì²éÅäÖÃĞÅÏ¢ÊÇ·ñÕıÈ·");\n        }\n        if(session!=null && session.isConnected()){\n            //·¢ËÍÊ®½øÖÆÊı¾İ,UTF-8¸ñÊ½\n            WriteFuture write= session.write(new String(sendBuffer,"UTF-8")).awaitUninterruptibly();\n            if(write.isWritten()){\n                ReadFuture readFuture = session.read();\n                if(readFuture.awaitUninterruptibly(idleTime, TimeUnit.SECONDS)){\n                    Object message = readFuture.getMessage();\n                    if(null==message){\n                        throw new ServicesException("¶Ô·½·şÎñÆ÷ÎŞÊı¾İ·µ»Ø");\n                    }\n                    receivedBuffer =message.toString().getBytes("GBK");\n                    logger.info("½ÓÊÕ¶Ô·½·µ»Ø±¨ÎÄ£º"+new String(receivedBuffer,"GBK"));\n                }else{\n                    logger.info("¶ÁÈ¡»á»°³¬Ê±");\n                    throw new ServicesException("¶ÁÈ¡»á»°³¬Ê±" );\n                }\n            }else{\n                logger.info("·¢ËÍÊı¾İÒì³££¡");\n                throw new ServicesException("·¢ËÍÊı¾İÒì³££¡" );\n            }\n        }else{\n            logger.info("»ñÈ¡»á»°Ê§°Ü");\n            throw new ServicesException("»ñÈ¡»á»°Ê§°Ü");\n        }\n    }catch (ServicesException e){\n        logger.error("Á¬½Ó¶Ô·½·şÎñÒÑÖªÒì³££¡Òì³£Ô­Òò£º"+e.getMessage(),e);\n        throw new ServicesException(e.getMessage());\n    } catch(Exception e){\n        logger.error("Á¬½Ó¶Ô·½·şÎñÎ´ÖªÒì³££¡Òì³£Ô­Òò£º"+e.getMessage(),e);\n        throw new ServicesException(e.getMessage());\n    }finally{\n        if(session!=null){\n            session.close(true);\n            session.getService().dispose();\n            connector.dispose();\n        }\n    }\n    return receivedBuffer;\n}\n```\n\n¸Ã´úÂë´æÔÚÇ±ÔÚÎÊÌâ£º**¸ß²¢·¢ÏÂ£¬Ïß³Ì³Ø»á¶ÌÔİµØ³å¸ß**\n\n### ÖØµã´úÂëÕªÒª\n\n´Ë´¦´´½¨ `connector`\n```lang=java,lines=10\n        connector = new NioSocketConnector();\n```\n\nµ÷ÓÃ `NioSocketConnector`\n```lang=java,lines=10\n    public NioSocketConnector() {\n        super(new DefaultSocketSessionConfig(), NioProcessor.class);\n        ((DefaultSocketSessionConfig) getSessionConfig()).init(this);\n    }\n```\n\nµ÷ÓÃ `AbstractPollingIoConnector`\n```lang=java,lines=10\n    protected AbstractPollingIoConnector(IoSessionConfig sessionConfig, Class<? extends IoProcessor<S>> processorClass) {\n        this(sessionConfig, null, new SimpleIoProcessorPool<S>(processorClass), true);\n    }\n```\n\n**ÖØµã**£ºµ÷ÓÃ `SimpleIoProcessorPool` ÖĞ´úÂë£¬´´½¨³ö `Executors.newCachedThreadPool()`¡£\n```lang=java,lines=10\n        // Create the executor if none is provided\n        createdExecutor = executor == null;\n\n        if (createdExecutor) {\n            this.executor = Executors.newCachedThreadPool();\n            // Set a default reject handler\n            ((ThreadPoolExecutor) this.executor).setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());\n        } else {\n            this.executor = executor;\n        }\n```\n\nÕâÊÇÒ»¸ö `[0, 2147483647]` Çø¼äÏß³Ì³Ø£¬µÈÍ¬ÓÚÎŞ½ç¶ÓÁĞÏß³Ì³Ø: ÓÅÏÈ¸´ÓÃÏß³Ì³ØÖĞÒÑÓĞÏß³Ì£¬Èô²»¹»£¬Á¢¿Ì´´½¨ĞÂÏß³Ì¡£\n```lang=java,lines=10\n    public static ExecutorService newCachedThreadPool() {\n        return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\n                                      60L, TimeUnit.SECONDS,\n                                      new SynchronousQueue<Runnable>());\n    }\n```\n\n### ½â¶Á\n\nÒ²¾ÍÊÇËµ£¬ÔÚÃ¿´Îµ÷ÓÃ `sendMessageCall` Ê±£¬½«´´½¨ `connector`¡£`connector` ½«Òşº¬´´½¨ÒÔÏÂ×ÊÔ´£º\n\n- Ïß³Ì³ØÒ»¸ö\n- `Selector` Ò»¸ö\n\n¾ùÎªÖØ¶È×ÊÔ´¡£ËäÈ»»á±»»ØÊÕ£¬µ«»ØÊÕËÙ¶È²»Ò»¶¨ÄÜ¸úÉÏ²¢·¢ËÙ¶È¡£\n\n## ²»ÕıÈ·Ê¹ÓÃºó¹û\n\nÄ³ÏµÍ³ÔÚÉú²úÉÏÊ¹ÓÃÁËÉÏÊö´úÂë£¬ÔÚ¸ß²¢·¢Çé¿öÏÂ£¬×ÊÔ´ºÄ¾¡£¬±¨³öÈçÏÂ´íÎó£º\n\n- **The process file table is full**\n- **Too many open files**\n\n## ÕıÈ·Ê¹ÓÃ `Mina` ×÷Îª¿Í»§¶Ë\n\n1. `connector` Ó¦×÷ÎªÈ«¾Ö×ÊÔ´Ê¹ÓÃ\n1. Ã¿´ÎÁ¬½ÓÓ¦Í¨¹ı `session` ½øĞĞ´¦ÖÃ\n\n### Ê¾Àı\n\n```lang=java,lines=10\npublic class SimpleClient {\n\tprivate IoConnector connector;\n\tprivate IoHandler handler;\n\n\tpublic SimpleClient() {\n\t}\n\n\tpublic void init() throws Exception {\n\t\tconnector = new NioSocketConnector();\n\t\thandler = new SimpleClientHandler();\n\t\tInetSocketAddress inet = new InetSocketAddress("192.168.137.20", 10080);\n\t\tconnector.setDefaultRemoteAddress(inet);\n\t\t...\n\t}\n\n\tpublic byte[] send(byte[] msg) throws Exception {\n\t\tConnectFuture cf = connector.connect();\n                IoSession session = cf.getSession();\n                ...\n                session.close();\n\t}\n\n\tpublic void destroy() throws Exception {\n\t\tThread.sleep(1000);\n\t\tconnector.dispose();\n\t}\n```\n\n## ²¢²»ÊÇ×îÓÅÑ¡Ôñ\n\nÈôÊÇ±ØĞëÍ¬²½»ñÈ¡Êı¾İµÄ½á¹¹£¬Ñ¡ÓÃ `Mina`/`Netty` Ö®ÀàÒì²½¸ßĞÔÄÜÍøÂçÍ¨Ñ¶¿ò¼Ü²¢²»ÊÇ×îºÃµÄÑ¡Ôñ¡£¸üºÃµÄÑ¡ÔñÊÇÊ¹ÓÃ´«Í³ÍøÂçÍ¨Ñ¶£¬Ñ¡Ôñ `Socket`£¬ÒÔ×î»ù±¾µÄ·½Ê½½øĞĞÍ¨Ñ¶¡£¶ÔÍ¬²½À´Ëµ£¬ÑÓÊ±×îµÍ£¬±ß¼Ê³É±¾×îµÍ¡£\ndateCreated: 1652318619\ndateModified: 1652318619\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-nvyiqo2vkfkahc7w5pe5\ndocumentPHID: PHID-WIKI-yekgsilypcxlpnoweflh', metadata={'source': 'data/file\\wiki.csv', 'row': 28}), Document(page_content='id: 370\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: F5µ¼ÖÂµÄTCP 10045ÎÊÌâ\nslug: troubleshot/f5-cause-tcp-10045/\ncontent: == ÎÊÌâÏÖÏó£º\n\nÄÚÍâÍøÂçÒÑ¾­È«²¿´òÍ¨£¬µ«ÊÇÍâÍø¿Í»§¶ËµÇÂ¼ºó£¬ÍøÂç³öÏÖÉÁ¶Ï±¨ `socket 10045` µÄ´íÎó\n\n== ½â¾ö¹ı³Ì£º\n\n¶¨Î»¹ı³Ì\n\n1.ÏÈÅäºÏĞĞÄÚ½øĞĞÍâÍø×¥°ü  ¸øĞĞÄÚ·ÖÎö£¬ĞĞÄÚ²¢ÎŞ·ÖÎö³öÊ²Ã´ÎÊÌâ\n2.ÅäºÏĞĞÄÚÔÚ `DMZ` ³¢ÊÔ×°¿Í»§¶ËÍ¨¹ı `HTTP` Á¬½Ó²»¹ÜÊÇÍ¨¹ı `IHS` »¹ÊÇÖ±Áª£¬¶¼ÎŞÎÊÌâ\n3.Í£Ö¹ÉÏº£·şÎñÆ÷£¬ÉîÛÚÒ²Ö»ÁôÒ»Ì¨·şÎñÆ÷£¬ÍâÍøÈÔÈ»±¨`10045`´íÎó£¬ÇÒ·şÎñÆ÷ `IHS` ÎŞÈÎºÎÈÕÖ¾£¬¹«Ë¾ÓëÏÖ³¡·ÖÎö£¬»ù±¾¶¨Î»ÊÇĞĞÄÚ `F5` µÄÅäÖÃÎÊÌâ\n\n== ½â¾öÎÊÌâ£º\n\n(NOTE)²ÎÊıµ÷Õû£º`F5` µÄÄ£Ê½ÓÉ `Perfermance L4`µ÷ÕûÎª `Standard` Ä£Ê½¡£Ç°ÃæÄÇ¸öÄ£Ê½»áÕë¶ÔĞÔÄÜ¶ÔÊı¾İ±¨ÎÄ×ö³öÒ»Ğ©ÓÅ»¯£¬ºóÃæµÄÄ£Ê½ÊÇ¶ÔÊı¾İ±¨ÎÄ´¿×ª·¢¡£\n\n== ËµÃ÷£º\n\n±¾ÎÊÌâÏÈºóÁ½´ÎÔÚ²»Í¬¿Í»§´¦³öÏÖ£¬ĞèÒªÒıÆğ×¢Òâ£¬×÷Îª±¸Íü\ndateCreated: 1642308707\ndateModified: 1642308707\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-k7r4sus4z4s3mo5qsevn\ndocumentPHID: PHID-WIKI-bhdcvxqcr4lfsgfe5eaz', metadata={'source': 'data/file\\wiki.csv', 'row': 29}), Document(page_content='id: 657\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ò»´ÎËÀËøµ¼ÖÂµÄUAT»·¾³·ÃÎÊÒì³£ÎÊÌâ\nslug: troubleshot/deadlock/\ncontent: \ndateCreated: 1655262822\ndateModified: 1655262822\ndescription: \nchangeType: 3\nchangeRef: 185\nphid: PHID-WRDS-b57m3kwuhkaim35kwriw\ndocumentPHID: PHID-WIKI-v2g5pb3ganbgunb77a2p', metadata={'source': 'data/file\\wiki.csv', 'row': 30}), Document(page_content='id: 329\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Î´¼ÓÏŞÖÆÇé¿öÏÂ£¬ÎÄ¼ş±»Î´¾­ÊÚÈ¨ÏÂÔØ\nslug: troubleshot/download-file-leak/\ncontent: \ndateCreated: 1641799356\ndateModified: 1641799356\ndescription: \nchangeType: 3\nchangeRef: 105\nphid: PHID-WRDS-hpninodoywieo5n6cdhw\ndocumentPHID: PHID-WIKI-u5z3t7vtd2mgt3kotraa', metadata={'source': 'data/file\\wiki.csv', 'row': 31}), Document(page_content='id: 345\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÄÚ²¿ÎÊÌâÍ¨±¨0003\nslug: troubleshot/inner-bulletin-003/\ncontent: ## ÏÖÏó\n\nÊ¹ÓÃ `WAS` Êı¾İ¿âÁ¬½Ó³Ø¹ı³ÌÖĞÓöµ½ `StaleConnectionException`\n\nÊ¹ÓÃ¹ı³ÌÖĞ£¬±¨£º\n\n```verilog\nCause: com.ibm.websphere.ce.cm.StaleConnectionException: IO Error: Connection reset\n; SQL []; IO Error: Connection reset; nested exception is com.ibm.websphere.ce.cm.StaleConnectionException: IO Error: Connection reset\n        at ...\n```\n\nÉæ¼° `WAS` °æ±¾£º\n\n- ËùÓĞÆ½Ì¨µÄ `WAS` £¨9.0, 8.5.5, 8.0, 7.0£©¶¼»á´¥·¢\n\n## Ô­Òò\n\nÊı¾İ¿âÁ¬½ÓÔÚÊ¹ÓÃ¹ı³ÌÖĞÒòÎªÖÖÖÖÌØÊâÔ­Òò£¨Á¬½Ó³¬Ê±¡¢Êı¾İ¿âÏÂÏß¡¢ÍøÂç¹ÊÕÏ£©µ¼ÖÂÁ¬½Ó²»¿ÉÓÃ£¬¶ø `WAS` ³¢ÊÔÖØÁ¬Ê§°Üºó¾Í»á±¨Õâ¸ö¡£\n\n## ½â¾ö\n\n- ÆôÓÃÁ¬½ÓÓĞĞ§ĞÔ¼ì²é£¨`WAS` ¿ªÆôĞ£ÑéĞÂÁ¬½ÓÑ¡Ïî£¬Ğ£ÑéÒÑÓĞÁ¬½ÓÑ¡Ïî£©\n  - **×¢Òâ£¬Ö»¿ªÆô¡°Ğ£ÑéĞÂÁ¬½Ó¡±²»ÄÜÍêÈ«½â¾ö£¡**¿É½â¾öµÄ³¡¾°ÊÇÔÚ»ñÈ¡Á¬½ÓÊ±£¬±£Ö¤Á¬½ÓÓĞĞ§¡£¶øÒÑ¾­È¡µ½µÄÁ¬½Ó£¬¹ı³ÌÖĞÎŞ·¨±£Ö¤ÆäÓĞĞ§¡£\n  - ¿ªÆô¡°Ğ£ÑéÒÑÓĞÁ¬½ÓÑ¡Ïî¡±¿É½â¾öÎÊÌâ£¬µ«ÊÇ»á¼«´óÓ°ÏìĞÔÄÜ\n- Ò²¿ÉÒÔ×Ô¼º²¶»ñ `StaleConnectionException` Òì³££¬×ÔĞĞÖØÊÔ `n` ´Î¡££¨²»ÍÆ¼ö£º´úÂëÖĞÇ¿ñîºÏÁË `IBM` µÄÀà£©\n\n## ²Î¿¼\n\n[IBM ¹Ù·½ËµÃ÷](https://www.ibm.com/support/pages/websphere-application-server-staleconnectionexception)\ndateCreated: 1642123032\ndateModified: 1642123032\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-o4uq2rznu6uy4ry5dggi\ndocumentPHID: PHID-WIKI-w4txckj53po2ue6mqpc3', metadata={'source': 'data/file\\wiki.csv', 'row': 32}), Document(page_content='id: 574\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÄÚ²¿ÎÊÌâÍ¨±¨0005,ÓÉlistFilesµ¼ÖÂµÄOOM\nslug: troubleshot/listfiles-oom/\ncontent: `javacore` Æ¬¶Î\n{F444067}\n\n`heapdump`(`phd`¸ñÊ½£©Æ¬¶Î\n{F444066}\n\nÏà¹Ø´úÂë (`java.io.File#listFiles`)£º\n```lang=java\n    public File[] listFiles(FilenameFilter filter) {\n        String[] ss = this.normalizedList();\n        if (ss == null) {\n            return null;\n        } else {\n            ArrayList<File> files = new ArrayList();\n            String[] var4 = ss;\n            int var5 = ss.length;\n\n            for(int var6 = 0; var6 < var5; ++var6) {\n                String s = var4[var6];\n                if (filter == null || filter.accept(this, s)) {\n                    files.add(new File(s, this));\n                }\n            }\n\n            return (File[])files.toArray(new File[files.size()]);\n        }\n    }\n```\n\nÉÏÃæµÄ `ss` ¾ÍÊÇ `heapdump` ÖĞµÄ `String[]` Êı×é£¬ÒòÎª¸ÃÎÄ¼ş¼ĞÏÂÎÄ¼şÊµÔÚÌ«¶à(`22,713,301`¸öÎÄ¼ş)¡£µ¥Õâ¸ö¶ÔÏó£¬¾ÍÕ¼ÓÃÁË`84.48%`µÄÄÚ´æ¡£È»ºóÔÚ´´½¨`File` ¶ÔÏóµÄ `ArrayList` Ê±£¬ÄÚ´æ²»×ãÁË¡£\n\n¸ĞĞËÈ¤µÄÍ¬ÊÂ¿ÉÒÔ³¢ÊÔ·ÖÎöÑù±¾: {F444070}\ndateCreated: 1651729003\ndateModified: 1651729003\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-hwlkw5o3mbjhac7chgs3\ndocumentPHID: PHID-WIKI-jaumuirzrtthqprpa24c', metadata={'source': 'data/file\\wiki.csv', 'row': 33}), Document(page_content='id: 578\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÄÚ²¿Í¨±¨0006,ÕıÈ·Ê¹ÓÃMina×÷Îª¿Í»§¶Ë\nslug: troubleshot/mina-cli-wrang-usage/\ncontent: ## ´íÎóÊ¾Àı\n\n```lang=java,lines=10\npublic  byte[] sendMessageCall(String host,int port,byte[] sendBuffer){\n    byte[] receivedBuffer = null;//½ÓÊÕ±¨ÎÄ\n    NioSocketConnector connector = null;\n    IoSession session = null;//»á»°\n    try{\n        logger.info("************Á¬½Ó¶Ô·½·şÎñÆ÷¿ªÊ¼************");\n        connector = new NioSocketConnector();\n        connector.getFilterChain().addLast("codec", new ProtocolCodecFilter(new MinaClientCodecFactory()));\n        connector.setConnectTimeoutMillis(timeOutMillis);\n        connector.getSessionConfig().setUseReadOperation(true); //mina»á×Ô¶¯Ìí¼ÓÒ»¸öÄ¬ÈÏµÄIoHandlerÊµÏÖ\n        ConnectFuture connect=connector.connect(new InetSocketAddress(host, port));\n        connect.awaitUninterruptibly();\n        if(connect.isConnected()){\n            logger.info("************Á¬½Ó¶Ô·½·şÎñÆ÷³É¹¦************");\n            session = connect.getSession();//»á»°\n        }else{\n            logger.info("************Á¬½Ó¶Ô·½·şÎñÆ÷Ê§°Ü£¬Çë¼ì²éÅäÖÃĞÅÏ¢ÊÇ·ñÕıÈ·***************");\n            throw new ServicesException("Á¬½Ó¶Ô·½·şÎñÆ÷Ê§°Ü£¬Çë¼ì²éÅäÖÃĞÅÏ¢ÊÇ·ñÕıÈ·");\n        }\n        if(session!=null && session.isConnected()){\n            //·¢ËÍÊ®½øÖÆÊı¾İ,UTF-8¸ñÊ½\n            WriteFuture write= session.write(new String(sendBuffer,"UTF-8")).awaitUninterruptibly();\n            if(write.isWritten()){\n                ReadFuture readFuture = session.read();\n                if(readFuture.awaitUninterruptibly(idleTime, TimeUnit.SECONDS)){\n                    Object message = readFuture.getMessage();\n                    if(null==message){\n                        throw new ServicesException("¶Ô·½·şÎñÆ÷ÎŞÊı¾İ·µ»Ø");\n                    }\n                    receivedBuffer =message.toString().getBytes("GBK");\n                    logger.info("½ÓÊÕ¶Ô·½·µ»Ø±¨ÎÄ£º"+new String(receivedBuffer,"GBK"));\n                }else{\n                    logger.info("¶ÁÈ¡»á»°³¬Ê±");\n                    throw new ServicesException("¶ÁÈ¡»á»°³¬Ê±" );\n                }\n            }else{\n                logger.info("·¢ËÍÊı¾İÒì³££¡");\n                throw new ServicesException("·¢ËÍÊı¾İÒì³££¡" );\n            }\n        }else{\n            logger.info("»ñÈ¡»á»°Ê§°Ü");\n            throw new ServicesException("»ñÈ¡»á»°Ê§°Ü");\n        }\n    }catch (ServicesException e){\n        logger.error("Á¬½Ó¶Ô·½·şÎñÒÑÖªÒì³££¡Òì³£Ô­Òò£º"+e.getMessage(),e);\n        throw new ServicesException(e.getMessage());\n    } catch(Exception e){\n        logger.error("Á¬½Ó¶Ô·½·şÎñÎ´ÖªÒì³££¡Òì³£Ô­Òò£º"+e.getMessage(),e);\n        throw new ServicesException(e.getMessage());\n    }finally{\n        if(session!=null){\n            session.close(true);\n            session.getService().dispose();\n            connector.dispose();\n        }\n    }\n    return receivedBuffer;\n}\n```\n\n¸Ã´úÂë´æÔÚÇ±ÔÚÎÊÌâ£º**¸ß²¢·¢ÏÂ£¬Ïß³Ì³Ø»á¶ÌÔİµØ³å¸ß**\n\n### ÖØµã´úÂëÕªÒª\n\n´Ë´¦´´½¨ `connector`\n```lang=java,lines=10\n        connector = new NioSocketConnector();\n```\n\nµ÷ÓÃ `NioSocketConnector`\n```lang=java,lines=10\n    public NioSocketConnector() {\n        super(new DefaultSocketSessionConfig(), NioProcessor.class);\n        ((DefaultSocketSessionConfig) getSessionConfig()).init(this);\n    }\n```\n\nµ÷ÓÃ `AbstractPollingIoConnector`\n```lang=java,lines=10\n    protected AbstractPollingIoConnector(IoSessionConfig sessionConfig, Class<? extends IoProcessor<S>> processorClass) {\n        this(sessionConfig, null, new SimpleIoProcessorPool<S>(processorClass), true);\n    }\n```\n\n**ÖØµã**£ºµ÷ÓÃ `SimpleIoProcessorPool` ÖĞ´úÂë£¬´´½¨³ö `Executors.newCachedThreadPool()`¡£\n```lang=java,lines=10\n        // Create the executor if none is provided\n        createdExecutor = executor == null;\n\n        if (createdExecutor) {\n            this.executor = Executors.newCachedThreadPool();\n            // Set a default reject handler\n            ((ThreadPoolExecutor) this.executor).setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());\n        } else {\n            this.executor = executor;\n        }\n```\n\nÕâÊÇÒ»¸ö `[0, 2147483647]` Çø¼äÏß³Ì³Ø£¬µÈÍ¬ÓÚÎŞ½ç¶ÓÁĞÏß³Ì³Ø: ÓÅÏÈ¸´ÓÃÏß³Ì³ØÖĞÒÑÓĞÏß³Ì£¬Èô²»¹»£¬Á¢¿Ì´´½¨ĞÂÏß³Ì¡£\n```lang=java,lines=10\n    public static ExecutorService newCachedThreadPool() {\n        return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\n                                      60L, TimeUnit.SECONDS,\n                                      new SynchronousQueue<Runnable>());\n    }\n```\n\n### ½â¶Á\n\nÒ²¾ÍÊÇËµ£¬ÔÚÃ¿´Îµ÷ÓÃ `sendMessageCall` Ê±£¬½«´´½¨ `connector`¡£`connector` ½«Òşº¬´´½¨ÒÔÏÂ×ÊÔ´£º\n\n- Ïß³Ì³ØÒ»¸ö\n- `Selector` Ò»¸ö\n\n¾ùÎªÖØ¶È×ÊÔ´¡£ËäÈ»»á±»»ØÊÕ£¬µ«»ØÊÕËÙ¶È²»Ò»¶¨ÄÜ¸úÉÏ²¢·¢ËÙ¶È¡£\n\n## ²»ÕıÈ·Ê¹ÓÃºó¹û\n\nÄ³ÏµÍ³ÔÚÉú²úÉÏÊ¹ÓÃÁËÉÏÊö´úÂë£¬ÔÚ¸ß²¢·¢Çé¿öÏÂ£¬×ÊÔ´ºÄ¾¡£¬±¨³öÈçÏÂ´íÎó£º\n\n- **The process file table is full**\n- **Too many open files**\n\n## ÕıÈ·Ê¹ÓÃ `Mina` ×÷Îª¿Í»§¶Ë\n\n1. `connector` Ó¦×÷ÎªÈ«¾Ö×ÊÔ´Ê¹ÓÃ\n1. Ã¿´ÎÁ¬½ÓÓ¦Í¨¹ı `session` ½øĞĞ´¦ÖÃ\n\n### Ê¾Àı\n\n```lang=java,lines=10\npublic class SimpleClient {\n\tprivate IoConnector connector;\n\tprivate IoHandler handler;\n\n\tpublic SimpleClient() {\n\t}\n\n\tpublic void init() throws Exception {\n\t\tconnector = new NioSocketConnector();\n\t\thandler = new SimpleClientHandler();\n\t\tInetSocketAddress inet = new InetSocketAddress("192.168.137.20", 10080);\n\t\tconnector.setDefaultRemoteAddress(inet);\n\t\t...\n\t}\n\n\tpublic byte[] send(byte[] msg) throws Exception {\n\t\t...\n\t}\n\n\tpublic void destroy() throws Exception {\n\t\tThread.sleep(1000);\n\t\tconnector.dispose();\n\t}\n```\n\n## ²¢²»ÊÇ×îÓÅÑ¡Ôñ\n\nÈôÊÇ±ØĞëÍ¬²½»ñÈ¡Êı¾İµÄ½á¹¹£¬Ñ¡ÓÃ `Mina`/`Netty` Ö®ÀàÒì²½¸ßĞÔÄÜÍøÂçÍ¨Ñ¶¿ò¼Ü²¢²»ÊÇ×îºÃµÄÑ¡Ôñ¡£¸üºÃµÄÑ¡ÔñÊÇÊ¹ÓÃ´«Í³ÍøÂçÍ¨Ñ¶£¬Ñ¡Ôñ `Socket`£¬ÒÔ×î»ù±¾µÄ·½Ê½½øĞĞÍ¨Ñ¶¡£¶ÔÍ¬²½À´Ëµ£¬ÑÓÊ±×îµÍ£¬±ß¼Ê³É±¾×îµÍ¡£\ndateCreated: 1651899076\ndateModified: 1651899076\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-slvbrla7557nitrzurfd\ndocumentPHID: PHID-WIKI-yekgsilypcxlpnoweflh', metadata={'source': 'data/file\\wiki.csv', 'row': 34}), Document(page_content='id: 353\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: »ùÓÚOracle JDBC Çı¶¯µ÷ÓÃ´ø²Î(arrayÀàĞÍ)´æ´¢¹ı³ÌÏà¹ØÎÊÌâ\nslug: troubleshot/oracle-jdbc-call-procedure-with-array/\ncontent: **¼òÒªËµÃ÷**\n\nµ±ÔÚjava¶ËÍ¨¹ıOracle JDBC Çı¶¯µ÷ÓÃ´ø²Î(arrayÀàĞÍ)´æ´¢¹ı³ÌÊ±£¬Èç¹û±¾ÉíÒÑ´æÔÚÊÂÎñ£¬ÔÙµ÷ÓÃ´æ´¢¹ı³Ì¿ÉÄÜ³öÏÖËÀËø¡£\nÒò£ºnew oracle.sql.ARRAY½«Ê¹ÓÃÁíÒ»¸öÁ¬½ÓÀ´´´½¨£¬µ¼ÖÂÊµ¼ÊÉÏÊÇÁ½¸öÁ¬½ÓÔÚ²Ù×÷¡£Èç¹û²Ù×÷Í¬Ò»ĞĞ£¬¾ÍÈİÒ×ËÀËø¡£\n\n{F346858}\n\n²Î¿¼£º[[ https://stackoverflow.com/questions/13872561/deadlocks-while-passing-array-to-stored-proc ]]\ndateCreated: 1642125731\ndateModified: 1642125731\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-w4cevj6ohvg5l4jiipfu\ndocumentPHID: PHID-WIKI-flltbi6c5e2lui244azf', metadata={'source': 'data/file\\wiki.csv', 'row': 35}), Document(page_content='id: 544\nversion: 2\nauthorPHID: PHID-USER-t7w3oo5zcm5eaqqdizj4\ntitle: ÖĞ¹úÅ©Òµ·¢Õ¹ÒøĞĞÊı¾İ¿âhangÎÊÌâ·ÖÎö\nslug: troubleshot/ÖĞ¹úÅ©Òµ·¢Õ¹ÒøĞĞÊı¾İ¿âhangÎÊÌâ·ÖÎö/\ncontent: 1.±¾´Î·şÎñ×Ü½á\n\n\n  - 1.1±³¾°\n\n\n4ÔÂ9ÈÕÏÂÎç4µã×óÓÒ£¬ÖĞ¹úÅ©Òµ·¢Õ¹ÒøĞĞFESDBÊı¾İ¿âÓÉÓÚÁ½¸öupdateÓï¾ähang£¬µ¼ÖÂÊı¾İ³éÈ¡ÎŞ·¨½øĞĞ£¬Í£µôupdateÒµÎñºó£¬Êı¾İ³éÈ¡¿ÉÒÔÕı³£½øĞĞ£¬µ«ÊÇÖØĞÂÆô¶¯updateÒµÎñÊ±£¬ÎŞ·¨Á¬½ÓÊı¾İ¿â£¬ÖØÆôÊı¾İ¿âÊµÀıºó»Ö¸´£¬ĞèÒª·ÖÎöÔ­Òò¡£\n\n\n  - 1.2×Ü½á\n\n\n\n**ÎÊÌâÔ­Òò\t**¸ù¾İÏÖÓĞÊı¾İ·ÖÎö£¬Ôì³ÉÉÏÊöÏÖÏóµÄÔ­ÒòÎªµ±Ê±½Úµã2´æÔÚ´óÁ¿µÄºÍlibrary cache lockÏà¹ØµÄµÈ´ı£¬¸ÃµÈ´ıÔì³ÉÁËÑÏÖØµÄÊı¾İ¿âµÇÂ¼ºÍsql½âÎöÎÊÌâ¡£\n³éÊı11µã×óÓÒÎÊÌâÊÇÒòÎª£¬µ±Ê±³éÊıÁ¬½ÓµÄÊÇ½Úµã2£¬ÓÉÓÚ½Úµã2ÎÊÌâÒ»Ö±ÎŞ·¨µÇÂ¼£¬´¦ÓÚµÈ´ı×´Ì¬£¬×îºó³¬Ê±³ö´í¡£\nÍ£µô¸üĞÂÒµÎñµÄÓ¦ÓÃ·şÎñÆ÷ºó£¬ÓÉÓÚ½Úµã2ÎÊÌâ£¬½Úµã2ÉÏµÄ¸ºÔØ²¢Ã»ÓĞ·¢ÉúÃ÷ÏÔ±ä»¯£¬¶ø½Úµã1ÒòÎªÍ£µôÁËÓ¦ÓÃ·şÎñÆ÷Á¬½Ó¸ºÔØÏàÓ¦µÄÓĞÁË½µµÍ£¬³éÊıÖØĞÂÁ¬½ÓÊ±scanÊ±¼àÌı·ÖÅäÁ¬½Óµ½½Úµã1£¬³éÊıÁ¬½Ó³É¹¦£¬³éÊıÒµÎñµÃÒÔÖ´ĞĞ¡£\n³éÊıÍê³Éºó£¬ÖØÆô¸üĞÂÒµÎñ·şÎñÆ÷£¬Í¬ÑùÒòÎª½Úµã2ÎÊÌâ£¬·¢ËÍµ½½Úµã2ÉÏµÄÁ¬½ÓÒ»Ö±½¨Á¢²»ÆğÀ´£¬Ó¦ÓÃ·şÎñÆ÷´¦ÓÚµÈ´ı×´Ì¬£¬ÎŞ·¨ÍêÈ«Æô¶¯¡£\n\nÒòÎªµ±ÎÊÌâ·¢ÉúÊ±£¬ÎªÁË¾¡¿ì»Ö¸´ÒµÎñ£¬ÖØÆôÁËÊı¾İ¿âÊµÀı£¬ºóĞø·ÖÎöÊ±·¢ÏÖÊı¾İ¿âAWRĞÔÄÜÊı¾İ´Óµ±Ìì0µã¿ªÊ¼¾ÍÍ£Ö¹ÁËÊÕ¼¯£¬¸ù¾İµ±Ê±ÎÊÌâ½ØÍ¼ºÍalertÈÕÖ¾£¬ÅĞ¶Ïµ±Ê±³öÏÖÁË´óÁ¿µÄlibrary cacheËøµÈ´ı¡£\nÍ¨¹ı·ÖÎö4.8ºÅ23:00-24:00×îºóÊÕ¼¯µÄAWRĞÔÄÜÊı¾İ£¬·¢ÏÖÖ´ĞĞAWRĞÔÄÜÊı¾İÊÕ¼¯µÄºóÌ¨½ø³ÌMMONÒ²ÓÉÓÚ´óÁ¿µÄlibrary cacheËøµÈ´ı£¬¼¸ºõ´¦ÓÚhang×´Ì¬£¬µ¼ÖÂºóĞøµÄAWRĞÔÄÜÊı¾İÃ»ÓĞÊÕ¼¯¡£\n\n¸ù¾İÏÖÔÚÒÑÓĞĞÅÏ¢£¬ÏÈÖ»ÄÜÈ·¶¨ÎŞ·¨Á¬½Ó¡¢updateÒµÎñhangºÍawrÊı¾İÃ»ÓĞÕı³£ÊÕ¼¯ÊÇÓÉÓÚlibrary cacheµÈ´ıÔì³É£¬µ«ÓÉÓÚÈ±·¦ÎÊÌâ·¢ÉúÊ±µÄAWRĞÔÄÜÊı¾İºÍÎÊÌâ·¢ÉúÊ±hang analyzeÊı¾İ£¬Ôì³Élibrary cache ËøµÈ´ıÈ·ÇĞÔ­ÒòÏÖÔÚÎŞ·¨µÃÖª¡£\n\n**½¨Òé**\t1.ÎªÁË¾¡Ôç·¢ÏÖÀàËÆÎÊÌâ£¬×öµ½ÌáÇ°Ô¤·À£¬¼à¿ØalertÖĞORA-4021´íÎóºÍAWRĞÔÄÜÊı¾İµÄÊÕ¼¯Çé¿ö£¬·¢ÏÖÎÊÌâÊ±¼°Ê±ÊÕ¼¯µ±Ê±hang analyzeÊı¾İ¡£\n\n**ºóĞø¹¤×÷**\t1.ÊµÊ©ORA-4021´íÎóºÍAWRĞÔÄÜÊı¾İµÄÊÕ¼¯¼à¿Ø\n\n\n\n\n  - 2.Ô­Òò·ÖÎö\n\n\n·ÖÎö£º\nÓÉÓÚ´Ó0µãÒÔºóµÄawr±¨¸æ¶¼Ã»ÓĞÉú³É£¬Á¬½ÓÇé¿öÊÇÕë¶ÔlistenerÈÕÖ¾·ÖÎöµÄ\n³éÊı³ÌĞòÔÚ½Úµã1µÄÁ¬½ÓÇé¿ö£º\n{F429475}\n\n½Úµã2µÄÁ¬½ÓÇé¿öÈçÏÂ£º\n{F429477}\n¿ÉÒÔ¿´³ö10.13µãÇ°³éÊıÁ¬½ÓµÄ¶¼ÊÇ½Úµã2£¬ºóĞøÒòÎª½Úµã2Á¬½ÓÎÊÌâÃ»ÓĞÁ¬½Ó³É¹¦£¬ÖªµÀ11:51£¬Ó¦ÓÃ·şÎñÆ÷ÖØÆôºó£¬Á¬½Óµ½½Úµã1ÉÏ²ÅÖ´ĞĞ³É¹¦¡£\n\n¶øÍ£µôÓ¦ÓÃ·şÎñÆ÷ÖØÆôºó£¬ÓÉÓÚÁ¬½Ó½Úµã2Ò»Ö±hang£¬µ¼ÖÂÓ¦ÓÃ·şÎñÆ÷Ò»Ö±Æô¶¯²»ÆğÀ´£¬´ÓÁ¬½Ó½¨Á¢Çé¿ö¿ÉÒÔ¿´³ö£¬½Úµã1ÉÏÒÑ¾­½¨Á¢ÁË´óÁ¿Ïà¹ØµÄÁ¬½Ó£¬¶ø½Úµã2È´·Ç³£µÄÉÙ£º\n½Úµã1µÄÇé¿ö£º\n{F429479}\n½Úµã2Çé¿ö£º\n {F429481}\n\n0µãÒÔºóawrÊÕ¼¯Òì³£·ÖÎö£º\nÏÂÃæÕë¶Ô×îºóÒ»´ÎµÄawrºÍash±¨¸æ½øĞĞ·ÖÎö£º\n{F429483}\nµÈ´ıÊÂ¼şÏÔÊ¾¼¸ºõ100%µÄÊı¾İ¿âµÈ´ı¶¼ÊÇºÍlibrary cacheÏà¹Ø¡£\n\nTop sqlÖĞÏÔÊ¾ÏûºÄ×ÊÔ´×î¶àµÄÊÇºóÌ¨½ø³ÌMMON slave£º\n{F429485}\n²é¿´alert£º\n{F429487}\n\n´ÓalertÖĞ¿ÉÒÔ¿´µ½MMON½ø³ÌÒÑ¾­hang¡£\nASH±¨¸æÖĞ¿´µ½£¬µ±Ê±ÕıÔÚÖ´ĞĞauto task ÈÎÎñ£º\n{F429489}\n\nÓÉÓÚÊÕ¼¯AWRĞÔÄÜÊı¾İµÄ½ø³ÌÒ²ÊÇMMON£¬ËùÒÔµ¼ÖÂawr±¨¸æÎŞ·¨Õı³£ÊÕ¼¯\n\n\n\n  - 3.½áÂÛ¼°½¨Òé\n\n  -  3.1½áÂÛ£º\n\n\n¸ù¾İÏÖÔÚÒÑÓĞĞÅÏ¢£¬Ö»ÄÜÈ·¶¨ÎŞ·¨Á¬½ÓºÍupdateÒµÎñhangÊÇÓÉÓÚlibrary cacheµÈ´ıÔì³É£¬ÓÉÓÚÈ±·¦ÎÊÌâ·¢ÉúÊ±µÄAWRĞÔÄÜÊı¾İºÍÎÊÌâ·¢ÉúÊ±hang analystÊı¾İ£¬Ôì³Élibrary cache ËøµÈ´ıÈ·ÇĞÔ­ÒòÏÖÔÚÎŞ·¨µÃÖª¡£\n\n\n\n  - 3.2½¨Òé\n\nÎªÁË¾¡Ôç·¢ÏÖÀàËÆÎÊÌâ£¬×öµ½ÌáÇ°Ô¤·À£¬¼à¿ØalertÖĞORA-4021´íÎóºÍAWRĞÔÄÜÊı¾İµÄÊÕ¼¯Çé¿ö¡£\ndateCreated: 1650093850\ndateModified: 1650093850\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-sur662bqtohunh6e6hiy\ndocumentPHID: PHID-WIKI-2vpggcqli7gwlm5eqdc6', metadata={'source': 'data/file\\wiki.csv', 'row': 36}), Document(page_content='id: 589\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: HuToolÖĞAioClientÊ¹ÓÃÇ±ÔÚÏß³ÌÅòÕÍÎÊÌâ½â¾ö\nslug: troubleshot/aio-thread-pool/\ncontent: ## ±³¾°\n±¾ÏîÄ¿ÖĞÓĞ³¡¾°£¬ĞèÒªÊ¹ÓÃ`socket`Á¬½ÓĞĞ·½µÄ`ESB`¡£ÎªÁË·½±ãÊ¹ÓÃ£¬Ö±½ÓÑ¡ÓÃÁË`Hutool`µÄ`AioClient`¡£\n\n## ÏÖÏó\n\tÊ¹ÓÃ `AioClient` Ïà¹Ø´úÂë\n```lang=java\n    /**\n     * µ÷ÓÃTCPÇëÇó\n     * @param reqMsg ÇëÇó±¨ÎÄ\n     */\n    public String invoke(String reqMsg) throws InterruptedException {\n        LOGGER.info("[SRT] The PFET is ready to invoke the ESB api. Request message is £º{}.", reqMsg);\n        EsbIoAction esbIoAction = new EsbIoAction();\n        // Ô¶³Ìµ÷ÓÃ\n        AioClient client = new AioClient(inetSocketAddress, esbIoAction, socketConfig);\n        client.write(ByteBuffer.wrap(reqMsg.getBytes()));\n        client.read();\n        // ¼ÆÊıÆ÷£¬µÈ´ıÒì²½²Ù×÷´¦ÀíÍê³É\n        esbIoAction.getCountDownLatch().await(overTime, TimeUnit.SECONDS);//60s,³¬Ê±Ê±¼ä£¬¿É·Å¿ª\n        client.close();\n        return esbIoAction.getRespMsg();\n    }\n```\n\nÃ¿´ÎÇëÇó`esb`¶¼»áÉú³ÉÒ»¸ö`AioClient`,´Ë¹¹Ôì·½·¨ÖĞµÄ`AsynchronousSocketChannel` Ã¿´Î¶¼»áÉú³ÉÒ»¸ö¹Ì¶¨Ïß³Ì³Ø²¢²»»áËæ×Å`client`µÄ¹Ø±Õ¶ø×¢Ïú¡£ÕâÑùËæ×ÅÇëÇó´ÎÊıµÄÔ½À´Ô½¶à£¬¿ÉÒÔÔÚÏß³Ì¿ìÕÕ£¨`jstack`£©ÖĞ¿´³ö£¬¶ÔÓ¦µÄ `socket` Ïß³Ì»áÔ½»ıÔ½¶à£¬×îÖÕµ¼ÖÂÓ¦ÓÃµÄÄÚ´æÒç³ö¡£\n\n\n## ½â¾ö·½·¨\n\t´Ó¿ìÕÕÖĞ·ÖÎö³öÊÇÒòÎª`socket`Ïß³ÌÃ¿´Î¶¼»áĞÂÔöÉú³É£¬Òò´Ë´òËã²ÉÓÃ¹²ÓĞµÄ`socket`À´½â¾öÕâ¸öÎÊÌâ¡£¾­¹ı¸÷ÖÖµ÷ÊÔ£¬×îÖÕ½« `AsynchronousChannelGroup` ×÷Îª¹²ÓĞÊ¹ÓÃ£¬¾ÍÄÜ½â¾ö´ËÎÊÌâ¡£Ô­ÀíÊÇ`AioClient` ÒÀÀµ `AsynchronousSocketChannel`,¶ø \n`AsynchronousSocketChannel` ÒÀÀµ `AsynchronousChannelGroup`¡£Ö»Òª`group`¹«ÓÃ£¬`channel`Ã¿´ÎÉú³É¶¼ÊÇÔÚ¹²Ïí`group`ÉÏ£¬¾Í²»»áÎŞÏŞÉú³É`socket`Ïß³Ì¡£\n{F449625}\n\n{F449623}\n\n{F449624}\n\n## ÎÊÌâÌá¹©²¢½â¾öÕß\n\nÔ­Ê¼ÎÄµµ£º{F449631}\n\nÁ¿»¯Í¶×Ê²¿ Ï¯¿µ¿µ( @xikangkang )\ndateCreated: 1652171490\ndateModified: 1652171490\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-svizuzqwwzwef6j6tozh\ndocumentPHID: PHID-WIKI-zaeuw57y4xorucuff4g5', metadata={'source': 'data/file\\wiki.csv', 'row': 37}), Document(page_content='id: 347\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Clob×Ö¶ÎÔÚweblogicÏÂÊ¹ÓÃÒì³£\nslug: troubleshot/clob×Ö¶ÎÔÚweblogicÏÂÊ¹ÓÃÒì³£/\ncontent: \ndateCreated: 1642123254\ndateModified: 1642123254\ndescription: \nchangeType: 1\nchangeRef: \nphid: PHID-WRDS-sr2yakdkavgglbptcg2l\ndocumentPHID: PHID-WIKI-ub7bfwlcy5dfeofpl3k3', metadata={'source': 'data/file\\wiki.csv', 'row': 38}), Document(page_content='id: 344\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÄÚ²¿ÎÊÌâÍ¨±¨0004\nslug: troubleshot/inner-bulletin-004/\ncontent: ## Çé¿ö\n\n`WebLogic` ÏÂÃ¿´Î²éÑ¯ `clob` ×Ö¶Î¶¼»á±¨Êı¾İ¿âÁ¬½ÓÒì³££º\n\n{F346173}\n{F346175}\n\n## ·ÖÎö\n\nÊ×ÏÈ»³ÒÉÊÇ `fastjson` µÄ `bug`¡£Ò²È·ÊµÔÚÆä `github` µÄÎÊÌâÖĞ·­µ½ÁËÏà¹ØµÄÎÊÌâ£¬µ«Ã»ÓĞ½â¾ö¡£\nÔÙÔÄ¶ÁÁË `fastjson` ¹ØÓÚ `clob` ĞòÁĞ»¯µÄ´úÂë£¬Ã»ÓĞÌØÊâ´¦Àí¡£\n[´úÂë](https://github.com/alibaba/fastjson/blob/master/src/main/java/com/alibaba/fastjson/serializer/ClobSerializer.java)\n\n```lang=java,lines=12\n    public void write(JSONSerializer serializer, Object object, Object fieldName, Type fieldType, int features) throws IOException {\n        try {\n            if (object == null) {\n                serializer.writeNull();\n                return;\n            }\n            \n            Clob clob = (Clob) object;\n            Reader reader = clob.getCharacterStream();\n\n            StringBuilder buf = new StringBuilder();\n            \n            try {\n                char[] chars = new char[2048];\n                for (;;) {\n                    int len = reader.read(chars, 0, chars.length);\n                    if (len < 0) {\n                        break;\n                    }\n                    buf.append(chars, 0, len);\n                }\n            } catch(Exception ex) {\n                throw new JSONException("read string from reader error", ex);\n            }\n            \n            String text = buf.toString();\n            reader.close();\n            serializer.write(text);\n        } catch (SQLException e) {\n            throw new IOException("write clob error", e);\n        }\n    }\n```\n¾­´Ë£¬È·ÈÏÎÊÌâÓ¦ÔÚÆäËûµØ·½¡£\n\n¹Û²ìµ½Òì³£¶ÑÕ»ÖĞ´æÔÚ `WebLogic` µÄ°ü×°ÀàĞÍ£º`weblogic.jdbc.wrapper.Clob`¡£ÒÔ `weblogic jdbc wrapper clob` ×ö¹Ø¼ü×Ö£¬²éµ½Ğí¶à¸Ã°ü×°ÀàĞÍµ¼ÖÂµÄÎÊÌâÒÔ¼°½â¾öµÄ·½·¨¡£\n\nÓĞÁ½ÆªÎÄÕÂËµµ½ÁË `WebLogic` ¿ÉÒÔ¹Ø±Õ°ü×°£º\n\n- [ÎÄÕÂ1](https://blog.csdn.net/qq_33468062/article/details/80269450)\n\nÈ¡Ïûweblogic ·â×°£¬ÔÚ·şÎñ£¬Êı¾İÔ´£¬Á¬½Ó³Ø£¬¸ß¼¶  ÖĞÓĞ¸ö °ü×°Êı¾İÀàĞÍ (Ó¢ÎÄ°æ±¾¿ÉÄÜ²»Í¬)£¬¿ÉÒÔ°Ñ¹´Ñ¡È¥µô\n\n- [ÎÄÕÂ2](https://blog.csdn.net/luozhuang/article/details/51321129)\n\n**½â¾ö·½·¨**£º\n½øÈëweblogicÊı¾İÔ´ÀïÃæ£¬È»ºóÑ¡Ôñ ¡°Á¬½Ó³Ø¡±Ò³Ç©\nÀïÃæÓĞ¸ö¡°¸ß¼¶¡± Ä¬ÈÏÊÇÒş²ØµÄ¡£\n½«¸ß¼¶Õ¹¿ªÒÔºó£¬¿ÉÒÔ¿´µ½Ò»¸öÑ¡Ïî\n\n**Wrap Data Types**\nÒâË¼ÊÇ Ä¬ÈÏÇé¿öÏÂ weblogic »á×Ô¶¯·â×°Ä³Ğ©Êı¾İÀàĞÍ\n¹Ù·½½âÊÍÈçÏÂ£º\nBy default, data type objects for Array, Blob, Clob, NClob, Ref, SQLXML, and Struct, plus ParameterMetaData and ResultSetMetaData objects are wrapped with a WebLogic wrapper. This allows for features like debugging and connection usage to be done by the server.\nÇë½«´ËÑ¡ÔñÏîµÄ¹´È¥µô²¢±£´æ£¬OK ÎÊÌâ½áÊø¡£\n\n## ´¦Àí·½°¸\n\n**È¡Ïû `WebLogic` °ü×°ÀàĞÍ**\n\n1. `WebLogic` ·şÎñ£¬Êı¾İÔ´£¬Ñ¡ÔñÆäÖĞÒ»¸ö {F346177}\n2. Ñ¡ÔñÁ¬½Ó³ØÒ³£¬ÏÂÀ­£¬¸ß¼¶ÖĞÓĞ¸ö"°ü×°Êı¾İÀàĞÍ "(Ó¢ÎÄ°æ±¾¿ÉÄÜ²»Í¬) {F346178}\n3. ¹´Ñ¡È¥µô\ndateCreated: 1642060946\ndateModified: 1642060946\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-wfpyvkhd4r2zqcrdkqm7\ndocumentPHID: PHID-WIKI-ku4rbrvvpwrudsgf3yev', metadata={'source': 'data/file\\wiki.csv', 'row': 39}), Document(page_content='id: 572\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÄÚ²¿ÎÊÌâÍ¨±¨005: ÓÉlistFilesµ¼ÖÂµÄOOM\nslug: troubleshot/listfiles-oom/\ncontent: `javacore` Æ¬¶Î\n{F444067}\n\n`heapdump`(`phd`¸ñÊ½£©Æ¬¶Î\n{F444066}\n\nÏà¹Ø´úÂë (`java.io.File#listFiles`)£º\n```lang=java\n    public File[] listFiles(FilenameFilter filter) {\n        String[] ss = this.normalizedList();\n        if (ss == null) {\n            return null;\n        } else {\n            ArrayList<File> files = new ArrayList();\n            String[] var4 = ss;\n            int var5 = ss.length;\n\n            for(int var6 = 0; var6 < var5; ++var6) {\n                String s = var4[var6];\n                if (filter == null || filter.accept(this, s)) {\n                    files.add(new File(s, this));\n                }\n            }\n\n            return (File[])files.toArray(new File[files.size()]);\n        }\n    }\n```\n\nÉÏÃæµÄ `ss` ¾ÍÊÇ `heapdump` ÖĞµÄ `String[]` Êı×é£¬ÒòÎª¸ÃÎÄ¼ş¼ĞÏÂÎÄ¼şÊµÔÚÌ«¶à(`22,713,301`¸öÎÄ¼ş)¡£µ¥Õâ¸ö¶ÔÏó£¬¾ÍÕ¼ÓÃÁË`84.48%`µÄÄÚ´æ¡£È»ºóÔÚ´´½¨`File` ¶ÔÏóµÄ `ArrayList` Ê±£¬ÄÚ´æ²»×ãÁË¡£\n\n¸ĞĞËÈ¤µÄÍ¬ÊÂ¿ÉÒÔ³¢ÊÔ·ÖÎöÑù±¾: {F444070}\ndateCreated: 1651728966\ndateModified: 1651728966\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-hlkosexdupoxgsewwhbu\ndocumentPHID: PHID-WIKI-jaumuirzrtthqprpa24c', metadata={'source': 'data/file\\wiki.csv', 'row': 40}), Document(page_content='id: 358\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ê±¼äÈÕÆÚ´íÎó¼¯ÖĞÌû\nslug: troubleshot/some-date-error/\ncontent: == ´íÎó1\n\n```lang=txt\n?ÏÖÏó£º \n\nÎÊÌâÃèÊö£º2012-02-29£¬ÖĞ¹úÒøĞĞ¸÷·ÖĞĞ·´Ó³¿Í»§Ç©Ô¼²»³É¹¦£¬Ç©Ô¼È· ÈÏ½çÃæÌáÊ¾·Ç·¨Â¼Èë£¬Ó°ÏìÒµÎñÕı³£½»Ò×¡£\n\n?·ÖÎö£º\n\nÄ¿Ç°X-PAD»ú¹¹Àí²ÆÏµÍ³¹´Ñ¡¡°³¤ÆÚÓĞĞ§¡±Ê±£¬ÏµÍ³Éè¶¨µÄÊÇµ±Ç°ÄêÊı¼ÓÉÏ50Äê£¬Ö±½ÓÔÚµ±Ç°ÈÕÆÚÉÏ¼ÓÉÏÄêÊı£¬²¢Ã»ÓĞÈòÄêÕâ¸öÌØÊâÈÕ×Ó×öÑéÖ¤£¬Òò´Ë²ÅÓĞ´ËÎÊÌâ³öÏÖ¡£\n\n?½â¾ö£º\n\nÌí¼ÓÈÕÆÚÓĞĞ§ÑéÖ¤£¬µ÷ÓÃÕıÈ·µÄÌí¼ÓÄêÊıµÄÈÕÆÚ·½·¨¡£ \n```\n\n== ´íÎó2\n\n```lang=js,lines=12\n? ÏÖÏó£º \n\nXPADSÏµÍ³ÔÚ×ö½»Ò×µÄÊ±ºò·¢ÏÖ9ÔÂ1ÈÕÔÚÈÕÆÚ¿Ø¼şÖĞÏÔÊ¾ÎªÖÜÁù\n\n? ·ÖÎö£º\n\nÈ·ÈÏÊÇbug\n\nsetMonth ·½·¨\nÉèÖÃ Date ¶ÔÏóÖĞÓÃ ±¾µØÊ±¼ä±íÊ¾µÄÔÂ·İÖµ¡£ \ndateObj.setMonth(numMonth[, dateVal])\n²ÎÊı\ndateObj\n±ØÑ¡Ïî¡£ÈÎÒâ Date ¶ÔÏó¡£\nnumMonth\n±ØÑ¡Ïî¡£Ò»¸öµÈÓÚÔÂ·İÖµµÄÊıÖµ¡£\ndateVal\n¿ÉÑ¡Ïî¡£Ò»¸ö´ú±íÈÕÆÚµÄÊıÖµ¡£Èç¹ûÃ»ÓĞÌá¹©´Ë²ÎÊı£¬ÄÇÃ´½«Ê¹ÓÃÍ¨¹ıµ÷ÓÃ getDate ·½·¨¶øµÃµ½µÄÊıÖµ¡£\n--------\n8.31µ÷ÓÃÈ¡ÏÂÒ»¸öÔÂµÄÈÕÆÚÊ±£¬ÓÉÓÚjs´úÂëÖĞÊÇ²ÉÈ¡year,month,dateÖğÏîÊäÈëµÄ·½Ê½\nµÚÒ»¸ösetYearÊäÈëyearÊ±£¬ÕıÈ·£¬ÎŞÎó£»\nµÚ¶ş¸ösetMonth£¬ÔÚÖ»ÊäÈëmonthÊ±£¬´æÔÚÒşº¬±äÁ¿date£¬ÖµÎªµ±Ç°Öµ31¡£ÕâÊ±£¬ÊäÈë8´ú±í9ÔÂÊ±£¬ÓÖ´øÉÏÁË31´ú±í31ºÅ¡£ÈÕÀúÉÏÃ»ÓĞ9.31£¬¾Í×Ô¶¯Ìøµ½ÁË10.1¡£µ¼ÖÂbugµÄ·¢Éú¡£\n\n? ½â¾ö£º\n\nÖ±½Óµ÷ÓÃÓĞ²Î¹¹Ôìº¯Êı»òÕß²ÉÓÃ setMonth(month,1)\n```\n\n== ´íÎó3\n\n```lang=java,lines=12\n?ÏÖÏó£º\n\n2013Äê6ÔÂ7ÈÕÍøÒø¶Ë½øĞĞÎ¯ÍĞ²éÑ¯Ê±±¨XPAD.S170[Ö»Ö§³ÖÏàÁÚÁ½¸öÔÂµÄ¿çÔÂ²éÑ¯]´íÎó¡£\n\n?·ÖÎö£º¹«Ë¾¹«ÓÃ¹¤¾ß·½·¨£¬CalendarµÄaddMonth´æÔÚÎÊÌâ\n\n1) ÍøÒø¶Ë²éÑ¯¿ªÊ¼ÈÕÆÚºÍ½áÊøÈÕÆÚÄ¬ÈÏÊÇÒ»ÖÜ£¬µ±½áÊøÈÕÆÚÎª2013Äê6ÔÂ7ÈÕÊ±£¬¿ªÊ¼ÈÕÆÚÎª2013Äê5ÔÂ31ÈÕ¡£\n2) ÅĞ¶¨ÊÇ·ñÎªÁ½¸öÔÂÄÚ²éÑ¯£ºÏµÍ³ºóÌ¨³ÌĞòÖĞ»áÅĞ¶ÏÍøÒø¶Ë´«ËÍµÄ¿ªÊ¼ÈÕÆÚºÍ½áÊøÈÕÆÚÊÇ·ñÊÇÏàÍ¬ÔÂ·İ£¬Èç²»ÊÇ£¬Ôò½«¿ªÊ¼ÈÕÆÚ¼Ó1¸öÔÂ£¬ÔÙÓë½áÊøÈÕÆÚ±È½ÏÁ½¸öÔÂÊÇ·ñÊÇÍ¬Ò»¸öÔÂ£¬·ñÔòÅĞ¶¨Îª¡°¿çÔ½ÁËÁ½¸öÔÂµÄ²éÑ¯¡±£»\n3) ´«ÈëÈÕÆÚÖĞ£¬¿ªÊ¼ÈÕÆÚÎª20130531Ê±£¬ÏµÍ³20130531ÉÏ¼ÓÒ»¸öÔÂÊ±£¬Òò31ºÅÅĞ¶Ï´íÎó£¬»¹»ØµÄÔÂ·İÎª2013Äê7ÔÂ£¬Óë½áÊøÈÕÆÚ20130607µÄ6ÔÂ²»ÏàµÈ£¬¹Ê¸ø³ö[Ö»Ö§³ÖÏàÁÚÁ½¸öÔÂµÄ¿çÔÂ²éÑ¯]ÌáÊ¾¡£\n\n?½â¾ö£ºĞŞÕı¹«ÓÃ·½·¨addMonth\n\npublic void addMonth(int monthCount) {\n   cal.set(Calendar.MONTH, cal.get(Calendar.MONDAY) + monthCount);\n}\n\nÕıÈ··½·¨£¬´Ë·½·¨£¬ÊÇÔÚÔ­ÓĞÈÕÆÚÉÏ¼ÓÒ»¸öÔÂ£¬µ«Èç¹ûÏÂÒ»¸öÔÂÓë±¾ÔÂÈç¹ûÔÂÄ©´æÔÚ²îÒìÊ±£¬»á×Ô¶¯µ÷Õû¡£\n\npublic void addMonth(int monthCount) {\n    cal.add(Calendar.MONTH, 1);\n}\n```\n\n== ´íÎó4\n\n```lang=txt\nÒ»¡¢ÏÖÏó£º \n\nÎÊÌâÃèÊö£º2012-02-29£¬ÖĞ¹úÒøĞĞ¸÷·ÖĞĞ·´Ó³¿Í»§Ç©Ô¼²»³É¹¦£¬Ç©Ô¼È·ÈÏ½çÃæÌáÊ¾·Ç·¨Â¼Èë£¬Ó°ÏìÒµÎñÕı³£½»Ò×¡£\n\n¶ş¡¢·ÖÎö£º\n\n1¡¢´ËÎÊÌâÊôÓÚÏµÍ³ÒÅÁôBUG£»\n2¡¢Ä¿Ç°X-PAD»ú¹¹Àí²ÆÏµÍ³¹´Ñ¡¡°³¤ÆÚÓĞĞ§¡±Ê±£¬ÏµÍ³Éè¶¨µÄÊÇµ±Ç°ÄêÊı¼ÓÉÏ50Äê£¬²¢Ã»ÓĞÈòÄêÕâ¸öÌØÊâÈÕ×Ó×öÑéÖ¤£¬Òò´Ë²ÅÓĞ´ËÎÊÌâ³öÏÖ¡£\n\nÈı ½â¾ö£º\n\n¼øÓÚÄ¿Ç°X-PAD¸öÈËÀí²ÆÏµÍ³µÄ¿Í»§Ç©Ô¼Î¬»¤½çÃæÃ»ÓĞ¡°³¤ÆÚÓĞĞ§¡±µÄ¹´Ñ¡£¬¹ÊÎŞ´ËÀàÎÊÌâ¡£Òò´Ë£¬X-PAD»ú¹¹Àí²ÆÏµÍ³Ò²°´´ËÖÖÊµÏÖ·½Ê½£¬ÔÚºóĞø°æ±¾ÖĞÍêÉÆ¡£\n```\ndateCreated: 1642128356\ndateModified: 1642128356\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-hxdhm34xrxt5arbwfwgp\ndocumentPHID: PHID-WIKI-feesuasyhnddf66o2xbt', metadata={'source': 'data/file\\wiki.csv', 'row': 41}), Document(page_content='id: 342\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÄÚ²¿ÎÊÌâÍ¨±¨003\nslug: troubleshot/inner-bulletin-003/\ncontent: ## ÏÖÏó\n\nÊ¹ÓÃ `WAS` Êı¾İ¿âÁ¬½Ó³Ø¹ı³ÌÖĞÓöµ½ `StaleConnectionException`\n\nÊ¹ÓÃ¹ı³ÌÖĞ£¬±¨£º\n\n```verilog\nCause: com.ibm.websphere.ce.cm.StaleConnectionException: IO Error: Connection reset\n; SQL []; IO Error: Connection reset; nested exception is com.ibm.websphere.ce.cm.StaleConnectionException: IO Error: Connection reset\n        at ...\n```\n\nÉæ¼° `WAS` °æ±¾£º\n\n- ËùÓĞÆ½Ì¨µÄ `WAS` £¨9.0, 8.5.5, 8.0, 7.0£©¶¼»á´¥·¢\n\n## Ô­Òò\n\nÊı¾İ¿âÁ¬½ÓÔÚÊ¹ÓÃ¹ı³ÌÖĞÒòÎªÖÖÖÖÌØÊâÔ­Òò£¨Á¬½Ó³¬Ê±¡¢Êı¾İ¿âÏÂÏß¡¢ÍøÂç¹ÊÕÏ£©µ¼ÖÂÁ¬½Ó²»¿ÉÓÃ£¬¶ø `WAS` ³¢ÊÔÖØÁ¬Ê§°Üºó¾Í»á±¨Õâ¸ö¡£\n\n## ½â¾ö\n\n- ÆôÓÃÁ¬½ÓÓĞĞ§ĞÔ¼ì²é£¨`WAS` ¿ªÆôĞ£ÑéĞÂÁ¬½ÓÑ¡Ïî£¬Ğ£ÑéÒÑÓĞÁ¬½ÓÑ¡Ïî£©\n  - **×¢Òâ£¬Ö»¿ªÆô¡°Ğ£ÑéĞÂÁ¬½Ó¡±²»ÄÜÍêÈ«½â¾ö£¡**¿É½â¾öµÄ³¡¾°ÊÇÔÚ»ñÈ¡Á¬½ÓÊ±£¬±£Ö¤Á¬½ÓÓĞĞ§¡£¶øÒÑ¾­È¡µ½µÄÁ¬½Ó£¬¹ı³ÌÖĞÎŞ·¨±£Ö¤ÆäÓĞĞ§¡£\n  - ¿ªÆô¡°Ğ£ÑéÒÑÓĞÁ¬½ÓÑ¡Ïî¡±¿É½â¾öÎÊÌâ£¬µ«ÊÇ»á¼«´óÓ°ÏìĞÔÄÜ\n- Ò²¿ÉÒÔ×Ô¼º²¶»ñ `StaleConnectionException` Òì³££¬×ÔĞĞÖØÊÔ `n` ´Î¡££¨²»ÍÆ¼ö£º´úÂëÖĞÇ¿ñîºÏÁË `IBM` µÄÀà£©\n\n## ²Î¿¼\n\n[IBM ¹Ù·½ËµÃ÷](https://www.ibm.com/support/pages/websphere-application-server-staleconnectionexception)\ndateCreated: 1642060702\ndateModified: 1642060702\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-b7bjkiiqjkr25skct3xx\ndocumentPHID: PHID-WIKI-w4txckj53po2ue6mqpc3', metadata={'source': 'data/file\\wiki.csv', 'row': 42}), Document(page_content='id: 283\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Bash½âÎö½Å±¾ÊÇÊµÊ±µÄ£¡£¡£¡\nslug: troubleshot/bash-parse-shell-in-realtime/\ncontent: \ndateCreated: 1640833798\ndateModified: 1640833798\ndescription: \nchangeType: 3\nchangeRef: 89\nphid: PHID-WRDS-f7d2fnb7aesvplqqgbxy\ndocumentPHID: PHID-WIKI-ilwhntk2d3umu76fpoo5', metadata={'source': 'data/file\\wiki.csv', 'row': 43}), Document(page_content='id: 546\nversion: 2\nauthorPHID: PHID-USER-t7w3oo5zcm5eaqqdizj4\ntitle: ÉÏº£Å©ÉÌjdk Bug-sysoutÈÕÖ¾´òÓ¡×èÈûµ¼ÖÂå´»ú\nslug: troubleshot/ÉÏº£Å©ÉÌjdk_bug-sysoutÈÕÖ¾´òÓ¡×èÈûesb·¢±¨´¦Àí/\ncontent: ÎÊÌâÏÖÏó£º\n8ÔÂ30ÈÕ£¬9µã20·Ö×óÓÒ£¬ÉÏº£Å©ÉÌÖĞºóÌ¨ÏµÍ³ÎŞ·¨·ÃÎÊ£¬ÏµÍ³å´»ú×´Ì¬\n\nÎÊÌâ·ÖÎö£º\nµÚÒ»Ê±¼ä»ñÈ¡µ½ÊÖ¶¯Éú³ÉµÄjavacoreÎÄ¼ş£¬È·ÈÏÏµÍ³ÓĞºÜ¶àÏß³Ì´¦ÓÚ×èÈû×´Ì¬£¬¶¼ÊÇÓÉÓÚÒ»¸öÏß³Ìµ¼ÖÂ£¬¾ßÌåÈçÏÂÍ¼£¬\n{F429492}\n\n×îÖÕÖ¸ÏòwasÏà¹ØÏß³Ì\n\n {F429494}\n½¨Òé£º\nĞèÇëIBM¹¤³ÌÊ¦½øÒ»²½·ÖÎö£¨https://www.ibm.com/support/pages/apar/PI66579£©¡£\n¾­·ÖÎöÏµÍ³ÓĞĞ©sysoutÈÕÖ¾´òÓ¡Ò²ÔÚ×èÈûÖĞ£¬¾­·ÖÎöÖ÷ÒªÊÇÓÉÓÚÉÏÊö×èÈûµ¼ÖÂ£¬½¨Òé²»ÒªÍùsystemout´òÓ¡ÈÕÖ¾£¬·ñÔò¿ÉÄÜ»á¼ÓËÙ¸ÃÎÊÌâµÄ·¢Éú¡£\n\n½á¹û£ºIBM¹¤³ÌÊ¦ÈÏ¿É¸ÃÈ±Ïİ£¬ĞĞÀï×îÖÕÉı¼¶JDK°æ±¾¡£Éı¼¶ºóÔÙÃ»ÓĞ³öÏÖå´»úÇé¿ö¡£\ndateCreated: 1650094432\ndateModified: 1650094432\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-7n7znziwcl5aknrivysu\ndocumentPHID: PHID-WIKI-2phmopf2ofiujjbie3qr', metadata={'source': 'data/file\\wiki.csv', 'row': 44}), Document(page_content='id: 570\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÓÉlistFilesµ¼ÖÂµÄOOM\nslug: troubleshot/listfiles-oom/\ncontent: `javacore` Æ¬¶Î\n{F444067}\n\n`heapdump`(`phd`¸ñÊ½£©Æ¬¶Î\n{F444066}\n\nÏà¹Ø´úÂë (`java.io.File#listFiles`)£º\n```lang=java\n    public File[] listFiles(FilenameFilter filter) {\n        String[] ss = this.normalizedList();\n        if (ss == null) {\n            return null;\n        } else {\n            ArrayList<File> files = new ArrayList();\n            String[] var4 = ss;\n            int var5 = ss.length;\n\n            for(int var6 = 0; var6 < var5; ++var6) {\n                String s = var4[var6];\n                if (filter == null || filter.accept(this, s)) {\n                    files.add(new File(s, this));\n                }\n            }\n\n            return (File[])files.toArray(new File[files.size()]);\n        }\n    }\n```\n\nÉÏÃæµÄ `ss` ¾ÍÊÇ `heapdump` ÖĞµÄ `String[]` Êı×é£¬ÒòÎª¸ÃÎÄ¼ş¼ĞÏÂÎÄ¼şÊµÔÚÌ«¶à(`22,713,301`¸öÎÄ¼ş)¡£µ¥Õâ¸ö¶ÔÏó£¬¾ÍÕ¼ÓÃÁË`84.48%`µÄÄÚ´æ¡£È»ºóÔÚ´´½¨`File` ¶ÔÏóµÄ `ArrayList` Ê±£¬ÄÚ´æ²»×ãÁË¡£\n\n¸ĞĞËÈ¤µÄÍ¬ÊÂ¿ÉÒÔ³¢ÊÔ·ÖÎöÑù±¾: {F444070}\ndateCreated: 1651728900\ndateModified: 1651728900\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-givjnlblnfwkrg4iogmk\ndocumentPHID: PHID-WIKI-jaumuirzrtthqprpa24c', metadata={'source': 'data/file\\wiki.csv', 'row': 45}), Document(page_content="id: 592\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JedisÆô¶¯¹ıÂı£º±¾ÖÊÎªcommons-pool2µÄJMX×¢²á¹ı³ÌÂı\nslug: troubleshot/jedis-startup-slow/\ncontent: ## ÏÖÏó\n\nÏµÍ³Æô¶¯ºÄÊ±·Ç³£¾Ã\n\n## ·ÖÎö\n\n¾­·ÖÎö´úÂë£¬`jedis`ÄÚ²¿Ê¹ÓÃ`commons-pool2`×÷Îª³Ø»¯¼¼Êõ¹ÜÀíÃæÏò`redis`µÄÁ¬½Ó¡£¶ø`commons-pool2`Ä¬ÈÏÆô¶¯ÁË`JMX`¡£×¢²á`JMX`Ê±´æÔÚÑ­»·£¬·Ç³£ºÄÊ±¡£\n\n```lang=java,lines=12\n    /**\n     * Registers the pool with the platform MBean server.\n     * The registered name will be\n     * {@code jmxNameBase + jmxNamePrefix + i} where i is the least\n     * integer greater than or equal to 1 such that the name is not already\n     * registered. Swallows MBeanRegistrationException, NotCompliantMBeanException\n     * returning null.\n     *\n     * @param config Pool configuration\n     * @param jmxNameBase default base JMX name for this pool\n     * @param jmxNamePrefix name prefix\n     * @return registered ObjectName, null if registration fails\n     */\n    private ObjectName jmxRegister(final BaseObjectPoolConfig<T> config,\n            final String jmxNameBase, String jmxNamePrefix) {\n        ObjectName newObjectName = null;\n        final MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();\n        int i = 1;\n        boolean registered = false;\n        String base = config.getJmxNameBase();\n        if (base == null) {\n            base = jmxNameBase;\n        }\n        while (!registered) {\n            try {\n                ObjectName objName;\n                // Skip the numeric suffix for the first pool in case there is\n                // only one so the names are cleaner.\n                if (i == 1) {\n                    objName = new ObjectName(base + jmxNamePrefix);\n                } else {\n                    objName = new ObjectName(base + jmxNamePrefix + i);\n                }\n                mbs.registerMBean(this, objName);\n                newObjectName = objName;\n                registered = true;\n            } catch (final MalformedObjectNameException e) {\n                if (BaseObjectPoolConfig.DEFAULT_JMX_NAME_PREFIX.equals(\n                        jmxNamePrefix) && jmxNameBase.equals(base)) {\n                    // Shouldn't happen. Skip registration if it does.\n                    registered = true;\n                } else {\n                    // Must be an invalid name. Use the defaults instead.\n                    jmxNamePrefix =\n                            BaseObjectPoolConfig.DEFAULT_JMX_NAME_PREFIX;\n                    base = jmxNameBase;\n                }\n            } catch (final InstanceAlreadyExistsException e) {\n                // Increment the index and try again\n                i++;\n            } catch (final MBeanRegistrationException | NotCompliantMBeanException e) {\n                // Shouldn't happen. Skip registration if it does.\n                registered = true;\n            }\n        }\n        return newObjectName;\n    }\n```\n\n¿ÉÒÔ¿´µ½ÆäÃüÃû¹æÔòÊÇ£º`jmxNameBase` + `jmxNamePrefix` + `i`\nÒ»°ãÇ°Á½¸ö¶¼Ê¹ÓÃÄ¬ÈÏÖµ£¬ÕâÊ±ÔÚÍ¬Ê±ÆôÓÃ¶à¸ö³ØÊ±£¬Õâ¾ÍÓĞÎÊÌâÁË£º\n\n> ¼ÙÉèÒª½¨Á¢5¸ö³Ø\n\n- µÚÒ»¸ö±»ÃüÃûÎª `jmxNameBase` + `jmxNamePrefix`£¬²¢×¢²á³É¹¦\n- µÚ¶ş¸ö±»ÃüÃûÎª `jmxNameBase` + `jmxNamePrefix`£¬Ê§°Ü£»È»ºóÖØÃüÃûÎª `jmxNameBase` + `jmxNamePrefix` + `2` ºó×¢²á³É¹¦\n- µÚÈı¸ö±»ÃüÃûÎª `jmxNameBase` + `jmxNamePrefix`£¬Ê§°Ü£»È»ºóÔÙÊ§°ÜÒ»´Î£¬Ö±ÖÁÖØÃüÃûÎª `jmxNameBase` + `jmxNamePrefix` + `3` ºó×¢²á³É¹¦\n- µÚËÄ¸ö±»ÃüÃûÎª `jmxNameBase` + `jmxNamePrefix`£¬Ê§°Ü£»È»ºóÔÙÊ§°ÜÁ½´Î£¬Ö±ÖÁÖØÃüÃûÎª `jmxNameBase` + `jmxNamePrefix` + `4` ºó×¢²á³É¹¦\n- µÚÎå¸ö±»ÃüÃûÎª `jmxNameBase` + `jmxNamePrefix`£¬Ê§°Ü£»È»ºóÔÙÊ§°ÜÈı´Î£¬Ö±ÖÁÖØÃüÃûÎª `jmxNameBase` + `jmxNamePrefix` + `5` ºó×¢²á³É¹¦\n\n¿ÉÒÔÏëÏó£¬Èç¹ûÒª×¢²á `10+` ¸ö³Ø/ `100+` ¸ö³Ø£¬ºÄÊ±»á´ïµ½¶àÉÙ¡£\n\n## ½â¾ö\n\nÔÚ´´½¨³ØÊ±£¬Ö¸¶¨²»Ê¹ÓÃ`JMX`¡£\n\n> ´´½¨`GenericObjectPoolConfig`¶ÔÏó£¬²¢µ÷ÓÃ`setJmxEnabled(false)`\n\n```lang=java\nreturn new BinaryJedisCluster(clusterHosts,\n                    settings.getAsInt(JEDIS_TIMEOUT.key()),\n                    settings.getAsInt(JEDIS_MAX_ATTEMPTS.key()),\n                    convertPoolConfig(settings));\n```\n\n```lang=java\n    private static GenericObjectPoolConfig convertPoolConfig(AdapterSettings settings) {\n        GenericObjectPoolConfig poolConfig = new GenericObjectPoolConfig();\n        poolConfig.setMaxTotal(settings.getAsInt(POOL_MAX_TOTAL.key()));\n        poolConfig.setMaxIdle(settings.getAsInt(POOL_MAX_IDLE.key()));\n        poolConfig.setMinIdle(settings.getAsInt(POOL_MIN_IDLE.key()));\n        poolConfig.setTestOnBorrow(settings.getAsBool(POOL_TEST_ON_BORROW.key()));\n        poolConfig.setBlockWhenExhausted(settings.getAsBool(POOL_BLOCK_WHEN_EXHAUSTED.key()));\n        // ½ûÓÃ apache pool2 jmx, ºÜÂı\n        poolConfig.setJmxEnabled(false);\n        return poolConfig;\n    }\n```\n\n## ËµÃ÷\n\nÕâ¸ö·Ç `jedis` Ò»¸ö¿âÎÊÌâ£¬ÊÇ¸üµ×²ã`commons-pool2`¿âÎÊÌâ¡£ÆäËûÓÃµ½Õâ¸ö¿âµÄ£¬¶¼¿ÉÄÜ´æÔÚÕâ¸öÎÊÌâ¡£Èç¹ûÖ±½ÓÊ¹ÓÃ£¬¸üÓ¦¸Ã×¢ÒâÕâ¸öµã¡£\n\n## Ò»Í¬·ÖÎöÈËÔ±\n\nÁ¿»¯Í¶×Ê²¿ Ñî½Ü( @yangjie )\ndateCreated: 1652258847\ndateModified: 1652258847\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-5tbllq33rn2gk6dz4qsf\ndocumentPHID: PHID-WIKI-p4uy7wjkgbgk766x6nvb", metadata={'source': 'data/file\\wiki.csv', 'row': 46}), Document(page_content='id: 575\nversion: 1\nauthorPHID: PHID-USER-txsr6jw2jatsa5sypm3b\ntitle: ¶î¶È¶ÁÈ¡ÎÄ±¾µ¼ÖÂoom¹ÊÕÏ·ÖÎö\nslug: troubleshot/¶î¶È¶ÁÈ¡ÎÄ±¾µ¼ÖÂoom¹ÊÕÏ·ÖÎö/\ncontent: Ïê¼û http://192.168.193.113:7707/#/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/core%E5%88%86%E6%9E%90/Java_Core%E5%88%86%E6%9E%90.md\ndateCreated: 1651810569\ndateModified: 1651810569\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-6nixvblspzr26gcypcnm\ndocumentPHID: PHID-WIKI-vb5xljzovkxpc4yyv53r', metadata={'source': 'data/file\\wiki.csv', 'row': 47}), Document(page_content='id: 634\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ¸ºÔØ¾ùºâÆ÷Ì½»î¿ÉÄÜµ¼ÖÂÏµÍ³Òì³£\nslug: troubleshot/load-balance-test-alive/\ncontent: == ÎÊÌâÏÖÏó£º\n\nÇ°ÖÃÍø¹ØÓëºóÌ¨Ó¦ÓÃÍøÂçÍêÈ«Õı³£¡£µ«Ò»¶ÎÊ±¼äºó»á±¨Á¬½ÓÎŞ·¨½¨Á¢¡£\n\n== ½â¾ö¹ı³Ì£º\n\nÍ¨¹ıÔÚºóÌ¨Ó¦ÓÃ¶Ë×¥°ü£¬·¢ÏÖ´æÔÚ`RST`°ü¡£¸Ã°üÓÉ¸ºÔØ¾ùºâÆ÷·¢³ö£¬×¨ÓÃÓÚĞáÌ½ºó¶ËÄ¿±êµØÖ·ÊÇ·ñ´æ»î¡£\n\n> ÓÉÓÚ²»ĞèÒªÕæÊµÍ¨Ñ¶£¬ËùÒÔÒ»°ã¸ºÔØ¾ùºâÆ÷ÁªÍ¨ºóÖ±½Ó·¢ËÍ `RST` °üÖĞ¶ÏÁ¬½Ó¡£\n\n{F484840}\n\nÈçÉÏÍ¼£¬`172.20.8.1` Îª¸ºÔØ¾ùºâÆ÷£¬`172.20.8.3` ÎªÓ¦ÓÃ·şÎñÆ÷¡£¸ºÔØ¾ùºâÆ÷ÕıÔÚĞáÌ½Ó¦ÓÃ `9999` ¶Ë¿ÚÊÇ·ñ´æ»î¡£\n\n`RST`»áµ¼ÖÂ·şÎñ¶ËµÄ`TCP`Á¬½Ó½øÈë`time_wait`×´Ì¬£¬¶ø´óÁ¿µÄ`time_wait`»áµ¼ÖÂÓ¦ÓÃÔÚ½¡×³ĞÔ²»×ãµÄÇé¿öÏÂ£¬Èç¹ûÊ¹ÓÃ¶ÌÁ¬½Ó¿ÉÄÜ»á³öÏÖÎŞ·¨Á¬½Ó¡£\n\n== ½â¾öÎÊÌâ£º\n\n(NOTE)½µµÍ¸ºÔØ¾ùºâÆ÷µÄĞáÌ½ÆµÂÊ£¨ÖÎ±ê£©\n\n(IMPORTANT)¶Ë¿Ú¼àÌıÊ±Ìí¼Ó`TCP`²ÎÊı: `SO_REUSEADDR`£¬¿ìËÙ¸´ÓÃ`time_wait`µÄ¶Ë¿Ú£¨ÖÎ±¾£©\n\n(IMPORTANT)Í¨Ñ¶»»³É³¤Á¬½Ó¡£Òò³¤Á¬½Ó½¨Á¢Á¬½Óºó£¬·´¸´Ê¹ÓÃ£¬²»ĞèÒªÆµ·±ÔÙ¿ªĞÂÁ¬½Ó¡£µ«Õâ¸öÄ£Ê½ÏÂ£¬¸ºÔØ¾ùºâ²»Æ½¾ù¡££¨ÖÎ±¾£©\n\n== ËµÃ÷£º\n\n±¾ÎÊÌâÏÈºó¶à´ÎÔÚ²»Í¬¿Í»§´¦³öÏÖ£¬ĞèÒªÒıÆğ×¢Òâ£¬×÷Îª±¸Íü\ndateCreated: 1654506583\ndateModified: 1654506583\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-jarfvplajowvqajq3jpp\ndocumentPHID: PHID-WIKI-6kre4hdqyc6tyujxancm', metadata={'source': 'data/file\\wiki.csv', 'row': 48}), Document(page_content='id: 654\nversion: 1\nauthorPHID: PHID-USER-7n2eqbwmeyfll5px4xtp\ntitle: Deadlock\nslug: troubleshot/deadlock/\ncontent: # Ò»´ÎËÀËøµ¼ÖÂµÄUAT»·¾³·ÃÎÊÒì³£ÎÊÌâ\n\n## ÏÖÏó\nÏÖ³¡µÄÍ¬ÊÂ·´À¡£¬UAT»·¾³Ã¿¸ô5·ÖÖÓ¾ÍÒªÖØÆôÒ»´Î¡£»·¾³µÄÒì³£ÏÖÏóÎª³õÊ¼»¯Ò³Ãæ´ò²»ÁË£¬Í¨¹ı```chrome```ä¯ÀÀÆ÷```F12```²é¿´ÇëÇóµÄÏìÓ¦Ê±¼äÀ´¿´£¬ÇëÇó³¬Ê±µÄÇëÇóËæ»ú£¬³õ²½ÅÅ²é²»ÊÇÒòÎªÄ³¸öÇëÇóÏìÓ¦Ê±¼ä¹ı³¤µ¼ÖÂµÄÎÊÌâ¡£\nÏÖ³¡Í¬ÊÂ²é¿´ÁË·şÎñÆ÷TcpÁ¬½ÓÇé¿ö£¬·¢ÏÖÓĞ270+Á¬½Ó½¨Á¢£¬20+```time_wait```µÄÁ¬½Ó¡£·´À¡¿ÉÄÜÊÇÍøÂç»òÕßÊÇĞĞÀï¸ºÔØ¾ùºâÖĞĞÄµÄÎÊÌâ£¬µ¼ÖÂÇëÇóÎŞ·¨ÏìÓ¦¡£\n\n## ÏÖ³¡ÅÅ²é¾­¹ı\nÈ¥ÁËÏÖ³¡ºó£¬Í¨¹ı```top```¿´ÁË·şÎñÆ÷¸ºÔØÇé¿ö£¬·¢ÏÖ¸ºÔØºÜĞ¡£¬¸÷ÏîÖ¸±êÕı³£¡£·şÎñÆ÷TCPÇëÇóÓÃµÄÊÇ¶ÌÁ¬½Ó£¬ËùÒÔ²é¿´ÁËÁ¬½ÓÊıÇé¿ö£¬·¢ÏÖÒ²ËãÕı³£¡£²é¿´ÁËGCÈÕÖ¾µÈ£¬ÎŞÃ÷ÏÔÒì³£¡£\nËùÒÔÈÏÎªÍ¬ÊÂµÄ·´À¡½á¹û¿ÉÄÜÊÇÕıÈ·µÄ£¬¾Í×ÅÊÖÅÅ²éĞĞÀï¸ºÔØ¾ùºâÖĞĞÄÊÇ·ñÓĞÎÊÌâ¡£ÓÉÓÚ¶ÔĞĞÀï¸ºÔØ¾ùºâÖĞĞÄÁË½â½ÏÉÙ£¬ÇëÇó¹ù×ÜĞ­ÖúÅÅ²é¡£\n\n**¾­¹ıÅÅ²é£¬×îÖÕÈ·ÈÏ£¬ÊÇ·şÎñÆ÷ÏìÓ¦ÓĞÎÊÌâ¡£¼´Ê¹²»¾­¹ı¸ºÔØ¾ùºâÖĞĞÄ£¬ÏìÓ¦Ê±¼äÒ²²»ÊÇºÜÎÈ¶¨¡£**\n\nÓÉÓÚ·şÎñÆ÷¸÷ÏîÖ¸±ê¶¼ËãÕı³££¬ºÍ»·¾³ÃÜÇĞÏà¹ØµÄÊı¾İ¿âÔËĞĞÇé¿ö³ÉÁËÍ·ºÅÏÓÒÉ·¸¡£ÁªÏµĞĞÀïÊä³ö```awr```±¨¸æ¡£\n\nÔÚµÈ´ıµÄ¹ı³ÌÖĞ£¬·´¸´µÄÊ¹ÓÃ```jstack```²é¿´·şÎñÆ÷ÔËĞĞÇé¿ö£¬·¢ÏÖ²»¹ÜÊ²Ã´Ê±ºò£¬¶¼ÓĞÒ»¸öupdateÓï¾äÔÚÖ´ĞĞ¡£²é¿´Ô´Âëºó£¬·¢ÏÖÓï¾äÒ²ºÜ¼òµ¥£¬ÊÇÍ¨¹ıÖ÷¼ü¸üĞÂ×Ö¶Î¡£°´µÀÀíÖ´ĞĞºÜ¿ìµÄ£¬²»Ó¦¸ÃÃ¿´ÎÏß³Ì¿ìÕÕ¶¼ÄÜ×¥µ½²Å¶Ô¡£\n\n**ÖØµã**\n```Ã¿´Î¶¼±»jstack×¥µ½µÄ´úÂëÖ´ĞĞÊ±¼äÓ¦¸Ã¶¼±È½Ï³¤```\n\nÓÉÓÚ```awr```±¨¸æ»¹Ã»³öÀ´¡££¨ĞĞÀï¿Æ¼¼¾ÓÈ»²»»á²Ù×÷¡£¡££©×îÖÕÍ¨¹ıoracleÊı¾İ¿âsql²éÑ¯ÁËÊÇ·ñÓĞËø±í£¬·¢ÏÖÁËÏßË÷£¬ÊÇĞĞÊı¾İËÀËøÁËµ¼ÖÂÊÂÎñÎŞ·¨Ìá½»¡£\n\n## ×Ü½á\nÏÖ³¡³öÏÖÎÊÌâ£¬Ê×ÏÈÒª´Ó×ÔÉíÓ¦ÓÃºÍÊı¾İ¿âÔËĞĞÇé¿öÈëÊÖÅÅ²é£¬\n1. ·şÎñÆ÷cpuÕ¼ÓÃÇé¿ö\n2. Í¨¹ı```jstack```²é¿´¶ÔÓ¦µÄÏß³Ì³ØÊÇ·ñ´¦ÓÚ·±Ã¦×´Ì¬£¨¶¼ÔÚ¹¤×÷£¬¼¸ºõÃ»ÓĞ¿ÕÏĞÏß³Ì£©\n3. Êı¾İ¿â```awr```±¨¸æ£¬Êı¾İ¿â½¡¿µ×´Ì¬¼ì²é\nµÈ·½ÃæÈ·ÈÏ·şÎñÆ÷ºÍÊı¾İ¿âµÄÔËĞĞÇé¿ö¡£\n\nÆä´ÎÔÚÅÅ²éÍøÂç£¬¹«¹²×é¼şµÈÏà¹ØµÄÎÊÌâ¡£\ndateCreated: 1655261648\ndateModified: 1655261648\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-4iomaqfdw7awhec4rby7\ndocumentPHID: PHID-WIKI-v2g5pb3ganbgunb77a2p', metadata={'source': 'data/file\\wiki.csv', 'row': 49}), Document(page_content='id: 690\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: SpringÆô¶¯Ê±ËÀËø\nslug: troubleshot/spring-init-deadlock/\ncontent: # ËÀËø\n\nÖ÷Ïß³Ì¼ÓÔØ `Spring`¡£ÔÚÎ´ÍêÈ«Æô¶¯ÍêÕûµÄÇé¿öÏÂ£¬ĞÂÆôÏß³Ìµ¼ÖÂËÀËø¡£\n\n## Ô­Òò\n> `Spring` ¼ÓÔØÊ±±ØĞëÑÏ¸ñµ¥Ïß³Ì\n\n## ½â¾ö\n\n1. ¼òµ¥´Ö±©£º ĞÂÏß³ÌÆô¶¯ºóÏÈ `sleep` `30/60s`(¿É²ÎÊı»¯)\n2. »òÍêÈ«Æô¶¯ºóÔÙÆô¶¯Ïß³Ì\n3. »òĞÂÏß³ÌÆô¶¯ºóµÈĞÅºÅ£¬µÈ `Spring` Æô¶¯ÍêÕûºó£¬·¢³öĞÅºÅ\n\n{F578746}\ndateCreated: 1661258375\ndateModified: 1661258375\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-u7safds6qsrdczeqz4m6\ndocumentPHID: PHID-WIKI-uo3yfzq6w224wfe7kehw', metadata={'source': 'data/file\\wiki.csv', 'row': 50}), Document(page_content='id: 360\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: HPUXÏÂJVM»ñÈ¡Ê±¼äÓëÏµÍ³Ê±¼ä²»Ò»ÖÂ\nslug: troubleshot/hpux-jvm-datetime/\ncontent: == ÎÊÌâÃèÊö\n\n2018Äê6ÔÂ26Í¶²ú±ä¸üÒÔÀ´£¬´ú¿Í¼°´úÀíÆ½Ì¨¶à´Î³öÏÖÅúÁ¿Î´°´ÅäÖÃµÄÊ±¼äµã½øĞĞµ÷¶ÈµÄÇé¿ö¡£¾ßÌåÎÊÌâÏÖÏóÓĞÁ½ÖÖÇé¿ö£º\n\n       1¡¢ Åú´¦ÀíÃ»ÓĞ°´ÕÕÖ¸¶¨Ê±¼ä½øĞĞÅú´¦Àí£¬ÑÓ³ÙÊ±¼ä²»µÈÓĞÑÓ³Ù10·ÖÖÓ¡¢2Ğ¡Ê±µÄ²»Í¬Çé¿ö\n       2¡¢ Åú´¦ÀíÖ±½Ó¾Í²»½øĞĞÅú´¦Àí£¬±ÈÈç¾©¶«½áÊÛ»ãµÄ¼ÓÈ¨»ãÂÊ·¢ËÍ¹¦ÄÜ¡£\n\n== ÎÊÌâ·ÖÎö\n\n      ÓÉÓÚ´ú¿Í´úÀíÆ½Ì¨µÄ10¸öÓ¦ÓÃ¹²ÓÃÕâĞ©quartz±í¡£¸ù¾İQuartzµÄ¼¯ÈºÔ­ÀíÒÔ¼°quartzµÄ²¹³¥»úÖÆ£¬ÍÆÂÛ³öÓ¦ÓÃÖ®¼äµÄÏµÍ³Ê±¼ä²»Ò»ÖÂ£¬»áµ¼ÖÂ²¿·ÖÓ¦ÓÃµÄÏµÍ³Ê±¼ä±»ÆäËûÓ¦ÓÃÎóÈÏÎª¸ÃÅú´¦Àí½ÚµãÊ§Ğ§¶ø±»É¾³ı£¨±»É¾³ıµÄ½ÚµãÓëµ±Ç°½ÚµãÊ±¼äÏà²î½Ï´ó£©¡£¾ßÌåÔ´Âë·ÖÎö¼û¸½¼ş\n\n       ÓÉÓÚHP UX JDKµÄ¼ÆËãÏµÍ³Ê±¼äµÄÌØÊâ´¦Àí£¬µ¼ÖÂÓ¦ÓÃÈ¡µÄÏµÍ³Ê±¼ä»áÓë»úÆ÷Ê±¼ä²»Ò»ÖÂµÄÇé¿ö£¬ÕâÑù¾Í¿ÉÒÔ½âÊÍ²»Í¬Ó¦ÓÃÖ®¼äÓÉÓÚ²»Í¬Ê±¼ä¶ÎÖØÆô»áµ¼ÖÂÓ¦ÓÃÖ®¼äµÄÊ±¼äÊÇ²»Ò»ÖÂµÄ¡£\n\n**HP-UXÖĞÈ¡Ê±¼äµÄ»úÖÆ**£º\n\n(NOTE)HP-UX SDK 1.2.2.09 ºÍHP-UX  SDK 1.3.1Ö®ºó£¬ÓÉÓÚperformanceµÄÔ­Òò£¬JVMÖĞ¶ÁÈ¡ÏµÍ³Ê±¼äµÄÊ±ºò£¬ÊÇÔÚÓ¦ÓÃ³ÌĞòÆô¶¯Ö®ºó£¬¶ÁÒ»´ÎOSµÄÏµÍ³Ê±¼ä£¬È»ºóJVMÖĞ¸ù¾İCPU ticksÀ´×Ô¼º¼ÆËãÊ±¼ä£¬¶ø²»ÊÇÊµÊ±µØÈ¥OS È¡ÏµÍ³Ê±¼ä¡£ÕâÑùµÄ»°£¬ÔÚÓ¦ÓÃ³ÌĞòÔËĞĞµ±ÖĞ£¬Èç¹ûÓĞntp¸Ä±äÁËOSµÄÏµÍ³Ê±¼ä£¬ÄÇÃ´JVMºÍOSµÄÏµÍ³Ê±¼ä¾Í²»Ò»ÖÂÁË¡£Ö»ÓĞµÈÏÂÒ»´ÎÓ¦ÓÃ³ÌĞòÖØĞÂÆô¶¯µÄÊ±ºò£¬JVM²Å»áÖØĞÂ¶ÁÈ¡OSÏµÍ³Ê±¼ä¡£\n\n== ¹ÊÕÏÁÙÊ±½â¾ö·½°¸\n\n½«´ú¿Í´úÀíÆ½Ì¨µÄÅú´¦ÀíÒì³£µÄÓ¦ÓÃÍ³Ò»ÖØÆôÒ»´Î£¬ÈÃJVMµÄÊ±¼äÓë»úÆ÷Ê±¼äÒ»ÖÂ¡£ÔÚÏÂ´Î±ä¸üÇ°£¬ËùÓĞÓ¦ÓÃµÄÏµÍ³Ê±¼ä»ù±¾Ò»ÖÂ£¬»ù±¾²»»á³öÏÖÓ¦ÓÃÖ®¼ä»¥ÏàÓ°ÏìµÄÇéĞÎ¡£\n\n== ¹ÊÕÏ×îÖÕ½â¾ö·½°¸\n\n¸ù¾İÒÔÉÏ·ÖÎö½á¹û£¬ÏîÄ¿×éÄâ¶¨ÁËÈçÏÂ³ÌĞòÓÅ»¯·½°¸£¬½«¸÷¸ö×ÓÓ¦ÓÃµÄÅú´¦Àí±íÈ«²¿·Ö¿ª´¦Àí£¬±£Ö¤¾ÍËã³öÏÖÊ±¼ä²»Ò»ÖÂÇé¿ö£¬µ«Åú´¦ÀíµÄÖ´ĞĞ²»»áÊ§°Ü¡£\n\n\n**¼¼Êõ´¦Àí·½Ê½£¨Ê±¼äÒ»ÖÂµÄ´¦Àí£©**£º\n\n`HotSpot JVM` Ê¹ÓÃ `gettimeofday` ÏµÍ³µ÷ÓÃÀ´»ñÈ¡ÈÕÆÚºÍÊ±¼äĞÅÏ¢¡£µ«ÔÚ`HP-UX`ÖĞ£¬³öÓÚĞÔÄÜ¿¼ÂÇ£¬ÔÚÓ¦ÓÃÆô¶¯ºó£¬²ÉÓÃÁËÒ»ÖÖÊ¹ÓÃ `CPU` Ê±ÖÓÖÜÆÚÊıµÄ»úÖÆÀ´¼ÆËãµ±Ç°Ê±¼ä¡£´øÀ´µÄºó¹û¾ÍÊÇ£¬Ê¹ÓÃ `date` ÃüÁî£¬ `adjtime` º¯Êı»òÕßĞÎÈç `ntp` µÄÊ±¼äÍ¬²½·şÎñ¹¤¾ßĞŞ¸ÄÏµÍ³Ê±¼äºó£¬`java` Ó¦ÓÃÎ´ÄÜÔÚÖØÆôÖ®Ç°·´Ó³³öÕâÖÖĞŞ¸Ä¡£Èç¹ûÒªÇó²Ù×÷ÏµÍ³Ê±¼äĞŞ¸ÄÁ¢Âí·´Ó³µ½ `java` Ó¦ÓÃÖĞ£¬¿ÉÒÔÊ¹ÓÃ `-XX:+UseGetTimeOfDay` Ñ¡ÏîÀ´¸æËß `JVM` Ê¹ÓÃ `gettimeofday` ÏµÍ³µ÷ÓÃ£¬¿ÉÒÔ±£Ö¤ `JVM` ºÍ `OS` µÄÏµÍ³Ê±¼äÒ»ÖÂ£»µ«ĞèÒª×¢ÒâµÄÊÇ£¬Õâ»áÊ¹ĞÔÄÜÏÂ½µ¡£\ndateCreated: 1642128861\ndateModified: 1642128861\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-wm3quqbl4tdrggwvvzud\ndocumentPHID: PHID-WIKI-zloazcs3j5qrknrxqjpg', metadata={'source': 'data/file\\wiki.csv', 'row': 51}), Document(page_content='id: 179\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÈçºÎÅÅ²éÕâÀàÊı¾İ¿âËÀËø\nslug: troubleshot/rcs-detect-db-deadlock/\ncontent: = Ç°ÇéÌáÒª\nÕâ¸öÎÊÌâ£¬[[ https://pha.erayt.com:8000/w/troubleshot/rcs-deadlock/ | RCSÊı¾İ¿âÊÂÎñ¿ØÖÆÎÊÌâµ¼ÖÂËÀËø ]]£¬ÊÇµ±Ç°ÔÚ¿Í»§²âÊÔÏÖ³¡±©Â¶³öÀ´µÄÎÊÌâ¡£Á¬ĞøÁ½ÖÜ³öÏÖ£¬½ñÌì¾­¹ıÏîÄ¿×é·ÖÎöÖÕÓÚ½â¾ö¡£\n\n= ÈçºÎÅÅ²é\n\n== »ñÈ¡Ïß³Ì¿ìÕÕ\n\nÂÔ¹ı²»Ìá\n\n== ²éÕÒ¹Ø¼üÏß³Ì¡£±¾´ÎÎÊÌâÓĞÏß³Ì£º\n\n   - ScheduleWorker-5\n   - BatchGlsThread-1\n   - BatchGlsThread-3\n   - BatchGlsThread-4\n   - BatchGlsThread-5\n   - BatchGlsThread-9\n\n== ¹Û²ì¸÷Ïß³Ì¶ÑÕ»\n·¢ÏÖ¾ù¿¨ÔÚ\n```lang=log,lines=12\n  \tat sun.nio.ch.FileDispatcherImpl.read0(Native Method)\n  \tat sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)\n  \tat sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)\n  \tat sun.nio.ch.IOUtil.read(IOUtil.java:197)\n  \tat sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:380)\n  \t- locked <0x0000000702360c30> (a java.lang.Object)\n  \tat oracle.net.nt.TimeoutSocketChannel.read(TimeoutSocketChannel.java:174)\n  \tat oracle.net.ns.NSProtocolNIO.doSocketRead(NSProtocolNIO.java:555)\n  \tat oracle.net.ns.NIOPacket.readHeader(NIOPacket.java:258)\n  \tat oracle.net.ns.NIOPacket.readPacketFromSocketChannel(NIOPacket.java:190)\n  \tat oracle.net.ns.NIOPacket.readFromSocketChannel(NIOPacket.java:132)\n  \tat oracle.net.ns.NIOPacket.readFromSocketChannel(NIOPacket.java:105)\n  \tat oracle.net.ns.NIONSDataChannel.readDataFromSocketChannel(NIONSDataChannel.java:91)\n  \tat oracle.jdbc.driver.T4CMAREngineNIO.prepareForUnmarshall(T4CMAREngineNIO.java:764)\n  \tat oracle.jdbc.driver.T4CMAREngineNIO.unmarshalUB1(T4CMAREngineNIO.java:429)\n  \tat oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:407)\n  \tat oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:268)\n  \tat oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:655)\n  \tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:270)\n  \tat oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:91)\n  \tat oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:970)\n  \tat oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1205)\n  \tat oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3666)\n  \tat oracle.jdbc.driver.T4CPreparedStatement.executeInternal(T4CPreparedStatement.java:1426)\n  \tat oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3778)\n  \t- locked <0x0000000702331158> (a oracle.jdbc.driver.T4CConnection)\n  \tat oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1081)\n  \tat weblogic.jdbc.wrapper.PreparedStatement.execute(PreparedStatement.java:119)\n  \tat sun.reflect.GeneratedMethodAccessor234.invoke(Unknown Source)\n  \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n  \tat java.lang.reflect.Method.invoke(Method.java:498)\n```\n\n== ·¢ÏÖÊÂÎñ¿ØÖÆ´úÂë\n```lang=log\n  \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)\n```\n\n== ·¢ÏÖÊÂÎñÇ¶Ì×´úÂë\n```lang=log\n  \tat com.sun.proxy.$Proxy1551.doNestBondCouponInterest(Unknown Source)\n```\n\n= ²Â²â\n\n1. ÒªÃ´ÊÇÖ÷ÊÂÎñºÍÇ¶Ì×ÊÂÎñ³åÍ»ÁË\n1. ÒªÃ´Ö÷¿ØÏß³Ì¡¢×ÓÏß³Ì¾ù´æÔÚÊÂÎñ£¬³åÍ»ÁË\n\n= ½á¹û\n\n¸ù¾İÇ°ÎÄ·ÖÎö½á¹û£¬ÂäÊµÁËµÄÊÇµÚ¶şÖÖ¿ÉÄÜ¡£´úÂëÖĞÆôÓÃÁË×ÔĞĞ¹ÜÀíµÄÊÂÎñ£¬ÍÑÀëÁË `Spring` ¹ÜÀí¡£\n\n= ¶àËµÒ»¾ä\n\n·ÖÎöÎÊÌâ»¹ÊÇÒªÓĞ¶ÀÁ¢Ë¼Î¬µÄ£¬²»Òª±»ÅÔÈËµÄË¼Â·´øÍá£¬Òª¼á³Ö¶ÀÁ¢Ë¼¿¼¶ÀÁ¢·ÖÎö¡£Ğ¡ĞÄÍÆ²â´óµ¨ÇóÖ¤¡£\n·ÅÉÏ¸½¼ş£¬Çë×Ô¼º³¢ÊÔ·ÖÎöÒ»ÏÂ¡£\n{F320593}\ndateCreated: 1638802387\ndateModified: 1638802387\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-qjd4ejiays6vdth73ldo\ndocumentPHID: PHID-WIKI-tva7z2ociwi4sjfo47v3', metadata={'source': 'data/file\\wiki.csv', 'row': 52}), Document(page_content='id: 279\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: javaÏÂYYYYÓëyyyyÇø±ğ\nslug: troubleshot/yyyy-yyyy-diff/\ncontent: Êä³ö`YYYY-MM-dd`ºÍ`yyyy-MM-dd`£¬½á¹ûÊÇ²»Ò»ÑùµÄ£¬ÓÃ´í¾ÍÊÇbug\n\n**´úÂë**\n```lang=java\n        SimpleDateFormat df1 = new SimpleDateFormat("YYYY-MM-dd");\n        SimpleDateFormat df2 = new SimpleDateFormat("yyyy-MM-dd");\n        Calendar cal = Calendar.getInstance();\n        cal.set(2020, 11, 26);\n        LOGGER.info("date:{}", df1.format(cal.getTime()));\n        LOGGER.info("date:{}", df2.format(cal.getTime()));\n        cal.add(Calendar.DATE, 1);\n        LOGGER.info("date:{}", df1.format(cal.getTime()));\n        LOGGER.info("date:{}", df2.format(cal.getTime()));\n```\n\n**Êä³ö**\n```lang=txt\n09:38:20.689 [INFO ][main][demo.date.YearCheckSample] - date:2020-12-26\n09:38:20.700 [INFO ][main][demo.date.YearCheckSample] - date:2020-12-26\n09:38:20.701 [INFO ][main][demo.date.YearCheckSample] - date:2021-12-27\n09:38:20.701 [INFO ][main][demo.date.YearCheckSample] - date:2020-12-27\n```\n\n**Ô­Òò**\n{F337239}\nÈçÍ¼£¬`YYYY`ÊÇ»ùÓÚÖÜµÄÄê£¬ÖÜÄÚ¿çÄê£¬¾ÍÊôÓÚÏÂÒ»ÄêÁË£»¶ø`yyyy`ÊÇ·ûºÏÈÏÖªÄÚµÄÄê¡£\n\nÊµ¼ÊÉÏ£¬Èç¹ûÊ¹ÓÃ`idea`±à¼­Æ÷£¬Ëü»áÌáÊ¾Äã`YYYY`ÊÇ`week year`¡£ËùÒÔ£¬ÒªÖØÊÓ`idea`µÄĞ¡»ÆÏß¡£\n{F337237}\ndateCreated: 1640828344\ndateModified: 1640828344\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-sbywqnv672zntx4fhlis\ndocumentPHID: PHID-WIKI-44xzvyztd7ylgygu7usf', metadata={'source': 'data/file\\wiki.csv', 'row': 53}), Document(page_content='id: 326\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Î´¼ÓÈ·ÈÏÇé¿öÏÂ£¬µ¼ÖÂÎÄ¼ş±»Î´¾­ÊÚÈ¨ÏÂÔØ\nslug: troubleshot/download-file-leak/\ncontent: ```lang=java\n    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n       ...\n       String fileName= request.getParameter("fileName");\n       response.setContentType("text/plain");\n       response.setHeader("Location",fileName);\n       response.reset();\n       response.setHeader("Cache-Control", "max-age=0" );\n       response.setHeader("Content-Disposition", "attachment; filename=" + fileName);\n       BufferedInputStream bis = null;\n       BufferedOutputStream bos = null;\n       OutputStream fos = null;\n       InputStream fis = null;\n       String filePath =templateFormaterOrderFactory.getSavePath()+"/"+fileName;\n\n       fis = new FileInputStream(filePath);\n       ...\n    }\n```\n\nÓĞÃ÷ÏÔµÄ°²È«ÎÊÌâ£º\n`fileName`Ó¦¸ÃÂú×ãÕıÔò±í´ïÊ½`[^/]+\\.[a-z0-9]{3}`\n\n²»×öµÄÎ£º¦ĞÔ£º\nÊÔÏë£¬¼ÙÉè`getSavePath()`µÃµ½µÄÂ·¾¶ÊÇ`/home/wasadmin/template`\nÓĞ¸ö¶ñÒâÓÃ»§Ê¹ÓÃ`fileName`½øĞĞĞáÌ½£º\n\n- `../etc/passwd`\n- `../../etc/passwd`\n- `../../../etc/passwd`\n\nÖ»ĞèÒªÈı´Î¾ÍÄÜ»ñµÃÎÄ¼ş½øĞĞÏÂÔØ\n\nÔ´ÓÚÕæÊµ´úÂë£º R3116:17370\ndateCreated: 1641799288\ndateModified: 1641799288\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-3rwnmxpcqmjndeitwkib\ndocumentPHID: PHID-WIKI-u5z3t7vtd2mgt3kotraa', metadata={'source': 'data/file\\wiki.csv', 'row': 54}), Document(page_content='id: 339\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÄÚ²¿ÎÊÌâÍ¨±¨0001\nslug: troubleshot/inner-bulletin-001/\ncontent: ## Çé¿ö\n\nÄ³ÏîÄ¿Í¶²úºó£¬ÈÕÖ¾¿ìËÙ´óÁ¿Ôö¼Ó£¬µ¼ÖÂ´ÅÅÌ¿Õ¼ä²»×ã¡£\n\n## ·ÖÎö½á¹û\n\nÒòÏîÄ¿×éÉÏ°æÊ±£¬½«ÈÕÖ¾¿ªÆôÎª `debug` µ¼ÖÂ¡£ÇÒÎ´¿ªÆô `logback` µÄÈÈÇĞ»»¡£\n\n## ´¦Àí·½°¸\n\n1. ÇåÀí¶àÓàÈÕÖ¾\n2. ½« `debug` ¿ª¹Ø¹Ø±Õ\n\n## ºóĞø¼Ó¹Ì´ëÊ©\n\n1. ËùÓĞÈÕÖ¾×é¼ş¾ùÉı¼¶µ½¹«Ë¾ÒªÇóµÄ `logback`£¬²¢¿ªÆôÈÈÇĞ»»¹¦ÄÜ\n2. ºóĞø½«°²ÅÅÏîÄ¿¹ÜÀí²¿ÔÚ¿ª·¢¼¯³É»·¾³ºÍÉú²ú¼¯³É»·¾³Ìí¼Ó¶ÔÈÕÖ¾ `XML` ÎÄ¼şµÄ `debug` ÅäÖÃ¼ì²é\ndateCreated: 1642060530\ndateModified: 1642060530\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-kex7tedhvhxl7ry24n3h\ndocumentPHID: PHID-WIKI-aj2wnsrzcraeam2l72fx', metadata={'source': 'data/file\\wiki.csv', 'row': 55}), Document(page_content='id: 340\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÄÚ²¿ÎÊÌâÍ¨±¨0002\nslug: troubleshot/inner-bulletin-002/\ncontent: ## Çé¿ö\n\nÄ³ÏîÄ¿Éú²úÉÏÍ¨¹ıÏß³Ìµ÷¶ÈÅúÁ¿£¬ÅúÁ¿·¢Æğºó£¬Í¨¹ıÏß³Ì³Ø½øĞĞÈÎÎñ·Ö·¢¡£µ«·¢ÏÖÈÎÎñÊ¼ÖÕÎŞ·¨Õı³£Íê³É¡£\n\n## ·ÖÎö½á¹û\n\n1. ¹Û²ì´úÂë£¬·¢ÏÖÏß³Ì³ØÎª¹Ì¶¨Ïß³Ì³Ø£¬Ïß³Ì»ù±¾²»»áÔö¼õ\n2. ¹Û²ìÈÕÖ¾·¢ÏÖ£¬¶à´Îµ÷ÓÃ£¬ÔËĞĞµÄÏß³Ì±àºÅÓë´úÂëÖĞÂß¼­²»·û\n3. ¹Û²ì `javacore` ·¢ÏÖ£¬¹Ì¶¨±àºÅµÄÏß³ÌÒÑ¾­ÏûÊ§\n4. ³õ²½ÅĞ¶¨ÎªÏß³ÌÒòÒì³£»ò´íÎóµ¼ÖÂÌáÇ°ÍË³ö\n\nµ«ÓÉÓÚ´úÂëÖĞ×Ô±£»¤´æÔÚ£¬ÒÑ¾­²¶»ñÁËÒì³££¬ËùÒÔÎ´ÄÜ½øÒ»²½»ñÈ¡ĞÅÏ¢¡£\n\nºó·¢ÏÖ¸ÃÏîÄ¿×î½üÒ»´ÎÈë¿âÊ±±ä¶¯ÎÄ¼şÎª `4` ¸öÎÄ¼ş¡£Èë¿âºó£¬°æ±¾¿â³ö¿â `5` ¸öÎÄ¼ş¡£ÏîÄ¿×éÅĞ¶¨¶à³öµÄÎÄ¼şÎŞÓ°Ïì£¬Î´ÏÂ·¢¡£¶øÒòÎª `Java` µÄ `class` ±àÒë»úÖÆ£¬`import` Ïà¹ØµÄÎÄ¼şĞèÒªÓĞÒ»¶¨ÄÚÁª£¬¹Ê±ØĞë±ä¸ü¡£Ã»ÓĞ±ä¸üÇé¿öÏÂ£¬Ö±½Ó±¨ `java.lang.LinkageError` ¡£ÒòÎªÏß³ÌÖ»²¶»ñÁËÒì³££¬¶Ô´íÎóÎŞ´¦Àí£¬µ¼ÖÂÏß³ÌÖ±½ÓÏûÊ§¡£\n\n## ´¦Àí·½°¸\n\nÖØĞÂÏÂ·¢°æ±¾£¬°´°æ±¾¿âÇåµ¥³ö¿â\n\n## ºóĞø¼Ó¹Ì´ëÊ©\n\nÑÏ¸ñ°´°æ±¾¿âÏÂ·¢Çåµ¥ÏÂ·¢ÎÄ¼ş£¬ÑÏ¸ñÒÔ´ËÎª×¼\ndateCreated: 1642060582\ndateModified: 1642060582\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-gepqtahjrzpptygk3fmj\ndocumentPHID: PHID-WIKI-iqekhe25nk7plyuipg4n', metadata={'source': 'data/file\\wiki.csv', 'row': 56}), Document(page_content='id: 349\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: DB2µÄmergeÔÚÌØ¶¨³¡¾°ÏÂĞ§ÂÊµÍ\nslug: troubleshot/db2-merge-match-index/\ncontent: 1¡¢¹ÊÕÏÇé¿ö\n\n  1£©¹ÊÕÏÏÖÏó£º3ÔÂ4ºÅÏÂÎç4µã£¬½Ó¿Í»§Í¨ÖªÎŞ·¨µÇÂ½´ú¿Í´úÀí¹ÜÀí¶Ë»òµÇÂ¼ºó²éÑ¯ÏìÓ¦»ºÂı£¬È¥»ú·¿¼ì²éÊı¾İ¿âCPUºó·¢ÏÖ£¬Êı¾İ¿âCPUÒ»Ö±ÔÚ90%ÒÔÉÏ£¬´¦ÓÚ¸ßÎ»ÔËĞĞ£»ºóÏµÍ³¾­¹ıÖØÆôÏà¹ØÏµÍ³£¬Ê¹Êı¾İ¿âCPU»Ö¸´¡£\n  2£©¹ÊÕÏ·ÖÎö£ºÏîÄ¿×éÏÖ³¡·ÖÎö£¬ÈÏÎªÓĞÒµÎñÖ´ĞĞÁËĞÔÄÜ½Ï²îµÄ²éÑ¯Óï¾ä£¬²¢ÇÒ·´¸´Ö´ĞĞµ¼ÖÂ¡£²¢ÇÒÍ¬Ê±ÉêÇëĞĞÄÚDBA×¥È¡Êı¾İ¿â¿ìÕÕ£¬·ÖÎöCPUÏûºÄµÄsqlÓï¾ä¡£\n  3£©·ÖÎö½áÂÛ£º¸ù¾İÏÖ³¡×¥È¡½á¹û£¬·ÖÎöµÃ³öÆÚÈ¨ÅÆ¼Û½ÓÈëµÄ¹¦ÄÜ´æÔÚÈ±Ïİ¡£\n\n      Ê¹ÓÃmergeÓï¾ä¼ÇÂ¼ÅÆ¼ÛÊ±£¬onµÄÌõ¼ş×ßÁËË÷Òı£¬µ«Ë÷ÒıÉè¼Æ¼°Ê¹ÓÃ´æÔÚÈ±Ïİ£¬Í¬Ê±ÅÆ¼ÛÆµÂÊ½Ï¸ß£¬Áô´æµÄÊı¾İ¿âÅÆ¼Ûµ½ÁËÒ»¶¨µÄÊıÁ¿¼¶ºó£¨100W£©£¬µ¼ÖÂmergeĞ§ÂÊµÍÏÂ£¬Õ¼ÓÃCPU×ÊÔ´¹ı¶à£¬Ê¹Êı¾İ¿â³¤Ê±¼ä¸ßË®Î»ÔËĞĞ¡£ÔÚ¸ÃÊ±¼ä¶Î£¬ÒµÎñÂ½Ğø½øÀ´×ö¶Ô¹«½»Ò×»ò¸÷ÖÖ±¨±í²éÑ¯£¬²¿·ÖĞÔÄÜµÍÏÂµÄ²éÑ¯Ö±½ÓÊ¹Êı¾İ¿âCPU³å¸ß£¬²¢ÇÒ¾Ó¸ß²»ÏÂ¡£\n\n\n2¡¢ÎÊÌâËùÉæ¼°µÄ³ÌĞòÄ£¿é£¬´úÂëÂß¼­\n   1.Éæ¼°ÆÚÈ¨ÅÆ¼Û½ÓÈë´úÂë\n   2.ÆÚÈ¨ÅÆ¼Û½ÓÈëÊÇË«»ú½ÓÈë£¬ÎªÁË½µµÍÊı¾İ¿âÎŞĞ§ÅÆ¼Û´æ´¢£¬¹ÊÊ¹ÓÃmerge·½·¨½µµÍÊı¾İÁ¿¡£\n   3.mergeÍ¨¹ıretecode±ÒÖÖ£¬applÀàĞÍ£¬pdateÊ±¼ä×÷Îª¹ØÁªÌõ¼ş£¬²¢ÇÒÈı×Ö¶Î×÷ÎªË÷Òı\n3¡¢´úÂë×ß²éÒÅÂ©·ÖÎö\n   1.Í¨¹ı¾²Ì¬´úÂë²é¿´£¬·¢ÏÖpdate×÷ÎªÌõ¼şÊ±£¬¶ÔÆä½øĞĞÁËto_char²Ù×÷£¬¹ÊË÷ÒıÊ¹ÓÃĞ§ÂÊÌØ±ğµÍ£¬cpuÏûºÄÑéÖ¤\n   2.¸ù¾İÊı¾İÁ¿¼°ÅÆ¼Û²éÑ¯Ê¹ÓÃ³¡¾°·ÖÎö£¬¿ÉÒÔÊ¹ÓÃinsertÌæ´úmerge¡£ĞŞÕı·½°¸ÓëĞĞÀï¹µÍ¨È·ÈÏ£¬Âú×ãÎÊÌâ½â¾öĞèÒª\n4¡¢ĞŞÕı·½°¸\n   1.½«ÆÚÈ¨ÅÆ¼Û½ÓÈëÔ­À´mergeµÄµØ·½£¬¸ÄÎªÖ±½ÓinsertÅÆ¼Û¡£\n   2.µ÷ÕûÊ¹ÓÃÅÆ¼ÛµØ·½µÄË÷Òı£¬Ìá¸ß²éÑ¯Ğ§ÂÊ\n   3.µ÷ÕûÊµÎïÏúÊÛ½»Ò×²éÑ¯Óë¿â´æÓà¶îÊ±µã²éÑ¯µÄ²éÑ¯·¶Î§ºÍÂß¼­£¬ÓÅ»¯²éÑ¯Ğ§ÂÊ\ndateCreated: 1642123785\ndateModified: 1642123785\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-3blngx3xnkafwafkudvn\ndocumentPHID: PHID-WIKI-giqndlts33zt5qmfz2bm', metadata={'source': 'data/file\\wiki.csv', 'row': 57}), Document(page_content='id: 524\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: WindowsÏÂÎŞ·¨Á¬½ÓDB2\nslug: troubleshot/windows-db2-link-fail/\ncontent: Á¿»¯Í¶×Ê²¿Í¬ÊÂ³ÂÖ¥¾²( @chenzhijing )·¢ÏÖ DB2 ¼àÌı¶Ë¿ÚÓëÆóÒµÎ¢ĞÅ¼àÌı¶Ë¿Ú³åÍ»£¬¶¼¿ÉÄÜÇÀÕ¼ 50000¡£\n\nÈçÓĞWindows¿ª·¢»·¾³ÎŞ·¨Á¬½ÓÊı¾İ¿â£¬¿É¿¼ÂÇ¹Ø±ÕÆóÒµÎ¢ĞÅºóÖØÆô DB2 ÔÙÊÔ¡£\ndateCreated: 1649746871\ndateModified: 1649746871\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-ckwnafgtwfwuw4rovi3w\ndocumentPHID: PHID-WIKI-mra7mown5fhrxxehpwlg', metadata={'source': 'data/file\\wiki.csv', 'row': 58}), Document(page_content='id: 351\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: XNETÊı¾İ°ü¹ı´ó\nslug: troubleshot/xnet-pack-too-big/\ncontent: ÄÚ²¿¹ÊÕÏ--´ú¿Í×Ê½ğ½»Ò×ÏµÍ³V4.0--¶Ô¹«ÆÚÈ¨ÈÕ±¨±íÍ³¼ÆÒì³£\n\n## ÏÖÏó£º \n\n¿Í»§·´À¡¶Ô¹«ÆÚÈ¨Í¨ÓÃ²éÑ¯¡ª¡ªDelta×ÛºÏÍ·´çÈÕ±¨±í¡ª¡ªÍ³¼Æµ±ÈÕ³¨¿Ú£¬±¨´í\n\n## ·ÖÎö£º\n\n²éÑ¯Î´µ½ÆÚ½»Ò×Ê±£¬ÓÉÓÚÒ»´ÎĞÔ»ñÈ¡½»Ò×µÄ±ÊÊı¹ı´ó£¬µ¼ÖÂÊı¾İ°ü³¤¶È³¬³öxnetÔÊĞíµÄ×î´ó³¤¶ÈÏŞÖÆ\n\n## ½â¾ö£º\n\n¶ÔÓÚdelta×ÛºÏÍ·´çÈÕ±¨±í£¬Î´ÏŞÖÆ²éÑ¯°ü¼ÇÂ¼Êı£¬µ¼ÖÂ°ü³¬xnet´óĞ¡£¬¸ÄÎª·Ö°ü»ñÈ¡Î´µ½ÆÚ½»Ò×¡£\n\n## ËµÃ÷\n\n`xnet4j` µÄ `XNetData.DATA_MAX_LEN` ×î´óÊÇ `999999`¡£ËùÒÔ£¬Èç¹û³¬ÏŞ£¬¾ÍÓĞ¿ÉÄÜÒıÆğ¹ÊÕÏ¡£ÈçÓĞ±ØÒª£¬Çë×ÔĞĞ·Ö°ü¡£\ndateCreated: 1642124752\ndateModified: 1642124752\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-7bx4reclfjl6morrcyhz\ndocumentPHID: PHID-WIKI-6vlksh6a4ra6ylq2lnua', metadata={'source': 'data/file\\wiki.csv', 'row': 59}), Document(page_content='id: 357\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ê±¼äÈÕÆÚ´íÎó¼¯ÖĞÌù\nslug: troubleshot/some-date-error/\ncontent: == ´íÎó1\n\n```lang=txt\n?ÏÖÏó£º \n\nÎÊÌâÃèÊö£º2012-02-29£¬ÖĞ¹úÒøĞĞ¸÷·ÖĞĞ·´Ó³¿Í»§Ç©Ô¼²»³É¹¦£¬Ç©Ô¼È· ÈÏ½çÃæÌáÊ¾·Ç·¨Â¼Èë£¬Ó°ÏìÒµÎñÕı³£½»Ò×¡£\n\n?·ÖÎö£º\n\nÄ¿Ç°X-PAD»ú¹¹Àí²ÆÏµÍ³¹´Ñ¡¡°³¤ÆÚÓĞĞ§¡±Ê±£¬ÏµÍ³Éè¶¨µÄÊÇµ±Ç°ÄêÊı¼ÓÉÏ50Äê£¬Ö±½ÓÔÚµ±Ç°ÈÕÆÚÉÏ¼ÓÉÏÄêÊı£¬²¢Ã»ÓĞÈòÄêÕâ¸öÌØÊâÈÕ×Ó×öÑéÖ¤£¬Òò´Ë²ÅÓĞ´ËÎÊÌâ³öÏÖ¡£\n\n?½â¾ö£º\n\nÌí¼ÓÈÕÆÚÓĞĞ§ÑéÖ¤£¬µ÷ÓÃÕıÈ·µÄÌí¼ÓÄêÊıµÄÈÕÆÚ·½·¨¡£ \n```\n\n== ´íÎó2\n\n```lang=js,lines=12\n? ÏÖÏó£º \n\nXPADSÏµÍ³ÔÚ×ö½»Ò×µÄÊ±ºò·¢ÏÖ9ÔÂ1ÈÕÔÚÈÕÆÚ¿Ø¼şÖĞÏÔÊ¾ÎªÖÜÁù\n\n? ·ÖÎö£º\n\nÈ·ÈÏÊÇbug\n\nsetMonth ·½·¨\nÉèÖÃ Date ¶ÔÏóÖĞÓÃ ±¾µØÊ±¼ä±íÊ¾µÄÔÂ·İÖµ¡£ \ndateObj.setMonth(numMonth[, dateVal])\n²ÎÊı\ndateObj\n±ØÑ¡Ïî¡£ÈÎÒâ Date ¶ÔÏó¡£\nnumMonth\n±ØÑ¡Ïî¡£Ò»¸öµÈÓÚÔÂ·İÖµµÄÊıÖµ¡£\ndateVal\n¿ÉÑ¡Ïî¡£Ò»¸ö´ú±íÈÕÆÚµÄÊıÖµ¡£Èç¹ûÃ»ÓĞÌá¹©´Ë²ÎÊı£¬ÄÇÃ´½«Ê¹ÓÃÍ¨¹ıµ÷ÓÃ getDate ·½·¨¶øµÃµ½µÄÊıÖµ¡£\n--------\n8.31µ÷ÓÃÈ¡ÏÂÒ»¸öÔÂµÄÈÕÆÚÊ±£¬ÓÉÓÚjs´úÂëÖĞÊÇ²ÉÈ¡year,month,dateÖğÏîÊäÈëµÄ·½Ê½\nµÚÒ»¸ösetYearÊäÈëyearÊ±£¬ÕıÈ·£¬ÎŞÎó£»\nµÚ¶ş¸ösetMonth£¬ÔÚÖ»ÊäÈëmonthÊ±£¬´æÔÚÒşº¬±äÁ¿date£¬ÖµÎªµ±Ç°Öµ31¡£ÕâÊ±£¬ÊäÈë8´ú±í9ÔÂÊ±£¬ÓÖ´øÉÏÁË31´ú±í31ºÅ¡£ÈÕÀúÉÏÃ»ÓĞ9.31£¬¾Í×Ô¶¯Ìøµ½ÁË10.1¡£µ¼ÖÂbugµÄ·¢Éú¡£\n\n? ½â¾ö£º\n\nÖ±½Óµ÷ÓÃÓĞ²Î¹¹Ôìº¯Êı»òÕß²ÉÓÃ setMonth(month,1)\n```\n\n== ´íÎó3\n\n```lang=java,lines=12\n?ÏÖÏó£º\n\n2013Äê6ÔÂ7ÈÕÍøÒø¶Ë½øĞĞÎ¯ÍĞ²éÑ¯Ê±±¨XPAD.S170[Ö»Ö§³ÖÏàÁÚÁ½¸öÔÂµÄ¿çÔÂ²éÑ¯]´íÎó¡£\n\n?·ÖÎö£º¹«Ë¾¹«ÓÃ¹¤¾ß·½·¨£¬CalendarµÄaddMonth´æÔÚÎÊÌâ\n\n1) ÍøÒø¶Ë²éÑ¯¿ªÊ¼ÈÕÆÚºÍ½áÊøÈÕÆÚÄ¬ÈÏÊÇÒ»ÖÜ£¬µ±½áÊøÈÕÆÚÎª2013Äê6ÔÂ7ÈÕÊ±£¬¿ªÊ¼ÈÕÆÚÎª2013Äê5ÔÂ31ÈÕ¡£\n2) ÅĞ¶¨ÊÇ·ñÎªÁ½¸öÔÂÄÚ²éÑ¯£ºÏµÍ³ºóÌ¨³ÌĞòÖĞ»áÅĞ¶ÏÍøÒø¶Ë´«ËÍµÄ¿ªÊ¼ÈÕÆÚºÍ½áÊøÈÕÆÚÊÇ·ñÊÇÏàÍ¬ÔÂ·İ£¬Èç²»ÊÇ£¬Ôò½«¿ªÊ¼ÈÕÆÚ¼Ó1¸öÔÂ£¬ÔÙÓë½áÊøÈÕÆÚ±È½ÏÁ½¸öÔÂÊÇ·ñÊÇÍ¬Ò»¸öÔÂ£¬·ñÔòÅĞ¶¨Îª¡°¿çÔ½ÁËÁ½¸öÔÂµÄ²éÑ¯¡±£»\n3) ´«ÈëÈÕÆÚÖĞ£¬¿ªÊ¼ÈÕÆÚÎª20130531Ê±£¬ÏµÍ³20130531ÉÏ¼ÓÒ»¸öÔÂÊ±£¬Òò31ºÅÅĞ¶Ï´íÎó£¬»¹»ØµÄÔÂ·İÎª2013Äê7ÔÂ£¬Óë½áÊøÈÕÆÚ20130607µÄ6ÔÂ²»ÏàµÈ£¬¹Ê¸ø³ö[Ö»Ö§³ÖÏàÁÚÁ½¸öÔÂµÄ¿çÔÂ²éÑ¯]ÌáÊ¾¡£\n\n?½â¾ö£ºĞŞÕı¹«ÓÃ·½·¨addMonth\n\npublic void addMonth(int monthCount) {\n   cal.set(Calendar.MONTH, cal.get(Calendar.MONDAY) + monthCount);\n}\n\nÕıÈ··½·¨£¬´Ë·½·¨£¬ÊÇÔÚÔ­ÓĞÈÕÆÚÉÏ¼ÓÒ»¸öÔÂ£¬µ«Èç¹ûÏÂÒ»¸öÔÂÓë±¾ÔÂÈç¹ûÔÂÄ©´æÔÚ²îÒìÊ±£¬»á×Ô¶¯µ÷Õû¡£\n\npublic void addMonth(int monthCount) {\n    cal.add(Calendar.MONTH, 1);\n}\n```\n\n== ´íÎó4\n\n```lang=txt\nÒ»¡¢ÏÖÏó£º \n\nÎÊÌâÃèÊö£º2012-02-29£¬ÖĞ¹úÒøĞĞ¸÷·ÖĞĞ·´Ó³¿Í»§Ç©Ô¼²»³É¹¦£¬Ç©Ô¼È·ÈÏ½çÃæÌáÊ¾·Ç·¨Â¼Èë£¬Ó°ÏìÒµÎñÕı³£½»Ò×¡£\n\n¶ş¡¢·ÖÎö£º\n\n1¡¢´ËÎÊÌâÊôÓÚÏµÍ³ÒÅÁôBUG£»\n2¡¢Ä¿Ç°X-PAD»ú¹¹Àí²ÆÏµÍ³¹´Ñ¡¡°³¤ÆÚÓĞĞ§¡±Ê±£¬ÏµÍ³Éè¶¨µÄÊÇµ±Ç°ÄêÊı¼ÓÉÏ50Äê£¬²¢Ã»ÓĞÈòÄêÕâ¸öÌØÊâÈÕ×Ó×öÑéÖ¤£¬Òò´Ë²ÅÓĞ´ËÎÊÌâ³öÏÖ¡£\n\nÈı ½â¾ö£º\n\n¼øÓÚÄ¿Ç°X-PAD¸öÈËÀí²ÆÏµÍ³µÄ¿Í»§Ç©Ô¼Î¬»¤½çÃæÃ»ÓĞ¡°³¤ÆÚÓĞĞ§¡±µÄ¹´Ñ¡£¬¹ÊÎŞ´ËÀàÎÊÌâ¡£Òò´Ë£¬X-PAD»ú¹¹Àí²ÆÏµÍ³Ò²°´´ËÖÖÊµÏÖ·½Ê½£¬ÔÚºóĞø°æ±¾ÖĞÍêÉÆ¡£\n```\ndateCreated: 1642127835\ndateModified: 1642127835\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-xhlieybso64pallvrle6\ndocumentPHID: PHID-WIKI-feesuasyhnddf66o2xbt', metadata={'source': 'data/file\\wiki.csv', 'row': 60}), Document(page_content='id: 418\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: QuartzÈÎÎñÍ¬Ê±´¥·¢\nslug: troubleshot/quartz-fire-in-sametime/\ncontent: ÔÚÊ¹ÓÃ `JobStoreTX` µÄÇé¿öÏÂ£¬¼¯ÈºÏÂÈİÒ×·¢ÉúÍ¬Ê±´¥·¢Çé¿ö£¬ĞèÒª¿ªÆô²ÎÊı\n\n> org.quartz.jobStore.acquireTriggersWithinLock = true\n\n²Î¿¼ÎÄµµ: [[ https://segmentfault.com/a/1190000015492260 | ¼ÇÒ»´ÎQuartzÖØ¸´µ÷¶È(ÈÎÎñÖØ¸´Ö´ĞĞ)µÄÎÊÌâÅÅ²é ]]\ndateCreated: 1646357481\ndateModified: 1646357481\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-aotygkbcvxnenadge2eo\ndocumentPHID: PHID-WIKI-agl47e7uext32brhilbv', metadata={'source': 'data/file\\wiki.csv', 'row': 61}), Document(page_content='id: 471\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Druid±¨SQLException: interrupt\nslug: troubleshot/druid-interrupted/\ncontent: ÔËĞĞÖĞµÄ´úÂë£¬ÔÚ`Druid`ÖĞ±¨³ö£º`SQLException: interrupt`\n\n**Ô­Òò**£ºÔÚÆäËûµØ·½¶Ô¸ÃÏß³Ìµ÷ÓÃÁË `Thread.interrupt()`¡£\n\n> `Druid` ÔÚ»ñÈ¡Ïß³ÌÊ±£¬´æÔÚÄÚ²¿µÈ´ı£¬ÀûÓÃÁË `ReentrantLock#lockInterruptibly`¡£Ïß³Ì±»´ò¶Ï£¬¾Í»á±¨´í¡£\n\n´úÂë(`DruidDataSource`)ÈçÏÂ£º\n```lang=java\n    private DruidPooledConnection getConnectionInternal(long maxWait) throws SQLException {\n            ... line 1613\n            try {\n                lock.lockInterruptibly();\n            } catch (InterruptedException e) {\n                connectErrorCountUpdater.incrementAndGet(this);\n                throw new SQLException("interrupt", e);\n            }\n            ...\n    }\n\n```\n\n**½¨Òé**£ºÊ¹ÓÃ `Druid` µÄÓ¦ÓÃ£¬ÇáÒ×²»Òª´ò¶ÏÏß³Ì\ndateCreated: 1647911496\ndateModified: 1647911496\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-tn6dwuuv47qqwnkv7ocb\ndocumentPHID: PHID-WIKI-qimbwmx2i6twkrqrxyjq', metadata={'source': 'data/file\\wiki.csv', 'row': 62}), Document(page_content='id: 474\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: MyBatisÏÂÊ¹ÓÃListµ¼ÖÂsql¹ı³¤\nslug: troubleshot/mybatis-sql-too-long/\ncontent: ```lang=xml\n            <if test="idList != null and idList.size() > 0">\n                and id not in\n                <foreach collection="idList" item="id" index="index" open="(" close=")" separator=",">\n                    #{id}\n                </foreach>\n            </if>\n```\n\nÕâÊÇÒ»¶Î±È½ÏµäĞÍµÄ `MyBatis` Ê¹ÓÃ `List` ½øĞĞ `sql` Æ´½ÓµÄ´úÂë¡£\n\nÕâÀïÓĞÒ»¸öÇ±ÔÚÎÊÌâ£º\n\n> `list` ¹ı´ó£¬´Ó¶øµ¼ÖÂÕûÌå `sql` ¹ı³¤¡£\n\n¶ø `mysql` Ö®ÀàµÄÊı¾İ¿â£¬ÄËÖÁ `Oracle` ¶¼ÓĞ `sql` Óï¾ä³¤¶È¿ØÖÆ¡£´æÔÚÓï¾ä±»¾ÜµÄ¿ÉÄÜ¡£\n\nÔ´×Ô R3203:a024f4922fde\ndateCreated: 1647917315\ndateModified: 1647917315\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-qkqwjjbrhyze4md2rys3\ndocumentPHID: PHID-WIKI-2mdsuyqcha3q437xzb2b', metadata={'source': 'data/file\\wiki.csv', 'row': 63}), Document(page_content='id: 777\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: OracleÏÂ±¨SQLRecoverableException: IO Error: Connection timed out (Read failed)\nslug: troubleshot/oracle-jdbc-sqlrecoverableexception/\ncontent: ## ÎÊÌâÏÖÏó\n\nÄ³ÏµÍ³¾­³£Å¼ÏÖ `ecas` ºÍÊı¾İÁ¬½Ó³¬Ê±µÄÇé¿ö\n1. `ecas` µÄ´íÎóÈÕÖ¾¼û¸½¼ş `ecas` ÈÕÖ¾Àï£¨`Connection timed out`£©\n2. 2ÔÂ9ºÅµÄ15µã¶à£¬17µã¶à£¬2ÔÂ10ºÅµÄ13µã¶à¾ù³öÏÖÁ¬½Ó³¬Ê±µÄÇé¿ö£¬¸½¼şÎª `awr` ±¨±í\n3. `ecas` ³¬Ê±ºó¹ıÒ»¶ÎÊ±¼äÓÖ¿ÉÒÔ×Ô¶¯ÖØÁ¬ÉÏ£¬»òÕßÖØÆô `ecas` Ó¦ÓÃÒ²¿ÉÒÔ½â¾ö¸ÃÎÊÌâ£¬»»ÁËÒ»¸ö `ecas` °æ±¾ÈÔ´æÔÚ¸ÃÎÊÌâ£¬ÁíÒ»Ä£¿éÔİÊ±Î´³öÏÖ³¬Ê±µÄÇé¿ö\n4. Óë¹«¹²¼¼Êõ²¿ÅÅ²é¹ıÒ»¶ÎÊ±¼ä£¬Êı¾İ¿âÉèÖÃµÄ×î´óÁ¬½ÓÊıºÍ `session` Êı¾ùÔÚ5Ç§¶à£¬Ô¶³¬¹ıÏµÍ³ËùĞèµÄÁ¬½ÓÊı\n\n## ÎÊÌâ·ÖÎö\n\n1. ´Ó `AWR` ±¨¸æ»ñÏ¤£¬Êı¾İ¿âÔËĞĞ»ù±¾Õı³£¡£°æ±¾Îª `19c`\n2. ´ÓÏµÍ³ÈÕÖ¾¿´£¬ÊÇ²ÉÓÃÁ¬½Ó³ØÄ£Ê½£¬Á¬½Ó³ØÊµÏÖÊÇ `DBCP`\n3. ´ÓÏµÍ³ÈÕÖ¾¿´£¬`Oracle` `JDBC` Çı¶¯°æ±¾Îª `ojdbc6 11.2.0.3.0`\n\n`Oracle 19c` Óë `Oracle JDBC ojdbc6.jar:11.2.0.3.0`£¬ÕâÁ½¸ö²»Æ¥Åä\n\n`Oracle 12c` ºó£¬µ÷ÕûÁË `DCD` µÄÕì²âÄ£Ê½£¬´Ó `tns` Ã¿ `10s` ·¢ `ping` ¸ÄÎª»ùÓÚ `TCP` µ×²ãµÄ `keepalive` »úÖÆ¡£\n\n¹ÊĞèÒªÇĞ»» `JDBC` °ü\n\nÁíÍâ£¬Ò²ÊÇÒòÎª¸ºÔØÌ«ÇáÁË£¬µ¼ÖÂ³ØÖĞµÄÁ¬½Ó¿ÉÄÜ¶ÏÁ¬ÁË¡£¿ÉÒÔ¿ªÆôÁ¬½Ó³ØµÄÁ¬½ÓÓĞĞ§ĞÔ¼ì²â£¬²»¹ıÕâ¸ö»á¼«´óÓ°ÏìĞÔÄÜ¡£\n\nÏîÄ¿»ùÓÚ `DBCP` £¬½¨Òé¿ªÆô `testWhileIde(=true)`£¬ÅäÖÃ `validationQuery` Óï¾ä£¬±ÈÈç `select 1 from dual`\n\n## ÎÊÌâ½â¾ö\n\n1. ¸ü»» `JDBC` Æ¥ÅäÊı¾İ¿â°æ±¾\n2. µ÷Õû `DBCP` ÅäÖÃ£¬¼ì²âÁ¬½ÓÓĞĞ§ĞÔ\n\n## ²Î¿¼ÎÄµµ\n\n1. [½âÊÍ 12c ÒÔºóµÄ DCD](https://sve.to/2016/04/07/dead-connection-detection-oracle-database-12c/)\n1. [DBCP ÅäÖÃ½âÊÍ](https://commons.apache.org/proper/commons-dbcp/configuration.html)\n1. [WASÏÂ¹«Ë¾Åöµ½µÄÁ¬½ÓÊ§Ğ§Çé¿ö](https://pha.erayt.com:8000/w/troubleshot/inner-bulletin-003/)\n\n## °¸ÀıÌá¹©ÈËÔ±\n\n·çÏÕÒµÎñÏß-·çÏÕÏîÄ¿²¿ ¾Ó³Ê´ï( @juchengda )\ndateCreated: 1677047895\ndateModified: 1677047895\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-lx4aitq3eow6kflg4yqp\ndocumentPHID: PHID-WIKI-cg3nurmgtmusih2x2fac', metadata={'source': 'data/file\\wiki.csv', 'row': 64}), Document(page_content='id: 150\nversion: 4\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ¶àÌ¬Óëif-else¶à·ÖÖ§µÄĞÔÄÜ¿¼Á¿\nslug: perf/invokedynamic/\ncontent: µ±Ç°¹«Ë¾Ä³ÏµÍ³ÖĞ£¬ÓĞÒ»¸ö·½·¨£¬ÀàËÆÕâÑù£º\n```lang=java,lines=10\n    public void convert(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(0)) {\n            dest.setProp00(src.getField(0));\n        }\n        if (src.isFieldSet(1)) {\n            dest.setProp01(src.getField(1));\n        }\n        if (src.isFieldSet(2)) {\n            dest.setProp02(src.getField(2));\n        }\n        if (src.isFieldSet(3)) {\n            dest.setProp03(src.getField(3));\n        }\n        if (src.isFieldSet(4)) {\n            dest.setProp04(src.getField(4));\n        }\n        if (src.isFieldSet(5)) {\n            dest.setProp05(src.getField(5));\n        }\n        if (src.isFieldSet(6)) {\n            dest.setProp06(src.getField(6));\n        }\n        if (src.isFieldSet(7)) {\n            dest.setProp07(src.getField(7));\n        }\n        if (src.isFieldSet(8)) {\n            dest.setProp08(src.getField(8));\n        }\n        if (src.isFieldSet(9)) {\n            dest.setProp09(src.getField(9));\n        }\n        if (src.isFieldSet(10)) {\n            dest.setProp10(src.getField(10));\n        }\n        if (src.isFieldSet(11)) {\n            dest.setProp11(src.getField(11));\n        }\n        if (src.isFieldSet(12)) {\n            dest.setProp12(src.getField(12));\n        }\n        if (src.isFieldSet(13)) {\n            dest.setProp13(src.getField(13));\n        }\n    }\n```\n¿ÉÒÔ¿´µ½£¬¸Ã´úÂëµÄ·ÖÖ§ÌØ±ğ¶à£¬¹¹½¨µ¥Ôª²âÊÔÀ´½øĞĞ¸²¸ÇÌØ±ğÀ§ÄÑ¡£»»¾ä»°Ëµ£¬¾ÍÊÇ[[ https://pha.erayt.com:8000/w/common/cyclomatic-complexity/ | È¦¸´ÔÓ¶È ]]ÌØ±ğ¸ß¡£\n\nÎÒ½øĞĞÁË¸ÄÔì£º\n**v1**\n```lang=java,lines=10\n    private static final Convertor[] CONVERTORS = new Convertor[]{\n            (src, dest) -> {\n                if (src.isFieldSet(0)) {\n                    dest.setProp00(src.getField(0));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(1)) {\n                    dest.setProp01(src.getField(1));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(2)) {\n                    dest.setProp02(src.getField(2));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(3)) {\n                    dest.setProp03(src.getField(3));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(4)) {\n                    dest.setProp04(src.getField(4));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(5)) {\n                    dest.setProp05(src.getField(5));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(6)) {\n                    dest.setProp06(src.getField(6));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(7)) {\n                    dest.setProp07(src.getField(7));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(8)) {\n                    dest.setProp08(src.getField(8));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(9)) {\n                    dest.setProp09(src.getField(9));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(10)) {\n                    dest.setProp10(src.getField(10));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(11)) {\n                    dest.setProp11(src.getField(11));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(12)) {\n                    dest.setProp12(src.getField(12));\n                }\n            },\n            (src, dest) -> {\n                if (src.isFieldSet(13)) {\n                    dest.setProp13(src.getField(13));\n                }\n            }\n    };\n\n    public void convert(CCSrcBean src, CCDestBean dest) {\n        for (Convertor c : CONVERTORS) {\n            c.conv(src, dest);\n        }\n    }\n\n    @FunctionalInterface\n    private interface Convertor {\n        void conv(CCSrcBean src, CCDestBean dest);\n    }\n```\n**v2**\n```lang=java,lines=10\n    private static final Setter[] SETTERS = new Setter[]{\n            (src, dest) -> {\n                dest.setProp00(src.getField(0));\n            },\n            (src, dest) -> {\n                dest.setProp01(src.getField(1));\n            },\n            (src, dest) -> {\n                dest.setProp02(src.getField(2));\n            },\n            (src, dest) -> {\n                dest.setProp03(src.getField(3));\n            },\n            (src, dest) -> {\n                dest.setProp04(src.getField(4));\n            },\n            (src, dest) -> {\n                dest.setProp05(src.getField(5));\n            },\n            (src, dest) -> {\n                dest.setProp06(src.getField(6));\n            },\n            (src, dest) -> {\n                dest.setProp07(src.getField(7));\n            },\n            (src, dest) -> {\n                dest.setProp08(src.getField(8));\n            },\n            (src, dest) -> {\n                dest.setProp09(src.getField(9));\n            },\n            (src, dest) -> {\n                dest.setProp10(src.getField(10));\n            },\n            (src, dest) -> {\n                dest.setProp11(src.getField(11));\n            },\n            (src, dest) -> {\n                dest.setProp12(src.getField(12));\n            },\n            (src, dest) -> {\n                dest.setProp13(src.getField(13));\n            }\n    };\n\n    @Override\n    public void convert(CCSrcBean src, CCDestBean dest) {\n        long bitResult = checkField(src);\n        conv(src, dest, bitResult);\n    }\n\n    private long checkField(CCSrcBean src) {\n        long bitResult = 0L;\n        for (int i = 0; i < ARRAY_SIZE; i++) {\n            bitResult |= (src.isFieldSet(i) ? 1L : 0L) << i;\n        }\n        return bitResult;\n    }\n\n    private void conv(CCSrcBean src, CCDestBean dest, long bitResult) {\n        for (int i = 0; i < ARRAY_SIZE; i++) {\n            if ((bitResult & (1L << i)) == 0L) {\n                continue;\n            }\n            SETTERS[i].set(src, dest);\n        }\n    }\n\n    @FunctionalInterface\n    private interface Setter {\n        void set(CCSrcBean src, CCDestBean dest);\n    }\n```\n\nÓÉÓÚÕâ¶Î´úÂëÊÇÔÚÒ»¸öĞèÒª¸ßĞ§¸ßĞÔÄÜµÄ³¡ºÏÏÂµÄ£¬ÎÒ¾Í¶Ô±ÈÁËÏÂÈıÕßµÄĞÔÄÜ¡£\nµÃµ½µÄ½á¹ûÊÇ£º\n> Ô­°æ > v1 > v2\n\nÀÏÊµËµÎÒºÜÒâÍâµÄ¡£ÎÒÒ»¿ªÊ¼ÒÔÎªÊÇ²ÉÓÃÁË1)¶àÌ¬´Ó¶ø·½·¨ËõĞ¡ÁË£¬·½±ã `JIT` ÈÈ»¯£»2)¼õÉÙ·ÖÖ§ÅĞ¶Ï£¬ÌáÉı·ÖÖ§Ô¤²â³É¹¦ÂÊ£¬´Ó¶ø»á´ïµ½ºÜ²»´íµÄĞÔÄÜ¡£¶øÊµ¼ÊÉÏ£¬Õâ¸ö²âÊÔ±íÃ÷²¢²»ÊÇÈç´Ë¡£ÎÒ³¢ÊÔÁË×ö[[ https://pha.erayt.com:8000/w/common/loop-unrolling/ | Ñ­»·Õ¹¿ª]]£¬È·ÊµÓĞĞ§¹û¡£µ«ÊÇÈÔÈ»²»ÈçÔ­°æ¡£\n\nÎÒÒ»Ö±¾õµÃÆæ¹Ö£¬Ö±µ½ÎÒ¿´µ½ÕâÆªÎÄÕÂ£º[[ https://github.com/brettwooldridge/HikariCP/wiki/Down-the-Rabbit-Hole#invocation-invokevirtual-vs-invokestatic | invokevirtual-vs-invokestatic ]]¡£ÕâÆªÎÄÕÂÊÇ `HikariCP` ×÷ÕßĞ´µÄÏà¹ØÓÅ»¯Ï¸½Ú¡£ÕâÀïÃæËµµ½ÁË `JVM` µ÷ÓÃÖ¸Áî£¬ÕâÒ²ÊÇÎÒÒ»Ö±ºöÂÔµÄµØ·½¡£\n\n´ÓÖ¸ÁîÀ´Ëµ£¬ÓÉÓÚ `Java` ĞèÒªÖ§³Ö¶¯Ì¬µ÷ÓÃ£¬ËùÒÔÊÆ±Ø´æÔÚ²éÕÒ¡£\n{F315554}\n´ÓÍ¼ÉÏ£¬ÎÒÃÇ¿ÉÒÔÖªµÀ£º`invokevirtual`/`invokedynamic` ĞèÒª¶¯Ì¬µ÷ÓÃ¡£ºÜ²»ĞÒ£¬×ª»¯Îª `Lambda` ±í´ïÊ½ºó£¬Ê¹ÓÃµÄµ÷ÓÃÖ¸Áî¾ÍÊÇ `invokedynamic`¡£Í¬Ê±ÊµÏÖ½Ó¿ÚÇé¿öÏÂ£¬»¹ĞèÒªµ÷ÓÃ¶¯Ì¬µÄ `invokeinterface`¡£ÔÚÑ¡ÔñÏî·Ç³£¶àµÄÇé¿öÏÂ£¬¼±¾ç½µµÍÁËĞÔÄÜ¡£¶øÕâ¸öĞÔÄÜ£¬ÔÚ `Java` ´úÂë²ãÃæ»¹¿´²»³ö¡£Ö»ÓĞÔËĞĞÖĞ²ÅÄÜ¿´µ½¡£\n\nÍ¨¹ıÊµÑé£¬È·Êµ¹Û²ìµ½»»ÓÃ `invokestatic` Ã÷ÏÔ¿ìÓÚÔ­ĞÍ¡£Ö¤ÊµÁËÈ·ÊµÊÇÕâ¸öÔ­Òòµ¼ÖÂµÄ¡£\n```lang=java,lines=10\n    private static void convertField00(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(0)) {\n            dest.setProp00(src.getField(0));\n        }\n    }\n\n    private static void convertField01(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(1)) {\n            dest.setProp01(src.getField(1));\n        }\n    }\n\n    private static void convertField02(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(2)) {\n            dest.setProp02(src.getField(2));\n        }\n    }\n\n    private static void convertField03(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(3)) {\n            dest.setProp03(src.getField(3));\n        }\n    }\n\n    private static void convertField04(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(4)) {\n            dest.setProp04(src.getField(4));\n        }\n    }\n\n    private static void convertField05(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(5)) {\n            dest.setProp05(src.getField(5));\n        }\n    }\n\n    private static void convertField06(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(6)) {\n            dest.setProp06(src.getField(6));\n        }\n    }\n\n    private static void convertField07(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(7)) {\n            dest.setProp07(src.getField(7));\n        }\n    }\n\n    private static void convertField08(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(8)) {\n            dest.setProp08(src.getField(8));\n        }\n    }\n\n    private static void convertField09(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(9)) {\n            dest.setProp09(src.getField(9));\n        }\n    }\n\n    private static void convertField10(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(10)) {\n            dest.setProp10(src.getField(10));\n        }\n    }\n\n    private static void convertField11(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(11)) {\n            dest.setProp11(src.getField(11));\n        }\n    }\n\n    private static void convertField12(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(12)) {\n            dest.setProp12(src.getField(12));\n        }\n    }\n\n    private static void convertField13(CCSrcBean src, CCDestBean dest) {\n        if (src.isFieldSet(13)) {\n            dest.setProp13(src.getField(13));\n        }\n    }\n\n    @Override\n    public void convert(CCSrcBean src, CCDestBean dest) {\n        convertField00(src, dest);\n        convertField01(src, dest);\n        convertField02(src, dest);\n        convertField03(src, dest);\n        convertField04(src, dest);\n        convertField05(src, dest);\n        convertField06(src, dest);\n        convertField07(src, dest);\n        convertField08(src, dest);\n        convertField09(src, dest);\n        convertField10(src, dest);\n        convertField11(src, dest);\n        convertField12(src, dest);\n        convertField13(src, dest);\n    }\n```\n\nÕâ½áÂÛÒ²Å¤×ªÁËÎÒ¶Ô¶àÌ¬ÓÅ»¯´úÂë½á¹¹µÄÇ¿ÆÈÖ¢»òÕßËµÆ«Ö´¡£ÔÚ´Ë×Ü½á£º\n1. ÕæÕıµÄÍòÓÃÁ¼·½£ºÊµÊÂÇóÊÇ£¬¾ßÌåÎÊÌâ¾ßÌå·ÖÎö¡£\n2. ÓÅ»¯²»ÄÜÏëµ±È»£¬±ØĞë»ùÓÚÊı¾İ£¬Êµ¼ÊÔËĞĞµÄÊı¾İ¡£\n3. ÔúÊµµÄ»ù´¡ÖªÊ¶ÄÜ½â´ğĞí¶àÒÔÎª½âÊÍ²»ÁËµÄÎÊÌâ¡£\n\n²âÊÔ´úÂë£º{F316264}\ndateCreated: 1638367365\ndateModified: 1638367365\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-tqf3iocmlapdsoj4t6zm\ndocumentPHID: PHID-WIKI-xcqu34elrj5pdmvlm57g', metadata={'source': 'data/file\\wiki.csv', 'row': 65}), Document(page_content='id: 390\nversion: 4\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: HikariCPÅäÖÃ\nslug: perf/hikaricp-datasource/\ncontent: À´×Ô£º±±·Ö ¶Îº£Èô( @duanhairuo )\n\n```lang=java,lines=20\n@Configuration(proxyBeanMethods = false)\npublic class DataSourceConfiguration {\n    @Bean\n    public HikariDataSource dataSource() {\n        HikariDataSource dataSource = new HikariDataSource();\n        dataSource.setJdbcUrl("jdbc:mysql://127.0.0.1:3306/test001");\n        dataSource.setMinimumIdle(10);// ×îÉÙ¿ÕÏĞÁ¬½Ó£¬·ÀÖ¹Í»È»Á÷Á¿±©ÔöÊ±Á¬½ÓÊı²»¹»\n        dataSource.setMaximumPoolSize(20);// ¾­¹ıÑ¹Á¦²âÊÔ20 Õı³£À´ËµÊÇ×ã¹»µÄ\n        dataSource.addDataSourceProperty(PropertyKey.USER.getKeyName(), "root");\n        dataSource.addDataSourceProperty(PropertyKey.PASSWORD.getKeyName(), "hairuo123");\n        //Êı¾İ¿âºÍÓ¦ÓÃÒ»°ã¶¼ÔÚÒ»¸ö¾ÖÓòÍøÄÚ£¬·Ç³£¿ì¾Í»á½¨Á¢Á¬½Ó£¬Èç¹û±¨´íËµÃ÷server¶Ë³öÎÊÌâÁË,Ä¬ÈÏ30s,Èç¹û¸ÃÖµĞ¡ÓÚ250ms»áÖØÖÃÎª30s\n        dataSource.addDataSourceProperty(PropertyKey.connectTimeout.getKeyName(), 300);\n        dataSource.addDataSourceProperty(PropertyKey.allowPublicKeyRetrieval.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);\n        dataSource.addDataSourceProperty(PropertyKey.sslMode.getKeyName(), SslMode.DISABLED);// ±ÜÃâÈÕÖ¾¾¯¸æ\n        // ×ª»»ÎŞĞ§ÈÕÆÚÎªnull,·ñÔò¶ÔÓÚÁãÖµÈÕÆÚ»á±¨´í\n        dataSource.addDataSourceProperty(PropertyKey.zeroDateTimeBehavior.getKeyName(), ZeroDatetimeBehavior.CONVERT_TO_NULL);\n        // ×Ô¶¯ÖØÁ¬³É¹¦ºó£¬Á¬½Ó²»ÉèÖÃÎªÖ»¶Á\n        dataSource.addDataSourceProperty(PropertyKey.failOverReadOnly.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_FALSE);\n        // ¾¡¿ÉÄÜµÄÅúÁ¿²Ù×÷£¨insert¡¢update¡¢delete¶¼ÓĞĞ§¹û£©,batchSize±ØĞë´óÓÚ3²ÅÓĞĞ§¹û\n        dataSource.addDataSourceProperty(PropertyKey.rewriteBatchedStatements.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);\n        dataSource.addDataSourceProperty(PropertyKey.characterEncoding.getKeyName(), StandardCharsets.UTF_8.name());// ÉèÖÃ±àÂë¸ñÊ½\n        dataSource.addDataSourceProperty(PropertyKey.forceConnectionTimeZoneToSession.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);// Ç¿ÖÆÉèÖÃÊ±Çø\n        dataSource.addDataSourceProperty(PropertyKey.connectionTimeZone.getKeyName(), "GMT+8");// Ç¿ÖÆÉèÖÃÊ±Çø\n        dataSource.addDataSourceProperty(PropertyKey.autoReconnect.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);// Á¬½Ó×Ô¶¯»Ö¸´\n        dataSource.addDataSourceProperty(PropertyKey.cachePrepStmts.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);\n        dataSource.addDataSourceProperty(PropertyKey.prepStmtCacheSize.getKeyName(), 250);\n        dataSource.addDataSourceProperty(PropertyKey.prepStmtCacheSqlLimit.getKeyName(), 2048);\n        dataSource.addDataSourceProperty(PropertyKey.cacheCallableStmts.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);\n        dataSource.addDataSourceProperty(PropertyKey.cacheServerConfiguration.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);\n        dataSource.addDataSourceProperty(PropertyKey.useServerPrepStmts.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);\n        dataSource.addDataSourceProperty(PropertyKey.useLocalSessionState.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);//// ¼õÉÙ¸ôÀëÅäÖÃ´ÎÊı\n        dataSource.addDataSourceProperty(PropertyKey.elideSetAutoCommits.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);\n        dataSource.addDataSourceProperty(PropertyKey.alwaysSendSetIsolation.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_FALSE);// ¼õÉÙ¸ôÀëÅäÖÃ´ÎÊı\n        dataSource.addDataSourceProperty(PropertyKey.enableQueryTimeouts.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_FALSE);// Ã¿´Î²éÑ¯¶¼Ê¹ÓÃ³¬Ê±£¬Ôò¿ÉÄÜµ¼ÖÂGCÑ¹Á¦¹ı¸ß\n        dataSource.addDataSourceProperty(PropertyKey.connectionAttributes.getKeyName(), "none");// ºöÂÔ¼üÖµ¶Ô\n        dataSource.addDataSourceProperty(PropertyKey.useInformationSchema.getKeyName(), PropertyDefinitions.DEFAULT_VALUE_TRUE);// Êı¾İ×Öµä¼¯³É£¬Ğ§ÂÊ¸ü¸ß\n        return dataSource;\n    }\n}\n```\n\n²Î¿¼:[[ https://github.com/brettwooldridge/HikariCP#gear-configuration-knobs-baby | ¹Ù·½ÎÄµµ ]]\n²Î¿¼:[[ https://github.com/brettwooldridge/HikariCP/wiki/MySQL-Configuration | ¹Ù·½ MySQL ÓÅ»¯ ]]\n²Î¿¼:[[ https://github.com/brettwooldridge/HikariCP/wiki/JNDI-DataSource-Factory-(Tomcat,-etc.) | TomcatÅäÖÃ ]]\ndateCreated: 1644220018\ndateModified: 1644220018\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-zg26tsbu2dd7e2spx4yr\ndocumentPHID: PHID-WIKI-lwkn4mf5er6a556zpqaw', metadata={'source': 'data/file\\wiki.csv', 'row': 66}), Document(page_content='id: 152\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JRE8 GCÁ½ÖÖ²ßÂÔ\nslug: perf/jre8-jvm-gc/\ncontent: ```lang=sh,lines=20\n#!/bin/sh\n\n# !!! ËùÓĞ²ÎÊı£¬¾ùÖ»ÊÊÓÃÓÚ Oracle HotSpot JVM 1.8£¬ ²»ÊÊÓÃµÍ°æ±¾£¨Èç 7£©£¬Ò²²»ÊÊÓÃ¸ß°æ±¾£¨Èç 9£© !!!\n\njavac A.java\n\n# ²Î¿¼×ÊÁÏ£º https://www.oracle.com/cn/technical-resources/articles/java/g1gc.html\n# ²Î¿¼×ÊÁÏ£º https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html\n# ²Î¿¼×ÊÁÏ£º https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html\n\n# Error/GC ÈÕÖ¾´æ·ÅÎÄ¼ş¼Ğ\nLOG_DEST_DIR="/tmp"\n# HEAP DUMP ÈÕÖ¾´æ·ÅÎÄ¼ş¼Ğ\nDUMP_DEST_DIR="/tmp"\n\n# 64bit server mode\nSRV64_SETTINGS="-server -d64"\n# ½âËøÊµÑéĞÔ²ÎÊı\nUNLOCK_SETTINGS="-XX:+UnlockExperimentalVMOptions"\n# G1GC ²ßÂÔÏà¹Ø²ÎÊı\nG1_SETTINGS_DEFAULT="-XX:+UseG1GC -XX:G1HeapRegionSize=16M -XX:MaxGCPauseMillis=200"\nG1_SETTINGS="-XX:+UseG1GC -XX:G1HeapRegionSize=16M -XX:MaxGCPauseMillis=200 -XX:G1NewSizePercent=20 -XX:G1MaxNewSizePercent=60 -XX:ParallelGCThreads=4 -XX:InitiatingHeapOccupancyPercent=45 -XX:G1MixedGCLiveThresholdPercent=65 -XX:G1HeapWastePercent=10 -XX:G1MixedGCCountTarget=8 -XX:G1OldCSetRegionThresholdPercent=10 -XX:G1ReservePercent=10"\n# Meta Ïà¹ØÉèÖÃ\nMETA_SETTINGS="-XX:MetaspaceSize=128M -XX:MaxMetaspaceSize=128M"\n# HEAP ´óĞ¡ÉèÖÃ\nHEAP_SETTINGS="-Xms768M -Xmx768M"\n# JVM ±¨´íÊä³öÉèÖÃ\nERR_LOG_SETTINGS="-XX:ErrorFile=${LOG_DEST_DIR}/java_err_%p.log"\n# GC ÈÕÖ¾Êä³öÉèÖÃ\nGC_LOG_SETTINGS="-Xloggc:${LOG_DEST_DIR}/java_gc_%p.log -XX:+PrintGC -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=4 -XX:GCLogFileSize=256M -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCApplicationConcurrentTime -XX:+PrintGCApplicationStoppedTime"\n# HEAP DUMP Êä³öÉèÖÃ\nDUMP_SETTINGS="-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=${DUMP_DEST_DIR}/java_heap_dump_%p.hprof"\n# JIT ÉèÖÃ\nJIT_SETTINGS="-XX:ReservedCodeCacheSize=512M"\n# ½ûÓÃÏÔÊ½GCµ÷ÓÃ\nDISABLE_SYSGC_SETTINGS="-XX:+DisableExplicitGC"\n\n# Í¨¹ı java -version ÊµÑé²¢È·ÈÏ²ÎÊı\necho g1 default\ntime java $SRV64_SETTINGS $UNLOCK_SETTINGS $G1_SETTINGS_DEFAULT $META_SETTINGS $HEAP_SETTINGS $ERR_LOG_SETTINGS $GC_LOG_SETTINGS $DUMP_SETTINGS $JIT_SETTINGS $DISABLE_SYSGC_SETTINGS A\necho g1 perf\ntime java $SRV64_SETTINGS $UNLOCK_SETTINGS $G1_SETTINGS $META_SETTINGS $HEAP_SETTINGS $ERR_LOG_SETTINGS $GC_LOG_SETTINGS $DUMP_SETTINGS $JIT_SETTINGS $DISABLE_SYSGC_SETTINGS A\n\n# CMSGC ²ßÂÔÏà¹Ø²ÎÊı\nCMS_SETTINGS_DEFAULT="-XX:+UseConcMarkSweepGC" \nCMS_SETTINGS="-XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:SurvivorRatio=6 -XX:+CMSParallelRemarkEnabled -XX:+UseCMSInitiatingOccupancyOnly -XX:+CMSClassUnloadingEnabled" \n\n# Í¨¹ı java -version ÊµÑé²¢È·ÈÏ²ÎÊı\necho cms default\ntime java $SRV64_SETTINGS $UNLOCK_SETTINGS $CMS_SETTINGS_DEFAULT $META_SETTINGS $HEAP_SETTINGS $ERR_LOG_SETTINGS $GC_LOG_SETTINGS $DUMP_SETTINGS $JIT_SETTINGS $DISABLE_SYSGC_SETTINGS A\necho cms perf\ntime java $SRV64_SETTINGS $UNLOCK_SETTINGS $CMS_SETTINGS $META_SETTINGS $HEAP_SETTINGS $ERR_LOG_SETTINGS $GC_LOG_SETTINGS $DUMP_SETTINGS $JIT_SETTINGS $DISABLE_SYSGC_SETTINGS A\n```\n\n```lang=java\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class A {\n    public static void main(String[] args) {\n        List<Integer> list;\n        for (int i = 0; i < 100; i++) {\n            list = new ArrayList<>(500000);\n            for (int j = 0; j < 2000; j++) {\n                for (int k = 0; k < j; k++) {\n                    list.add(k);\n                    if (list.size() > 400000) {\n                        list.clear();\n                    }\n                }\n            }\n        }\n    }\n}\n```\n\nÓÃÒÔ²âÊÔÁ½ÖÖ²»Í¬²ßÂÔµÄ²âÊÔ´úÂë\n²âÊÔ£º\n # `CMS` ²ßÂÔ\n # `G1` ²ßÂÔ\n\n- ²Î¿¼×ÊÁÏ£º [[ https://www.oracle.com/cn/technical-resources/articles/java/g1gc.html | g1gc ]]\n- ²Î¿¼×ÊÁÏ£º [[ https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html | java under Linux ]]\n- ²Î¿¼×ÊÁÏ£º [[ https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html | java under Windows ]]\ndateCreated: 1638367420\ndateModified: 1638367420\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-wu6uyjhkvtbkj3nt6jns\ndocumentPHID: PHID-WIKI-aa7f2rffk2coaleinpbk', metadata={'source': 'data/file\\wiki.csv', 'row': 67}), Document(page_content='id: 136\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Java Ïß³Ì CPU Ç×ºÍĞÔ\nslug: perf/java-thread-affinity/\ncontent: (NOTE)Èç¹ûÄãÕıÔÚÓÃ `Netty` ¿ª·¢Ò»¸öµÍÍøÂçÑÓ³Ù³ÌĞò£¬Äã¿ÉÄÜ»á×¢Òâµ½ÃûÎªÏß³ÌÇ×ºÍĞÔµÄ¶«Î÷¡£Ïß³ÌÇ×ºÍĞÔÓÃÓÚÇ¿ÖÆ³ÌĞòÏß³ÌÅÜÔÚÌØ¶¨µÄ `CPU` ºËÉÏ»ò¶àºË¼¯ÉÏ¡£Í¨¹ıÕâÑù×ö£¬Äã¿ÉÒÔÏû³ı²Ù×÷ÏµÍ³µ÷¶È¹ı³ÌÖĞµÄÏß³ÌÇ¨ÒÆ¡£ĞÒÔËµÄÊÇ£¬ÓĞÒ»¸öÃûÎª `Java-Thread-Affinity` µÄ `Java` ¿â£¬¿ÉÒÔÇáËÉµØÓëÄúµÄ `Netty` Ó¦ÓÃ³ÌĞò¼¯³É¡£\n\n1. Ìí¼Ó°üÒÀÀµ\n```lang=xml\n<dependency>\n    <groupId>net.openhft</groupId>\n    <artifactId>affinity</artifactId>\n    <version>3.0.6</version>\n</dependency>\n```\n\n2. µ÷ÕûÏß³Ì³Ø´´½¨¹¤³§\n```lang=java\nfinal int acceptorThreads = 1;\nfinal int workerThreads = 10;\nEventLoopGroup acceptorGroup = new NioEventLoopGroup(acceptorThreads);\nThreadFactory threadFactory = new AffinityThreadFactory("atf_wrk", AffinityStrategies.DIFFERENT_CORE);\nEventLoopGroup workerGroup = new NioEventLoopGroup(workerThreads, threadFactory);\n\nServerBootstrap serverBootstrap = new ServerBootstrap().group(acceptorGroup, workerGroup);\n```\n\n²Î¿¼£º[[ https://netty.io/wiki/thread-affinity.html | Netty ÎÄµµ ]]\n²Î¿¼£º[[ https://github.com/OpenHFT/Java-Thread-Affinity | Java-Thread-Affinity github repo ]]\ndateCreated: 1638323842\ndateModified: 1638323842\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-vczdtx7yqc4xtc3c3ak5\ndocumentPHID: PHID-WIKI-577y2ucchpygdzhajr6a', metadata={'source': 'data/file\\wiki.csv', 'row': 68}), Document(page_content='id: 621\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: 1msÉæ¼°¼¼Êõµã\nslug: perf/to-reach-less-than-1ms/\ncontent: {F431836}\n\n²Î¿¼Á´½Ó£º\n\n- [Èí¼ş¼Ü¹¹ÈëÃÅ](http://www.ruanyifeng.com/blog/2016/09/software-architecture.html)\n- [·­Òë G1À¬»øÊÕ¼¯Æ÷ G1 GCµÄ²½Öè£¨ÉÏ£©](https://zhaoyanblog.com/archives/414.html)\n- [·­Òë G1À¬»øÊÕ¼¯Æ÷ G1 GCµÄ²½Öè£¨ÏÂ£©](https://zhaoyanblog.com/archives/433.html)\n- [Java Hotspot G1 GCµÄÒ»Ğ©¹Ø¼ü¼¼Êõ](https://tech.meituan.com/2016/09/23/g1.html)\n- [JAVA Ê°ÒÅ ¡ª CPU Cache Óë»º´æĞĞ](https://www.cnkirito.moe/cache-line/)\n- [ÌÚÑ¶Kona JDK ¼Ü¹¹ÓÅ»¯Êµ¼ù](https://mp.weixin.qq.com/s/8xRLM0DDwjcyjp7nEanhQQ)\n- [C ÍøÂç TCP-BBRÓµÈû¿ØÖÆÆÊÎö](https://zhuanlan.zhihu.com/p/180481154)\n- [TCP µÄÄÇĞ©ÊÂ¶ù£¨ÉÏ£©](https://coolshell.cn/articles/11564.html)\n- [TCP µÄÄÇĞ©ÊÂ¶ù£¨ÏÂ£©](https://coolshell.cn/articles/11609.html)\n- [TCPĞÔÄÜÓÅ»¯](https://zhuanlan.zhihu.com/p/170582219)\n- [¸ßÁ÷Á¿´ó²¢·¢Linux TCPĞÔÄÜµ÷ÓÅ](https://zhuanlan.zhihu.com/p/342004255)\n- [¿´Ò»±é¾ÍÀí½â£ºIOÄ£ĞÍÏê½â](https://juejin.cn/post/7036518015462015006)\n- [Invocation: invokevirtual vs invokestatic](https://github.com/brettwooldridge/HikariCP/wiki/Down-the-Rabbit-Hole#invocation-invokevirtual-vs-invokestatic)\n- [Ô­À´ 8 ÕÅÍ¼£¬¾Í¿ÉÒÔ¸ã¶®¡¸Áã¿½±´¡¹ÁË](https://www.cnblogs.com/xiaolincoding/p/13719610.html)\n- [Low latency in Java](https://finematics.com/low-latency-in-java/)\n- [Low-Latency Java: Part 1 ¡ª Introduction](https://dzone.com/articles/low-latency-java-part-1)\ndateCreated: 1653878626\ndateModified: 1653878626\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-anfyjrdq4d6phinlj7lm\ndocumentPHID: PHID-WIKI-h2ane7oddbuvkrq66fnu', metadata={'source': 'data/file\\wiki.csv', 'row': 69}), Document(page_content='id: 302\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÆÀ¹ÀJava¹Ø¼ü×ÖinstanceofµÄĞÔÄÜ\nslug: perf/java-instanceof-perf/\ncontent: == ²âÊÔ´úÂë\n\n```lang=java\n@Fork(value = 3)\n@BenchmarkMode({Mode.Throughput})\n@Warmup(iterations = 5, time = 1)\n@Measurement(iterations = 10, time = 1)\n@Threads(value = 8)\n@State(Scope.Benchmark)\npublic class CompareBenchmark {\n    private static final Object T = new Compare();\n\n    @Benchmark\n    public void testEquals(Blackhole blackhole) {\n        blackhole.consume(Compare.class.equals(T.getClass()));\n    }\n\n    @Benchmark\n    public void testInstanceOf(Blackhole blackhole) {\n        blackhole.consume(T instanceof Compare);\n    }\n}\n```\n\n== ½á¹û\n\n```lang=txt\nBenchmark                         Mode  Cnt          Score          Error  Units\nCompareBenchmark.testEquals      thrpt   30  942209208.027 ¡À 20262225.680  ops/s\nCompareBenchmark.testInstanceOf  thrpt   30  930088850.924 ¡À 22067583.950  ops/s\n```\n\n== ·ÖÎö\n\n¿ÉÒÔÊ¹ÓÃ`instanceof`£¬ĞÔÄÜ²»²î¡£Èç¹û¿ÉÒÔ£¬ÓÃ`equals`¸üºÃ£¬µ«²î¾à²»´ó¡£\ndateCreated: 1641362835\ndateModified: 1641362835\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-jr6fdeffdj6cyjdubi6j\ndocumentPHID: PHID-WIKI-4pk5vauqgmvuwnwinhxn', metadata={'source': 'data/file\\wiki.csv', 'row': 70}), Document(page_content='id: 84\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Java-thread-affinity\nslug: perf/java-thread-affinity/\ncontent: NOTE: Èç¹ûÄãÕıÔÚÓÃ `Netty` ¿ª·¢Ò»¸öµÍÍøÂçÑÓ³Ù³ÌĞò£¬Äã¿ÉÄÜ»á×¢Òâµ½ÃûÎªÏß³ÌÇ×ºÍĞÔµÄ¶«Î÷¡£Ïß³ÌÇ×ºÍĞÔÓÃÓÚÇ¿ÖÆ³ÌĞòÏß³ÌÅÜÔÚÌØ¶¨µÄ `CPU` ºËÉÏ»ò¶àºË¼¯ÉÏ¡£Í¨¹ıÕâÑù×ö£¬Äã¿ÉÒÔÏû³ı²Ù×÷ÏµÍ³µ÷¶È¹ı³ÌÖĞµÄÏß³ÌÇ¨ÒÆ¡£ĞÒÔËµÄÊÇ£¬ÓĞÒ»¸öÃûÎª `Java-Thread-Affinity` µÄ `Java` ¿â£¬¿ÉÒÔÇáËÉµØÓëÄúµÄ `Netty` Ó¦ÓÃ³ÌĞò¼¯³É¡£\n\n1. Ìí¼Ó°üÒÀÀµ\n```lang=xml\n<dependency>\n    <groupId>net.openhft</groupId>\n    <artifactId>affinity</artifactId>\n    <version>3.0.6</version>\n</dependency>\n```\n\n2. µ÷ÕûÏß³Ì³Ø´´½¨¹¤³§\n```lang=java\nfinal int acceptorThreads = 1;\nfinal int workerThreads = 10;\nEventLoopGroup acceptorGroup = new NioEventLoopGroup(acceptorThreads);\nThreadFactory threadFactory = new AffinityThreadFactory("atf_wrk", AffinityStrategies.DIFFERENT_CORE);\nEventLoopGroup workerGroup = new NioEventLoopGroup(workerThreads, threadFactory);\n\nServerBootstrap serverBootstrap = new ServerBootstrap().group(acceptorGroup, workerGroup);\n```\n\n²Î¿¼£º[[ https://netty.io/wiki/thread-affinity.html | Netty ÎÄµµ ]]\n²Î¿¼£º[[ https://github.com/OpenHFT/Java-Thread-Affinity | Java-Thread-Affinity github repo ]]\ndateCreated: 1636708765\ndateModified: 1636708765\ndescription: \nchangeType: 2\nchangeRef: 30\nphid: PHID-WRDS-eqjziae5bwwpwkszcz7z\ndocumentPHID: PHID-WIKI-577y2ucchpygdzhajr6a', metadata={'source': 'data/file\\wiki.csv', 'row': 71}), Document(page_content='id: 163\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ëæ»úÊıĞÔÄÜ¶Ô±È\nslug: perf/random-perf-compare/\ncontent: ## Ö÷Ìâ\n\nËæ»úÊıĞÔÄÜ¶Ô±È\n\n## ¶Ô±È·½°¸\n\nÈıÖÖÊ¹ÓÃËæ»úÊı·½Ê½£¬Í¨¹ı `JMH` ½øĞĞ¶Ô±È£º\n\n- Ê¹ÓÃ `Random`\n- Ê¹ÓÃ `ThreadLocalRandom`£¬µ«ÊÇ»º´æµÚÒ»´Î»ñµÃµÄÖµ£¨×¢Òâ£¬ÕâÊÇ´íÎóµÄÊ¹ÓÃ·½·¨£©\n- Ê¹ÓÃ `ThreadLocalRandom`£¬Ã¿´Î¶ÁÈ¡£¨×¢Òâ£¬ÕâÊÇÕıÈ·µÄÊ¹ÓÃ·½·¨£©\n\n## JMH ²âÊÔ´úÂë\n\n```lang=java,lines=12\npackage random;\n\nimport org.openjdk.jmh.annotations.*;\nimport org.openjdk.jmh.infra.Blackhole;\n\nimport java.util.Random;\nimport java.util.concurrent.ThreadLocalRandom;\n\n// ±íÃ÷²âÊÔÄ¿±êÊÇÍÌÍÂÁ¿\n@BenchmarkMode(Mode.Throughput)\n// JVMÈÈ»¯ÅäÖÃ£¬µü´ú3´Î£¬Ã¿´Î1s\n@Warmup(iterations = 3, time = 1)\n// ²âÁ¿ÅäÖÃ£¬µü´ú5´Î£¬Ã¿´Î3s\n@Measurement(iterations = 5, time = 3)\n// Ö´ĞĞ²âÊÔÊ±Ïß³ÌÅäÖÃ£¬4Ïß³ÌÔËĞĞ\n@Threads(4)\n// Ö´ĞĞ²âÊÔÊ±Ö´ĞĞ´ÎÊıÅäÖÃ£¬Ö´ĞĞ3´Î\n@Fork(3)\n// ²âÊÔÊı¾İ×÷ÓÃÓò£¬»ùÓÚÕû¸ö²âÊÔ\n@State(Scope.Benchmark)\npublic class RandomVsThreadLocalRandomBenchmark {\n    public Random random = new Random();\n    /*\n     * ´íÎóÊµÏÖ£¬ÕâÃ´×ö¹Ì¶¨ÁË´Ë±äÁ¿£¬ÖµÎª´´½¨¸Ã¶ÔÏóµÄÏß³Ì¶ÔÓ¦µÄ ThreadLocalRandom\n     */\n    public ThreadLocalRandom threadLocalRandom = ThreadLocalRandom.current();\n\n\n    @Benchmark\n    public void random(Blackhole blackhole) {\n        blackhole.consume(random.nextInt());\n    }\n\n    /**\n     * ´íÎóÊµÏÖ£¬ÕâÃ´×öÊµ¼ÊÉÏÊÇÔÚÍ¬Ò»¸ö¶ÔÏó´æÔÚ¾ºÌ¬\n     * @param blackhole ºÚ¶´¶ÔÏó\n     */\n    @Benchmark\n    public void localVal(Blackhole blackhole) {\n        blackhole.consume(threadLocalRandom.nextInt());\n    }\n\n    /**\n     * ÕıÈ·ÊµÏÖ£¬¸÷¸öÏß³Ìµ÷ÓÃ×Ô¼ºµÄThreadLocalRandom£¬ÎŞ¾ºÌ¬\n     * @param blackhole ºÚ¶´¶ÔÏó\n     */\n    @Benchmark\n    public void threadLocal(Blackhole blackhole) {\n        blackhole.consume(ThreadLocalRandom.current().nextInt());\n    }\n}\n\n```\n\n\n\n## ²âÊÔ½á¹û\n\n```lang=sh,lines=12\n# JMH version: 1.21\n# VM version: JDK 1.8.0_181, Java HotSpot(TM) 64-Bit Server VM, 25.181-b13\n# VM invoker: /usr/java/jdk1.8.0_181-amd64/jre/bin/java\n# VM options: -Dfile.encoding=UTF-8\n# Warmup: 3 iterations, 1 s each\n# Measurement: 5 iterations, 3 s each\n# Timeout: 10 min per iteration\n# Threads: 4 threads, will synchronize iterations\n# Benchmark mode: Throughput, ops/time\n# Benchmark: random.RandomVsThreadLocalRandomBenchmark.measureRandom\n...\nBenchmark Mode Cnt Score Error Units\nrandom      thrpt   15   10843296.059 ¡À   977932.491  ops/s\nlocalVal    thrpt   15  315967812.728 ¡À 16518868.974  ops/s\nthreadLocal thrpt   15  470922078.096 ¡À  5079007.485  ops/s\n\n```\n\n## ½â¶Á\n\n1. `java.util.Random` ºÜÂı£¬ºÁÎŞÒÉÎÊ\n2. ¾ÍËã²»ÕıÈ·Ê¹ÓÃµÄÇé¿öÏÂ£¬`ThreadLocalRandom` ÈÔÈ»±È `Random` ¿ì\n3. Ã÷ÏÔ¿ÉÒÔ¿´µ½£¬²»ÕıÈ·Ê¹ÓÃÏÂ£¬`ThreadLocalRandom` µÄ²¨¶¯±ÈÕıÈ·Ê¹ÓÃÊ±¸ßĞí¶à¡££¨Êı¾İÖĞ `¡À` ºóÃæ²¿·Ö¼´²¨¶¯·¶Î§¡££©\n4. ÕıÈ·Ê¹ÓÃ `ThreadLocalRandom` Çé¿öÏÂ£¬ÊÇÊ¹ÓÃ `Random` µÄ**50±¶**\n5. ÔÚÕıÊ½Éú²ú»·¾³ÏÂ£¬ÓÉÓÚÏß³Ì¸ü¶à£¬`Random` ¸Ä `ThreadLocalRandom` »ñµÃµÄÊÕÒæ¿ÉÄÜ¸ü´ó¡£ÒòÎªÇ±ÔÚµÄÕùÇÀµãÏûÊ§ÁËÒ»¸ö£¬×èÈûµÄÏß³Ì»á¼õÉÙĞí¶à¡££¨²âÊÔÖĞÖ»ÓĞËÄ¸öÏß³Ì£¬²»ÄÜºÍÉú²ú±È¡££©\n6. ÕâÀïÖ»ÌÖÂÛÁË `Random` ºÍ `ThreadLocalRandom`£¬²»Éæ¼° `SecureRandom`¡£\ndateCreated: 1638496708\ndateModified: 1638496708\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-fmfwwykczqk2e3d7ulid\ndocumentPHID: PHID-WIKI-v2tt4jxr4m6a2qgospgu', metadata={'source': 'data/file\\wiki.csv', 'row': 72}), Document(page_content='id: 192\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ¹Ì»¯ÕıÔò±í´ïÊ½\nslug: perf/regex-fixed/\ncontent: ```lang=java\nString regEx = "[ _`~!@#$%^&*()+=|{}\':;\',\\\\[\\\\].<>/?~£¡@#£¤%¡­¡­&*£¨£©¡ª¡ª+|{}¡¾¡¿¡®£»£º¡±¡°¡¯¡££¬¡¢£¿]|\\n|\\r|\\t";\nPattern p = Pattern.compile(regEx);\nMatcher m = p.matcher(str);\nreturn m.find();\n```\n\nÕâÖÖ´úÂë´æÔÚÎÊÌâ£º\n\n> `compile` ÊÇÒ»¸ö¸ß³É±¾¶¯×÷£¬ºÄÊ±±È½Ï´ó¡£\n\n¶øÆäÊµ `regEx` Îª¹Ì¶¨µÄ£¬ËùÒÔÉú³ÉµÄ `p` ÆäÊµÒ²ÊÇ¹Ì¶¨µÄ¡£¶ø `p` ÆäÊµÊÇÏß³Ì°²È«µÄ¡£\n\nËùÒÔ£¬ÍÆ¼öÊÇÈç´Ë£º\n\n```lang=java\nprivate static final String CHECK_SPECIAL_PATTERN_EX = "[ _`~!@#$%^&*()+=|{}\':;\',\\\\[\\\\].<>/?~£¡@#£¤%¡­¡­&*£¨£©¡ª¡ª+|{}¡¾¡¿¡®£»£º¡±¡°¡¯¡££¬¡¢£¿]|\\n|\\r|\\t";\nprivate static final Pattern CHECK_SPECIAL_PATTERN = Pattern.compile(CHECK_SPECIAL_PATTERN_EX);\n```\n\nÈ»ºó·´¸´Ê¹ÓÃ¶ÔÏó£º`CHECK_SPECIAL_PATTERN`\n\nÀ´×ÔÏîÄ¿ÕæÊµ´úÂë°¸Àı£ºR2746:16300\ndateCreated: 1639130173\ndateModified: 1639130173\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-2ovfaocu5eylue6ishkm\ndocumentPHID: PHID-WIKI-6jxwzp7qb5cbl5hqropq', metadata={'source': 'data/file\\wiki.csv', 'row': 73}), Document(page_content='id: 809\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÓÃ¸üºÃµÄ·½·¨´úÌæ String replaceAll\nslug: perf/string-replaceall-better/\ncontent: ```lang=java\npublic String replaceAll(String regex, String replacement) {\n        return Pattern.compile(regex).matcher(this).replaceAll(replacement);\n}\n```\n\nÕâÊÇÊµ¼Ê±àÂëÖĞ³£ÓÃµÄ `replaceAll` µÄÔ´Âë¡£´ÓÖĞ¿ÉÒÔ¿´µ½£¬`regex` ÊÇÃ»ÓĞÔ¤±àÒëµÄ¡£¶ÔÆäµÄµ÷ÓÃ¶¼»á´¥·¢Ò»´Î±àÒëÕıÔò±í´ïÊ½¡£\n\n½¨Òé×ÔĞĞ±àĞ´Ò»¸ö¹¤¾ßÀà£¬Ìæ»»´Ë·½·¨£º\n\n```lang=java\npublic final class ReplaceAllHelper {\n\n    private static final Map<String, Pattern> REGEX_MAP = new ConcurrentHashMap<>();\n\n    public static String replaceAll(String content, String regex, String replacement) {\n        Pattern pattern = REGEX_MAP.get(regex);\n        if (pattern == null) {\n            pattern = Pattern.compile(regex);\n            REGEX_MAP.put(regex, pattern);\n        }\n        return pattern.matcher(content).replaceAll(replacement);\n    }\n\n    private ReplaceAllHelper() {\n    }\n}\n```\n\n²âÊÔ½á¹û£¬Èı±¶ÓÚÔ­Ê¼·½·¨\n\n```lang=verilog\nBenchmark                              Mode  Cnt         Score        Error  Units\nReplaceAllBenchmark.replaceAllBetter  thrpt   24  23533245.968 ¡À 588433.692  ops/s\nReplaceAllBenchmark.replaceAllOrig    thrpt   24   8587328.567 ¡À 341630.721  ops/s\n```\ndateCreated: 1681114430\ndateModified: 1681114430\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-6bdnzcsszebjcflvpvul\ndocumentPHID: PHID-WIKI-x5c6no6lyox4julw75jb', metadata={'source': 'data/file\\wiki.csv', 'row': 74}), Document(page_content='id: 296\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: StringÖµ×ª»»ĞÔÄÜ·ÖÎö\nslug: perf/string-value-conv/\ncontent: = ĞèÇó\n\nÓĞÒ»¸ö³¡¾°£¬ĞèÒª´¦ÀíÈıÖµ£º`0`/`1`/`2`£¬ĞèÇóÊÇ£º\n\n- ÊäÈë`2`£¬Ô­ÑùÊä³ö£»\n- ÊäÈë`0`/`1`£¬¶Ôµ÷Êä³ö£¬Ò²¾ÍÊÇ`0`Êä³ö`1`£¬`1`Êä³ö`0`\n\n= ÊµÏÖ\n\nºÜ¼òµ¥µÄĞèÇó¡£ÎÒÊÖÍ·ÓĞÎåÖÖÊµÏÖ£¬¿ÉÒÔ¿´Ò»ÏÂÊµÏÖµÄĞ§ÂÊ£º\n\nÎåÖÖÊµÏÖ1\n```lang=java\n    public String modeConvert(String mode) {\n        String result;\n        if ("2".equals(mode)) {\n            result = mode;\n        } else {\n            result = "0".equals(mode) ? "1" : "0";\n        }\n        return result;\n    }\n```\n\nÎåÖÖÊµÏÖ2\n```lang=java\n    public String modeConvert1(String mode) {\n        int modeVal = Integer.parseInt(mode);\n        if (modeVal == 2) {\n            return "2";\n        } else {\n            return modeVal == 1 ? "0" : "1";\n        }\n    }\n```\n\nÎåÖÖÊµÏÖ3\n```lang=java\n    public String modeConvert2(String mode) {\n        char modeCh = mode.charAt(0);\n        if (modeCh == \'2\') {\n            return "2";\n        } else {\n            return modeCh == \'1\' ? "0" : "1";\n        }\n    }\n```\n\nÎåÖÖÊµÏÖ4\n```lang=java\n    public String modeConvert3(String mode) {\n        char modeCh = mode.charAt(0);\n        if (modeCh == \'2\') {\n            return "2";\n        } else {\n            int v = Math.abs(modeCh - \'0\' - 1);\n            return Character.toString((char) (\'0\' + v));\n        }\n    }\n```\n\nÎåÖÖÊµÏÖ5\n```lang=java\n    public String modeConvert4(String mode) {\n        char modeCh = mode.charAt(0);\n        if (modeCh == \'2\') {\n            return "2";\n        } else {\n            int v = Math.abs(modeCh - \'0\' - 1);\n            return Integer.toString(v);\n        }\n    }\n```\n\n= ĞÔÄÜ\n\nÍ¨¹ı`jmh`²âÊÔ\n\n```lang=java,lines=12\n@State(Scope.Benchmark)\n@Fork(2)\n@Threads(8)\n@Warmup(iterations = 2, time = 1)\n@Measurement(iterations = 3, time = 1)\npublic class TranStrValBenchmark {\n    private TranStrVal tsv = new TranStrVal();\n    @Param({"2", "1", "0"})\n    public String mode;\n\n    @Benchmark\n    public void modeConvert(Blackhole blackhole) {\n        blackhole.consume(tsv.modeConvert(mode));\n    }\n\n    @Benchmark\n    public void modeConvert1(Blackhole blackhole) {\n        blackhole.consume(tsv.modeConvert1(mode));\n    }\n\n    @Benchmark\n    public void modeConvert2(Blackhole blackhole) {\n        blackhole.consume(tsv.modeConvert2(mode));\n    }\n\n    @Benchmark\n    public void modeConvert3(Blackhole blackhole) {\n        blackhole.consume(tsv.modeConvert3(mode));\n    }\n\n    @Benchmark\n    public void modeConvert4(Blackhole blackhole) {\n        blackhole.consume(tsv.modeConvert4(mode));\n    }\n}\n```\n\n```lang=txt\nBenchmark                         (mode)   Mode  Cnt          Score          Error  Units\nTranStrValBenchmark.modeConvert        2  thrpt    6  352182151.697 ¡À 21534289.252  ops/s\nTranStrValBenchmark.modeConvert        1  thrpt    6  283951095.347 ¡À  6586192.937  ops/s\nTranStrValBenchmark.modeConvert        0  thrpt    6  284781222.091 ¡À  5117625.894  ops/s\nTranStrValBenchmark.modeConvert1       2  thrpt    6  311401021.832 ¡À 57957270.210  ops/s\nTranStrValBenchmark.modeConvert1       1  thrpt    6  321924034.117 ¡À  4552863.780  ops/s\nTranStrValBenchmark.modeConvert1       0  thrpt    6  320429455.124 ¡À 11190094.329  ops/s\nTranStrValBenchmark.modeConvert2       2  thrpt    6  712659652.467 ¡À 12322278.318  ops/s\nTranStrValBenchmark.modeConvert2       1  thrpt    6  629742837.413 ¡À 13942773.260  ops/s\nTranStrValBenchmark.modeConvert2       0  thrpt    6  621274175.690 ¡À 55185229.247  ops/s\nTranStrValBenchmark.modeConvert3       2  thrpt    6  708938832.180 ¡À 25665384.836  ops/s\nTranStrValBenchmark.modeConvert3       1  thrpt    6  257755126.768 ¡À 62243648.284  ops/s\nTranStrValBenchmark.modeConvert3       0  thrpt    6  263136222.065 ¡À 18589935.476  ops/s\nTranStrValBenchmark.modeConvert4       2  thrpt    6  707062761.793 ¡À 16580022.883  ops/s\nTranStrValBenchmark.modeConvert4       1  thrpt    6  135574990.083 ¡À  3364335.314  ops/s\nTranStrValBenchmark.modeConvert4       0  thrpt    6  137354665.922 ¡À 29917601.941  ops/s\n```\n\n= ·ÖÎö\n\n¿É¼û£¬µÚÈıÖÖÊµÏÖ×îºÃ¡£µÚÈıÖÖÊµÏÖÈ«³ÌÊ¹ÓÃ`char`½øĞĞ´¦Àí£¬µÃµ½ÁË×îºÃµÄĞ§¹û¡£\nµ±×ª»¯Îª`char`Ê±£¬ĞÔÄÜĞ§ÂÊÊÇ×î¸ßµÄ¡£ÕâÊÇºÜ¶àÏîÄ¿ÔÚĞ´´úÂëÊ±ºöÂÔµÄ¡£¶øĞŞ¸ÄÕâ¸ö£¬ÄÜÈÃĞÔÄÜÌáÉı·Ç³£Ã÷ÏÔ¡£\ndateCreated: 1641094511\ndateModified: 1641094511\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-tlbp4g7n2pa36rnxsnsn\ndocumentPHID: PHID-WIKI-rnxywlkmmemqmnuc3uh3', metadata={'source': 'data/file\\wiki.csv', 'row': 75}), Document(page_content='id: 165\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Òì³£¶ÔĞÔÄÜÓ°Ïì\nslug: perf/exception-perf/\ncontent: ## Ö÷Ìâ\n\n¸ßĞÔÄÜÏÂ£¬·¢ÉúÒì³£¶ÔĞÔÄÜÓ°Ïì\n\n## ¶Ô±È·½°¸\n\nÆÕÍ¨½ÓÈë¶Ô±ÈÌØÊâ´¦Àí£º\n\n- Ä¬ÈÏÊµÏÖÒì³£\n- ÌØÊâ´¦Àí `fillInStackTrace` ·½·¨\n\n## Òì³£´úÂë\n\n### NotFilledException.java\n\n```lang=java,lines=12\npublic class NotFilledException extends Exception {\n    @Override\n    public Throwable fillInStackTrace() {\n        return this;\n    }\n}\n```\n\n\n\n### FilledException.java\n\n```lang=java,lines=12\npublic class FilledException extends Exception {\n}\n```\n\n\n\n## JMH ²âÊÔ´úÂë\n\n```lang=java,lines=12\n...\n@Fork(value = 3)\n@BenchmarkMode({Mode.Throughput})\n@Warmup(iterations = 5, time = 1)\n@Measurement(iterations = 8, time = 1)\n@Threads(value = 8)\n@State(Scope.Benchmark)\npublic class FilledExceptionBenchmark {\n    @Benchmark\n    public void fill(Blackhole blackhole) {\n        blackhole.consume(new FilledException());\n    }\n\n    @Benchmark\n    public void notFill(Blackhole blackhole) {\n        blackhole.consume(new NotFilledException());\n    }\n}\n\n```\n\n\n\n## ²âÊÔ½á¹û\n\n```lang=shell\nBenchmark Mode Cnt Score Error Units\nfill    thrpt 24    1709917.327 ¡À    30294.221  ops/s\nnotFill thrpt 24  216433082.224 ¡À 17207092.730  ops/s\n```\n\n## ½â¶Á\n\n```lang=java,lines=12\n    public synchronized Throwable fillInStackTrace() {\n        if (stackTrace != null ||\n            backtrace != null /* Out of protocol state */ ) {\n            fillInStackTrace(0);\n            stackTrace = UNASSIGNED_STACK;\n        }\n        return this;\n    }\n\n    private native Throwable fillInStackTrace(int dummy);\n```\n\nÕâÊÇ `Throw.java` ´úÂëÄÚ²¿ÊµÏÖ¡£¿ÉÒÔ¿´µ½£º\n\n1. ´æÔÚ¹Ø¼ü×Ö `synchronized`£¬Ã÷ÏÔ¶àÏß³ÌÏÂ»áÓĞ×èÈûµã¡£¶øÇÒ²»ÊÇÒ»¸öÒì³£µÄÎÊÌâ£¬ÊÇËùÓĞÒì³££¬Ö»Òªµ÷ÓÃÕâ¸ö·½·¨£¬¶¼»á×èÈû¡£\n2. ´æÔÚ¹Ø¼ü×Ö `native`£¬±íÃ÷Êµ¼ÊÉÏÊÇĞèÒª `JVM` ½«¶ÑÕ»Êı¾İ´Ó `C++` ²ãÃæÉÏ¶ÁÈ¡³öÀ´×¢Èë `Java`¡£ÕâÒ²ÊÇºÄÊ±²Ù×÷¡£\n3. ´¦ÀíÒì³£ÊÇÒ»¸öÆ½ºâ£¬ÒªÔÚÊÂºó×·²éºÍĞÔÄÜ¼ä»ñµÃÆ½ºâ¡£ÆÕÍ¨ÏîÄ¿²»ÓÃÔÚÒâ´ËÊÂ£¬¸ßĞÔÄÜÏîÄ¿ĞèÒª¿¼ÂÇÕâĞ©ÎÊÌâ¡£\ndateCreated: 1638496832\ndateModified: 1638496832\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-3ntv5ghdetkpqd3fhqyb\ndocumentPHID: PHID-WIKI-yddnzgamnakdfhsbp42e', metadata={'source': 'data/file\\wiki.csv', 'row': 76}), Document(page_content='id: 752\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ¹æÔòÒıÇæ/Groovy½Å±¾Ö´ĞĞ\nslug: erayt-special/rule-engine/\ncontent: # Ğ¡ĞÍ¹æÔò½âÎö¹¤¾ß\n\n## »ù±¾Çé¿ö\n\n`GAV` ĞÅÏ¢\n\n```lang=xml\n<groupId>com.erayt.solar</groupId>\n<artifactId>solar.module.rules</artifactId>\n<version>3.0-SNAPSHOT</version>\n```\n\n»ùÓÚ `groovy`£¬¿ÉÖ§³Ö£º\n\n1. µş¼Ó¶àÖØÌõ¼ş\n2. Ö§³Ö¶àÖØÆ¥ÅäÄ£Ê½\n    - `ALL_MATCH` È«Æ¥Åä\n    - `ALL_NOT_MATCH` È«²»Æ¥Åä\n    - `ANY_MATCH` ÈÎÒâÆ¥Åä\n    - `ANY_NOT_MATCH` ÈÎÒâ²»Æ¥Åä\n3. Ö§³ÖÄÚÇ¶º¯Êı\n    - `in`: `function isIn`\n    - `not in`: `function isNotIn`\n    - `is null`: `function isNull`\n    - `is not null`: `function isNotNull`\n    - `empty`: `function isEmpty`\n    - `not empty`: `function isNotEmpty`\n4. Ö§³Ö×Ô¶¨Òåº¯ÊıÒıÈë\n5. Ö§³Ö²»Í£»ú¶¯Ì¬ÖØĞÂ¼ÓÔØ\n6. Ö§³Ö¹æÔòÇı¶¯Ä£Ê½\n7. Ö§³ÖÉÏÏÂÎÄ\n8. Ö§³Ö¶ÌÂ·ÅĞ¶Ï(`JUDGE`)ºÍÈ«ÅĞ¶Ï²¢Êä³ö²»Æ¥ÅäÏî(`ADV_JUDGE`)\n9. Ö§³Ö¾ö²ßÊ÷\n10. Ö§³Ö¾ö²ß±í£¬Ä¿Ç°Ö»Ö§³Ö¶şÎ¬µÄ\n11. Í¨¹ı `RuleFunction` Ö§³Ö×Ô¶¯·¢ÏÖ´ıµ¼Èë¾²Ì¬·½·¨\n12. Ö§³Ö»ùÓÚ¹æÔò¼ÆËã(`COMPUTE`)Êä³ö\n13. Ö§³Ö `Spring` ÉÏÏÂÎÄ»ñÈ¡¶ÔÏó\n14. Ö§³Ö»ùÓÚ¹æÔò¹ıÂË(`FILTER`)Êı¾İÊä³ö\n15. Ö§³Ö»ùÓÚ¹æÔò×ª»¯(`CONVERT`)Êı¾İÊä³ö¡£¸ÃÄ£Ê½Êµ¼ÊÉÏÊÇ**ÍòÄÜÄ£Ê½**¡£\n\n## °²È«ËµÃ÷\n\nÓÉÓÚÊÇÍ¨¹ıÆ´½ÓÉú³É½Å±¾£¬ËùÒÔÓĞ¿ÉÄÜ´æÔÚ°²È«ÎÊÌâ¡£ Îª½â¾ö×îÖ±½ÓµÄÍşĞ²£¬Ìí¼ÓÁË¶ÔÌØÊâÀàµÄ¹ıÂË£¬¶Ô°²È«×ö¾¡Á¦¿ØÖÆ£º\n\n- `ProcessBuilder\\(`\n- `Process `\n- `Runtime\\.exec`\n- `System\\.exit\\(`\n- `System\\.[a-z]+Library\\(`\n\nÍ¬Ê±£¬ÔÚĞÂ°æ±¾ÖĞÆôÓÃÁË `groovy` ÄÚ½¨°²È«¹¦ÄÜ¡£\n\n## Ê¹ÓÃ·½·¨\n\n### ×¢²á `RuleLoader`\n\nµ±Ç°Ìá¹© `yaml` ºÍ  `json` ÅäÖÃÊµÏÖ\n\n```lang=java\nRuleManager.registerRuleLoader(new MultiYamlRuleLoader("/yaml_dir"));\nRuleManager.registerRuleLoader(new JsonRuleLoader());\n```\n\n### ³õÊ¼»¯ `RuleManager`\n\nµ÷ÓÃ·½·¨\n\n```lang=java\nRuleManager.prepareRules();\n```\n\n### µ÷ÓÃ `RuleManager`\n\nµ÷ÓÃ·½·¨: `judge`\n\n```lang=java\nboolean result = RuleManager.judge("demo1", somePojo);\nboolean result = RuleManager.judge("demo1", somePojo, context);\n```\n\nµ÷ÓÃ·½·¨: `judgeAndFire`\n\n```lang=java\nRuleManager.judgeAndFire("demo1", somePojo);\nRuleManager.judgeAndFire("demo1", somePojo, context);\n```\n\nµ÷ÓÃ·½·¨: `judgeAndFireAsync`\n\n```lang=java\nCompleteFuture<Integer> future = RuleManager.judgeAndFireAsync("demo1", somePojo);\nCompleteFuture<Integer> future = RuleManager.judgeAndFireAsync("demo1", somePojo, context);\n```\n\n> Èç¹ûÊ¹ÓÃ`ADV_JUDGE`£¬¿ÉÔÚ`context`ÖĞÈ¡³öÎ´Æ¥ÅäµÄ¹æÔòÃû£¬¼üÎª£º`judge_unmatched_tips`\n\nµ÷ÓÃ·½·¨: `decide`\n\n```lang=java\nString interesting = RuleManager.decide("demo1", somePojo);\nString interesting = RuleManager.decide("demo1", somePojo, context);\n```\n\nµ÷ÓÃ·½·¨: `decideAndFire`\n\n```lang=java\nRuleManager.decideAndFire("demo1", somePojo);\nRuleManager.decideAndFire("demo1", somePojo, context);\n```\n\nµ÷ÓÃ·½·¨: `decideAndFireAsync`\n\n```lang=java\nCompleteFuture<Integer> future = RuleManager.decideAndFireAsync("demo1", somePojo);\nCompleteFuture<Integer> future = RuleManager.decideAndFireAsync("demo1", somePojo, context);\n```\n\nµ÷ÓÃ·½·¨: `compute`\n\n```lang=java\nNumber n = RuleManager.compute("demo1", somePojo);\nNumber n = RuleManager.compute("demo1", somePojo, context);\n```\n\nµ÷ÓÃ·½·¨: `filter`\n\n```lang=java\nList l = RuleManager.filter("demo1", somePojo);\nList l = RuleManager.filter("demo1", somePojo, context);\n```\n\nµ÷ÓÃ·½·¨: `convert`\n\n```lang=java\nOtherPojo op = RuleManager.convert("demo1", somePojo);\nOtherPojo op = RuleManager.convert("demo1", somePojo, context);\n```\n\n### ÖØĞÂ¼ÓÔØ\n\nµ÷ÓÃ·½·¨£º\n\n```lang=java\nRuleManager.reloadRules();\n```\n\n```lang=java\nRuleManager.reloadRule(String ruleChainName);\n```\n\n### ×Ô¶¨ÒåÅäÖÃ\n\n```lang=java\nRuleConfig config = RuleConfig.newBuilder()\n        .enableDebug() // ÔÊĞí debug£¬µÈÍ¬ÓÚÍ¬Ê±µ÷ÓÃÆäÏÂÁ½¾ä\n        .enablePrintScript() // ÔÊĞíÊä³ö´ı±àÒë½Å±¾\n        .enableLogInScript() // ÔÊĞíÔÚ±àÒëºóµÄ½Å±¾ÖĞÊä³öÈÕÖ¾\n        .setupFuncImportMode(mode) // ÇĞ»»µ¼Èë×Ô¶¨Òå·½·¨µÄÄ£Ê½£¬ÓĞÎåÖÖ£¬°´ĞèÊ¹ÓÃ\n        .enableSkipFailedWhileLoading() // ÔÊĞí¼ÓÔØÊ§°Ü\n        .setupMaxRulesWhileLoading(size) // ÉèÖÃ×î´ó¹æÔòÊıÁ¿\n        .enableThreadLocal() // ¶Ô `AdvanceJudge` ºÍ `Filter` Á½Ä£Ê½ÆôÓÃ `ThreadLocal` ¼ÓËÙ\n        .enableFillNopLogger() // ÔÊĞí¶Ô½Å±¾×¢Èë `NodLogger`\n        .enableLoadInThreadPool() // ÔÊĞí¶àÏß³Ì¼ÓÔØ½Å±¾\n        .setupThreadPoolSize() // ÉèÖÃÏß³Ì³Ø´óĞ¡\n        .enableLazyLoad() // ÔÊĞíÑÓ³Ù¼ÓÔØ\n        .enableActiveMarker() // ÔÊĞí¼¤»î¼ÆÊı\n        .setupTopRuleSize() // ×î´ó¿É¼ÇÂ¼¹æÔòÊı\n        .build();\nRuleManager.config(config);\n```\n\nµ¼ÈëÄ£Ê½\n\n1. ½«É¨Ãèµ½µÄÀàÖĞ·½·¨ÒÔ `import static x.y.z.A.*` ·½Ê½µ¼Èë\n2. ½«É¨Ãèµ½µÄÀàÖĞ·½·¨ÒÔ `import x.y.z.A` ·½Ê½µ¼Èë£¬½Å±¾ÊäÈë `a` £¬±àÒëÊ±ÏÈÌæ»»Îª`A.a`\n3. ½«É¨Ãèµ½µÄÀàÖĞ·½·¨ÒÔ `import x.y.z.A` ·½Ê½µ¼Èë£¬½Å±¾ÊäÈë `A.a`\n4. ²»µ¼ÈëÉ¨ÃèµÄÀà£¬½Å±¾ÊäÈë `a` £¬±àÒëÊ±ÏÈÌæ»»Îª `x.y.z.A.a`\n5. ²»µ¼ÈëÉ¨ÃèµÄÀà£¬½Å±¾ÊäÈë `x.y.z.A.a`\n\n## ¹æÔòÅäÖÃ\n\nÄ¿Ç°Ìá¹©Á½ÖÖÅäÖÃÄ£Ê½£º\n\n- `yaml` ÅäÖÃ¼ÓÔØ¹æÔò\n- `json` ÅäÖÃ¼ÓÔØ¹æÔò\n\n¿ÉÍ¨¹ı×Ô¶¨ÒåÊµÏÖ `RuleLoader` ½Ó¿ÚÊµÏÖ»ùÓÚÊı¾İ¿âµÄ¡¢»ùÓÚÎÄ¼şµÄµÈµÈ¸÷ÖÖÄ£Ê½µÄ¼ÓÔØ¡£\n\n## ĞÔÄÜ\n\n**ÖØÒªÊı¾İ**\n\n| Ä£Ê½                   | OPS/us  | 95% line us/op | avg us/op |\n|----------------------|---------|----------------|-----------|\n| ÆÕÍ¨ÅĞ¶Ï JUDGE           | 94.058  | 0.124          | 0.046     |\n| È«ÅĞ¶Ï ADVANCE_JUDGE    | 14.944  | 0.398          | 0.275     |\n| ¼òÒ×¾ö²ß DECISION_SIMPLE | 117.957 | 0.101          | 0.034     |\n| ¶ş²æ¾ö²ßÊ÷ DECISION_TREE  | 86.080  | 0.119          | 0.054     |\n| ¶şÎ¬¾ö²ß±í DECISION_TABLE | 46.206  | 0.196          | 0.083     |\n| ¼ÆËã COMPUTE           | 157.308 | 0.096          | 0.025     |\n| ¹ıÂË FILTER            | 28.212  | 0.201          | 0.153     |\n| ×ª»¯ CONVERT           | 154.543 | 0.095          | 0.026     |\n\n**Ö¸±ê½âÊÍ**\n\n- `OPS/us`: Ã¿ºÁÃë²Ù×÷Êı\n- `95% line us/op`: Íê³ÉÒ»´Î²Ù×÷ÏûºÄÊ±¼ä´ÓĞ¡µ½´óÅÅÁĞÖĞ£¬95%·ÖÎ»Êı\n- `avg us/op`: Íê³ÉÒ»´Î²Ù×÷ÏûºÄÊ±¼äÆ½¾ùÖµ\ndateCreated: 1673936260\ndateModified: 1673936260\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-dicws5qxmbnaondepfzm\ndocumentPHID: PHID-WIKI-nv7zw6swgr72lwsi4ep4', metadata={'source': 'data/file\\wiki.csv', 'row': 77}), Document(page_content='id: id\nversion: version\nauthorPHID: authorPHID\ntitle: title\nslug: slug\ncontent: content\ndateCreated: dateCreated\ndateModified: dateModified\ndescription: description\nchangeType: changeType\nchangeRef: changeRef\nphid: phid\ndocumentPHID: documentPHID', metadata={'source': 'data/file\\wiki.csv', 'row': 78}), Document(page_content='id: 684\nversion: 6\nauthorPHID: PHID-USER-iyq3gk3dzd6q43mh5x77\ntitle: ÈÕÖ¾ÅäÖÃ\nslug: snippets/log4j2-clean-elder-logs/\ncontent: **Ä¿µÄ**£ºÍ¨ÓÃÈÕÖ¾ÅäÖÃ¡£Ö»ĞèÒªÅäÖÃÓ¦ÓÃ³ÌĞòÃû³Æ¼´¿É¡£ÆäËûÈç¹ûÓĞÒì³£ËµÃ÷È±ÉÙÏà¹Øjar °üÒıÈë¼´¿É\nÀ´×Ô£º±±·Ö ¶Îº£Èô( @duanhairuo )\n\n`LOG4J2` ÅäÖÃ\n```lang=xml,lines=20\n<?xml version="1.0" encoding="UTF-8"?>\n<Configuration status="INFO">\n    <Properties>\n        <Property name="LOG_DATEFORMAT_PATTERN">yyyy-MM-dd HH:mm:ss.SSS</Property>\n        <Property name="LOG_EXCEPTION_CONVERSION_WORD">%xwEx</Property>\n        <Property name="LOG_LEVEL_PATTERN">%5p</Property>\n        <Property name="CONSOLE_LOG_PATTERN">%clr{%d{${sys:LOG_DATEFORMAT_PATTERN}}}{faint} %clr{${sys:LOG_LEVEL_PATTERN}} %clr{%pid}{magenta} %clr{---}{faint} %clr{[%15.15t]}{faint} %clr{%-40.40c{1.}}{cyan} %clr{:}{faint} %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}</Property>\n        <Property name="FILE_LOG_PATTERN">%d{${sys:LOG_DATEFORMAT_PATTERN}} ${sys:LOG_LEVEL_PATTERN} %pid --- [%t] %-40.40c{1.} : %m%n${sys:LOG_EXCEPTION_CONVERSION_WORD}</Property>\n        <Property name="SpringApplicationName">${spring:spring.application.name}</Property>\n        <Property name="LOG_PATH_CUSTOM">${sys:user.home}/logs/${SpringApplicationName}</Property>\n    </Properties>\n    <Appenders>\n        <Console name="CONSOLE" target="SYSTEM_OUT" follow="true">\n            <PatternLayout pattern="${sys:CONSOLE_LOG_PATTERN}" charset="${sys:CONSOLE_LOG_CHARSET}"/>\n        </Console>\n        <RollingFile name="File" fileName="${LOG_PATH_CUSTOM}/${SpringApplicationName}.log" filePattern="${LOG_PATH_CUSTOM}/${SpringApplicationName}-%d{yyyy-MM-dd-HH}-%i.log.gz">\n            <PatternLayout pattern="${sys:FILE_LOG_PATTERN}" charset="${sys:FILE_LOG_CHARSET}"/>\n            <Policies>\n                <OnStartupTriggeringPolicy/>\n                <TimeBasedTriggeringPolicy/>\n                <SizeBasedTriggeringPolicy size="2 GB"/>\n            </Policies>\n            <DefaultRolloverStrategy max="50">\n                <Delete basePath="${LOG_PATH_CUSTOM}" maxDepth="2">\n                    <IfFileName regex="^((?!(${SpringApplicationName}.log)).)*">\n                        <IfLastModified age="1d">\n                            <IfAny>\n                                <IfAccumulatedFileSize exceeds="10 GB"/>\n                            </IfAny>\n                        </IfLastModified>\n                    </IfFileName>\n                </Delete>\n            </DefaultRolloverStrategy>\n        </RollingFile>\n    </Appenders>\n    <Loggers>\n        <SpringProfile name="dev">\n            <Logger level="INFO" name="org.springframework"/>\n            <Root level="DEBUG">\n                <AppenderRef ref="CONSOLE"/>\n            </Root>\n        </SpringProfile>\n        <SpringProfile name="test | pro">\n            <AsyncRoot level="INFO">\n                <AppenderRef ref="File"/>\n            </AsyncRoot>\n        </SpringProfile>\n    </Loggers>\n</Configuration>\n```\ndateCreated: 1658994128\ndateModified: 1658994128\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-b6u44dn4u5sxhd27mbko\ndocumentPHID: PHID-WIKI-d7zdmcbwy3wdo7kohtid', metadata={'source': 'data/file\\wiki.csv', 'row': 79}), Document(page_content='id: 149\nversion: 5\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: log4j2×Ô¶¯ÇåÀí¾ÉÈÕÖ¾\nslug: snippets/log4j2-clean-elder-logs/\ncontent: **Ä¿µÄ**£º×Ô¶¯ÇåÀí¾ÉÈÕÖ¾\nÀ´×Ô£º±±·Ö ¶Îº£Èô( @duanhairuo )\n\n`LOG4J2` ÅäÖÃ\n```lang=xml,lines=20\n<?xml version="1.0" encoding="UTF-8"?>\n<Configuration status="INFO">\n    <Properties>\n        <Property name="moduleName">${sys:moduleName}</Property>\n        <Property name="logFilePath">${sys:logPath}</Property>\n        <property name="logFileSize">2 GB</property>\n        <property name="logFileMax">40</property>\n    </Properties>\n    <Appenders>\n        <RollingFile name="RollingFileInfo" fileName="${logFilePath}/${moduleName}/all-in-one.log" filePattern="${logFilePath}/${moduleName}/all-in-one-%d{yyyy-MM-dd}-%i.log.gz">\n            <!--ÈÕÖ¾Êä³ö¸ñÊ½ -->\n            <!--[ÈÕÖ¾Éú³ÉÊ±¼ä][ÈÕÖ¾Éú³ÉÊ±¼äÄÉÃëÖµ][ÈÕÖ¾¼¶±ğ][Ïß³ÌÃû][#Ïß³ÌºÅ][ÈÕÖ¾Æ÷Ãû³Æ]ÈÕÖ¾ -->\n            <PatternLayout pattern="[%d{yyyy-MM-dd HH:mm:ss:SSS}][%p{length=1}][%t][#%tid][%c{1.}]%m%n" />\n            <Policies>\n                <OnStartupTriggeringPolicy />\n                <TimeBasedTriggeringPolicy />\n                <SizeBasedTriggeringPolicy size="${logFileSize}" /><!-- Ã¿¸öÈÕÖ¾ÎÄ¼ş´ïµ½¶à´ó¿ªÊ¼²úÉúÑ¹ËõÎÄ¼ş -->\n            </Policies>\n            <DefaultRolloverStrategy max="${logFileMax}"><!-- Ã¿Ìì×î¶àÉú³É¶àÉÙ¸öÑ¹ËõÈÕÖ¾ÎÄ¼ş,¹ö¶¯¸²¸Ç -->\n                <Delete basePath="${logFilePath}/${moduleName}"><!-- ÇåÀíÄ¿Â¼ -->\n        <IfFileName regex="^((?!(all-in-one.log|System.out.log)).)*"><!-- ±»ÇåÀíÎÄ¼şÆ¥Åä¹æÔò -->\n  <IfLastModified age="1d"><!-- ±£Áô¶à¾ÃÇ°µÄÈÕÖ¾ÎÄ¼ş -->\n                            <IfAny>\n                                <IfAccumulatedFileSize exceeds="10 GB" /><!-- ×î¶à×ÜÎÄ¼ş´óĞ¡ -->\n                            </IfAny>\n                        </IfLastModified>\n                    </IfFileName>\n                </Delete>\n            </DefaultRolloverStrategy>\n        </RollingFile>\n    </Appenders>\n    <!-- Êä³öµ½¿ØÖÆÌ¨ºÍÎÄ¼ş£¬¿É¶¨Òå¸ü¶àµÄ Appender -->\n    <Loggers>\n        <Root level="INFO">\n            <appender-ref ref="RollingFileInfo" />\n        </Root>\n    </Loggers>\n</Configuration>\n```\n\nÆô¶¯½Å±¾ÉèÖÃ\n```lang=sh\n# Ôö¼ÓÈÕÖ¾ÅäÖÃ\nCUSTOM_SPRING_LOGGER_CONFIG="-DlogPath=/home/xxxxx -DlogFileSize=50MB -Dlog4j2.contextSelector=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector -DmoduleName=${appName} -Dlogging.file.name=${logsPath}/${appName}/all-in-one.log"\nCUSTOM_APP_START_LOG="/dev/null"\n# ¸ù¾İÈ«¾Ölog4j2-spring.xmlÊÇ·ñ´æÔÚÉèÖÃÆô¶¯ÈÕÖ¾Êä³öµØÖ·\nif [ -r "${appPath}/${appName}/config/log4j2-spring.xml" ];then\n    CUSTOM_APP_START_LOG="${logsPath}/${appName}/System.out.log"\n    CUSTOM_SPRING_LOGGER_CONFIG="${CUSTOM_SPRING_LOGGER_CONFIG} -Dlogging.config=${appPath}/${appName}/config/log4j2-spring.xml"\nfi\nJAVA_OPTS="${JAVA_OPTS} ${CUSTOM_SPRING_LOGGER_CONFIG}"\n```\ndateCreated: 1638366803\ndateModified: 1638366803\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-xooocdtaxfwqxdijyjwb\ndocumentPHID: PHID-WIKI-d7zdmcbwy3wdo7kohtid', metadata={'source': 'data/file\\wiki.csv', 'row': 80}), Document(page_content='id: 520\nversion: 5\nauthorPHID: PHID-USER-eeiqrazp7n3oacotijyj\ntitle: ÈçºÎ¶ÔechartsÍ¼±í½øĞĞºóÌ¨µ¼³ö\nslug: snippets/exportecharts/\ncontent: ## Ë¼Â·Ò»\n\nÀûÓÃ echarts api µÄ getDataURL() Ç°¶Ë¿ÉÒÔ·µ»ØÒ»¸öbase64µÄÍ¼Æ¬ÊµÏÖµ¼³ö£º\n\n```\nÇ°¶ËÔ¤ÀÀÍ¼±íäÖÈ¾ ------> µ¼³öÇ°½«base64Í¼Æ¬×÷Îª²ÎÊı´«µİºó¶Ë ------>  ºóÌ¨»ñÈ¡Ç°¶Ë²ÎÊı½«Í¼Æ¬Ğ´Èëexcel \n```\n·½°¸¼òµ¥ÈİÒ×ÊµÏÖ£¬µ«Ò²´æÔÚÁ½¸öÎÊÌâ£º\n- ÎÒÃÇÓĞºÜ¶à³¡¾°ÊÇÌø¹ıäÖÈ¾Ö±½ÓºóÌ¨µ¼³öµÄ£¬´Ë·½°¸²»ÊÊºÏ\n- Í¼Æ¬base64ºó×÷Îª²ÎÊı´«µİºóÌ¨£¬±¨ÎÄÌ«´óÒ²²»ºÏÊÊ\n\n## Ë¼Â·¶ş\n\nÍ¨¹ıºóÌ¨Ä£ÄâÆô¶¯Ò»¸öä¯ÀÀÆ÷·½Ê½£¬·ÃÎÊÒ»¸öÒ³ÃæÄ£°å£¬¶¯Ì¬»ñÈ¡Í¼Æ¬ÄÚÈİ¡£ÕâÀïÎÒÃÇÀûÓÃ `selenium + chromedriver ` ÊµÏÖÕâ¸ö¹¦ÄÜ¡£\n- SeleniumÊÇÒ»¸öÓÃÓÚWebÓ¦ÓÃ³ÌĞò²âÊÔµÄ¹¤¾ß¡£Selenium²âÊÔÖ±½ÓÔËĞĞÔÚä¯ÀÀÆ÷ÖĞ£¬¾ÍÏñÕæÕıµÄÓÃ»§ÔÚ²Ù×÷Ò»Ñù.\n- ChromeDriver ÊÇ google ÎªÍøÕ¾¿ª·¢ÈËÔ±Ìá¹©µÄ×Ô¶¯»¯²âÊÔ½Ó¿Ú£¬ËüÊÇ?selenium?ºÍ?chromeä¯ÀÀÆ÷½øĞĞÍ¨ĞÅµÄÇÅÁº\n\n### Çı¶¯°²×°\n\nÕâÀïÖ÷Òª½éÉÜlinuxÏµÍ³ÏÂÔõÃ´°²×°chromeÒÔ¼°chromedriver\n\n**1.°²×°chrome**\n\nÏÂÔØchrome °²×°°ü£º`https://dl.google.com/linux/direct/google-chrome-stable_current_x86_64.rpm`\n```\nyum install ./google-chrome-stable_current_x86_64.rpm\n\n//²é¿´°²×°µÄ°æ±¾\ngoogle-chrome --version\n-- Google Chrome 96.0.4664.110\n```\n\n**2.°²×°chromedriver**\n\nÕÒµ½¶ÔÓ¦°æ±¾µÄÇı¶¯ `https://npm.taobao.org/mirrors/chromedriver` ½øĞĞÏÂÔØ\n\n> ÏÂÔØ×î½Ó½üµÄ°æ±¾£¬ÕâÀïÏÂÔØ chromedriver°æ±¾ 96.0.4664.45 ºÍ Chrome °æ±¾96.0.4664.110 Ïà¶ÔÓ¦\n\n```\nunzip chromedriver_linux64.zip\nmv chromedriver /usr/bin/\nchmod +x /usr/bin/chromedriver\n```\n\n### ºó¶ËÊµÏÖ\n\n**1.ÒÀÀµ°²×°**\n\n```\n<dependency>\n\t<groupId>org.seleniumhq.selenium</groupId>\n\t<artifactId>selenium-java</artifactId>\n\t<version>3.7.1</version>\n</dependency>\n```\n\n**2.µ¼³öhtmlÄ£°å**\n\n```\n<html>\n<meta charset="UTF-8">\n<meta http-equiv="content-type" content="text/html; charset=utf-8">\n<head>\n    <script src="http://127.0.0.1:8068/demo/echarts.min.js"></script>\n</head>\n<body>\n<div id="rhEcharts" style="height:400px;width:550px"></div>\n</body>\n<script>\n    var rhEcharts = null;\n    window.onload = function(){\n        rhEcharts = echarts.init(document.getElementById(\'rhEcharts\'));\n    }\n\n    //Í¨¹ı´«µİ²»Í¬µÄoption ²ÎÊıÊµÏÖ²»Í¬µÄ echart Í¼±íµ¼³ö\n    function showImg(option) {\n        option.animation = false; //¶ÔÓÚµ¼³öÍ¼ĞÎ£¬ÕâÀï¹Ø±Õ¶¯»­Ğ§¹û£¬¼Ó¿ìµ¼³ö¹ı³Ì\n        rhEcharts.setOption(option);\n    }\n\n    function returnEchartImg() {\n        var url = rhEcharts.getDataURL();\n        rhEcharts.clear();\n        return url;\n    }\n</script>\n</html>\n```\n\n**3.µ¼³ö´úÂë**\n\n```\n@Service\npublic class ChartToImgService {\n    private static final Logger LOG = LoggerFactory.getLogger(ChartToImgService.class);\n    private static BASE64Decoder decoder = new sun.misc.BASE64Decoder();\n    private static String osName = System.getProperties().getProperty("os.name");\n    \n\tpublic byte[] getImgForByte(String option) {\n        WebDriver driver = null;\n        try {\n            driver = getAndInitChromeDriver();\n            getHtmlInit(driver);\n            JavascriptExecutor js = (JavascriptExecutor) driver;\n            js.executeScript("showImg(" + option + ")");\n            //Thread.sleep(1000); //±¸×¢£ºÈç¹û¶¯»­Ğ§¹û²»¹Ø±Õ£¬ÕâÀï±ØĞëÒªsleep ·ñÔòµ¼³öµÄÍ¼ĞÎ²»ÍêÕû \n            String imgTxt = js.executeScript("return returnEchartImg()").toString().replace("data:image/png;base64,", "");\n            return decoder.decodeBuffer(imgTxt);\n        } catch (Exception e) {\n            LOG.error(">> getImgByte error.", e);\n        } finally {\n            if (driver != null) {\n                driver.close();\n                driver.quit();\n            }\n        }\n        return null;\n    }\n\n    //¼ÓÔØÒ³ÃæäÖÈ¾Ä£°å\n    private void getHtmlInit(WebDriver driver) {\n        if (osName.equals("Linux")) {\n            driver.get("file:///usr/local/chrome/testchart.html");\n        } else {\n            driver.get("E:\\\\eraytworkspace\\\\microsolar\\\\solar-demo-simple\\\\testchart.html");\n        }\n    }\n\n    //´´½¨Ò»¸öchromeÊµÀı\n    private ChromeDriver getAndInitChromeDriver() {\n        System.setProperty("webdriver.chrome.driver", osName.equals("Linux") ? "/usr/bin/chromedriver" : "D:\\\\soft\\\\chromedriver.exe");\n        //ÉèÖÃ chrome\n        ChromeOptions chromeOptions = new ChromeOptions();\n        chromeOptions.setHeadless(true);\n        chromeOptions.addArguments("disable-infobars");\n        //ÒÔÏÂ²ÎÊılinux ±ØĞëÒª¼ÓÉÏ ·ñÔòÎŞ·¨´´½¨chromeÊµÀı\n        chromeOptions.addArguments("--disable-extensions");\n        chromeOptions.addArguments("--disable-gpu");\n        chromeOptions.addArguments("--disable-dev-shm-usage");\n        chromeOptions.addArguments("--no-sandbox");\n        chromeOptions.addArguments("headless");\n        return new ChromeDriver(chromeOptions);\n    }\n}\n```\nºóĞøËµÃ÷£º\n- getImgForByte ¿ÉÒÔ´«µİ²»Í¬µÄecharts option ²ÎÊı£¨²Î¿¼echarts¹Ù·½ÎÄµµ£©£¬×öµ½ÁËÊ¹ÓÃÒ»¸öhtmlÄ£°åÊµÏÖ²»Í¬µÄÍ¼ĞÎµ¼³ö\n- echarts Ä¬ÈÏ¿ªÆôÁË¶¯»­Ğ§¹û£¨µ¼³öÊÇ²»ĞèÒªµÄ£©£¬´ËÊ±µ¼³öµÄjava´úÂëÖĞÒªsleep 1s(¸´ÔÓÍ¼ĞÎ¿ÉÄÜ´óÓÚ1s) £¬·ñÔòµ¼³öµÄÍ¼ĞÎ²»ÍêÕû¡£ÕâÑùÔö¼ÓÁËµ¼³öµÄºÄÊ±£¬Òò´Ë¶¯»­Ğ§¹û¿ÉÒÔÉèÖÃÎª¹Ø±Õ\n- µ¼³öÒ»ÕÅÍ¼Æ¬ÔÚ¹«Ë¾·şÎñÆ÷²âÊÔºÄÊ±ÔÚ 400ms ×óÓÒ£¨¼òµ¥±ıÍ¼£©\n\nÖĞÎÄÂÒÂë£º\nÒòÎªlinuxÏµÍ³Ä¬ÈÏÃ»ÓĞ°²×°ÖĞÎÄ×ÖÌå¿â ËùÒÔÓĞ¿ÉÄÜÓĞÖĞÎÄÂÒÂëµÄÇé¿ö\nÊ×ÏÈÖ´ĞĞ fc-list ²é¿´ÊÇ·ñ°²×°×ÖÌå¿â\nfc-list :lang=zh ²é¿´ÊÇ·ñ°²×°ÖĞÎÄ Èç¹ûÃ»ÓĞµÄ»°\nĞÂ½¨ mkdir -p /usr/share/fonts/my_fontsÄ¿Â¼\n ´Ówindow»·¾³À­È¡ simhei.ttfºÍ simsun.ttc·Åµ½ ´ËÄ¿Â¼ÏÂ\n½øÈë´ËÄ¿Â¼Ö´ĞĞ mkfontscale ´ËÃüÁîÉú³ÉË÷Òı¼´¿É\nÔÙ´ÎÓÃfc-list :lang=zh ÃüÁî²é¿´ÊÇ·ñÒıÈë³É¹¦\n{F329147}\ndateCreated: 1648525155\ndateModified: 1648525155\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-ugzicy2lonfjdhispfdu\ndocumentPHID: PHID-WIKI-hanl7vmosasv4uwasfzm', metadata={'source': 'data/file\\wiki.csv', 'row': 81}), Document(page_content='id: 153\nversion: 5\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ë«¾«¶È¸¡µãĞÍ±È½ÏÊ§°Ü°¸Àı\nslug: snippets/high-precision-double-value-compare-fail/\ncontent: ```lang=java, lines=10\npublic class DoubleIEEE754Print {\n\n    private static final double[][] DOUBLE_ARRAY_OF_ARRAY = new double[][]{\n            {Double.MAX_VALUE, Double.MAX_VALUE - 0.001D},\n            {1_000_000_000_000_000_000D, 1_000_000_000_000_000_000.01D},\n            {1_000_000_000_000_000D, 1_000_000_000_000_000.01D},\n            {1_000_000_000_000D, 1_000_000_000_000.01D},\n    };\n\n    public static void main(String[] args) {\n        byte[] bytes = new byte[8];\n        ByteBuffer buffer = ByteBuffer.allocate(8);\n        for (double[] array : DOUBLE_ARRAY_OF_ARRAY) {\n            printDouble(array[0], buffer, bytes);\n            printDouble(array[1], buffer, bytes);\n            System.out.println(Double.compare(array[0], array[1]));\n            System.out.println(Math.abs(array[0] - array[1]) < 0.00000001D);\n        }\n    }\n\n    private static void printDouble(double v, ByteBuffer buf, byte[] bytes) {\n        System.out.println(v);\n        System.out.println("toLongBits>: " + Double.doubleToLongBits(v));\n        System.out.println("toLongRawBits>: " + Double.doubleToRawLongBits(v));\n        System.out.println("exponent>: " + Math.getExponent(v));\n        buf.clear();\n        buf.putDouble(v);\n        buf.flip();\n        buf.get(bytes);\n        String doubleBits = doubleBytesToString(bytes);\n        System.out.println("bytes>: " + doubleBits);\n        System.out.println("sign:exponent:fraction");\n        System.out.println(doubleBits.substring(0, 1) + ":" + doubleBits.substring(1, 11) + ":" + doubleBits.substring(11));\n        System.out.println("detail>: " + doubleDetail(buf, bytes));\n    }\n\n    private static String doubleBytesToString(byte[] bytes) {\n        StringBuilder builder = new StringBuilder(64);\n        for (byte b : bytes) {\n            builder.append((b & 0b10000000) >> 7)\n                    .append((b & 0b01000000) >> 6)\n                    .append((b & 0b00100000) >> 5)\n                    .append((b & 0b00010000) >> 4)\n                    .append((b & 0b00001000) >> 3)\n                    .append((b & 0b00000100) >> 2)\n                    .append((b & 0b00000010) >> 1)\n                    .append((b & 0b00000001));\n        }\n        return builder.toString();\n    }\n\n\n    private static String doubleDetail(ByteBuffer buf, byte[] bytes) {\n        StringBuilder builder = new StringBuilder(128);\n        String sign = ((bytes[0] & 0b10000000) >> 7) == 0 ? "positive" : "negative";\n        String exponent = composeExponent(buf, bytes);\n        builder.append("sign:").append(sign)\n                .append(", exponent:").append(exponent);\n        return builder.toString();\n    }\n\n    private static String composeExponent(ByteBuffer buf, byte[] bytes) {\n        byte[] intArray = new byte[4];\n        Arrays.fill(intArray, (byte) 0x0);\n        appendToBuf(intArray, 2, bytes[0], 4, 0b00000111, 0);\n        appendToBuf(intArray, 3, bytes[0], 0, 0b00001111, 4);\n        appendToBuf(intArray, 3, bytes[1], 4, 0b00001111, 0);\n        buf.clear();\n        buf.put(intArray);\n        buf.flip();\n        int exponent = buf.getInt();\n        exponent = exponent - 1023;\n        return Integer.toString(exponent);\n    }\n\n    private static void appendToBuf(byte[] intArray, int idx, byte b, int shiftBits, int mask, int shiftBits2) {\n        intArray[idx] = (byte) (intArray[idx] | (((b >> shiftBits) & mask) << shiftBits2));\n    }\n}\n```\n\n¸ß¾«¶ÈÏÂ£¬`double` ±È½Ï»áºÍÔ¤ÆÚ²»Ò»ÖÂ¡£ÒòÎª£¬`double` µÄ¾«¶ÈÎ»Ö»ÓĞ`11`Î»Ö¸Êı²¿·Ö+`52`Î»Î²Êı²¿·Ö¡£ÕâÊÇÓÉÓÚ¼ÆËã»úÎŞ·¨Ğ´Èë¸ß¾«¶ÈµÄ¸¡µãĞÍÊıÖµ£¬ÆäÊµĞ¡Êı²¿·ÖÊÇ¿¿½üËÆÀ´Ä£ÄâµÄ¡£±ÈÈç£¬ÎÒÓĞÊıÖµ£º`1.1`£¬ÄÚ´æ²¼¾ÖÎª `0011111111110001100110011001100110011001100110011001100110011001` £¬ÆäÕæÕıµÄÖµÊÇ£º\n\n> `1.0999999999999998667732370`\n\nÆä¼ÆËã¹«Ê½Îª£º {F319775}\n»ùÓÚÕâ¸ö¹«Ê½£¬ÏëÏóÒ»ÏÂÇ°ÃæÁ½¸öÊı£¬ÊÇ²»ÊÇ²îÒì²¿·ÖÒ»ÏÂ×Ó¾Í±»¶ª³ö `52` Î»ÍâÁË£¿ Õâ¾ÍÊÇÎªºÎÌØ±ğ´óµÄÊı£¬±È½Ï¾ÍÊ§°ÜÁË¡£\n\n**Í¼ĞÎ»¯ÄÚ´æ²¼¾Ö**\n- [[ http://www.binaryconvert.com/convert_double.html | Í¼ĞÎ»¯ÄÚ´æ²¼¾Ö£ºdouble ]]\n- [[ http://www.binaryconvert.com/convert_float.html | Í¼ĞÎ»¯ÄÚ´æ²¼¾Ö£ºfloat ]]\n- [[ https://www.h-schmidt.net/FloatConverter/IEEE754.html | Í¼ĞÎ»¯ÄÚ´æ²¼¾Ö£ºfloat v2 ]]\n\n(NOTE) ±¸×¢£º¸ÃÎÊÌâÔ´×ÔÍ¬ÊÂÀîº£ÌÎ @lihaitao µÄÌáÎÊ£¬¶Ô´Ë±íÊ¾¸ĞĞ»¡£\ndateCreated: 1638367504\ndateModified: 1638367504\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-ssbfswivfts4wa2ehjs7\ndocumentPHID: PHID-WIKI-lh6rbrtsybfqggpbiwok', metadata={'source': 'data/file\\wiki.csv', 'row': 82}), Document(page_content='id: 749\nversion: 4\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÄÚ²¿ÀàĞ¹Â©\nslug: snippets/inner-class-leak/\ncontent: ```lang=java\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class DemoTest {\n\n    private static final int SIZE = 100000000;\n\n    public static void main(String[] args) {\n        demo();\n    }\n\n    public static void demo() {\n        List<DemoFactory.DemoPojo> list = new ArrayList<>(SIZE);\n        for (int i = 0; i < SIZE; i++) {\n            list.add(new DemoFactory().createPojo());\n        }\n    }\n\n    public static class DemoFactory {\n\n        public DemoFactory() {\n        }\n\n        public DemoPojo createPojo() {\n            return new DemoPojo();\n        }\n\n        public class DemoPojo {\n        }\n    }\n\n}\n```\n\n\n`DemoPojo` ×÷Îª `DemoFactory` µÄÄÚ²¿Àà£¬ÊÇ×÷ÎªÀàËÆ×Ö¶ÎÒ»°ãµÄ´æÔÚ£¬ÊÇ×÷Îª¶ÔÏóµÄÒ»²¿·Ö¡£Õâ¸öÊ±ºò£¬`DemoPojo` ÀàµÄ¶ÔÏó»áÒşº¬Ò»¸öÍâ²¿ÈİÆ÷ÀàµÄÖ¸Ïò£¬ÓÃÒÔ·ÃÎÊÍâ²¿ÈİÆ÷ÀàµÄ×Ö¶Î¡£Õâ¸öÒıÓÃ£¬¿ÉÒÔÓÃ `<Íâ²¿ÈİÆ÷Àà>.this` À´Ö¸´ú¡£`DemoPojo` ÕâÀï£¬¿ÉÒÔÓÃ `DemoFactory.this` À´·ÃÎÊÒşº¬µÄÍâ²¿ `DemoFactory` ¶ÔÏó¡£\n\nÈç¹ûÊÇ `static` ĞŞÊÎµÄÄÚ²¿Àà£¬±¾ÖÊºÍÆÕÍ¨ÀàÊÇÒ»ÖÂµÄ£¬²»³ÖÓĞÍâ²¿Àà¶ÔÏóµÄÒıÓÃ£¬ËùÒÔÃ»ÓĞÕâ¸öÎÊÌâ¡£\n\nÕâ¸ö²»Ëã´óÎÊÌâ£¬Ö÷ÒªÎÊÌâÊÇÄÚ´æÀË·Ñ¡£Ö»ÒªÄÚ²¿Àà¶ÔÏó±»»ØÊÕ£¬Íâ²¿ÈİÆ÷Àà¶ÔÏóÃ»ÓĞÆäËûÒıÓÃµÄÇé¿öÏÂ£¬Ò²»á±»»ØÊÕ¡£µ«ÊÇµã±È½ÏÏ¸¡£Ö÷ÒªÊÇÏ£Íû´ó¼Ò×¢ÒâÄÚ²¿ÀàµÄÊ¹ÓÃ£¬ÍÆ¼öÊ¹ÓÃ¾²Ì¬ÄÚ²¿Àà£¬ÇáÒ×²»ÒªÊ¹ÓÃÆÕÍ¨ÄÚ²¿Àà¡£\n\nref: [[ https://stackoverflow.com/questions/10864853/when-exactly-is-it-leak-safe-to-use-anonymous-inner-classes/ | When exactly is it leak safe to use (anonymous) inner classes? ]]\ndateCreated: 1672987494\ndateModified: 1672987494\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-ggugm7qniogsfa4hhhu3\ndocumentPHID: PHID-WIKI-shxhdabvq2z52wuoxqjs', metadata={'source': 'data/file\\wiki.csv', 'row': 83}), Document(page_content='id: 286\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÓÅÑÅµØÅĞ¶Ï·Ç¿Õ\nslug: snippets/judge-not-null-gracefully/\ncontent: = ¾²Ì¬·½·¨ÅĞ¶Ï·Ç¿Õ\n\n```lang=java\npublic final class Checker {\n    public static void ifMatchThrow(boolean result, String exMsg) {\n        if (result) {\n            throw new RuntimeException(exMsg);\n        }\n    }\n\n    private Checker() {\n    }\n}\n```\n\nÊ¹ÓÃ:\n```lang=java\n    private void example() {\n        ifMatchThrow(loader == null, "should not be init: the loader is null");\n        doSomething();\n        ...\n    }\n```\n\n= `Optional`ÅĞ¶Ï·Ç¿Õ\n\nÔÙ¼ÓÒ»¸ö`Optional`ÅĞ¶Ï·Ç¿Õ\n```lang=java\nUser user = getFromSomewhere();\nOptional.ofNullable(user).orElseThrow(()->new Exception("ÓÃ»§²»´æÔÚ"));\n```\n\n¸ĞĞ» @zhengguodan Ìá¹©°¸Àı\n\n= ½áÂÛ\n\nÉÏÃæÁ½ÖÖ·½·¨¶¼·Ç³£ÓÅÑÅ¡£¶¼±ÈÖ±½ÓĞ´ `if` Æ¯ÁÁ¡£Ê¹ÓÃ `JDK8` µÄ `Optional` ¸üÓĞ·¶¡£µ«ÊÇ¾²Ì¬·½·¨Ò²ÓĞÆäÊ¹ÓÃ³¡¾°£ºÔÚÒªÇó¼«ÖÂĞÔÄÜµÄÇé¿öÏÂ£¬`lambda`±í´ïÊ½²»Èç¾²Ì¬·½·¨µ÷ÓÃ¡£ÒòÎª¾²Ì¬·½·¨ºÍË½ÓĞ·½·¨Ê¹ÓÃ`invokestatic`ºÍ`invokespecial`Ö¸Áî£¬Ã÷ÏÔ¿ìÓÚÆäËû¼¸¸ö`invoke`Ö¸Áî¡£\n{F315554}\ndateCreated: 1640843377\ndateModified: 1640843377\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-4qutcpixur2robybdnqd\ndocumentPHID: PHID-WIKI-kfzbq2jjvbdemculxpwa', metadata={'source': 'data/file\\wiki.csv', 'row': 84}), Document(page_content='id: 335\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Java¸¡µãĞÍ×ªIBM COBOL COMP3¸ñÊ½\nslug: snippets/java-to-ibm-cobol-comp3/\ncontent: Ö÷Ìå´úÂë\n```lang=java,lines=20\npublic class COMP3Util {\n\n    /**\n     * ¶¨µã¶ş½øÖÆ COBOL COMP¸ñÊ½\n     *\n     * @param tmp\n     * @return\n     */\n    private long composeLong(String tmp) {\n        long no = 0;\n        for (int idx = 0; idx <\n                tmp.length(); idx++) {\n            int ch = tmp.charAt(idx);\n            int high = (ch & 0xf0) >>\n                    4;\n            int low = ch & 0x0f;\n            no = (long) (no\n                    + high * Math.pow(2, tmp.length() * 2 - idx * 2 - 1)\n                    + low * Math.pow(2, tmp.length() * 2 - idx * 2 - 2));\n        }\n        return no;\n    }\n\n\n    /**\n     * ÄÚ²¿Ê®½øÖÆ COBOL COMP-3¸ñÊ½\n     *\n     * @param tmp\n     * @param limit\n     * @return\n     */\n    public double composeDouble(String tmp, int limit) {\n        double amt = 0;\n        int ch = 0;\n        int high = 0;\n        int low = 0;\n        int idx;\n        for (idx = 0; idx < tmp.length() - 1; idx++) {\n            ch = tmp.charAt(idx);\n            high = (ch & 0xf0) >> 4;\n            // System.out.println(high);\n            low = ch & 0x0f;\n            // System.out.println(low);\n            amt = amt * 100 + high * 10 + low;\n            // System.out.println(amt);\n        }\n        ch = tmp.charAt(idx);\n        high = (ch & 0xf0) >> 4;\n        low = ch & 0x0f;\n        // System.out.println(high);\n        amt = amt * 10 + high;\n        // System.out.println(amt);\n        amt = amt / Math.pow(10, limit);\n        // System.out.println(amt);\n        if (low == 13) {\n            return -1 * amt;\n        } else {\n            return amt;\n        }\n    }\n\n    /**\n     * ÄÚ²¿Ê®½øÖÆ COBOL COMP-3¸ñÊ½\n     *\n     * @param value\n     * @param length\n     * @param limit\n     * @return\n     */\n    public byte[] composeCOMP3(double value, int length, int limit) {\n        int data = (int) (value * Math.pow(10, limit));\n        String vstr = Integer.toString(data);\n        vstr = vstr.replaceAll("\\\\.", "");\n        vstr = vstr.replaceAll("-", "");\n        StringBuffer buf = new StringBuffer();\n        int len = (length + 1) / 2 + 1;\n        int num_zero = len * 2 - 1 - vstr.length();\n        for (int i = 0; i < num_zero; i++) {\n            buf.append("0");\n        }\n        buf.append(vstr);\n        if (data < 0) {\n            buf.append("D");\n        } else {\n            buf.append("C");\n        }\n        vstr = buf.toString();\n        byte[] b = new byte[len];\n        int high = 0;\n        int low = 0;\n        for (int idx = 0; idx < len * 2; idx += 2) {\n            if (idx + 2 == vstr.length()) {\n                high = vstr.charAt(idx) - \'0\';\n                low = vstr.charAt(idx + 1);\n                if (low == \'D\') {\n                    low = 13;\n                } else {\n                    low = 12;\n                }\n            } else {\n                high = vstr.charAt(idx) - \'0\';\n                low = vstr.charAt(idx + 1) - \'0\';\n            }\n            int ch = (high << 4) + low;\n            if (ch > 127) {\n                ch = -1 * (255 - 127);\n            }\n            b[idx / 2] = (byte) ch;\n        }\n        return b;\n    }\n}\n```\n²âÊÔ´úÂë\n```lang=java\npublic class COMP3UtilTest {\n    private COMP3Util demo = new COMP3Util();\n\n    @org.junit.Test\n    public void test() {\n        byte[] str1 = demo.composeCOMP3(-18, 11, 2);\n        System.out.println(Hex.encodeHexString(str1));\n        byte[] str2 = demo.composeCOMP3(18, 11, 2);\n        System.out.println(Hex.encodeHexString(str2));\n        byte[] str3 = demo.composeCOMP3(-1803, 11, 2);\n        System.out.println(Hex.encodeHexString(str3));\n        byte[] str4 = demo.composeCOMP3(1803, 11, 2);\n        System.out.println(Hex.encodeHexString(str4));\n    }\n\n}\n```\nÕâÊÇÊ®¶àÄêÇ°ºÍ `IBM` Ö÷»ú `COBOL` ½»»¥Ê±ĞèÒªµÄ¸ñÊ½¡£Ç°¶ÎÊ±¼äÓĞÈËÒª£¬ÎÒÌùÔÚÕâÀï¡£ÓĞĞèÒªµÄ×ÔÈ¡¡£\n\n²Î¿¼£º[[ http://www.3480-3590-data-conversion.com/article-packed-fields.html | COBOL COMP3 ¸ñÊ½ ]]\ndateCreated: 1641827182\ndateModified: 1641827182\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-omg64hma4dsakwznuylr\ndocumentPHID: PHID-WIKI-ltjctrep2pfjlygoi3j4', metadata={'source': 'data/file\\wiki.csv', 'row': 85}), Document(page_content='id: 295\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Í¨¹ıJavaµ÷ÓÃsqlldr£ºSqlldrCaller\nslug: snippets/java-call-sqlldr/\ncontent: ±¾´úÂë¿ÉÒÔÔÙÓÅ»¯£¬½ö×öÑİÊ¾\n\n**´úÂë**\n\n```lang=java,lines=12\npublic class SqlldrCaller {\n    private final static Logger LOGGER = LoggerFactory.getLogger(SqlldrCaller.class);\n\n    private static final String CONTROL_FILE = "c:\\\\TempData\\\\test_load.ctl";\n    private static final String LOG_FILE_PREFIX = "c:\\\\TempData\\\\load.out";\n\n    private AtomicLong idx = new AtomicLong(0);\n\n    public void call() throws Exception {\n        NIOFastWriter writer = new NIOFastWriter();\n        writer.setDestFile("c:\\\\TempData\\\\nioTest.txt");\n        writer.setRenameDestFile("c:\\\\TempData\\\\nioTest2.txt");\n        writer.open();\n        long start = System.currentTimeMillis();\n        LOGGER.info("{}", start);\n        for (int i = 0; i < 1000000; i++) {\n            writer.write(new String[]{Integer.toString(i), "hello", "world", Long.toString(System.currentTimeMillis())});\n            if (i > 0 && i % 100000 == 0) {\n                renameAndCall(writer);\n            }\n        }\n        renameAndCall(writer);\n        long end = System.currentTimeMillis();\n        LOGGER.info("{}", end);\n        LOGGER.info("{}", (end - start) / 1000D + "s");\n        writer.close();\n    }\n\n    private void renameAndCall(NIOFastWriter writer) throws IOException {\n        boolean flag;\n        flag = writer.reNew();\n        if (flag) {\n            if (execSqlldr()) {\n                writer.deleteRenamedFile();\n            } else {\n                writer.renameAgainToBackup();\n            }\n        } else {\n            LOGGER.warn("rename failed");\n        }\n    }\n\n    private boolean execSqlldr() throws IOException {\n        ProcessBuilder processBuilder = new ProcessBuilder(\n                "sqlldr",\n                "SGEB/SGEB",\n                "control=" + CONTROL_FILE,\n                "log=" + LOG_FILE_PREFIX + "." + idx.incrementAndGet() + ".log",\n                "readsize=256000000",\n                "bindsize=256000000",\n                "rows=3000",\n                "errors=999999999");\n        processBuilder.redirectErrorStream(true);\n        Process process = processBuilder.start();\n        Thread th1 = new Thread(new Output(process.getInputStream(), 0));\n        th1.start();\n        Thread th2 = new Thread(new Output(process.getErrorStream(), 1));\n        th2.start();\n        try {\n            th1.join();\n            th2.join();\n            process.destroy();\n            return process.waitFor() == 0;\n        } catch (InterruptedException e) {\n            LOGGER.warn(e.getMessage(), e);\n            return false;\n        }\n    }\n\n    private static class Output implements Runnable {\n        private final InputStream in;\n        private final LineLogger lineLogger;\n\n        public Output(InputStream in, int level) {\n            this.in = in;\n            if (level == 0) {\n                this.lineLogger = line -> LOGGER.info("sqlldr stdout:{}", line);\n            } else {\n                this.lineLogger = line -> LOGGER.warn("sqlldr stderr:{}", line);\n            }\n        }\n\n        @Override\n        public void run() {\n            try (InputStreamReader isr = new InputStreamReader(in);\n                 BufferedReader br = new BufferedReader(isr)) {\n                String line;\n                while ((line = br.readLine()) != null) {\n                    lineLogger.logLine(line);\n                }\n            } catch (Exception e) {\n                LOGGER.warn(e.getMessage(), e);\n            }\n        }\n    }\n\n    @FunctionalInterface\n    private interface LineLogger {\n        void logLine(String line);\n    }\n}\n```\n\nÆäÖĞµÄ `NIOFastWriter` ¼û´Ë [[ https://pha.erayt.com:8000/w/snippets/java-nio-file-writer/ | NIOFastWriter ]]\n\n**¿ØÖÆÎÄ¼ş**\n\n```lang=txt\nload   data\ninfile   \'c:\\TempData\\nioTest2.txt\'\ninto   table   test_sqlldr\nappend\n(\nsi char(12)   terminated   by   \'|\',\ns1 char(5)    terminated   by   \'|\',\ns2 char(5)    terminated   by   \'|\',\nsl char(30)   terminated   by   \'|\'\n)\n```\n\n**Êı¾İ¿â½¨¿â½Å±¾**\n\n```lang=sql\ncreate table test_sqlldr(\nsi varchar2(12),\ns1 char(5),\ns2 char(5),\nsl varchar2(30)\n);\n```\ndateCreated: 1641093362\ndateModified: 1641093362\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-setkafub7lstltwcwzwr\ndocumentPHID: PHID-WIKI-s64fb6hxlfi5bmv77u5i', metadata={'source': 'data/file\\wiki.csv', 'row': 86}), Document(page_content='id: 220\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: XPADAUÖĞ¹ØÓÚXNetµÄ·â×°¼ò½é\nslug: snippets/xnet-usage-in-xpadau/\ncontent: # `XPADAU` ÖĞ¹ØÓÚ `XNet`µÄ·â×°¼ò½é\n\n## ¼òÒªËµÃ÷\n\n¿ª·¢ `XPADAU` ÊÇÔÚ2010Äê5ÔÂ¡£¸ÃÏîÄ¿¹æ»®Ê±Ê¹ÓÃ `XNet` ×÷ÎªÍ¨Ñ¶×é¼ş¹´Á¬ `Java` Ó¦ÓÃºóÌ¨ºÍ `C++` ½ğ½»ËùÇ°ÖÃ¡£Òò´Ë£¬Ô¼¶¨ÁË´óÁ¿µÄ `title`¡£\n\nÏîÄ¿¸ºÔğÈËÊÇÎÒ£¬Ö÷Á¦³ÌĞòÔ±ÊÇÁíÒ»¸öÍ¬ÊÂ¡£µ±ÎÒ¿´µ½Ëû´¦Àí `XNet` ´úÂëĞ´µÃ·Ç³£Èß³¤·±ËöÊ±£¬ÎÒÒâÊ¶µ½ÕâÃ´×ö»á³öÏÖÎÊÌâ¡£ËùÒÔÎÒÔİÍ£ÁË `XNet` Ïà¹Ø¿ª·¢¹¤×÷£¬ÓÅÏÈÍê³ÉÆäËû¿ª·¢¡£¶øÎÒ×Ô¼ºÍ¶ÈëÊ±¼ä£¬ÕûÀíÁËÒ»Ì×Ïà¶ÔÁé»îµÄ `XNet` ÏûÏ¢´¦Àí»úÖÆ¡£\n\n## `XNet` ÏûÏ¢´¦ÀíÔÚ `Java` ¶ËÍ´µã\n\n```lang=java,lines=12\npublic void deal(String title, XNetData xNetData) {\n    try {\n        if (title.endsWith(XnetTitleConst.XNET_TITLE_REQLOGIN)) {\n            // Ç©µ½·µ»Ø\n        } else if (title.endsWith(XnetTitleConst.XNET_TITLE_REQHEARTBEAT)) {\n            // ĞÄÌø¼ì²â·µ»Ø\n        } else if (title.endsWith(XnetTitleConst.XNET_REGISTER_OPTC)) {\n            // ÆÚÈ¨ĞÅÏ¢²éÑ¯·µ»Ø;\n        } else if (title.endsWith(XnetTitleConst.XNET_TITLE_REQCLTAREA)) {\n            // ¼ÛÔ´½ÓÈë·¶Î§½á¹û·µ»Ø\n        } else if (title.endsWith(XnetTitleConst.XNET_TITLE_ONQUOTE)) {\n            // ¼ÛÔ´Êı¾İÏÂ·¢ĞÅÏ¢\n        } else if (title.endsWith(XnetTitleConst.XNET_TITLE_ONLOGOUT)) {\n            // ¼ÛÔ´Ç©ÍË\n        } else if (title.endsWith(XnetTitleConst.XNET_TITLE_DATASOURCELINK_STATE)) {\n            // ¼ÛÔ´Á¬½Ó×´Ì¬±ä¸ü\n        } else {\n            LOGGER.warn("[_Other] title:{}", title);\n        }\n    } catch (Exception e) {\n        LOGGER.error("[CMDS] deal title:[{}] xNetData:[{}]", title, xNetData.toString(), e);\n    }\n}\n```\n\nÕâÊÇÒ»¶Î´¦Àí `XNet` ÏûÏ¢Êı¾İµÄ´úÂë£¬ÕæÊµ´æÔÚÓÚÏµÍ³ÖĞ¡£\n\nÓĞ¼¸¸öÎÊÌâ£º\n\n1. ¿ª·¢Áé»îĞÔµÍ\n> Ã¿ĞÂÔöÒ»¸ö `title`£¬¾ÍĞèÒªĞÂÔöÒ»¸ö `if-else` ·ÖÖ§¡£Ô½¶à£¬Ô½³¤¡£ÊÇÓ²±àÂëÊ½¿ª·¢£¬²»ÊÇÃæÏòÅäÖÃ¿ª·¢¡£\n2. Ö´ĞĞĞ§ÂÊµÍ\n> Èç¹ûÓĞ50¸ö `title`£¬¾ÍÓĞ50Ìõ·ÖÖ§£¬×îºóÒ»Ìõ·ÖÖ§£¬ĞèÒªÅĞ¶Ï50´Î²ÅÄÜ½øÈë¡£\n\n## ½â¾öÍ´µã\n\n### ·ÖÎö `XNet` Ê¹ÓÃ³¡¾°\n\n1. ·¢ËÍÊı¾İ£¬¿ÉÄÜ¹ØĞÄ½á¹û·µ»Ø£¬Ò²¿ÉÄÜ²»¹ØĞÄ½á¹û·µ»Ø\n2. ½ÓÊÕÊı¾İ£¬Ö»ĞèÒª´¦ÀíÊı¾İ¼´¿É\n\nÕë¶ÔµÚÒ»¸ö³¡¾°£¬³éÈ¡³öÁË `Sender`£¬ÓÃÀ´Ö§³ÖÍ¬²½·¢ËÍºÍÒì²½·¢ËÍ¡££¨ºóÀ´£¬ÔÚÊµ¼ÊÑ¹²âºÍÉú²úÑéÖ¤±íÃ÷£¬`XNet` Ä£ÄâÍ¬²½ÊÇÒ»¸öÔã¸âµÄÏë·¨£¬ºóĞø´úÂë¾ÍŞğÆúÁËÍ¬²½Õâ¿é¡£Ö»ÁôÏÂÁËÒì²½½Ó¿Ú£¬ÃüÃûÒ²¼ò»¯ÁË£¬²»ÔÙÒÔ `async-` ×÷ÎªÇ°×º¡££©\n\nÕë¶ÔµÚ¶ş¸ö³¡¾°£¬ÎÒÃÇ½øÒ»²½Ï¸·Ö£ºÊı¾İ´Ó `XNet` ¹ıÀ´£¬ÆäÊµĞÅÏ¢Íê±¸£¬¾ß±¸×ã¹»¶àÂ·ÓÉĞÅÏ¢¡£ËùÒÔ£¬³éÈ¡³öÁË `Receiver`£¬ÓÃÀ´Ö§³ÖÊı¾İ½ÓÊÕºÍ·Ö·¢£»³éÈ¡³öÁË `Dealer`£¬ÓÃÀ´Ö§³Ö¾ßÌåÊı¾İ´¦Àí¡£\n\nÕë¶ÔÕû¸ö `XNet4J` µÄ¾ßÌåÊµÏÖ£¬·â×°Îª `Client` ºÍ `ClientHandler` ½øĞĞÊµÏÖ¡£\n\nÓÖĞ´ÁËÒ»Ğ©½ºË®´úÂë£¬ñîºÏÁËËÄ´óÌåÏµ¡£³õ²½¹¹Ë¼ÁËÒÔÏÂ·½°¸£º\n\n**Òì²½·¢ËÍ**\n\n{F322836}\n\n**Òì²½½ÓÊÕ²¢´¦Àí**\n\n{F322838}\n\n±¸×¢£º¸ù¾İÅäÖÃ£¬Ò²¿ÉÖ±½ÓÓÉ `Receiver` ËùÔÚÏß³Ìµ¥Ïß³Ìµ÷ÓÃ `Dealer` ´¦ÀíÏûÏ¢\n\n### ÊµÏÖÉè¼Æ\n\nÆäËûÊµÏÖ¶¼¼òµ¥£¬ÖØµã£ºÈçºÎ×öÂ·ÓÉ\n\nÂ·ÓÉÊµÏÖÏ¸½Ú£º\n\n1. Ìá¹©Á½¸ö×¢½â£¬×¢½â´¦ÀíÕßÀàºÍ´¦ÀíÕß·½·¨\n\n```lang=java\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface TitleDealClass {\n    /**\n    * ´¦Àí·½·¨¼¯\n    *\n    * @return\n    */\n    String[] methods();\n}\n```\n\n```lang=java\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface TitleDealMethod {\n    /**\n    * ´¦Àítitle\n    *\n    * @return\n    */\n    String[] titles();\n}\n```\n\n2. Í¨¹ıÌá¹©×¢²áÆ÷£¬×¢²á´¦ÀíÕß¡£×¢²áÆ÷½«´«ÈëµÄ²ÎÊıÍ¨¹ı·´Éä²úÉú±ØÒªµÄ¶ÔÓ¦¹ØÏµ\n> Í¨¹ı  `Spring` `Bean` Ãû³Æ×¢²á\n```lang=java\n/**\n * ×¢²á´¦Àí¶ÔÏó¼°¶ÔÏó´¦Àí·½·¨\n */\n@Override\npublic void regDealObject(String dealSpringBeanName) {\n    logger.info(MSG_REG_BY_SPRING);\n    Class<?> clazz = context.getType(dealSpringBeanName);\n    Object dealObject = context.getBean(dealSpringBeanName);\n    this.regDealObject(clazz, dealObject);\n    logger.info(MSG_REG_BY_SPRING_DONE);\n}\n```\n> Í¨¹ıÀàºÍ¶ÔÏó×¢²á\n```lang=java,lines=12\n/**\n * ×¢²á´¦Àí¶ÔÏó¼°´¦Àí·½·¨\n */\n@Override\npublic void regDealObject(Class<?> clazz, Object dealObject) {\n    logger.info(MSG_REG_BY_OBJECT);\n    Assert.notNull(dealObject);\n    Class<TitleDealClass> clazzTDC = TitleDealClass.class;\n    // ¼ì²éÉùÃ÷\n    if (!clazz.isAnnotationPresent(clazzTDC)) {\n        logger.warn(MSG_NON_TITLEDEALCLASS);\n        throw new SGEBRuntimeException();\n    }\n    TitleDealClass tdc = clazz.getAnnotation(clazzTDC);\n    // ¸ù¾İÉùÃ÷»ñµÃ´¦Àí·½·¨Ãû\n    String[] methods = tdc.methods();\n    for (int i = 0; i < methods.length; i++) {\n        Method method;\n        try {\n            method = clazz.getMethod(methods[i], XNetDataObject.class);\n        } catch (SecurityException e) {\n            logger.warn(MSG_OCCUR_SECURITYEXCEPTION, e);\n            continue;\n        } catch (NoSuchMethodException e) {\n            logger.warn(MSG_OCCUR_NOSUCHMETHODEXCEPTION, e);\n            continue;\n        }\n        Assert.notNull(method);\n        // ¼ì²éÉùÃ÷\n        Class<TitleDealMethod> clazzTDM = TitleDealMethod.class;\n        if (method.isAnnotationPresent(clazzTDM)) {\n            TitleDealMethod tdm = method.getAnnotation(clazzTDM);\n            XNetDataDealer dealer = new XNetDataDealer();\n            dealer.setDealer(dealObject);\n            dealer.setMethod(method);\n            // ´ÓÉùÃ÷ÖĞ»ñÈ¡¹Ø×¢title\n            String[] titles = tdm.titles();\n            // Ñ­»·×¢²á\n            for (int j = 0; j < titles.length; j++) {\n                if (!titles[j].matches("Risk.+")) {//·ç¿Øtitle²»×¢²á\n                    logger.info(MSG_REG_INFO + clazz.getSimpleName() + COLON\n                                + dealObject + COLON + method.getName() + COLON\n                                + titles[j]);\n                    MAP.addDealer(titles[j], dealer);\n                }\n            }\n        }\n    }\n    logger.info(MSG_REG_BY_OBJECT_DONE);\n}\n```\n\n3. ½ÓÊÕÆ÷½ÓÊÕÏûÏ¢ºó£¬Ê¶±ğÏûÏ¢£¬Â·ÓÉµ½±ØÒªµÄ´¦ÀíÕß´¦Àí\n\n```lang=java\n/**\n * ´¦ÀíÊı¾İ\n */\n@Override\npublic void deal(XNetDataObject obj) {\n    String title = obj.getXNetTitle();\n    // ¸ù¾İtitle»ñµÃ´¦ÀíÕß\n    XNetDataDealer dealer = MAP.getDealer(title);\n    if (dealer == null) {\n        logger.debug("²»ÄÜ´¦ÀíµÄÏûÏ¢ :" + title);\n        return;\n    }\n    Object object = dealer.getDealer();\n    Method method = dealer.getMethod();\n    try {\n        logger.debug("µ÷ÓÃ¶ÔÏó[" + object + "]");\n        logger.debug("µ÷ÓÃ·½·¨[" + method + "]");\n        // ·´Éäµ÷ÓÃ´¦ÀíÕß\n        method.invoke(object, obj);\n    } catch (Exception e) {\n        logger.warn("[" + title + "][" + obj + "]:" + MSG_OCCUR_EXCEPTION, e);\n    } finally {\n        MemConstants.releaseAccountLock();\n    }\n}\n```\n\n## ×Ü½á\n\nÓÉÓÚ²ÉÓÃÁËÕâÖÖ×éÖ¯½á¹¹£¬ËùÒÔ `XPADAU` ÔÚ `XNet` ´¦Àí·½Ãæ¿ÉÒÔºÜ¸ßĞ§µØÊµ¼ÊÔËĞĞ¡£\n\nÍ¬Ñù£¬ÓÉÓÚ²ÉÓÃÁËÕâÖÖ×éÖ¯½á¹¹£¬ÔÚ¿ª·¢±ä¸üÊ±£¬`XNet` Ïà¹Ø´úÂë²»ÓÃ±ä¶¯£¬Ö»ĞèÒª½øĞĞ´¦ÀíÕßµÄ±ä¸ü¡£\n\nÕâÀïÎ¨Ò»µÄÎÊÌâ£¬ÊÇ½« `XNetDataObj` Õâ¸ö¶ÔÏó´«µ¼µ½ÁË´¦ÀíÕß£¬µ¼ÖÂÁË´úÂëÒÀÀµ¡£ÕâÆäÊµÒ²ÓĞ°ì·¨½â¾ö£¬µ«ÊÇµ±Ê±Ê±¼äÓĞÏŞ£¬Ã»ÓĞ½øÒ»²½´¦Àí¡£ÕâÒ²³ÉÁËÒÅÁôÎÊÌâ£¬Ò»Ö±µ½ÏÖÔÚ¡££¨µ±È»£¬Õâ²»Ó°ÏìĞÔÄÜ£¬Ö»Ó°Ïì´úÂë¼äñîºÏ¶È£©\n\n## Ìâºó»°\n\nÎªÊ²Ã´ÎÒÒªÔÚÊ®Äêºó×Ü½áÕâ¸ö£¿ÎÒ·¢ÏÖ£¬Ê®Äê¹ıÈ¥ÁË£¬ºÃ¶àÏîÄ¿×éĞ´µÄ `XNet` ´¦Àí£¬»¹Ã»ÓĞÎÒÕâÌ×¶«Î÷´¦ÀíÆğÀ´¿ª·¢ÆğÀ´·½±ã¡£\n\n²»ÊÇËµÎÒ±È´ó¼ÒÀ÷º¦¡£¶øÊÇÎÒ³¢ÊÔÈ¥·ÖÎöÁË£¬È¥ÌáÁ¶ÁËÖĞ¼ä²»±äÏî¹«¹²Ïî£¬Í¨¹ıÒ»Ğ©¼òµ¥µÄ·½·¨£¬¹æ±ÜÁËÎÊÌâ¡£\n\n¶øÕâ£¬Ò²ÊÇÄ¿Ç°´ó¼ÒÈ·Êµ±È½ÏÉÙÈ¥Ë¼¿¼µÄµØ·½¡£\n\n¶àÏë£¬¶à×ö£¬ÓĞ³É³¤¡£\n\n## ¸½¼ş\n\nÔ´´úÂë£º{F322842}\nGitLab µØÖ·£º[[ http://192.168.10.74:8082/inner-open-sources/xnet_shallow_encapsulation_demo | xnet4j Ç³·â×° ]]\ndateCreated: 1639381604\ndateModified: 1639381604\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-wsue2p7mf44gkdjquzcf\ndocumentPHID: PHID-WIKI-v2vnyyz2fw2dzzjj4hxw', metadata={'source': 'data/file\\wiki.csv', 'row': 87}), Document(page_content='id: 728\nversion: 3\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ¶Ô Split ½øĞĞ·â×°\nslug: snippets/wrap-split/\ncontent: ÉÏ´«µÄ¸½¼şÊÇ¶Ô `String.split` µÄµÈÒå¸ÄĞ´£¬ÌáËÙÊ®±¶\n\n{F619231}\n\nÓÅ»¯µã£º\n\n1. ÒÔ¿Õ¼ä»»Ê±¼ä\n2. ¾¡¿ÉÄÜ¼õÉÙ¶Ô `GC` µÄÓ°Ïì£¬²»½¨Á¢ĞÂ¶ÔÏó/ĞÂÊı×é\n\n```lang=shell\nSplitWrapBenchmark.test0Original  thrpt   15   19707062.100 ¡À   638304.156  ops/s\nSplitWrapBenchmark.test1          thrpt   15  254136936.961 ¡À  5901369.054  ops/s\nSplitWrapBenchmark.test2Fast      thrpt   15  256468129.797 ¡À 10103575.229  ops/s\nSplitWrapBenchmark.test3FastCh    thrpt   15  288284985.330 ¡À 33410020.770  ops/s\n```\n\nÒÔÕâ¶Î´úÂëÎªÀı£º\n\n```lang=java\nString[] codeTypes = StringUtils.split(codeType, "|");\nArrays.stream(codeTypes).iterator().forEachRemaining(code -> {\n    if (StringUtils.split(code, ":").length == 1) {\n        codeDefList.addAll(codeDefRepository.findValueListByTypeAndFilter(StringUtils.split(code, ":")[0], "", (user != null) ? user.getLanguage() : null));\n    } else {\n        codeDefList.addAll(codeDefRepository.findValueListByTypeAndNoFilter(StringUtils.split(code, ":")[0], StringUtils.split(code, ":")[1], (user != null) ? user.getLanguage() : null));\n    }\n});\n```\n\n`String.split` ÓĞÈı¸öÎÊÌâ£º\n\n1. Âı\n2. ´úÂëÈßÓà¶È¸ß\n3. ¿É¶ÁĞÔ²î\n\nÒ»¸öºÏÀíµÄÉè¼ÆÊÇ½« `type` ´Ó `String` ÀàĞÍ¸ÄÎªÒ»¸öÊı¾İÀà£º\n\n```lang=java\nString type = "BOND_USD_3M";\n```\n\n¿ÉÒÔ¸ÄÎª\n\n```lang=java\npublic class TypeDef {\n\n    public TypeDef(String type) {\n\n       String[] array = type.split("_");\n\n       this.prod = array[0];\n\n       this.ccy = array[1];\n\n       this.term = array[2];\n\n    }\n\n    ...\n\n    getter/setter\n\n    ...\n\n}\n```\n?\n\n\nÔÙÍ¨¹ı `String` -> `TypeDef` ½¨Á¢Ó³Éä£¬²¢»º´æ\n\nÕâÑù£¬ÎÒÃÇÔÚÊ¹ÓÃµÄÊ±ºò¾Í¿ÉÒÔÖ±½ÓÍ¨¹ı `type` »ñÈ¡µ½ `TypeDef`£¬¾Í¿ÉÒÔ»ñµÃÓĞÒâÒåµÄ×Ö¶ÎÁË¡£¹Ø¼üµã¾ÍÊÇ¶ÔÒµÎñ´úÂëÒş²ØÆğÎŞÒâÒåµÄ `split`¡£\ndateCreated: 1668060574\ndateModified: 1668060574\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-25v3c4x7p3uw7sgkw7cy\ndocumentPHID: PHID-WIKI-u47u4psgvmkayighrdhn', metadata={'source': 'data/file\\wiki.csv', 'row': 88}), Document(page_content='id: 291\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ê¹ÓÃĞÂNIO APIÊä³öÎÄ¼ş£ºNIOFastWriter\nslug: snippets/java-nio-file-writer/\ncontent: ±¾´úÂë¿ÉÒÔÔÙÓÅ»¯£¬½ö×öÑİÊ¾\n\n```lang=java,lines=12\npublic class NIOFastWriter {\n    private final static Logger LOGGER = LoggerFactory.getLogger(NIOFastWriter.class);\n\n    private StringBuilderHelper helper = new StringBuilderHelper();\n    private AtomicLong idx = new AtomicLong(0);\n\n    private String destination;\n    private String renameDest;\n    private FileChannel channel;\n    private ByteBuffer buffer;\n\n    public void open() throws IOException {\n        channel = FileChannel.open(Paths.get(destination),\n                StandardOpenOption.CREATE,\n                StandardOpenOption.WRITE,\n                StandardOpenOption.APPEND);\n        buffer = ByteBuffer.allocateDirect(8 * 1024);\n    }\n\n    public void write(String[] array) throws IOException {\n        StringBuilder builder = helper.get();\n        Arrays.stream(array).forEach(str -> builder.append(str).append(\'|\'));\n        buffer.put(builder.append("\\r\\n").toString().getBytes());\n        buffer.flip();\n        channel.write(buffer);\n        buffer.compact();\n    }\n\n    public boolean reNew() throws IOException {\n        channel.close();\n        File file = new File(destination);\n        if (file.renameTo(new File(renameDest))) {\n            open();\n            return true;\n        } else {\n            open();\n            return false;\n        }\n    }\n\n    public boolean deleteRenamedFile() {\n        File file = new File(renameDest);\n        if (file.exists()) {\n            return file.delete();\n        }\n        return false;\n    }\n\n    public void renameAgainToBackup() {\n        File file = new File(renameDest);\n        if (file.renameTo(new File(renameDest + "." + idx.incrementAndGet() + ".txt"))) {\n            LOGGER.info("success for backup");\n        } else {\n            LOGGER.info("fail for backup");\n        }\n    }\n\n    public void close() throws IOException {\n        channel.close();\n        buffer = null;\n    }\n\n    public void setDestFile(String file) {\n        this.destination = file;\n    }\n\n    public void setRenameDestFile(String file) {\n        this.renameDest = file;\n    }\n}\n```\ndateCreated: 1641092864\ndateModified: 1641092864\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-nu7mxseuwj5jl5hna3mv\ndocumentPHID: PHID-WIKI-slzwvvuyovdsjl4lngah', metadata={'source': 'data/file\\wiki.csv', 'row': 89}), Document(page_content='id: 148\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: XNet4J·ÂMQ·â×°\nslug: snippets/xnet-as-mq/\ncontent: **Ä¿µÄ**£º½â¾öÂÒĞò·¢ËÍ¡¢½ÓÊÕÎÊÌâ¡£¾¡¿ÉÄÜÌù½üÖ÷Á÷ `MQ` ÊµÏÖ¡£\nÀ´×Ô£º±±·Ö ¶Îº£Èô( @duanhairuo )\n\n## Ö÷Ìå´úÂë\n`XnetDataReadAndWrite` ½Ó¿Ú\n```lang=java\npublic interface XnetDataReadAndWrite {\n\n    void dataRead(Object data);\n\n    void dataWrite(Object data);\n\n    enum MsgType {\n        SEND, READ; // Õë¶Ôxnet À´Ëµ¡¾·¢ËÍ¡¢¶ÁÈ¡¡¿\n    }\n\n}\n```\n\n`XnetDataHandle` ½Ó¿Ú\n```lang=java\ninterface XnetDataHandle {\n\n    void handle(XnetData xnetData);// ´¦ÀíÏûÏ¢\n\n}\n```\n\nÊı¾İÏî¶ÔÏó `XnetData`\n```lang=java\n@AllArgsConstructor\n@Data\nclass XnetData implements Serializable {\n\n    private XnetDataReadAndWrite.MsgType msgType;\n    private Object data;\n    private Long time;\n\n}\n```\n\n`XnetDataReadAndWrite` ½Ó¿ÚÊµÏÖ\n```lang=java,lines=20\nclass XnetDataReadAndWriteImpl implements XnetDataReadAndWrite, InitializingBean, DisposableBean {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(XnetDataReadAndWriteImpl.class);\n\n    private static final int QUEUE_MAX_SIZE = 100;\n\n    private boolean start;\n    private boolean hasElement;\n\n    private XnetDataHandle xnetDataHandle;\n\n    private BlockingQueue<XnetData> queue = new PriorityBlockingQueue<>(QUEUE_MAX_SIZE, (d1, d2) -> {\n        // ×Ô¶¨ÒåÏûÏ¢ÓÅÏÈ¼¶\n        if (d1.getMsgType() == d2.getMsgType()) {\n            return d1.getTime().compareTo(d2.getTime());\n        }\n        if (d1.getMsgType() == MsgType.READ) {\n            return -1;\n        }\n        if (d1.getMsgType() == MsgType.SEND) {\n            return 1;\n        }\n        return -1;\n    });\n\n    XnetDataReadAndWriteImpl(XnetDataHandle xnetDataHandle) {\n        this.xnetDataHandle = xnetDataHandle;\n    }\n\n    @Override\n    public void dataRead(Object data) {\n        offer(MsgType.READ, data);\n    }\n\n    @Override\n    public void dataWrite(Object data) {\n        offer(MsgType.SEND, data);\n    }\n\n    private void offer(MsgType msgType, Object data) {\n        queue.offer(new XnetData(msgType, data, System.nanoTime()));\n    }\n\n    @Override\n    public void destroy() {\n        // ·ÀÖ¹¹ØÁªbean ÌáÇ°Ïú»Ùµ¼ÖÂÏû·ÑÕßÏß³ÌÒì³£\n        while (start || hasElement) {\n            try {\n                Thread.sleep(100);\n            }\n            catch (InterruptedException e) {\n                // ignore\n            }\n            start = false;\n        }\n        LOGGER.info("success destroy");\n    }\n\n    @Override\n    public void afterPropertiesSet() {\n        new Thread(this::consume, this.getClass().getSimpleName()).start();\n        start = true;\n    }\n\n    public void consume() {\n        while (start || hasElement) {// °²È«Í£Ö¹\n            try {\n                XnetData xnetData = queue.poll(5, TimeUnit.SECONDS);// ´ø³¬Ê±£¬·ÀÖ¹Ïß³ÌÎŞ·¨Õı³£¹Ø±Õ\n                if (xnetData == null) {\n                    hasElement = false;\n                    continue;\n                }\n                hasElement = true;\n                xnetDataHandle.handle(xnetData);\n            }\n            catch (Exception e) {\n                LOGGER.error(e.getMessage(), e);\n            }\n        }\n    }\n\n}\n```\n\n## µ¥Ôª²âÊÔ\n```lang=java\npublic class XnetDataReadAndWriteTest {\n\n    public static void main(String[] args) {\n        XnetDataReadAndWriteImpl xnetDataReadAndWrite = new XnetDataReadAndWriteImpl(xnetData -> {\n            System.err.println(xnetData.toString());\n        });\n        xnetDataReadAndWrite.dataWrite("w1");\n        xnetDataReadAndWrite.dataWrite("w2");\n        xnetDataReadAndWrite.dataWrite("w3");\n        xnetDataReadAndWrite.dataWrite("w4");\n        xnetDataReadAndWrite.dataRead("r1");\n        xnetDataReadAndWrite.dataRead("r2");\n        xnetDataReadAndWrite.dataRead("r3");\n        xnetDataReadAndWrite.dataRead("r4");\n        xnetDataReadAndWrite.afterPropertiesSet();\n        xnetDataReadAndWrite.destroy();\n    }\n\n}\n```\n\nÈçÓĞÏë·¨£¬¿ÉÒÔÔÚÆóÒµÎ¢ĞÅ»òÓÊ¼şÉÏÓë¶Î¹«×Ó¹µÍ¨¡£\ndateCreated: 1638366751\ndateModified: 1638366751\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-p4nwidhhspbeyabb35do\ndocumentPHID: PHID-WIKI-ek3lsz327xhvh2z3g7kb', metadata={'source': 'data/file\\wiki.csv', 'row': 90}), Document(page_content='id: 196\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Log4j2-CVE-2021-44228-ÖØÏÖ\nslug: snippets/log4j2-cve-2021-44228/\ncontent: ```lang=gradle\n    implementation \'org.apache.logging.log4j:log4j-core:2.14.1\'\n    implementation \'org.apache.logging.log4j:log4j-api:2.14.1\'\n    implementation \'org.apache.logging.log4j:log4j-slf4j-impl:2.14.1\'\n    implementation \'org.slf4j:slf4j-api:1.7.32\'\n```\n\n```lang=java\nLOGGER.info("hello world, log4j2 demo:{}", "${jndi:ldap://127.0.0.1:8000/abc}");\n```\n\nÏÈ¿ªÒ»¸ö`nginx`£¬¼àÌı`8000`£¬Ö´ĞĞ´úÂëºó¼´¿É¿´µ½·ÃÎÊÈÕÖ¾³öÏÖ\n\nÍ£Ö¹`nginx`ºó£¬`java`¶ËÈÕÖ¾Êä³ö\n```lang=log,lines=12\n2021-12-12 12:11:32,431 main WARN Error looking up JNDI resource [ldap://127.0.0.1:8000/abc]. javax.naming.NamingException: LDAP response read timed out, timeout used:-1ms.\n\tat com.sun.jndi.ldap.Connection.readReply(Connection.java:479)\n\tat com.sun.jndi.ldap.LdapClient.ldapBind(LdapClient.java:365)\n\tat com.sun.jndi.ldap.LdapClient.authenticate(LdapClient.java:192)\n\tat com.sun.jndi.ldap.LdapCtx.connect(LdapCtx.java:2791)\n\tat com.sun.jndi.ldap.LdapCtx.<init>(LdapCtx.java:319)\n\tat com.sun.jndi.url.ldap.ldapURLContextFactory.getUsingURLIgnoreRootDN(ldapURLContextFactory.java:60)\n\tat com.sun.jndi.url.ldap.ldapURLContext.getRootURLContext(ldapURLContext.java:61)\n\tat com.sun.jndi.toolkit.url.GenericURLContext.lookup(GenericURLContext.java:202)\n\tat com.sun.jndi.url.ldap.ldapURLContext.lookup(ldapURLContext.java:94)\n\tat javax.naming.InitialContext.lookup(InitialContext.java:417)\n\tat org.apache.logging.log4j.core.net.JndiManager.lookup(JndiManager.java:172)\n\tat org.apache.logging.log4j.core.lookup.JndiLookup.lookup(JndiLookup.java:56)\n\tat org.apache.logging.log4j.core.lookup.Interpolator.lookup(Interpolator.java:221)\n\tat org.apache.logging.log4j.core.lookup.StrSubstitutor.resolveVariable(StrSubstitutor.java:1110)\n\tat org.apache.logging.log4j.core.lookup.StrSubstitutor.substitute(StrSubstitutor.java:1033)\n\tat org.apache.logging.log4j.core.lookup.StrSubstitutor.substitute(StrSubstitutor.java:912)\n\tat org.apache.logging.log4j.core.lookup.StrSubstitutor.replace(StrSubstitutor.java:467)\n\tat org.apache.logging.log4j.core.pattern.MessagePatternConverter.format(MessagePatternConverter.java:132)\n\tat org.apache.logging.log4j.core.pattern.PatternFormatter.format(PatternFormatter.java:38)\n\tat org.apache.logging.log4j.core.layout.PatternLayout$PatternSerializer.toSerializable(PatternLayout.java:344)\n\tat org.apache.logging.log4j.core.layout.PatternLayout.toText(PatternLayout.java:244)\n\tat org.apache.logging.log4j.core.layout.PatternLayout.encode(PatternLayout.java:229)\n\tat org.apache.logging.log4j.core.layout.PatternLayout.encode(PatternLayout.java:59)\n\tat org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.directEncodeEvent(AbstractOutputStreamAppender.java:197)\n\tat org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.tryAppend(AbstractOutputStreamAppender.java:190)\n\tat org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.append(AbstractOutputStreamAppender.java:181)\n\tat org.apache.logging.log4j.core.config.AppenderControl.tryCallAppender(AppenderControl.java:156)\n\tat org.apache.logging.log4j.core.config.AppenderControl.callAppender0(AppenderControl.java:129)\n\tat org.apache.logging.log4j.core.config.AppenderControl.callAppenderPreventRecursion(AppenderControl.java:120)\n\tat org.apache.logging.log4j.core.config.AppenderControl.callAppender(AppenderControl.java:84)\n\tat org.apache.logging.log4j.core.config.LoggerConfig.callAppenders(LoggerConfig.java:540)\n\tat org.apache.logging.log4j.core.config.LoggerConfig.processLogEvent(LoggerConfig.java:498)\n\tat org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:481)\n\tat org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:456)\n\tat org.apache.logging.log4j.core.config.AwaitCompletionReliabilityStrategy.log(AwaitCompletionReliabilityStrategy.java:82)\n\tat org.apache.logging.log4j.core.Logger.log(Logger.java:161)\n\tat org.apache.logging.log4j.spi.AbstractLogger.tryLogMessage(AbstractLogger.java:2205)\n\tat org.apache.logging.log4j.spi.AbstractLogger.logMessageTrackRecursion(AbstractLogger.java:2159)\n\tat org.apache.logging.log4j.spi.AbstractLogger.logMessageSafely(AbstractLogger.java:2142)\n\tat org.apache.logging.log4j.spi.AbstractLogger.logMessage(AbstractLogger.java:2034)\n\tat org.apache.logging.log4j.spi.AbstractLogger.logIfEnabled(AbstractLogger.java:1899)\n\tat org.apache.logging.slf4j.Log4jLogger.info(Log4jLogger.java:184)\n```\n\n¸ĞĞËÈ¤µÄÍ¬ÊÂ¿ÉÒÔ¸ù¾İ¶ÑÕ»ĞÅÏ¢¶¨Î»´úÂë×Ô¼ºÔÄ¶ÁÏà¹Ø´úÂë\n\n²Î¿¼ĞÅÏ¢£º\n- [[ https://logging.apache.org/log4j/2.x/security.html | log4j2 security ]]\n- [[ https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-44228 | CVE-2021-44228 ]]\ndateCreated: 1639288785\ndateModified: 1639288785\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-nxngjgn7hd4raej242md\ndocumentPHID: PHID-WIKI-65svdxqcu7s5qrazrx27', metadata={'source': 'data/file\\wiki.csv', 'row': 91}), Document(page_content='id: 154\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JavaµäĞÍOOMĞÎÊ½£¬´úÂë¹¹½¨\nslug: snippets/java-oom-code/\ncontent: **java.lang.OutOfMemoryError: unable to create new native thread**\n```lang=java,counterexample\n    /**\n     * java.lang.OutOfMemoryError: unable to create new native thread\n     */\n    @Override\n    public void tryToCreateOOM() {\n        createThreadEndless();\n        while (true) {\n            if (expectedOOMError == null) {\n                Thread.yield();\n                continue;\n            }\n            LOGGER.warn("OOM:{}, created threads:{}", expectedOOMError.getMessage(), walker.get(), expectedOOMError);\n            throw new RuntimeException(expectedOOMError);\n        }\n    }\n\n    private void createThreadEndless() {\n        try {\n            for (; ; ) {\n                Thread thread = new Thread(this::createThreadEndless,\n                        "demo-oom-" + walker.getAndIncrement());\n                thread.setDaemon(true);\n                thread.start();\n            }\n        } catch (Throwable t) {\n            synchronized (walker) {\n                this.expectedOOMError = t;\n            }\n        }\n    }\n```\n\n**java.lang.OutOfMemoryError: Java heap space**\n```lang=java,counterexample\n    /**\n     * java.lang.OutOfMemoryError: Java heap space\n     * heap space: -Xms8M -Xmx8M\n     */\n    @Override\n    public void tryToCreateOOM() {\n        createObjectEndless();\n        LOGGER.warn("OOM:{}, created objects:{}", expectedOOMError.getMessage(), walker.get(), expectedOOMError);\n        throw new RuntimeException(expectedOOMError);\n    }\n\n    private void createObjectEndless() {\n        try {\n            List<Object> objects = new ArrayList<>(65536);\n            for (; ; ) {\n                objects.add(new Object());\n                walker.incrementAndGet();\n            }\n        } catch (Throwable t) {\n            this.expectedOOMError = t;\n        }\n    }\n```\n\n**java.lang.OutOfMemoryError: GC Overhead Limit Exceeded**\n```lang=java,counterexample\n    /**\n     * java.lang.OutOfMemoryError: GC Overhead Limit Exceeded\n     * heap space: -Xms100M -Xmx100M -XX:+UseParallelGC\n     * https://www.baeldung.com/java-gc-overhead-limit-exceeded\n     */\n    @Override\n    public void tryToCreateOOM() {\n        createObjectEndless();\n        LOGGER.warn("OOM:{}, created objects:{}", expectedOOMError.getMessage(), walker.get(), expectedOOMError);\n        throw new RuntimeException(expectedOOMError);\n    }\n\n    private void createObjectEndless() {\n        try {\n            Map<Integer, String> dataMap = new HashMap<>();\n            Random r = new Random();\n            while (true) {\n                dataMap.put(r.nextInt(), String.valueOf(r.nextInt()));\n                walker.incrementAndGet();\n            }\n        } catch (Throwable t) {\n            this.expectedOOMError = t;\n        }\n    }\n```\n\n**java.lang.OutOfMemoryError: Requested array size exceeds VM limit**\n```lang=java,counterexample\n    /**\n     * java.lang.OutOfMemoryError: Requested array size exceeds VM limit\n     * heap space: -Xms8M -Xmx8M\n     */\n    @Override\n    public void tryToCreateOOM() {\n        createBigArray();\n        LOGGER.warn("OOM:{}, try to create big array:{}", expectedOOMError.getMessage(), Integer.MAX_VALUE, expectedOOMError);\n        throw new RuntimeException(expectedOOMError);\n    }\n\n    private void createBigArray() {\n        try {\n            Object[] array = new Object[Integer.MAX_VALUE];\n        } catch (Throwable t) {\n            this.expectedOOMError = t;\n        }\n    }\n```\n\n\nÏà¹Ø´úÂë£º{F315882}\ndateCreated: 1638374212\ndateModified: 1638374212\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-5q7twdj4fpgwkkipgjtt\ndocumentPHID: PHID-WIKI-il23at5ndsaq76tnu4fv', metadata={'source': 'data/file\\wiki.csv', 'row': 92}), Document(page_content='id: 225\nversion: 2\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: MySQL5ÖĞµÄrownum\nslug: snippets/mysql5-rownum/\ncontent: ```lang=sql\nSELECT t.*, \n       @rownum := @rownum + 1 AS rank\n  FROM YOUR_TABLE t, \n       (SELECT @rownum := 0) r\n```\n\n²Î¿¼×ÊÁÏ£º[[ https://stackoverflow.com/questions/1895110/row-number-in-mysql | stackoverflow.com ÖĞµÄÌáÎÊ¼°½â´ğ ]]\ndateCreated: 1639470981\ndateModified: 1639470981\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-3mcovhxpr4p3v4wd46fr\ndocumentPHID: PHID-WIKI-hgq6cvujxrlh4t3nlq6g', metadata={'source': 'data/file\\wiki.csv', 'row': 93}), Document(page_content='id: 161\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Í¨¹ıÃ¶¾ÙÖ§³Ö¶àÓïÑÔ\nslug: snippets/use-enum-support-i18n/\ncontent: ## Ö÷Ìâ\n\n`Enum` ÉùÃ÷×Ö¶Îº¬Òå£¬ÓÅÑÅ´¦Àí¶àÓïÑÔ£¬Ö§³ÖÁé»îÌí¼Ó\n\n## Éè¼Æ\n\n- Í¨¹ıÃ¶¾Ù¶¨Òå×Ö¶Î\n- ¶¨ÒåÒ»¸öÅäÖÃÎÄ¼ş£¬¶¨ÒåÊµÏÖµÄÓïÑÔ\n- ·Ö±ğÎªÃ¿ÖÖÓïÑÔÅäÖÃÒ»Ì×ÓïÑÔ·­Òë£¬ÕâÀïÀûÓÃ `Java Resource Bundle` »úÖÆ\n\n## ´úÂëÒÀÀµ\n\n- `JDK` 5+\n- `JUnit` 4\n- `fastjson` 1.2.66(·Ç±ØĞë£¬½öÓÃÔÚ `JUnit` ²âÊÔÖĞ)\n- `slf4j` + `logback`(·Ç±ØĞë£¬½öÓÃÔÚ `JUnit` ²âÊÔÖĞ)\n\n## ´úÂëÊµÏÖ\n\n### FieldDescEnum\n\n```lang=java,lines=12\npublic enum FieldDescEnum {\n    /**\n     * XXX\n     */\n    FIELD_X("xxx"),\n    /**\n     * YYY\n     */\n    FIELD_Y("yyy"),\n    /**\n     * ZZZ\n     */\n    FIELD_Z("zzz");\n\n    private final String fieldName;\n    private final Map<String, String> descLocales;\n\n    FieldDescEnum(String fieldName) {\n        this.fieldName = fieldName;\n        this.descLocales = FieldDescPropsUtil.getDescriptionByKey(fieldName);\n    }\n\n    public String getFieldName() {\n        return fieldName;\n    }\n\n    public Map<String, String> getDescLocales() {\n        return descLocales;\n    }\n}\n\n```\n\n### FieldDescPropsUtil\n\n```lang=java,lines=12\npublic final class FieldDescPropsUtil {\n    private static final String SUPPORTED_LOCALES_FILE = "support_locales.properties";\n    private static final String LOCALES = "locales";\n    private static final String FIELD_DESC = "fieldDesc";\n\n    private static final Properties SUPPORTED_LOCALES = new Properties();\n    private static final Map<String, ResourceBundle> FIELD_DESC_MAP = new HashMap<>();\n\n    static {\n        try {\n            SUPPORTED_LOCALES.load(FieldDescPropsUtil.class.getClassLoader().getResourceAsStream(SUPPORTED_LOCALES_FILE));\n        } catch (IOException e) {\n            throw new RuntimeException("load file failed", e);\n        }\n        String localesOneLine = SUPPORTED_LOCALES.getProperty(LOCALES);\n        String[] locales = localesOneLine.split(",");\n        String[] langAndCountry;\n        for (String locale : locales) {\n            if (locale.indexOf(\'_\') > 0) {\n                langAndCountry = locale.split("_");\n                FIELD_DESC_MAP.put(locale,\n                        ResourceBundle.getBundle(FIELD_DESC,\n                                new Locale(langAndCountry[0], langAndCountry[1])));\n            } else {\n                FIELD_DESC_MAP.put(locale,\n                        ResourceBundle.getBundle(FIELD_DESC, new Locale(locale)));\n            }\n        }\n    }\n\n    private static String getDescriptionByLocale(String key, String locale) {\n        if (FIELD_DESC_MAP.containsKey(locale)) {\n            return FIELD_DESC_MAP.get(locale).getString(key);\n        } else {\n            return key;\n        }\n    }\n\n    static Map<String, String> getDescriptionByKey(String key) {\n        HashMap<String, String> descMap = new HashMap<>();\n        for (String locale : FIELD_DESC_MAP.keySet()) {\n            descMap.put(locale, getDescriptionByLocale(key, locale));\n        }\n        return descMap;\n    }\n}\n\n```\n\n### support_locales.properties\n\n```lang=properties,lines=12\nlocales=zh_CN,en_US\n```\n\n### fieldDesc.properties\n\n```lang=properties,lines=12\nxxx=xxx\nyyy=yyy\nzzz=zzz\n```\n\n### fieldDesc_en_US.properties\n\n```lang=properties,lines=12\nxxx=x!x!x!\nyyy=y!y!y!\nzzz=z!z!z!\n```\n\n### filedDesc_zh_CN.properties\n\n```lang=properties,lines=12\nxxx=Î´ÖªX!\nyyy=Î´ÖªY!\nzzz=Î´ÖªZ!\n```\n\n## µ¥Ôª²âÊÔ\n\n### FieldDescEnumTest.java\n\n```lang=java,lines=12\npublic class FieldDescEnumTest {\n    private static final Logger LOGGER = LoggerFactory.getLogger(FieldDescEnumTest.class);\n\n    @Test\n    public void test() {\n        SerializeConfig config = new SerializeConfig();\n        config.configEnumAsJavaBean(FieldDescEnum.class);\n        LOGGER.info(JSON.toJSONString(FieldDescEnum.FIELD_X, config));\n        LOGGER.info(JSON.toJSONString(FieldDescEnum.FIELD_Y, config));\n        LOGGER.info(JSON.toJSONString(FieldDescEnum.FIELD_Z, config));\n    }\n\n}\n\n```\ndateCreated: 1638496462\ndateModified: 1638496462\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-gviqzsyt2yhsjk4k3xsp\ndocumentPHID: PHID-WIKI-ics7qqfxsgqfqqibn52b', metadata={'source': 'data/file\\wiki.csv', 'row': 94}), Document(page_content='id: 298\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ê¹ÓÃJDKÌá¹©µÄFutureÌØĞÔ\nslug: snippets/use-future/\ncontent: `test1`ÑİÊ¾ÔÚĞÂÆôÏß³ÌÖĞÖ´ĞĞÂß¼­£¬ÔÚÖ÷Ïß³ÌÖĞÍê³ÉºóĞø£»\n`test2`ÑİÊ¾ÔÚĞÂÆôÏß³ÌÖĞÖ´ĞĞÂß¼­£¬ÔÚÄ¬ÈÏÏß³Ì³ØÖĞÍê³ÉºóĞø£»\n`test3`ÑİÊ¾ÔÚĞÂÆôÏß³ÌÖĞÖ´ĞĞÂß¼­£¬ÔÚ×Ô¶¨ÒåÏß³Ì³ØÖĞÍê³ÉºóĞø\n\n```lang=java,lines=12\npublic class FutureDemo {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(FutureDemo.class);\n\n    private static final ThreadPoolExecutor POOL = new ThreadPoolExecutor(4, 4,\n            1000L, TimeUnit.MILLISECONDS,\n            new SynchronousQueue<>(),\n            new SimpleThreadFactory("demo pool"),\n            new ThreadPoolExecutor.AbortPolicy());\n\n    public static void main(String[] args) {\n        test1();\n        test2();\n        test3();\n        trySleep(500L);\n    }\n\n    private static void test1() {\n        CompletableFuture<Integer> future = new CompletableFuture<>();\n        Thread thread = startThread(future, 1);\n        // code running in the thread "future complete thread"\n        future.whenComplete(FutureDemo::done);\n        join(thread);\n    }\n\n    private static void test2() {\n        CompletableFuture<Integer> future = new CompletableFuture<>();\n        Thread thread = startThread(future, 2);\n        // code running in the thread "fork_join_pool"\n        future.whenCompleteAsync(FutureDemo::done);\n        join(thread);\n    }\n\n    private static void test3() {\n        CompletableFuture<Integer> future = new CompletableFuture<>();\n        Thread thread = startThread(future, 3);\n        // code running in the thread "demo pool"\n        future.whenCompleteAsync(FutureDemo::done, POOL);\n        join(thread);\n    }\n\n    private static Thread startThread(CompletableFuture<Integer> future, int idx) {\n        Thread thread = new Thread(() -> genReturnVal(future, idx), "future complete thread");\n        thread.start();\n        return thread;\n    }\n\n    private static void genReturnVal(CompletableFuture<Integer> future, int idx) {\n        trySleep(1000L);\n        future.complete(0);\n        LOGGER.info("No.{} return val:0", idx);\n    }\n\n    private static void done(Integer val, Throwable ex) {\n        LOGGER.info("thread name:[{}]", Thread.currentThread().getName());\n        if (ex == null) {\n            LOGGER.info("val:[{}]", val);\n        } else {\n            LOGGER.warn("ex:[{}]", ex.getMessage(), ex);\n        }\n    }\n\n    private static void join(Thread thread) {\n        try {\n            thread.join();\n        } catch (InterruptedException e) {\n            LOGGER.warn(e.getMessage(), e);\n        }\n    }\n\n    private static void trySleep(long interval) {\n        try {\n            Thread.sleep(interval);\n        } catch (InterruptedException e) {\n            LOGGER.warn(e.getMessage(), e);\n        }\n    }\n\n}\n\n```\ndateCreated: 1641357915\ndateModified: 1641357915\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-g6nr45dkijl6o2efxsnr\ndocumentPHID: PHID-WIKI-tpu2g6wqzowenjpjw26g', metadata={'source': 'data/file\\wiki.csv', 'row': 95}), Document(page_content='id: 224\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Mysql5ÖĞµÄrownum\nslug: snippets/mysql5-rownum/\ncontent: ```lang=sql\nSELECT t.*, \n       @rownum := @rownum + 1 AS rank\n  FROM YOUR_TABLE t, \n       (SELECT @rownum := 0) r\n```\n\n²Î¿¼×ÊÁÏ£º[[ https://stackoverflow.com/questions/1895110/row-number-in-mysql | stackoverflow.com ÖĞµÄÌáÎÊ¼°½â´ğ ]]\ndateCreated: 1639470964\ndateModified: 1639470964\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-clpmr62xsslkcx5dd24r\ndocumentPHID: PHID-WIKI-hgq6cvujxrlh4t3nlq6g', metadata={'source': 'data/file\\wiki.csv', 'row': 96}), Document(page_content='id: 134\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÔÚjavaÖĞÄÚÇ¶Ê¹ÓÃgroovy\nslug: snippets/use-groovy-in-java/\ncontent: = ·½·¨1 Ê¹ÓÃ `JSR223`\n\n```lang=java\n        ScriptEngineManager scriptEngineManager = new ScriptEngineManager();\n        ScriptEngine engine = scriptEngineManager.getEngineByName("groovy");\n        try {\n            Bindings binding = engine.createBindings();\n            binding.put("logger", LOGGER); // ±äÁ¿\n            engine.eval("logger.info(\\"hello,world\\")", binding);\n        } catch (ScriptException e) {\n            LOGGER.warn(e.getMessage(), e);\n        }\n```\n\n\n= ·½·¨2 Ê¹ÓÃ `GroovyShell`\n\n```lang=java\n        Binding binding = new Binding();\n        binding.setVariable("x", 10);\n        binding.setVariable("language", "Groovy");\n\n        GroovyShell shell = new GroovyShell(binding);\n        Object value = shell.evaluate("println \\"Welcome to $language\\"; y = x * 2; z = x * 3; return x ");\n\n        LOGGER.info("result:", value);\n```\n\n= ·½·¨3 Ê¹ÓÃ `GroovyClassLoader`\n\n```lang=java\n        CompilerConfiguration config = new CompilerConfiguration();\n        config.setSourceEncoding("UTF-8");\n        GroovyClassLoader groovyClassLoader = new GroovyClassLoader();\n        Class<?> clazz = groovyClassLoader.parseClass("def judge(name,age){name.length() > 5 && age > 12}");\n        try {\n            GroovyObjectSupport obj = (GroovyObjectSupport) clazz.newInstance();\n            Object ret = obj.invokeMethod("judge", new Object[]{"abcdefgh", 31});\n            LOGGER.info("invoke {} with param[\\"abcdefgh\\",12], returns {}", obj, ret);\n        } catch (InstantiationException | IllegalAccessException e) {\n            e.printStackTrace();\n        }\n```\n\n(IMPORTANT)ÆäÊµ±¾ÖÊÉÏ£¬·½·¨1/·½·¨2µ×²ã¶¼ÊÇÍ¨¹ı `GroovyClassLoader` À´Ö´ĞĞµÄ¡£\ndateCreated: 1638323778\ndateModified: 1638323778\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-3p3xo2dtz6pwwdhj7xq4\ndocumentPHID: PHID-WIKI-dd7m4pxlqlqggdog55lx', metadata={'source': 'data/file\\wiki.csv', 'row': 97}), Document(page_content='id: 92\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: XNET¶ÏÁ¬±£»¤ĞÔ´¦Àí\nslug: snippets/xnet-failure-restore/\ncontent: À´×Ô£ºÁ¿»¯Í¶×Ê²¿ Ö£¹úµ©( @zhengguodan )\nµãÆÀ£º±£»¤ĞÔ±à³Ì£¬·ÀÖ¹Ïß³ÌÅÜ·É£¬×´Ì¬²»¿ÉÔ¤²â¡£Í¨¹ı¼ì²é×´Ì¬»ò²¶»ñÒì³£ÊµÏÖ¡£\n\n##ÎÊÌâÆğÒò\n    ÔÚXNET¶Ï¿ªÖØÁ¬ºó£¬·¢ÏÖÆäÖØÁ¬»úÖÆ¿ÉÄÜÎŞ·¨±£Ö¤È«²¿ÒµÎñÏß³Ì»Ö¸´Õı³£¡£\n\n##Demo\n\nxnet4j»ùÓÚÒÔÏÂ `gav` ×ø±ê£º\n```lang=xml\n<groupId>com.erayt</groupId>\n<artifactId>xnet4j</artifactId>\n<version>1.3</version>\n```\nÈç `demo` ËùÊ¾£¬Í¨¹ı `while(true)` ÊµÏÖÒ»¸öÒµÎñÏß³ÌÈÎÎñ£¨»òÊÇÆäËû¿ò¼Ü¹¦ÄÜÊµÏÖ´æÔÚÀàËÆÔ­Àí£©£¬µ± `xnet` ¶Ï¿ª±¨´íºóÁ¬½Ó»Ö¸´£¬¸ÃÒµÎñÏß³ÌÎŞ·¨Õı³£»Ö¸´¡£\n\n```lang=java \n//Æô¶¯xnet¿Í»§¶Ë\nstartXnetClient();\n//Æô¶¯xnet·şÎñ¶Ë\nstartXnetServer();\n//Ä£ÄâÒµÎñÏß³Ì\nnew Thread(()-> {\n    int count = 0;\n    while(true){\n        //Ä£ÄâÒµÎñ´¦Àí\n        String str = "hello world" +count++;\n        //¿Í»§¶Ë·¢ËÍÏûÏ¢\n        xnetClientSocket.commandBuffer(XNetCommand.TITLE, "one", str.getBytes());\n        sleep(500);\n    }\n}).start();\n```\n\nxnet¶ÏÁ¬ºó´íÎóĞÅÏ¢ÈçÏÂ£º\n```lang=txt\nException in thread "Thread-8" com.erayt.xnet4j.XNetException: xnet client not logined.\n\tat com.erayt.xnet4j.XNetSocket.sendData(XNetSocket.java:512)\n\tat com.erayt.xnet4j.XNetSocket.commandBuffer(XNetSocket.java:593)\n\tat com.erayt.xnet4j.XNetSocket.commandBuffer(XNetSocket.java:572)\n\tat com.erayt.XnetMain.lambda$main$0(XnetMain.java:73)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\nÍ¨¹ıÒì³£¶¨Î»¿ÉÖªÔÚ `xnet` Ã¿´Î·¢ËÍÏûÏ¢Ç°£¬»á½øĞĞ×´Ì¬µÄ¼ì²é£¬µ± `xnet` ¶ÏÁ¬ºó£¬ `this.getStatus()!=2` ³ÉÁ¢ÔòÅ×³ö `XNetException(extend RuntimeException)`\n\n```lang=txt\n    ·½·¨£ºcom.erayt.xnet4j.XNetSocket#sendData()\n    ´úÂëÆ¬¶Î£ºthis.getStatus() != 2\n```\n\n##Òì³£Ô­Òò\n**ÔÚÖ»³õÊ¼»¯Æô¶¯Ò»´ÎµÄÒµÎñÏß³ÌÖĞ£¬`xnet` ¶ÏÁ¬ºó£¬Èç¹û¸ÃÏß³Ì¼ÌĞøµ÷ÓÃ `socket.commandBuffer()` ·¢ÏûÏ¢£¬Ôò»áÅ×³öÒì³££¬µ¼ÖÂ¸ÃÏß³ÌÖ±½ÓÍË³ö´Ó¶øÓ°ÏìºóĞøÒµÎñ¹¦ÄÜ**¡£\n\n##½â¾öË¼Â·\n//½ö¹©²Î¿¼£¬¾ßÌå´¦ÀíĞè½áºÏÊµ¼ÊÒµÎñ//\n1. ·â×° `socket.commandBuffer(...)`,ÔÚÃ¿´Î `xnet` ·¢ËÍÇ°ÏÈ½øĞĞ `this.getStatus()` Ğ£Ñé\n```lang=java \nprivate void xnetClientSend(String str){\n    //·¢ËÍÇ°ÏÈ½øĞĞĞ£Ñé\n    if (checkLogin()) {\n        xnetClientSocket.commandBuffer(XNetCommand.TITLE, "one", str.getBytes());\n    } else {\n        //TODO\n    }\n}\n//Ğ£Ñé this.getStatus()\nprivate boolean checkLogin() {\n    int tryTimes = 3;// ÖØÊÔ´ÎÊı\n    while (!xnetClientSocket.isLoginOK()) {\n        // Î´µÇÂ¼£¬¹Ì¶¨µÈ´ı1Ãë\n        try {\n            TimeUnit.MILLISECONDS.sleep(1000);\n        } catch (Exception e) { \n            //TODO\n        }\n        tryTimes--;\n        if (tryTimes == 0) {\n            return false;\n        } else { \n            //TODO\n        }\n    }\n    return true;    \n}\n```\n\n2. Í¨¹ı`try-catch`°ü×¡`socket.commandBuffer(...)`£¬²»ÈÃÒì³£ÏòÍâÅ×\n```lang=java \n    public void xnetClientSend(String str){\n        try {\n            xnetClientSocket.commandBuffer(XNetCommand.TITLE, "one", str.getBytes());\n        }catch (Exception e){\n            //TODO \n        }\n    }\n```\ndateCreated: 1637113757\ndateModified: 1637113757\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-jy4vp4xod44jwrfsbl2s\ndocumentPHID: PHID-WIKI-ap4fg2bzp26dcynaoqm4', metadata={'source': 'data/file\\wiki.csv', 'row': 98}), Document(page_content='id: 140\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ò»¸öµäĞÍµÄÏß³Ì¹¤³§\nslug: snippets/a-typical-thread-factory/\ncontent: ```lang=java\npublic class SimpleThreadFactory implements ThreadFactory {\n    private static final AtomicInteger INSTANCE_COUNT = new AtomicInteger(0);\n    private final int instanceIdx = INSTANCE_COUNT.incrementAndGet();\n    private final String prefix;\n    private final AtomicInteger count = new AtomicInteger(0);\n\n    public SimpleThreadFactory(String prefix) {\n        this.prefix = prefix;\n    }\n\n    @Override\n    public Thread newThread(Runnable r) {\n        Thread thread = new Thread(r, "G-" + instanceIdx + "-"\n                + prefix + "-" + count.incrementAndGet());\n        thread.setDaemon(true);\n        return thread;\n    }\n}\n```\n¿ÉÉèÖÃÃû³Æ£¬²¢×Ô¶¯¼ÆÊı£¬¿ÉÓĞĞ§¼õÉÙ `pool-n-thread-m` ³öÏÖ\ndateCreated: 1638358933\ndateModified: 1638358933\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-bzpajd46m4lis62kw4sv\ndocumentPHID: PHID-WIKI-ytgrjwx4fsekdozifv2w', metadata={'source': 'data/file\\wiki.csv', 'row': 99}), Document(page_content='id: 159\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ¼ì²é¶àÓàÊÂÎñÅäÖÃ\nslug: snippets/detect-duplicated-transactions/\ncontent: À´×Ô¶Îº£Èô( @duanhairuo )\n\nÊÂÎñ¼ì²é£¬Ö»ÏŞ `mybatis`£¬»ùÓÚÀ¹½ØÆ÷ÊµÏÖ\n\n```lang=java,lines=12\nimport java.util.EnumSet;\n\npublic final class TxServiceHelper {\n\n    private TxServiceHelper() {\n    }\n\n    // ÓÃ»§ÔÚÒ»¸ö·½·¨ÖĞËùÓĞµÄÔöÉ¾¸Ä²é²Ù×÷ÀúÊ·\n    private static ThreadLocal<EnumSet<SqlCommandType>> sqlCommandTypesThreadLocal = new ThreadLocal<>();\n\n    public static void add(SqlCommandType type) {\n        EnumSet<SqlCommandType> enumSet = sqlCommandTypesThreadLocal.get();\n        if (enumSet == null) {\n            enumSet = EnumSet.noneOf(SqlCommandType.class);\n            sqlCommandTypesThreadLocal.set(enumSet);\n        }\n        enumSet.add(type);\n    }\n\n    public static void addAll(Set<SqlCommandType> sets) {\n        EnumSet<SqlCommandType> enumSet = sqlCommandTypesThreadLocal.get();\n        if (enumSet == null) {\n            enumSet = EnumSet.noneOf(SqlCommandType.class);\n            sqlCommandTypesThreadLocal.set(enumSet);\n        }\n        enumSet.addAll(sets);\n    }\n\n    public static Set<SqlCommandType> get() {\n        EnumSet<SqlCommandType> enumSet = sqlCommandTypesThreadLocal.get();\n        if (enumSet == null) {\n            return Collections.emptySet();\n        }\n        return enumSet;\n    }\n\n    public static void removeAll() {\n        sqlCommandTypesThreadLocal.remove();\n    }\n\n}\n```\n\n```lang=java,lines=12\n    // ÊÂÎñ¼ì²éÅäÖÃ¿ªÊ¼\n    @Bean\n    public TxCheckInterceptor txCheckInterceptor(TransactionInterceptor myTransactionInterceptor) {\n        TxCheckInterceptor txCheckInterceptor = new TxCheckInterceptor();\n        txCheckInterceptor.setTransactionInterceptor(myTransactionInterceptor);\n        return txCheckInterceptor;\n    }\n\n    @Bean\n    public AspectJExpressionPointcutAdvisor txCheckInterceptorAdvisor(TxCheckInterceptor txCheckInterceptor) {\n        AspectJExpressionPointcutAdvisor pointcutAdvisor = new AspectJExpressionPointcutAdvisor();\n        pointcutAdvisor.setExpression(AOP_POINTCUT_EXPRESSION);\n        pointcutAdvisor.setAdvice(txCheckInterceptor);\n        pointcutAdvisor.setOrder(1);\n        return pointcutAdvisor;\n    }\n    // ÊÂÎñ¼ì²éÅäÖÃ½áÊø\n```\n\n```lang=java,lines=12\npublic class TxCheckInterceptor implements MethodInterceptor {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(TxCheckInterceptor.class);\n\n    private TransactionInterceptor transactionInterceptor;\n\n    @Override\n    public Object invoke(MethodInvocation invocation) throws Throwable {\n        Set<SqlCommandType> set = TxServiceHelper.get();\n\n        TxServiceHelper.removeAll();\n        try {\n            Object proceed = invocation.proceed();\n            Method method = invocation.getMethod();\n            if (method.isAnnotationPresent(Transactional.class)) {\n                return proceed;\n            }\n            TransactionAttributeSource transactionAttributeSource = transactionInterceptor\n                    .getTransactionAttributeSource();\n            if (transactionAttributeSource == null) {\n                LOGGER.error("ÎŞ·¨»ñÈ¡ÊÂÎñÅäÖÃ");\n                return proceed;\n            }\n            TransactionAttribute attr = transactionAttributeSource.getTransactionAttribute(method,\n                    method.getDeclaringClass());\n            if (null != attr && attr.isReadOnly()) {\n                Set<SqlCommandType> newSet = TxServiceHelper.get();\n                if (newSet.contains(SqlCommandType.DELETE) || newSet.contains(SqlCommandType.INSERT)\n                        || newSet.contains(SqlCommandType.UPDATE)) {\n                    LOGGER.error("ÄúµÄ·½·¨±êÖ¾ÎªÖ»¶Á,µ«Ö´ĞĞÁËÔöÉ¾¸Ä²Ù×÷,ÇëĞŞ¸Ä·½·¨µÄÃû³Æ¶¨Òå:{}", method);\n                }\n            }\n            else {\n                LOGGER.error("ÎŞ·¨»ñÈ¡ÊÂÎñÅäÖÃ");\n            }\n            return proceed;\n        }\n        finally {\n            TxServiceHelper.removeAll();\n            if (set != null) {\n                TxServiceHelper.addAll(set);\n            }\n        }\n    }\n\n    public void setTransactionInterceptor(TransactionInterceptor transactionInterceptor) {\n        this.transactionInterceptor = transactionInterceptor;\n    }\n\n}\n```\n\n```lang=java,lines=12\n@Intercepts({\n        @Signature(type = Executor.class, method = "update", args = {MappedStatement.class, Object.class}),\n        @Signature(type = Executor.class, method = "query", args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class})\n})\npublic class SqlCommandTypeInterceptor implements Interceptor {\n\n    @Override\n    public Object intercept(Invocation invocation) throws Throwable {\n        MappedStatement mappedStatement = (MappedStatement) invocation.getArgs()[0];\n        TxServiceHelper.add(mappedStatement.getSqlCommandType());\n        return invocation.proceed();\n    }\n\n}\n```\n\nĞŞ¸Ä´Ë´¦£¬¿É¼ì²é¶àÓàÊÂÎñÅäÖÃ\n\n{F320041}\ndateCreated: 1638495074\ndateModified: 1638495074\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-2oeutnhf46uidremh7hw\ndocumentPHID: PHID-WIKI-q3acsobjniggphnphgm5', metadata={'source': 'data/file\\wiki.csv', 'row': 100}), Document(page_content='id: 328\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Î´¼ÓÏŞÖÆÇé¿öÏÂ£¬ÎÄ¼ş±»Î´¾­ÊÚÈ¨ÏÂÔØ\nslug: snippets/download-file-leak/\ncontent: ```lang=java\n    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n       ...\n       String fileName= request.getParameter("fileName");\n       response.setContentType("text/plain");\n       response.setHeader("Location",fileName);\n       response.reset();\n       response.setHeader("Cache-Control", "max-age=0" );\n       response.setHeader("Content-Disposition", "attachment; filename=" + fileName);\n       BufferedInputStream bis = null;\n       BufferedOutputStream bos = null;\n       OutputStream fos = null;\n       InputStream fis = null;\n       String filePath =templateFormaterOrderFactory.getSavePath()+"/"+fileName;\n\n       fis = new FileInputStream(filePath);\n       ...\n    }\n```\n\nÓĞÃ÷ÏÔµÄ°²È«ÎÊÌâ£º\n`fileName`Ó¦¸ÃÂú×ãÕıÔò±í´ïÊ½`[^/]+\\.[a-z0-9]{3}`\n\n²»×öµÄÎ£º¦ĞÔ£º\nÊÔÏë£¬¼ÙÉè`getSavePath()`µÃµ½µÄÂ·¾¶ÊÇ`/home/wasadmin/template`\nÓĞ¸ö¶ñÒâÓÃ»§Ê¹ÓÃ`fileName`½øĞĞĞáÌ½£º\n\n- `../etc/passwd`\n- `../../etc/passwd`\n- `../../../etc/passwd`\n\nÖ»ĞèÒªÈı´Î¾ÍÄÜ»ñµÃÎÄ¼ş½øĞĞÏÂÔØ\n\nÔ´ÓÚÕæÊµ´úÂë£º R3116:17370\ndateCreated: 1641799356\ndateModified: 1641799356\ndescription: \nchangeType: 2\nchangeRef: 104\nphid: PHID-WRDS-luuitec3c2nwzi3okfrj\ndocumentPHID: PHID-WIKI-4vkrw27dqj4fr7647v3p', metadata={'source': 'data/file\\wiki.csv', 'row': 101}), Document(page_content='id: 181\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ÖØ¸´´úÂëÑùÀı\nslug: snippets/duplicated-code-sample/\ncontent: = µäĞÍ´úÂë½ØÍ¼\n== `QES`µäĞÍ´úÂë\n{F320634}\nR3108:4391\n\n== `XPRICE`µäĞÍ´úÂë\n{F320618}\n{F320616}\nR2287:803\n\n= µãÆÀ\nÊµ¼ÊÉÏ£¬ÕâĞ©¶¼ÊÇÂòÂôË«Ïò¼ÆËã´úÂë¡£ÀíÂÛÉÏ£¬Âß¼­¶¼Ò»Ñù£¬Ö»ÓĞ²ÎÊı²»Í¬¡£ÕâÖÖÇé¿öÏÂ£¬ÕâĞ©¼ÆËã´úÂë¾ÍÓ¦¸Ã³éÈ¡Îª¹«¹²·½·¨£¬´«²Î½øĞĞ¼ÆËã¡£\ndateCreated: 1638843228\ndateModified: 1638843228\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-qffyf6kp4whsf5gjfwed\ndocumentPHID: PHID-WIKI-uxhmxmvfiz4osflrf4ay', metadata={'source': 'data/file\\wiki.csv', 'row': 102}), Document(page_content='id: 107\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ê¹ÓÃÃ¶¾Ù×÷Îªµ¥Àı\nslug: snippets/enum-as-singleton/\ncontent: # Ê¹ÓÃÃ¶¾Ù×÷Îªµ¥Àı\n\n×÷Îª×î°²È«µÄĞ´·¨£¬Õâ¸öÄ£Ê½ÖµµÃÍÆ¼ö\n\n## Ê¾Àı´úÂë\n```lang=java\npackage enum_as_singleton;\n\npublic enum DemoSingleton {\n    /**\n     * µ¥Àı\n     */\n    INSTANCE;\n\n    public void demo() {\n        System.out.println("demo");\n    }\n\n    public void hello() {\n        System.out.println("hello, world");\n    }\n\n    public void goodbye() {\n        System.out.println("goodbye, world");\n    }\n}\n```\n\n## µ¥Ôª²âÊÔ\n```lang=java\npackage enum_as_singleton;\n\nimport org.junit.Test;\n\npublic class DemoSingletonTest {\n\n    @Test\n    public void test() {\n        DemoSingleton.INSTANCE.hello();\n        DemoSingleton.INSTANCE.demo();\n        DemoSingleton.INSTANCE.goodbye();\n    }\n\n}\n```\ndateCreated: 1637134456\ndateModified: 1637134456\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-2hhr3odu5sakjwjmrizw\ndocumentPHID: PHID-WIKI-dr7v2qbnlgxn2uc7d6mo', metadata={'source': 'data/file\\wiki.csv', 'row': 103}), Document(page_content='id: 109\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Í¨¹ıÃ¶¾Ù+½Ó¿ÚÊµÏÖ¶àÌ¬Ê¹ÓÃ\nslug: snippets/enums-polymorphism/\ncontent: # Ã¶¾ÙºÍ¶àÌ¬\n\nÍ¨¹ıÃ¶¾ÙºÍ½Ó¿Ú£¬¿ÉÊµÏÖ¼òµ¥¿ìËÙµÄ¶àÌ¬Ê¹ÓÃ\n\n## Ê¾Àı´úÂë\n```lang=java\npublic enum EnumDemo {\n\n\n    A1(System.out::println),\n    A2(obj -> LoggerFactory.getLogger(EnumDemo.class).info("{}", obj));\n\n    private final TargetInvoker invoker;\n\n    EnumDemo(TargetInvoker invoker) {\n        this.invoker = invoker;\n    }\n\n    public void execute(Object obj) {\n        invoker.invoke(obj);\n    }\n\n    interface TargetInvoker {\n        void invoke(Object obj);\n    }\n\n}\n\n```\n\n## µ¥Ôª²âÊÔ\n```lang=java\npublic class EnumDemoTest {\n\n    @Test\n    public void test() {\n        EnumDemo.A1.execute(133);\n        EnumDemo.A2.execute(133);\n    }\n\n}\n```\ndateCreated: 1637134797\ndateModified: 1637134797\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-6fs3sn4lwyeyslh6irzo\ndocumentPHID: PHID-WIKI-33v2mi6w4vetpun3rekn', metadata={'source': 'data/file\\wiki.csv', 'row': 104}), Document(page_content='id: 137\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: High-precision-double-value-compare-fail\nslug: snippets/high-precision-double-value-compare-fail/\ncontent: ```lang=java\npublic class DoubleIEEE754Print {\n\n    private static final double[][] DOUBLE_ARRAY_OF_ARRAY = new double[][]{\n            {Double.MAX_VALUE, Double.MAX_VALUE - 0.001D},\n            {1_000_000_000_000_000_000D, 1_000_000_000_000_000_000.01D},\n            {1_000_000_000_000_000D, 1_000_000_000_000_000.01D},\n            {1_000_000_000_000D, 1_000_000_000_000.01D},\n    };\n\n    public static void main(String[] args) {\n        byte[] bytes = new byte[8];\n        ByteBuffer buffer = ByteBuffer.allocate(8);\n        for (double[] array : DOUBLE_ARRAY_OF_ARRAY) {\n            printDouble(array[0], buffer, bytes);\n            printDouble(array[1], buffer, bytes);\n            System.out.println(Double.compare(array[0], array[1]));\n            System.out.println(Math.abs(array[0] - array[1]) < 0.00000001D);\n        }\n    }\n\n    private static void printDouble(double v, ByteBuffer buf, byte[] bytes) {\n        System.out.println(v);\n        System.out.println("toLongBits>: " + Double.doubleToLongBits(v));\n        System.out.println("toLongRawBits>: " + Double.doubleToRawLongBits(v));\n        System.out.println("exponent>: " + Math.getExponent(v));\n        buf.clear();\n        buf.putDouble(v);\n        buf.flip();\n        buf.get(bytes);\n        String doubleBits = doubleBytesToString(bytes);\n        System.out.println("bytes>: " + doubleBits);\n        System.out.println("sign:exponent:fraction");\n        System.out.println(doubleBits.substring(0, 1) + ":" + doubleBits.substring(1, 11) + ":" + doubleBits.substring(11));\n        System.out.println("detail>: " + doubleDetail(buf, bytes));\n    }\n\n    private static String doubleBytesToString(byte[] bytes) {\n        StringBuilder builder = new StringBuilder(64);\n        for (byte b : bytes) {\n            builder.append((b & 0b10000000) >> 7)\n                    .append((b & 0b01000000) >> 6)\n                    .append((b & 0b00100000) >> 5)\n                    .append((b & 0b00010000) >> 4)\n                    .append((b & 0b00001000) >> 3)\n                    .append((b & 0b00000100) >> 2)\n                    .append((b & 0b00000010) >> 1)\n                    .append((b & 0b00000001));\n        }\n        return builder.toString();\n    }\n\n\n    private static String doubleDetail(ByteBuffer buf, byte[] bytes) {\n        StringBuilder builder = new StringBuilder(128);\n        String sign = ((bytes[0] & 0b10000000) >> 7) == 0 ? "positive" : "negative";\n        String exponent = composeExponent(buf, bytes);\n        builder.append("sign:").append(sign)\n                .append(", exponent:").append(exponent);\n        return builder.toString();\n    }\n\n    private static String composeExponent(ByteBuffer buf, byte[] bytes) {\n        byte[] intArray = new byte[4];\n        Arrays.fill(intArray, (byte) 0x0);\n        appendToBuf(intArray, 2, bytes[0], 4, 0b00000111, 0);\n        appendToBuf(intArray, 3, bytes[0], 0, 0b00001111, 4);\n        appendToBuf(intArray, 3, bytes[1], 4, 0b00001111, 0);\n        buf.clear();\n        buf.put(intArray);\n        buf.flip();\n        int exponent = buf.getInt();\n        exponent = exponent - 1023;\n        return Integer.toString(exponent);\n    }\n\n    private static void appendToBuf(byte[] intArray, int idx, byte b, int shiftBits, int mask, int shiftBits2) {\n        intArray[idx] = (byte) (intArray[idx] | (((b >> shiftBits) & mask) << shiftBits2));\n    }\n}\n```\n\n¸ß¾«¶ÈÏÂ£¬`double` ±È½Ï»áºÍÔ¤ÆÚ²»Ò»ÖÂ¡£ÒòÎª£¬`double` µÄ¾«¶ÈÎ»Ö»ÓĞ`11`Î»Ö¸Êı²¿·Ö+`52`Î»Î²Êı²¿·Ö¡£ÕâÊÇÓÉÓÚ¼ÆËã»úÎŞ·¨Ğ´Èë¸ß¾«¶ÈµÄ¸¡µãĞÍÊıÖµ£¬ÆäÊµĞ¡Êı²¿·ÖÊÇ¿¿½üËÆÀ´Ä£ÄâµÄ¡£±ÈÈç£¬ÎÒÓĞÊıÖµ£º`1.1`£¬ÄÚ´æ²¼¾ÖÎª `0011111111110001100110011001100110011001100110011001100110011001` £¬ÆäÕæÕıµÄÖµÊÇ£º\n\n> `1.0999999999999998667732370`\n\nÆä¼ÆËã¹«Ê½Îª£º {F319775}\n»ùÓÚÕâ¸ö¹«Ê½£¬ÏëÏóÒ»ÏÂÇ°ÃæÁ½¸öÊı£¬ÊÇ²»ÊÇ²îÒì²¿·ÖÒ»ÏÂ×Ó¾Í±»¶ª³ö `52` Î»ÍâÁË£¿ Õâ¾ÍÊÇÎªºÎÌØ±ğ´óµÄÊı£¬±È½Ï¾ÍÊ§°ÜÁË¡£\n\n**Í¼ĞÎ»¯ÄÚ´æ²¼¾Ö**\n- [[ http://www.binaryconvert.com/convert_double.html | Í¼ĞÎ»¯ÄÚ´æ²¼¾Ö£ºdouble ]]\n- [[ http://www.binaryconvert.com/convert_float.html | Í¼ĞÎ»¯ÄÚ´æ²¼¾Ö£ºfloat ]]\n- [[ https://www.h-schmidt.net/FloatConverter/IEEE754.html | Í¼ĞÎ»¯ÄÚ´æ²¼¾Ö£ºfloat v2 ]]\ndateCreated: 1638358693\ndateModified: 1638358693\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-gz4ekniwimqs2cd5ixsz\ndocumentPHID: PHID-WIKI-lh6rbrtsybfqggpbiwok', metadata={'source': 'data/file\\wiki.csv', 'row': 105}), Document(page_content='id: 292\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Í¨¹ıJavaµ÷ÓÃsqlldr\nslug: snippets/java-call-sqlldr/\ncontent: ±¾´úÂë¿ÉÒÔÔÙÓÅ»¯£¬½ö×öÑİÊ¾\n\n**´úÂë**\n\n```lang=java,lines=12\npublic class SqlldrCaller {\n    private final static Logger LOGGER = LoggerFactory.getLogger(SqlldrCaller.class);\n\n    private static final String CONTROL_FILE = "c:\\\\TempData\\\\test_load.ctl";\n    private static final String LOG_FILE_PREFIX = "c:\\\\TempData\\\\load.out";\n\n    private AtomicLong idx = new AtomicLong(0);\n\n    public void call() throws Exception {\n        NIOFastWriter writer = new NIOFastWriter();\n        writer.setDestFile("c:\\\\TempData\\\\nioTest.txt");\n        writer.setRenameDestFile("c:\\\\TempData\\\\nioTest2.txt");\n        writer.open();\n        long start = System.currentTimeMillis();\n        LOGGER.info("{}", start);\n        for (int i = 0; i < 1000000; i++) {\n            writer.write(new String[]{Integer.toString(i), "hello", "world", Long.toString(System.currentTimeMillis())});\n            if (i > 0 && i % 100000 == 0) {\n                renameAndCall(writer);\n            }\n        }\n        renameAndCall(writer);\n        long end = System.currentTimeMillis();\n        LOGGER.info("{}", end);\n        LOGGER.info("{}", (end - start) / 1000D + "s");\n        writer.close();\n    }\n\n    private void renameAndCall(NIOFastWriter writer) throws IOException {\n        boolean flag;\n        flag = writer.reNew();\n        if (flag) {\n            if (execSqlldr()) {\n                writer.deleteRenamedFile();\n            } else {\n                writer.renameAgainToBackup();\n            }\n        } else {\n            LOGGER.warn("rename failed");\n        }\n    }\n\n    private boolean execSqlldr() throws IOException {\n        ProcessBuilder processBuilder = new ProcessBuilder(\n                "sqlldr",\n                "SGEB/SGEB",\n                "control=" + CONTROL_FILE,\n                "log=" + LOG_FILE_PREFIX + "." + idx.incrementAndGet() + ".log",\n                "readsize=256000000",\n                "bindsize=256000000",\n                "rows=3000",\n                "errors=999999999");\n        processBuilder.redirectErrorStream(true);\n        Process process = processBuilder.start();\n        Thread th1 = new Thread(new Output(process.getInputStream(), 0));\n        th1.start();\n        Thread th2 = new Thread(new Output(process.getErrorStream(), 1));\n        th2.start();\n        try {\n            th1.join();\n            th2.join();\n            process.destroy();\n            return process.waitFor() == 0;\n        } catch (InterruptedException e) {\n            LOGGER.warn(e.getMessage(), e);\n            return false;\n        }\n    }\n\n    private static class Output implements Runnable {\n        private final InputStream in;\n        private final LineLogger lineLogger;\n\n        public Output(InputStream in, int level) {\n            this.in = in;\n            if (level == 0) {\n                this.lineLogger = line -> LOGGER.info("sqlldr stdout:{}", line);\n            } else {\n                this.lineLogger = line -> LOGGER.warn("sqlldr stderr:{}", line);\n            }\n        }\n\n        @Override\n        public void run() {\n            try (InputStreamReader isr = new InputStreamReader(in);\n                 BufferedReader br = new BufferedReader(isr)) {\n                String line;\n                while ((line = br.readLine()) != null) {\n                    lineLogger.logLine(line);\n                }\n            } catch (Exception e) {\n                LOGGER.warn(e.getMessage(), e);\n            }\n        }\n    }\n\n    @FunctionalInterface\n    private interface LineLogger {\n        void logLine(String line);\n    }\n}\n```\n\nÆäÖĞµÄ `NIOFastWriter` ¼û´Ë [[ https://pha.erayt.com:8000/w/snippets/java-nio-file-writer/ | NIOFastWriter ]]\n\n**¿ØÖÆÎÄ¼ş**\n\n```lang=txt\nload   data\ninfile   \'c:\\TempData\\nioTest2.txt\'\ninto   table   test_sqlldr\nappend\n(\nsi char(12)   terminated   by   \'|\',\ns1 char(5)    terminated   by   \'|\',\ns2 char(5)    terminated   by   \'|\',\nsl char(30)   terminated   by   \'|\'\n)\n```\ndateCreated: 1641093002\ndateModified: 1641093002\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-mebhy5ba5duz7hrzrmpo\ndocumentPHID: PHID-WIKI-s64fb6hxlfi5bmv77u5i', metadata={'source': 'data/file\\wiki.csv', 'row': 106}), Document(page_content='id: 300\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JVMÍË³öÊ±¹³×ÓÊ¾Àı\nslug: snippets/jvm-shutdown-hook/\ncontent: ¹³×Ó\n```lang=java\npublic class HookSample implements Runnable {\n\n    public static void init() {\n        Runtime.getRuntime().addShutdownHook(new Thread(new HookSample(), "hook demo"));\n    }\n\n    @Override\n    public void run() {\n        System.out.println("hit hook");\n        try {\n            Thread.sleep(3000L);\n        } catch (InterruptedException e) {\n            //\n        }\n        System.out.println("done");\n    }\n}\n```\n\nµ÷ÓÃ\n```lang=java\npublic class HookSampleTest {\n    @Test\n    public void testShutdownHook() {\n        HookSample.init();\n        try {\n            Thread.sleep(1000L);\n        } catch (InterruptedException e) {\n            //\n        }\n    }\n}\n```\ndateCreated: 1641361365\ndateModified: 1641361365\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-2zcr3pndmgh7evfr3fcs\ndocumentPHID: PHID-WIKI-tiqnsxrebba6rlmwroti', metadata={'source': 'data/file\\wiki.csv', 'row': 107}), Document(page_content='id: 222\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Java¹Ø¼ü×Östrictfp\nslug: snippets/java-key-word-strictfp/\ncontent: (NOTE)Java strictfp keyword ensures that you will get the same result on every platform if you perform operations in the floating-point variable. The precision may differ from platform to platform that is why java programming language have provided the strictfp keyword, so that you get same result on every platform. So, now you have better control over the floating-point arithmetic.\n\n`strictfp` ¹Ø¼ü×Ö£¬È·±£´úÂëÔÚÈÎÒâÆ½Ì¨ÉÏµÄ¸¡µãĞÍ²Ù×÷¶¼ÊÇÒ»¸ö½á¹û¡£\n\n¸Ã¹Ø¼ü×Ö¿ÉÒÔÓÃÔÚ`interface`¡¢`class`ÉÏ£¬¿ÉÒÔÓÃÔÚ·½·¨ÉÏ£»µ«ÊÇ²»ÄÜÓÃÔÚ³éÏó·½·¨ÉÏ£¬²»ÄÜÓÃÔÚ±äÁ¿ÉÏ¡£\n\n¿ÉÒÔÒ»ÊÔ¡£\n\n```lang=java\nstrictfp class A{}//strictfp applied on class  \nstrictfp interface M{}//strictfp applied on interface  \nclass A{  \nstrictfp void m(){}//strictfp applied on method  \n}  \n```\n\n²Î¿¼×ÊÁÏ£º\n\n- [[ https://www.javatpoint.com/strictfp-keyword | Java Strictfp Keyword ]]\n- [[ https://www.tutorialspoint.com/strictfp-keyword-in-java-programming | strictfp Keyword in Java programming ]]\n- [[ https://www.geeksforgeeks.org/strictfp-keyword-java/ | strictfp keyword in java ]]\ndateCreated: 1639444114\ndateModified: 1639444114\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-l47l2l7ni6trmidvolhr\ndocumentPHID: PHID-WIKI-hnvyqwgw5yfmpjbpz5un', metadata={'source': 'data/file\\wiki.csv', 'row': 108}), Document(page_content='id: 167\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: ½éÉÜJavaµÄSPI»úÖÆ\nslug: snippets/java-spi/\ncontent: ## Ö÷Ìâ\n\n½éÉÜ Java µÄ SPI »úÖÆ\n\n## Ê²Ã´ÊÇ SPI\n\nService Provider Interface£¬¼ò³Æ SPI¡£Êµ¼ÊÉÏÊÇ¡°**»ùÓÚ½Ó¿ÚµÄ±à³Ì£«²ßÂÔÄ£Ê½£«ÅäÖÃÎÄ¼ş**¡±×éºÏÊµÏÖµÄ¶¯Ì¬¼ÓÔØ»úÖÆ¡£\n\n## Ê¹ÓÃ³¡¾°\n\n**Êı¾İ¿âÇı¶¯¼ÓÔØ½Ó¿ÚÊµÏÖÀàµÄ¼ÓÔØ**\n\n> JDBC¼ÓÔØ²»Í¬ÀàĞÍÊı¾İ¿âµÄÇı¶¯\n\n**ÈÕÖ¾ÃÅÃæ½Ó¿ÚÊµÏÖÀà¼ÓÔØ**\n\n> SLF4J¼ÓÔØ²»Í¬Ìá¹©ÉÌµÄÈÕÖ¾ÊµÏÖÀà\n\n**Spring**\n\n> SpringÖĞ´óÁ¿Ê¹ÓÃÁËSPI,±ÈÈç£º¶Ôservlet3.0¹æ·¶¶ÔServletContainerInitializerµÄÊµÏÖ¡¢×Ô¶¯ÀàĞÍ×ª»»Type Conversion SPI(Converter SPI¡¢Formatter SPI)µÈ\n\n**Dubbo**\n\n> DubboÖĞÒ²´óÁ¿Ê¹ÓÃSPIµÄ·½Ê½ÊµÏÖ¿ò¼ÜµÄÀ©Õ¹, ²»¹ıËü¶ÔJavaÌá¹©µÄÔ­ÉúSPI×öÁË·â×°£¬ÔÊĞíÓÃ»§À©Õ¹ÊµÏÖFilter½Ó¿Ú\n\n## ÑùÀı\n\n**Joy**£¬¶¨Òå½Ó¿Ú\n\n```lang=java,lines=12\npublic interface Joy {\n    void speak();\n}\n```\n\n**ServiceLoadDemo**£¬¼ÓÔØ¶à¸öÊµÏÖ\n\n```lang=java,lines=12\npublic class ServiceLoadDemo {\n    public static <T> List<T> loadFromServiceLoader(Class<T> clazz) {\n        List<T> list = new ArrayList<>();\n        ServiceLoader<T> loader = ServiceLoader.load(clazz);\n        Iterator<T> iterator = loader.iterator();\n        while (iterator.hasNext()) {\n            list.add(iterator.next());\n        }\n        return list;\n    }\n\n}\n```\n\n**LoadObjectBySPI**£¬Êµ¼Êµ÷ÓÃÕß\n\n```lang=java,lines=12\npublic class LoadObjectBySPI {\n    public static void main(String[] args) {\n        List<Joy> list = ServiceLoadDemo.loadFromServiceLoader(Joy.class);\n        for (Joy joy : list) {\n            joy.speak();\n        }\n    }\n}\n```\n\n**demo.Joy.properties**£¬ÅäÖÃÎÄ¼ş£¬±ØĞë·Å `META-INF/services`ÏÂ£¬ÒÔ½Ó¿ÚÈ«ÃûÃüÃû¡£ÊµÏÖÀàĞ´ÀïÃæ£¬Ò»ĞĞÒ»¸ö¡£\n\n```lang=properties\ndemo.impl.BirdJoy\ndemo.impl.CatJoy\ndemo.impl.DogJoy\ndemo.impl.DuckJoy\ndemo.impl.FrogJoy\ndemo.impl.HorseJoy\n```\n\nÊµÏÖÀà:\n\n```lang=java,lines=12\npublic class BirdJoy implements Joy {\n    @Override\n    public void speak() {\n        System.out.println(this.getClass().getSimpleName() + ":tweet");\n    }\n}\npublic class CatJoy implements Joy {\n    @Override\n    public void speak() {\n        System.out.println(this.getClass().getSimpleName() + ":meow");\n    }\n}\npublic class DogJoy implements Joy {\n    @Override\n    public void speak() {\n        System.out.println(this.getClass().getSimpleName() + ":woof");\n    }\n}\npublic class DuckJoy implements Joy {\n    @Override\n    public void speak() {\n        System.out.println(this.getClass().getSimpleName() + ":quack");\n    }\n}\npublic class FrogJoy implements Joy {\n    @Override\n    public void speak() {\n        System.out.println(this.getClass().getSimpleName() + ":croak");\n    }\n}\npublic class HorseJoy implements Joy {\n    @Override\n    public void speak() {\n        System.out.println(this.getClass().getSimpleName() + ":neigh");\n    }\n}\n```\ndateCreated: 1638497019\ndateModified: 1638497019\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-4khabeez5mmr2jaejf57\ndocumentPHID: PHID-WIKI-yl4eqstxvxbdi73bblge', metadata={'source': 'data/file\\wiki.csv', 'row': 109}), Document(page_content='id: 602\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Bean Copy£¬ÆäÖĞcglib×î¼Ñ\nslug: snippets/beancopy-cglib-best/\ncontent: ```lang=java\npublic class BeanCopyTest {\n\n    private SampleData genData() {\n        SampleData dataX = new SampleData();\n        SampleData data = new SampleData();\n        data.setX0(3);\n        data.setX1(4);\n        data.setX2(5D);\n        data.setX3("6");\n        data.setX4(dataX);\n        return data;\n    }\n\n    private void assertData(SampleData data0, SampleData data1) {\n        Assert.assertEquals(3, data1.getX0());\n        Assert.assertEquals(4, data1.getX1());\n        Assert.assertEquals(5D, data1.getX2(), 0.0001D);\n        Assert.assertEquals("6", data1.getX3());\n        Assert.assertSame(data0.getX4(), data1.getX4());\n    }\n\n    @Test\n    public void testApacheBeanUtils() throws InvocationTargetException, IllegalAccessException {\n        SampleData data0 = genData();\n        SampleData data1 = new SampleData();\n        org.apache.commons.beanutils.BeanUtils.copyProperties(data1, data0);\n        assertData(data0, data1);\n    }\n\n    @Test\n    public void testSpringBeanUtils() {\n        SampleData data0 = genData();\n        SampleData data1 = new SampleData();\n        org.springframework.beans.BeanUtils.copyProperties(data0, data1);\n        assertData(data0, data1);\n    }\n\n    @Test\n    public void testCGLibBeanCopier() {\n        net.sf.cglib.beans.BeanCopier copier = net.sf.cglib.beans.BeanCopier.create(SampleData.class, SampleData.class, false);\n        SampleData data0 = genData();\n        SampleData data1 = new SampleData();\n        copier.copy(data0, data1, null);\n        assertData(data0, data1);\n    }\n}\n```\ndateCreated: 1653274381\ndateModified: 1653274381\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-6igfzdxh62t6q6e5ca7c\ndocumentPHID: PHID-WIKI-52liyq7cqqnpgbkvua4a', metadata={'source': 'data/file\\wiki.csv', 'row': 110}), Document(page_content='id: 304\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Java8ÏÂÍ¨¹ılambdaÊµÏÖÎ²µİ¹é\nslug: snippets/java8-lambda-as-tail-recursion/\ncontent: == `Java`²»Ö§³ÖÎ²µİ¹é\n\nÊ¾Àı\n\n```lang=java\npublic class TailCallNormalTest {\n    private static final Logger LOGGER = LoggerFactory.getLogger(TailCallNormalTest.class);\n\n    public static void main(String[] args) {\n        int[] targets = new int[]{1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n        int result;\n        for (int target : targets) {\n            result = call(target);\n            LOGGER.info("{}!={}", target, result);\n        }\n    }\n\n    private static int call(int number) {\n        return call(1, number);\n    }\n\n    private static int call(int result, int number) {\n        if (number == 1) {\n            return result;\n        } else {\n            return call(result * number, number - 1);\n        }\n    }\n}\n```\n\nÕâ¸öÊ¾ÀıÖĞ£¬Êı×éÖĞµÄÖµ²»ÄÜÔÙ´ó£¬ÔÙ´ó¾ÍÒªÖµÒç³ö¡£²»¿¼ÂÇÖµÒç³öÇé¿öÏÂ£¬ÔÙ´ó£¬¾ÍÒªÕ»Òç³ö¡£\nÕâÊÇÒòÎª`Java`²»Ö§³ÖÎ²µİ¹é¡£\n\n== Í¨¹ı`lambda`Ö§³ÖÎ²µİ¹é\n\nÏ¸ĞÄ¹¹½¨`lambda`±í´ïÊ½£¬¿ÉÊµÏÖÎ²µİ¹é\n\n´úÂë£º\n\n```lang=java\npublic class TailCallTest {\n    private static final Logger LOGGER = LoggerFactory.getLogger(TailCallTest.class);\n\n    public static void main(String[] args) {\n        int[] targets = new int[]{1, 5, 10, 20, 100, 1000, 10000, 100000};\n        BigInteger result;\n        for (int target : targets) {\n            result = factorialTailRec(target);\n            LOGGER.info("{}!={}", target, result);\n        }\n    }\n\n    private static BigInteger factorialTailRec(int number) {\n        return factorialTailRec(BigInteger.ONE, new BigInteger(Integer.toString(number))).invoke();\n    }\n\n    private static TailCall<BigInteger> factorialTailRec(BigInteger result, BigInteger number) {\n        if (BigInteger.ONE.equals(number)) {\n            return done(result);\n        } else {\n            return call(() -> factorialTailRec(multiply(result, number), decrement(number)));\n        }\n    }\n\n    private static BigInteger decrement(final BigInteger number) {\n        return number.subtract(BigInteger.ONE);\n    }\n\n    private static BigInteger multiply(\n            final BigInteger first, final BigInteger second) {\n        return first.multiply(second);\n    }\n}\n```\n\n```lang=java\npublic class TailCalls {\n    public static <T> TailCall<T> call(final TailCall<T> nextCall) {\n        return nextCall;\n    }\n\n    public static <T> TailCall<T> done(final T value) {\n        return new TailCall<T>() {\n            @Override\n            public boolean isComplete() {\n                return true;\n            }\n\n            @Override\n            public T result() {\n                return value;\n            }\n\n            @Override\n            public TailCall<T> apply() {\n                throw new Error("end of recursion");\n            }\n        };\n    }\n}\n```\n\n```lang=java\n@FunctionalInterface\npublic interface TailCall<T> {\n    TailCall<T> apply();\n\n    default boolean isComplete() {\n        return false;\n    }\n\n    default T result() {\n        throw new Error("not implemented");\n    }\n\n    default T invoke() {\n        return Stream.iterate(this, TailCall::apply)\n                .filter(TailCall::isComplete)\n                .findFirst()\n                .get()\n                .result();\n    }\n}\n```\n\nÍ¨¹ı¸ÃÄ£Ê½£¬¼´¿É½øĞĞ¼«ÉîµÄµİ¹éµ÷ÓÃ£¬¼ÆËã½×³Ë¡£\n\n== ²Î¿¼²ÄÁÏ\n\n- ²Î¿¼²ÄÁÏ£º[[ https://baike.baidu.com/item/%E5%B0%BE%E9%80%92%E5%BD%92 | Î²µİ¹é ]]\n- ²Î¿¼²ÄÁÏ£º[[ https://it.deepinmind.com/jvm/2014/04/16/tail-call-optimization-and-java.html | ¹ØÓÚJavaÖĞÎ²µİ¹éµÄÓÅ»¯ ]]\n- ²Î¿¼²ÄÁÏ£º[[ https://www.cnblogs.com/firstdream/p/5534224.html | Ê¹ÓÃÎ²µİ¹é ]]\ndateCreated: 1641369802\ndateModified: 1641369802\ndescription: \nchangeType: 0\nchangeRef: \nphid: PHID-WRDS-j45tyd3b26se57qwllp2\ndocumentPHID: PHID-WIKI-4nhci6vyr3ggehqyw7kj', metadata={'source': 'data/file\\wiki.csv', 'row': 111})]
2023-07-08 11:53:02,589 - WARNING - Created a chunk of size 229, which is longer than the specified 200
2023-07-08 11:53:02,590 - WARNING - Created a chunk of size 230, which is longer than the specified 200
2023-07-08 11:53:02,590 - WARNING - Created a chunk of size 309, which is longer than the specified 200
2023-07-08 11:53:02,590 - WARNING - Created a chunk of size 395, which is longer than the specified 200
2023-07-08 11:53:02,591 - WARNING - Created a chunk of size 311, which is longer than the specified 200
2023-07-08 11:53:02,592 - WARNING - Created a chunk of size 218, which is longer than the specified 200
2023-07-08 11:53:02,592 - WARNING - Created a chunk of size 206, which is longer than the specified 200
2023-07-08 11:53:02,593 - WARNING - Created a chunk of size 221, which is longer than the specified 200
2023-07-08 11:53:02,593 - WARNING - Created a chunk of size 295, which is longer than the specified 200
2023-07-08 11:53:02,593 - WARNING - Created a chunk of size 226, which is longer than the specified 200
2023-07-08 11:53:02,594 - WARNING - Created a chunk of size 259, which is longer than the specified 200
2023-07-08 11:53:02,594 - WARNING - Created a chunk of size 221, which is longer than the specified 200
2023-07-08 11:53:02,595 - WARNING - Created a chunk of size 224, which is longer than the specified 200
2023-07-08 11:53:02,595 - WARNING - Created a chunk of size 253, which is longer than the specified 200
2023-07-08 11:53:02,596 - WARNING - Created a chunk of size 552, which is longer than the specified 200
2023-07-08 11:53:02,596 - WARNING - Created a chunk of size 294, which is longer than the specified 200
2023-07-08 11:53:02,597 - WARNING - Created a chunk of size 293, which is longer than the specified 200
2023-07-08 11:53:02,597 - WARNING - Created a chunk of size 253, which is longer than the specified 200
2023-07-08 11:53:02,598 - WARNING - Created a chunk of size 552, which is longer than the specified 200
2023-07-08 11:53:02,598 - WARNING - Created a chunk of size 294, which is longer than the specified 200
2023-07-08 11:53:02,598 - WARNING - Created a chunk of size 297, which is longer than the specified 200
2023-07-08 11:53:02,599 - WARNING - Created a chunk of size 229, which is longer than the specified 200
2023-07-08 11:53:02,600 - WARNING - Created a chunk of size 208, which is longer than the specified 200
2023-07-08 11:53:02,600 - WARNING - Created a chunk of size 363, which is longer than the specified 200
2023-07-08 11:53:02,600 - WARNING - Created a chunk of size 227, which is longer than the specified 200
2023-07-08 11:53:02,601 - WARNING - Created a chunk of size 375, which is longer than the specified 200
2023-07-08 11:53:02,602 - WARNING - Created a chunk of size 229, which is longer than the specified 200
2023-07-08 11:53:02,602 - WARNING - Created a chunk of size 208, which is longer than the specified 200
2023-07-08 11:53:02,603 - WARNING - Created a chunk of size 363, which is longer than the specified 200
2023-07-08 11:53:02,603 - WARNING - Created a chunk of size 227, which is longer than the specified 200
2023-07-08 11:53:02,603 - WARNING - Created a chunk of size 375, which is longer than the specified 200
2023-07-08 11:53:02,604 - WARNING - Created a chunk of size 222, which is longer than the specified 200
2023-07-08 11:53:02,605 - WARNING - Created a chunk of size 642, which is longer than the specified 200
2023-07-08 11:53:02,605 - WARNING - Created a chunk of size 218, which is longer than the specified 200
2023-07-08 11:53:02,606 - WARNING - Created a chunk of size 287, which is longer than the specified 200
2023-07-08 11:53:02,607 - WARNING - Created a chunk of size 259, which is longer than the specified 200
2023-07-08 11:53:02,607 - WARNING - Created a chunk of size 221, which is longer than the specified 200
2023-07-08 11:53:02,607 - WARNING - Created a chunk of size 224, which is longer than the specified 200
2023-07-08 11:53:02,608 - WARNING - Created a chunk of size 253, which is longer than the specified 200
2023-07-08 11:53:02,608 - WARNING - Created a chunk of size 552, which is longer than the specified 200
2023-07-08 11:53:02,608 - WARNING - Created a chunk of size 294, which is longer than the specified 200
2023-07-08 11:53:02,609 - WARNING - Created a chunk of size 293, which is longer than the specified 200
2023-07-08 11:53:02,609 - WARNING - Created a chunk of size 253, which is longer than the specified 200
2023-07-08 11:53:02,610 - WARNING - Created a chunk of size 552, which is longer than the specified 200
2023-07-08 11:53:02,610 - WARNING - Created a chunk of size 294, which is longer than the specified 200
2023-07-08 11:53:02,611 - WARNING - Created a chunk of size 297, which is longer than the specified 200
2023-07-08 11:53:02,612 - WARNING - Created a chunk of size 238, which is longer than the specified 200
2023-07-08 11:53:02,612 - WARNING - Created a chunk of size 263, which is longer than the specified 200
2023-07-08 11:53:02,612 - WARNING - Created a chunk of size 209, which is longer than the specified 200
2023-07-08 11:53:02,613 - WARNING - Created a chunk of size 231, which is longer than the specified 200
2023-07-08 11:53:02,614 - WARNING - Created a chunk of size 232, which is longer than the specified 200
2023-07-08 11:53:02,614 - WARNING - Created a chunk of size 230, which is longer than the specified 200
2023-07-08 11:53:02,615 - WARNING - Created a chunk of size 231, which is longer than the specified 200
2023-07-08 11:53:02,615 - WARNING - Created a chunk of size 286, which is longer than the specified 200
2023-07-08 11:53:02,616 - WARNING - Created a chunk of size 317, which is longer than the specified 200
2023-07-08 11:53:02,616 - WARNING - Created a chunk of size 258, which is longer than the specified 200
2023-07-08 11:53:02,617 - WARNING - Created a chunk of size 222, which is longer than the specified 200
2023-07-08 11:53:02,618 - WARNING - Created a chunk of size 352, which is longer than the specified 200
2023-07-08 11:53:02,619 - WARNING - Created a chunk of size 505, which is longer than the specified 200
2023-07-08 11:53:02,619 - WARNING - Created a chunk of size 229, which is longer than the specified 200
2023-07-08 11:53:02,620 - WARNING - Created a chunk of size 221, which is longer than the specified 200
2023-07-08 11:53:02,621 - WARNING - Created a chunk of size 2581, which is longer than the specified 200
2023-07-08 11:53:02,621 - WARNING - Created a chunk of size 228, which is longer than the specified 200
2023-07-08 11:53:02,621 - WARNING - Created a chunk of size 272, which is longer than the specified 200
2023-07-08 11:53:02,622 - WARNING - Created a chunk of size 325, which is longer than the specified 200
2023-07-08 11:53:02,622 - WARNING - Created a chunk of size 350, which is longer than the specified 200
2023-07-08 11:53:02,623 - WARNING - Created a chunk of size 244, which is longer than the specified 200
2023-07-08 11:53:02,623 - WARNING - Created a chunk of size 201, which is longer than the specified 200
2023-07-08 11:53:02,624 - WARNING - Created a chunk of size 248, which is longer than the specified 200
2023-07-08 11:53:02,624 - WARNING - Created a chunk of size 213, which is longer than the specified 200
2023-07-08 11:53:02,625 - WARNING - Created a chunk of size 330, which is longer than the specified 200
2023-07-08 11:53:02,625 - WARNING - Created a chunk of size 237, which is longer than the specified 200
2023-07-08 11:53:02,625 - WARNING - Created a chunk of size 2581, which is longer than the specified 200
2023-07-08 11:53:02,626 - WARNING - Created a chunk of size 228, which is longer than the specified 200
2023-07-08 11:53:02,626 - WARNING - Created a chunk of size 272, which is longer than the specified 200
2023-07-08 11:53:02,627 - WARNING - Created a chunk of size 325, which is longer than the specified 200
2023-07-08 11:53:02,627 - WARNING - Created a chunk of size 350, which is longer than the specified 200
2023-07-08 11:53:02,628 - WARNING - Created a chunk of size 244, which is longer than the specified 200
2023-07-08 11:53:02,628 - WARNING - Created a chunk of size 309, which is longer than the specified 200
2023-07-08 11:53:02,629 - WARNING - Created a chunk of size 208, which is longer than the specified 200
2023-07-08 11:53:02,629 - WARNING - Created a chunk of size 212, which is longer than the specified 200
2023-07-08 11:53:02,630 - WARNING - Created a chunk of size 697, which is longer than the specified 200
2023-07-08 11:53:02,630 - WARNING - Created a chunk of size 291, which is longer than the specified 200
2023-07-08 11:53:02,631 - WARNING - Created a chunk of size 220, which is longer than the specified 200
2023-07-08 11:53:02,632 - WARNING - Created a chunk of size 387, which is longer than the specified 200
2023-07-08 11:53:02,632 - WARNING - Created a chunk of size 752, which is longer than the specified 200
2023-07-08 11:53:02,632 - WARNING - Created a chunk of size 343, which is longer than the specified 200
2023-07-08 11:53:02,633 - WARNING - Created a chunk of size 330, which is longer than the specified 200
2023-07-08 11:53:02,633 - WARNING - Created a chunk of size 237, which is longer than the specified 200
2023-07-08 11:53:02,634 - WARNING - Created a chunk of size 367, which is longer than the specified 200
2023-07-08 11:53:02,634 - WARNING - Created a chunk of size 262, which is longer than the specified 200
2023-07-08 11:53:02,635 - WARNING - Created a chunk of size 248, which is longer than the specified 200
2023-07-08 11:53:02,635 - WARNING - Created a chunk of size 213, which is longer than the specified 200
2023-07-08 11:53:02,636 - WARNING - Created a chunk of size 330, which is longer than the specified 200
2023-07-08 11:53:02,637 - WARNING - Created a chunk of size 237, which is longer than the specified 200
2023-07-08 11:53:02,637 - WARNING - Created a chunk of size 2546, which is longer than the specified 200
2023-07-08 11:53:02,638 - WARNING - Created a chunk of size 455, which is longer than the specified 200
2023-07-08 11:53:02,638 - WARNING - Created a chunk of size 235, which is longer than the specified 200
2023-07-08 11:53:02,638 - WARNING - Created a chunk of size 683, which is longer than the specified 200
2023-07-08 11:53:02,639 - WARNING - Created a chunk of size 204, which is longer than the specified 200
2023-07-08 11:53:02,640 - WARNING - Created a chunk of size 224, which is longer than the specified 200
2023-07-08 11:53:02,640 - WARNING - Created a chunk of size 263, which is longer than the specified 200
2023-07-08 11:53:02,641 - WARNING - Created a chunk of size 2374, which is longer than the specified 200
2023-07-08 11:53:02,641 - WARNING - Created a chunk of size 506, which is longer than the specified 200
2023-07-08 11:53:02,642 - WARNING - Created a chunk of size 310, which is longer than the specified 200
2023-07-08 11:53:02,642 - WARNING - Created a chunk of size 822, which is longer than the specified 200
2023-07-08 11:53:02,643 - WARNING - Created a chunk of size 219, which is longer than the specified 200
2023-07-08 11:53:02,643 - WARNING - Created a chunk of size 367, which is longer than the specified 200
2023-07-08 11:53:02,644 - WARNING - Created a chunk of size 262, which is longer than the specified 200
2023-07-08 11:53:02,645 - WARNING - Created a chunk of size 418, which is longer than the specified 200
2023-07-08 11:53:02,645 - WARNING - Created a chunk of size 420, which is longer than the specified 200
2023-07-08 11:53:02,646 - WARNING - Created a chunk of size 218, which is longer than the specified 200
2023-07-08 11:53:02,646 - WARNING - Created a chunk of size 276, which is longer than the specified 200
2023-07-08 11:53:02,647 - WARNING - Created a chunk of size 258, which is longer than the specified 200
2023-07-08 11:53:02,647 - WARNING - Created a chunk of size 1587, which is longer than the specified 200
2023-07-08 11:53:02,648 - WARNING - Created a chunk of size 2301, which is longer than the specified 200
2023-07-08 11:53:02,648 - WARNING - Created a chunk of size 1518, which is longer than the specified 200
2023-07-08 11:53:02,649 - WARNING - Created a chunk of size 223, which is longer than the specified 200
2023-07-08 11:53:02,649 - WARNING - Created a chunk of size 262, which is longer than the specified 200
2023-07-08 11:53:02,649 - WARNING - Created a chunk of size 225, which is longer than the specified 200
2023-07-08 11:53:02,650 - WARNING - Created a chunk of size 234, which is longer than the specified 200
2023-07-08 11:53:02,651 - WARNING - Created a chunk of size 238, which is longer than the specified 200
2023-07-08 11:53:02,651 - WARNING - Created a chunk of size 571, which is longer than the specified 200
2023-07-08 11:53:02,652 - WARNING - Created a chunk of size 3562, which is longer than the specified 200
2023-07-08 11:53:02,652 - WARNING - Created a chunk of size 234, which is longer than the specified 200
2023-07-08 11:53:02,653 - WARNING - Created a chunk of size 1262, which is longer than the specified 200
2023-07-08 11:53:02,653 - WARNING - Created a chunk of size 415, which is longer than the specified 200
2023-07-08 11:53:02,654 - WARNING - Created a chunk of size 234, which is longer than the specified 200
2023-07-08 11:53:02,654 - WARNING - Created a chunk of size 423, which is longer than the specified 200
2023-07-08 11:53:02,655 - WARNING - Created a chunk of size 459, which is longer than the specified 200
2023-07-08 11:53:02,656 - WARNING - Created a chunk of size 306, which is longer than the specified 200
2023-07-08 11:53:02,656 - WARNING - Created a chunk of size 342, which is longer than the specified 200
2023-07-08 11:53:02,657 - WARNING - Created a chunk of size 264, which is longer than the specified 200
2023-07-08 11:53:02,657 - WARNING - Created a chunk of size 258, which is longer than the specified 200
2023-07-08 11:53:02,657 - WARNING - Created a chunk of size 310, which is longer than the specified 200
2023-07-08 11:53:02,658 - WARNING - Created a chunk of size 342, which is longer than the specified 200
2023-07-08 11:53:02,658 - WARNING - Created a chunk of size 497, which is longer than the specified 200
2023-07-08 11:53:02,659 - WARNING - Created a chunk of size 227, which is longer than the specified 200
2023-07-08 11:53:02,659 - WARNING - Created a chunk of size 688, which is longer than the specified 200
2023-07-08 11:53:02,660 - WARNING - Created a chunk of size 302, which is longer than the specified 200
2023-07-08 11:53:02,661 - WARNING - Created a chunk of size 247, which is longer than the specified 200
2023-07-08 11:53:02,661 - WARNING - Created a chunk of size 298, which is longer than the specified 200
2023-07-08 11:53:02,662 - WARNING - Created a chunk of size 336, which is longer than the specified 200
2023-07-08 11:53:02,662 - WARNING - Created a chunk of size 256, which is longer than the specified 200
2023-07-08 11:53:02,663 - WARNING - Created a chunk of size 244, which is longer than the specified 200
2023-07-08 11:53:02,663 - WARNING - Created a chunk of size 238, which is longer than the specified 200
2023-07-08 11:53:02,663 - WARNING - Created a chunk of size 297, which is longer than the specified 200
2023-07-08 11:53:02,664 - WARNING - Created a chunk of size 280, which is longer than the specified 200
2023-07-08 11:53:02,664 - WARNING - Created a chunk of size 273, which is longer than the specified 200
2023-07-08 11:53:02,665 - WARNING - Created a chunk of size 1455, which is longer than the specified 200
2023-07-08 11:53:02,665 - WARNING - Created a chunk of size 348, which is longer than the specified 200
2023-07-08 11:53:02,666 - WARNING - Created a chunk of size 285, which is longer than the specified 200
2023-07-08 11:53:02,666 - WARNING - Created a chunk of size 624, which is longer than the specified 200
2023-07-08 11:53:02,667 - WARNING - Created a chunk of size 747, which is longer than the specified 200
2023-07-08 11:53:02,667 - WARNING - Created a chunk of size 219, which is longer than the specified 200
2023-07-08 11:53:02,668 - WARNING - Created a chunk of size 639, which is longer than the specified 200
2023-07-08 11:53:02,668 - WARNING - Created a chunk of size 1824, which is longer than the specified 200
2023-07-08 11:53:02,669 - WARNING - Created a chunk of size 210, which is longer than the specified 200
2023-07-08 11:53:02,669 - WARNING - Created a chunk of size 406, which is longer than the specified 200
2023-07-08 11:53:02,670 - WARNING - Created a chunk of size 1082, which is longer than the specified 200
2023-07-08 11:53:02,670 - WARNING - Created a chunk of size 294, which is longer than the specified 200
2023-07-08 11:53:02,671 - WARNING - Created a chunk of size 979, which is longer than the specified 200
2023-07-08 11:53:02,671 - WARNING - Created a chunk of size 204, which is longer than the specified 200
2023-07-08 11:53:02,672 - WARNING - Created a chunk of size 336, which is longer than the specified 200
2023-07-08 11:53:02,672 - WARNING - Created a chunk of size 448, which is longer than the specified 200
2023-07-08 11:53:02,673 - WARNING - Created a chunk of size 780, which is longer than the specified 200
2023-07-08 11:53:02,673 - WARNING - Created a chunk of size 601, which is longer than the specified 200
2023-07-08 11:53:02,673 - WARNING - Created a chunk of size 410, which is longer than the specified 200
2023-07-08 11:53:02,674 - WARNING - Created a chunk of size 531, which is longer than the specified 200
2023-07-08 11:53:02,674 - WARNING - Created a chunk of size 216, which is longer than the specified 200
2023-07-08 11:53:02,675 - WARNING - Created a chunk of size 238, which is longer than the specified 200
2023-07-08 11:53:02,676 - WARNING - Created a chunk of size 207, which is longer than the specified 200
2023-07-08 11:53:02,677 - WARNING - Created a chunk of size 558, which is longer than the specified 200
2023-07-08 11:53:02,677 - WARNING - Created a chunk of size 978, which is longer than the specified 200
2023-07-08 11:53:02,678 - WARNING - Created a chunk of size 1595, which is longer than the specified 200
2023-07-08 11:53:02,678 - WARNING - Created a chunk of size 484, which is longer than the specified 200
2023-07-08 11:53:02,679 - WARNING - Created a chunk of size 789, which is longer than the specified 200
2023-07-08 11:53:02,679 - WARNING - Created a chunk of size 378, which is longer than the specified 200
2023-07-08 11:53:02,679 - WARNING - Created a chunk of size 989, which is longer than the specified 200
2023-07-08 11:53:02,680 - WARNING - Created a chunk of size 313, which is longer than the specified 200
2023-07-08 11:53:02,681 - WARNING - Created a chunk of size 441, which is longer than the specified 200
2023-07-08 11:53:02,681 - WARNING - Created a chunk of size 248, which is longer than the specified 200
2023-07-08 11:53:02,682 - WARNING - Created a chunk of size 977, which is longer than the specified 200
2023-07-08 11:53:02,683 - WARNING - Created a chunk of size 2280, which is longer than the specified 200
2023-07-08 11:53:02,683 - WARNING - Created a chunk of size 692, which is longer than the specified 200
2023-07-08 11:53:02,684 - WARNING - Created a chunk of size 345, which is longer than the specified 200
2023-07-08 11:53:02,684 - WARNING - Created a chunk of size 554, which is longer than the specified 200
2023-07-08 11:53:02,685 - WARNING - Created a chunk of size 291, which is longer than the specified 200
2023-07-08 11:53:02,686 - WARNING - Created a chunk of size 334, which is longer than the specified 200
2023-07-08 11:53:02,686 - WARNING - Created a chunk of size 290, which is longer than the specified 200
2023-07-08 11:53:02,687 - WARNING - Created a chunk of size 295, which is longer than the specified 200
2023-07-08 11:53:02,687 - WARNING - Created a chunk of size 424, which is longer than the specified 200
2023-07-08 11:53:02,688 - WARNING - Created a chunk of size 348, which is longer than the specified 200
2023-07-08 11:53:02,688 - WARNING - Created a chunk of size 515, which is longer than the specified 200
2023-07-08 11:53:02,688 - WARNING - Created a chunk of size 669, which is longer than the specified 200
2023-07-08 11:53:02,689 - WARNING - Created a chunk of size 404, which is longer than the specified 200
2023-07-08 11:53:02,690 - WARNING - Created a chunk of size 3933, which is longer than the specified 200
2023-07-08 11:53:02,691 - WARNING - Created a chunk of size 716, which is longer than the specified 200
2023-07-08 11:53:02,691 - WARNING - Created a chunk of size 445, which is longer than the specified 200
2023-07-08 11:53:02,692 - WARNING - Created a chunk of size 429, which is longer than the specified 200
2023-07-08 11:53:02,692 - WARNING - Created a chunk of size 328, which is longer than the specified 200
2023-07-08 11:53:02,693 - WARNING - Created a chunk of size 538, which is longer than the specified 200
2023-07-08 11:53:02,693 - WARNING - Created a chunk of size 396, which is longer than the specified 200
2023-07-08 11:53:02,693 - WARNING - Created a chunk of size 481, which is longer than the specified 200
2023-07-08 11:53:02,694 - WARNING - Created a chunk of size 242, which is longer than the specified 200
2023-07-08 11:53:02,695 - WARNING - Created a chunk of size 259, which is longer than the specified 200
2023-07-08 11:53:02,695 - WARNING - Created a chunk of size 915, which is longer than the specified 200
2023-07-08 11:53:02,696 - WARNING - Created a chunk of size 246, which is longer than the specified 200
2023-07-08 11:53:02,696 - WARNING - Created a chunk of size 291, which is longer than the specified 200
2023-07-08 11:53:02,696 - WARNING - Created a chunk of size 367, which is longer than the specified 200
2023-07-08 11:53:02,697 - WARNING - Created a chunk of size 218, which is longer than the specified 200
2023-07-08 11:53:02,697 - WARNING - Created a chunk of size 260, which is longer than the specified 200
2023-07-08 11:53:02,698 - WARNING - Created a chunk of size 290, which is longer than the specified 200
2023-07-08 11:53:02,698 - WARNING - Created a chunk of size 287, which is longer than the specified 200
2023-07-08 11:53:02,698 - WARNING - Created a chunk of size 288, which is longer than the specified 200
2023-07-08 11:53:02,699 - WARNING - Created a chunk of size 231, which is longer than the specified 200
2023-07-08 11:53:02,699 - WARNING - Created a chunk of size 290, which is longer than the specified 200
2023-07-08 11:53:02,700 - WARNING - Created a chunk of size 202, which is longer than the specified 200
2023-07-08 11:53:02,700 - WARNING - Created a chunk of size 242, which is longer than the specified 200
2023-07-08 11:53:02,701 - WARNING - Created a chunk of size 447, which is longer than the specified 200
2023-07-08 11:53:02,702 - WARNING - Created a chunk of size 685, which is longer than the specified 200
2023-07-08 11:53:02,702 - WARNING - Created a chunk of size 210, which is longer than the specified 200
2023-07-08 11:53:02,702 - WARNING - Created a chunk of size 342, which is longer than the specified 200
2023-07-08 11:53:02,703 - WARNING - Created a chunk of size 411, which is longer than the specified 200
2023-07-08 11:53:02,703 - WARNING - Created a chunk of size 739, which is longer than the specified 200
2023-07-08 11:53:02,704 - WARNING - Created a chunk of size 444, which is longer than the specified 200
2023-07-08 11:53:02,704 - WARNING - Created a chunk of size 312, which is longer than the specified 200
2023-07-08 11:53:02,705 - WARNING - Created a chunk of size 323, which is longer than the specified 200
2023-07-08 11:53:02,706 - WARNING - Created a chunk of size 235, which is longer than the specified 200
2023-07-08 11:53:02,706 - WARNING - Created a chunk of size 342, which is longer than the specified 200
2023-07-08 11:53:02,707 - WARNING - Created a chunk of size 433, which is longer than the specified 200
2023-07-08 11:53:02,707 - WARNING - Created a chunk of size 1381, which is longer than the specified 200
2023-07-08 11:53:02,707 - WARNING - Created a chunk of size 354, which is longer than the specified 200
2023-07-08 11:53:02,708 - WARNING - Created a chunk of size 277, which is longer than the specified 200
2023-07-08 11:53:02,708 - WARNING - Created a chunk of size 817, which is longer than the specified 200
2023-07-08 11:53:02,709 - WARNING - Created a chunk of size 222, which is longer than the specified 200
2023-07-08 11:53:02,710 - WARNING - Created a chunk of size 336, which is longer than the specified 200
2023-07-08 11:53:02,710 - WARNING - Created a chunk of size 448, which is longer than the specified 200
2023-07-08 11:53:02,711 - WARNING - Created a chunk of size 780, which is longer than the specified 200
2023-07-08 11:53:02,711 - WARNING - Created a chunk of size 601, which is longer than the specified 200
2023-07-08 11:53:02,711 - WARNING - Created a chunk of size 410, which is longer than the specified 200
2023-07-08 11:53:02,712 - WARNING - Created a chunk of size 531, which is longer than the specified 200
2023-07-08 11:53:02,712 - WARNING - Created a chunk of size 216, which is longer than the specified 200
2023-07-08 11:53:02,713 - WARNING - Created a chunk of size 789, which is longer than the specified 200
2023-07-08 11:53:02,713 - WARNING - Created a chunk of size 378, which is longer than the specified 200
2023-07-08 11:53:02,713 - WARNING - Created a chunk of size 989, which is longer than the specified 200
2023-07-08 11:53:02,714 - WARNING - Created a chunk of size 313, which is longer than the specified 200
2023-07-08 11:53:02,714 - WARNING - Created a chunk of size 441, which is longer than the specified 200
2023-07-08 11:53:02,715 - WARNING - Created a chunk of size 240, which is longer than the specified 200
2023-07-08 11:53:02,715 - WARNING - Created a chunk of size 518, which is longer than the specified 200
2023-07-08 11:53:02,716 - WARNING - Created a chunk of size 388, which is longer than the specified 200
2023-07-08 11:53:02,717 - WARNING - Created a chunk of size 250, which is longer than the specified 200
2023-07-08 11:53:02,717 - WARNING - Created a chunk of size 272, which is longer than the specified 200
2023-07-08 11:53:02,718 - WARNING - Created a chunk of size 328, which is longer than the specified 200
2023-07-08 11:53:02,718 - WARNING - Created a chunk of size 306, which is longer than the specified 200
2023-07-08 11:53:02,718 - WARNING - Created a chunk of size 246, which is longer than the specified 200
2023-07-08 11:53:02,719 - WARNING - Created a chunk of size 269, which is longer than the specified 200
2023-07-08 11:53:02,719 - WARNING - Created a chunk of size 297, which is longer than the specified 200
2023-07-08 11:53:02,720 - WARNING - Created a chunk of size 301, which is longer than the specified 200
2023-07-08 11:53:02,720 - WARNING - Created a chunk of size 214, which is longer than the specified 200
2023-07-08 11:53:02,721 - INFO - Found 989 documents in data/file\wiki.csv
2023-07-08 11:53:02,800 - INFO - Loading faiss with AVX2 support.
2023-07-08 11:53:02,801 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 11:53:02,802 - INFO - Loading faiss.
2023-07-08 11:53:02,880 - INFO - Successfully loaded faiss.
2023-07-08 11:53:16,880 - ERROR - Error loading db: Error in __cdecl faiss::FileIOReader::FileIOReader(const char *) at D:\a\faiss-wheels\faiss-wheels\faiss\faiss\impl\io.cpp:68: Error: 'f' failed: could not open dbf\pfile\pfile.faiss for reading: No such file or directory
2023-07-08 11:53:16,881 - INFO - Saved db to wiki.csvpfile
2023-07-08 11:53:18,760 - INFO - GB2312
2023-07-08 11:55:36,496 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:55:36,498 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:55:36,499 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:55:51,584 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:55:51,586 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:55:51,587 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:55:51,588 - INFO - 0-Loading...Óöµ½Ë«¾«¶È¸¡µãĞÍ±È½ÏÊ§°ÜµÄÎÊÌâ£¬ÇëÎÊÓĞÊ²Ã´°¸Àı¿ÉÒÔÌá¹©
2023-07-08 11:55:51,589 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:55:51,589 - INFO - self.temperature£º0.5
2023-07-08 11:55:51,590 - INFO - self.max_context_tokens£º-1
2023-07-08 11:55:51,590 - INFO - self.file_chunk_size£º200
2023-07-08 11:55:51,590 - INFO - self.api_key£º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
2023-07-08 11:55:51,591 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 11:55:51,592 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-08 11:55:51,594 - ERROR - Error answering question: name 'username' is not defined
2023-07-08 11:57:14,582 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:57:14,585 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:57:14,586 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:57:19,721 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:57:19,724 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:57:19,725 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:57:31,992 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:57:31,999 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:57:32,006 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:57:36,236 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 11:57:36,237 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 11:57:36,238 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:57:36,241 - INFO - 0-Loading...Óöµ½Ë«¾«¶È¸¡µãĞÍ±È½ÏÊ§°ÜµÄÎÊÌâ£¬ÇëÎÊÓĞÊ²Ã´°¸ÀıÌá¹©ÎÒ·ÖÎö
2023-07-08 11:57:36,242 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 11:57:36,243 - INFO - self.temperature£º0.5
2023-07-08 11:57:36,243 - INFO - self.max_context_tokens£º-1
2023-07-08 11:57:36,244 - INFO - self.file_chunk_size£º200
2023-07-08 11:57:36,244 - INFO - self.api_key£º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
2023-07-08 11:57:36,245 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 11:57:36,246 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-08 11:57:36,247 - ERROR - Error answering question: name 'username' is not defined
2023-07-08 17:28:10,444 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:28:10,636 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:28:10,637 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:30:21,107 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:30:21,109 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:30:21,110 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:30:27,499 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:30:27,501 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:30:27,502 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:30:27,503 - INFO - 0-Loading...Çë½éÉÜÏÂĞ¡°×BashÖ¸ÄÏ
2023-07-08 17:30:27,504 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:30:27,505 - INFO - self.temperature£º0.5
2023-07-08 17:30:27,506 - INFO - self.max_context_tokens£º-1
2023-07-08 17:30:27,506 - INFO - self.file_chunk_size£º200
2023-07-08 17:30:27,507 - INFO - self.api_key£º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
2023-07-08 17:30:27,591 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 17:30:27,593 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-08 17:30:27,595 - ERROR - Error answering question: name 'username' is not defined
2023-07-08 17:33:22,910 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:33:22,910 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:33:22,912 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:33:22,912 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:33:22,913 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:33:22,913 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:33:29,242 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:33:29,242 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:33:29,245 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:33:29,245 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:33:29,247 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:33:29,247 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:33:39,561 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:33:39,561 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:33:39,563 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:33:39,563 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:33:39,564 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:33:39,564 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:33:41,443 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:33:41,443 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:33:41,445 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:33:41,445 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:33:41,446 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:33:41,446 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:33:41,449 - INFO - 0-Loading...½éÉÜÏÂBashÖ¸ÄÏ
2023-07-08 17:33:41,449 - INFO - 0-Loading...½éÉÜÏÂBashÖ¸ÄÏ
2023-07-08 17:33:41,450 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:33:41,450 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:33:41,451 - INFO - self.temperature£º0.5
2023-07-08 17:33:41,451 - INFO - self.temperature£º0.5
2023-07-08 17:33:41,452 - INFO - self.max_context_tokens£º-1
2023-07-08 17:33:41,452 - INFO - self.max_context_tokens£º-1
2023-07-08 17:33:41,453 - INFO - self.file_chunk_size£º200
2023-07-08 17:33:41,453 - INFO - self.file_chunk_size£º200
2023-07-08 17:33:41,453 - INFO - self.api_key£º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
2023-07-08 17:33:41,453 - INFO - self.api_key£º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
2023-07-08 17:33:41,455 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 17:33:41,455 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 17:33:41,457 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-08 17:33:41,457 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-08 17:33:41,459 - INFO - folder_path£ºdbf/pfile
2023-07-08 17:33:41,459 - INFO - folder_path£ºdbf/pfile
2023-07-08 17:33:41,597 - INFO - Loading faiss with AVX2 support.
2023-07-08 17:33:41,597 - INFO - Loading faiss with AVX2 support.
2023-07-08 17:33:41,597 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 17:33:41,597 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 17:33:41,598 - INFO - Loading faiss.
2023-07-08 17:33:41,598 - INFO - Loading faiss.
2023-07-08 17:33:41,810 - INFO - Successfully loaded faiss.
2023-07-08 17:33:41,810 - INFO - Successfully loaded faiss.
2023-07-08 17:33:42,832 - WARNING - Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 4.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(10054, 'Ô¶³ÌÖ÷»úÇ¿ÆÈ¹Ø±ÕÁËÒ»¸öÏÖÓĞµÄÁ¬½Ó¡£', None, 10054, None)).
2023-07-08 17:33:42,832 - WARNING - Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 4.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(10054, 'Ô¶³ÌÖ÷»úÇ¿ÆÈ¹Ø±ÕÁËÒ»¸öÏÖÓĞµÄÁ¬½Ó¡£', None, 10054, None)).
2023-07-08 17:33:47,150 - WARNING - Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 4.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(10054, 'Ô¶³ÌÖ÷»úÇ¿ÆÈ¹Ø±ÕÁËÒ»¸öÏÖÓĞµÄÁ¬½Ó¡£', None, 10054, None)).
2023-07-08 17:33:47,150 - WARNING - Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 4.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(10054, 'Ô¶³ÌÖ÷»úÇ¿ÆÈ¹Ø±ÕÁËÒ»¸öÏÖÓĞµÄÁ¬½Ó¡£', None, 10054, None)).
2023-07-08 17:33:51,467 - WARNING - Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 4.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(10054, 'Ô¶³ÌÖ÷»úÇ¿ÆÈ¹Ø±ÕÁËÒ»¸öÏÖÓĞµÄÁ¬½Ó¡£', None, 10054, None)).
2023-07-08 17:33:51,467 - WARNING - Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 4.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(10054, 'Ô¶³ÌÖ÷»úÇ¿ÆÈ¹Ø±ÕÁËÒ»¸öÏÖÓĞµÄÁ¬½Ó¡£', None, 10054, None)).
2023-07-08 17:33:55,820 - WARNING - Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 8.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(10054, 'Ô¶³ÌÖ÷»úÇ¿ÆÈ¹Ø±ÕÁËÒ»¸öÏÖÓĞµÄÁ¬½Ó¡£', None, 10054, None)).
2023-07-08 17:33:55,820 - WARNING - Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 8.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(10054, 'Ô¶³ÌÖ÷»úÇ¿ÆÈ¹Ø±ÕÁËÒ»¸öÏÖÓĞµÄÁ¬½Ó¡£', None, 10054, None)).
2023-07-08 17:34:04,315 - WARNING - Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 10.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(10054, 'Ô¶³ÌÖ÷»úÇ¿ÆÈ¹Ø±ÕÁËÒ»¸öÏÖÓĞµÄÁ¬½Ó¡£', None, 10054, None)).
2023-07-08 17:34:04,315 - WARNING - Retrying langchain.embeddings.openai.embed_with_retry.<locals>._embed_with_retry in 10.0 seconds as it raised APIConnectionError: Error communicating with OpenAI: ('Connection aborted.', ConnectionResetError(10054, 'Ô¶³ÌÖ÷»úÇ¿ÆÈ¹Ø±ÕÁËÒ»¸öÏÖÓĞµÄÁ¬½Ó¡£', None, 10054, None)).
2023-07-08 17:34:16,088 - INFO - 2-Searching for similar documents...[Document(page_content='id: 119\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ğ¡°×BashÖ¸ÄÏ\nslug: special/bash-freshman/\ncontent: # Bash ½Å±¾ÈëÃÅ', metadata={'source': 'data/file\\wiki.csv', 'row': 18}), Document(page_content='½Å±¾µÄµÚÒ»ĞĞÍ¨³£ÊÇÖ¸¶¨½âÊÍÆ÷£¬¼´Õâ¸ö½Å±¾±ØĞëÍ¨¹ıÊ²Ã´½âÊÍÆ÷Ö´ĞĞ¡£ÕâÒ»ĞĞÒÔ`#!`×Ö·û¿ªÍ·£¬Õâ¸ö×Ö·û³ÆÎª Shebang£¬ËùÒÔÕâÒ»ĞĞ¾Í½Ğ×ö Shebang ĞĞ¡£\n\n`#!`ºóÃæ¾ÍÊÇ½Å±¾½âÊÍÆ÷µÄÎ»ÖÃ£¬Bash ½Å±¾µÄ½âÊÍÆ÷Ò»°ãÊÇ`/bin/sh`»ò`/bin/bash`¡£\n\n```\n#!/bin/sh\n# »òÕß\n#!/bin/bash\n```\n\n`#!`Óë½Å±¾½âÊÍÆ÷Ö®¼äÓĞÃ»ÓĞ¿Õ¸ñ£¬¶¼ÊÇ¿ÉÒÔµÄ¡£', metadata={'source': 'data/file\\wiki.csv', 'row': 18}), Document(page_content='Èç¹û Bash ½âÊÍÆ÷²»·ÅÔÚÄ¿Â¼`/bin`£¬½Å±¾¾ÍÎŞ·¨Ö´ĞĞÁË¡£ÎªÁË±£ÏÕ£¬¿ÉÒÔĞ´³ÉÏÂÃæÕâÑù¡£\n\n```\n#!/usr/bin/env bash\n```\n\nÉÏÃæÃüÁîÊ¹ÓÃ`env`ÃüÁî£¨Õâ¸öÃüÁî×ÜÊÇÔÚ`/usr/bin`Ä¿Â¼£©£¬·µ»Ø Bash ¿ÉÖ´ĞĞÎÄ¼şµÄÎ»ÖÃ¡£`env`ÃüÁîµÄÏêÏ¸½éÉÜ£¬Çë¿´ºóÎÄ¡£', metadata={'source': 'data/file\\wiki.csv', 'row': 18})]
2023-07-08 17:34:16,088 - INFO - 2-Searching for similar documents...[Document(page_content='id: 119\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: Ğ¡°×BashÖ¸ÄÏ\nslug: special/bash-freshman/\ncontent: # Bash ½Å±¾ÈëÃÅ', metadata={'source': 'data/file\\wiki.csv', 'row': 18}), Document(page_content='½Å±¾µÄµÚÒ»ĞĞÍ¨³£ÊÇÖ¸¶¨½âÊÍÆ÷£¬¼´Õâ¸ö½Å±¾±ØĞëÍ¨¹ıÊ²Ã´½âÊÍÆ÷Ö´ĞĞ¡£ÕâÒ»ĞĞÒÔ`#!`×Ö·û¿ªÍ·£¬Õâ¸ö×Ö·û³ÆÎª Shebang£¬ËùÒÔÕâÒ»ĞĞ¾Í½Ğ×ö Shebang ĞĞ¡£\n\n`#!`ºóÃæ¾ÍÊÇ½Å±¾½âÊÍÆ÷µÄÎ»ÖÃ£¬Bash ½Å±¾µÄ½âÊÍÆ÷Ò»°ãÊÇ`/bin/sh`»ò`/bin/bash`¡£\n\n```\n#!/bin/sh\n# »òÕß\n#!/bin/bash\n```\n\n`#!`Óë½Å±¾½âÊÍÆ÷Ö®¼äÓĞÃ»ÓĞ¿Õ¸ñ£¬¶¼ÊÇ¿ÉÒÔµÄ¡£', metadata={'source': 'data/file\\wiki.csv', 'row': 18}), Document(page_content='Èç¹û Bash ½âÊÍÆ÷²»·ÅÔÚÄ¿Â¼`/bin`£¬½Å±¾¾ÍÎŞ·¨Ö´ĞĞÁË¡£ÎªÁË±£ÏÕ£¬¿ÉÒÔĞ´³ÉÏÂÃæÕâÑù¡£\n\n```\n#!/usr/bin/env bash\n```\n\nÉÏÃæÃüÁîÊ¹ÓÃ`env`ÃüÁî£¨Õâ¸öÃüÁî×ÜÊÇÔÚ`/usr/bin`Ä¿Â¼£©£¬·µ»Ø Bash ¿ÉÖ´ĞĞÎÄ¼şµÄÎ»ÖÃ¡£`env`ÃüÁîµÄÏêÏ¸½éÉÜ£¬Çë¿´ºóÎÄ¡£', metadata={'source': 'data/file\\wiki.csv', 'row': 18})]
2023-07-08 17:34:16,091 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-08 17:34:16,091 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-08 17:34:22,296 - INFO - 4-Answering question... BashÖ¸ÄÏÊÇÒ»·İËµÃ÷ÎÄµµ£¬ÃèÊöÁËÈçºÎÊ¹ÓÃBash½Å±¾À´ÔËĞĞ³ÌĞò¡£½Å±¾µÄµÚÒ»ĞĞÍ¨³£ÊÇÖ¸¶¨½âÊÍÆ÷£¬¼´Õâ¸ö½Å±¾±ØĞëÍ¨¹ıÊ²Ã´½âÊÍÆ÷Ö´ĞĞ£¬Ò»°ãÊÇ`/bin/sh`»ò`/bin/bash`£¬Ò²¿ÉÒÔÊ¹ÓÃ`/usr/bin/env bash`À´·µ»ØBash¿ÉÖ´ĞĞÎÄ¼şµÄÎ»ÖÃ¡£
2023-07-08 17:34:22,296 - INFO - 4-Answering question... BashÖ¸ÄÏÊÇÒ»·İËµÃ÷ÎÄµµ£¬ÃèÊöÁËÈçºÎÊ¹ÓÃBash½Å±¾À´ÔËĞĞ³ÌĞò¡£½Å±¾µÄµÚÒ»ĞĞÍ¨³£ÊÇÖ¸¶¨½âÊÍÆ÷£¬¼´Õâ¸ö½Å±¾±ØĞëÍ¨¹ıÊ²Ã´½âÊÍÆ÷Ö´ĞĞ£¬Ò»°ãÊÇ`/bin/sh`»ò`/bin/bash`£¬Ò²¿ÉÒÔÊ¹ÓÃ`/usr/bin/env bash`À´·µ»ØBash¿ÉÖ´ĞĞÎÄ¼şµÄÎ»ÖÃ¡£
2023-07-08 17:34:22,300 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-08 17:34:22,300 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-08 17:35:34,775 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:35:34,777 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:35:34,778 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:35:52,144 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:35:52,146 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:35:52,147 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:35:53,421 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:35:53,423 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:35:53,424 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:35:53,427 - INFO - 0-Loading...Ìá¹©ÏÂJavaÅÅÕÏµÄ¼¸¸ö·½·¨
2023-07-08 17:35:53,428 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:35:53,430 - INFO - self.temperature£º0.5
2023-07-08 17:35:53,430 - INFO - self.max_context_tokens£º-1
2023-07-08 17:35:53,431 - INFO - self.file_chunk_size£º200
2023-07-08 17:35:53,431 - INFO - self.api_key£º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
2023-07-08 17:35:53,458 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 17:35:53,461 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-08 17:35:53,464 - INFO - username:pfile
2023-07-08 17:35:53,465 - INFO - folder_path£ºdbf/pfile
2023-07-08 17:35:53,550 - INFO - Loading faiss with AVX2 support.
2023-07-08 17:35:53,551 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-08 17:35:53,552 - INFO - Loading faiss.
2023-07-08 17:35:53,628 - INFO - Successfully loaded faiss.
2023-07-08 17:35:55,461 - INFO - 2-Searching for similar documents...[Document(page_content='id: 375\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JavaÅÅÕÏÈı°å¸«\nslug: special/jvm-troubleshoot-methods/\ncontent: = Èı°å¸«\n\n- ½â¾ö `CPU` ¹ı¸ß\n- ½â¾öËÀËø£¬`deadlock`\n- ½â¾öÄÚ´æĞ¹Â¶\n\n= ½â¾ö `CPU` ¹ı¸ß', metadata={'source': 'data/file\\wiki.csv', 'row': 20}), Document(page_content='id: 376\nversion: 4\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JavaÅÅÕÏÈı°å¸«\nslug: troubleshot/jvm-troubleshoot-methods/\ncontent: \ndateCreated: 1642381272\ndateModified: 1642381272\ndescription: \nchangeType: 3\nchangeRef: 118\nphid: PHID-WRDS-57mhrxdndtsijjljtl3x\ndocumentPHID: PHID-WIKI-7nbw3nmbzjtdifykzqky', metadata={'source': 'data/file\\wiki.csv', 'row': 26}), Document(page_content='1. ÓÃps/top/jps²éÕÒjava½ø³Ì\n2. ÓÃjmapµ¼³öÄÚ´æĞÅÏ¢\n3. ÓÃjvisialvm/mat·ÖÎö\n\n= ×Ü½á\n\nÕâĞ©·½·¨ÆäÊµ¶¼±È½Ï¼òµ¥£¬Ò²±È½Ï³õ¼¶¡£ÓĞĞ©ÎÊÌâÄÜÍ¨¹ıÕâĞ©·½·¨½â¾ö£¬ÓĞĞ©Ö»ÄÜ¸ø³ö·½Ïò£¬ĞèÒª½øÒ»²½·ÖÎö¡£\n\nÁí£¬Õâ¶¼ÊÇ `Oracle JDK` µÄ·¨×Ó£¬`IBM JDK` ¹¤¾ßÊÇÁíÒ»Ì×£º\n\n- jca£¬·ÖÎöÏß³Ì {F343813}', metadata={'source': 'data/file\\wiki.csv', 'row': 20})]
2023-07-08 17:35:55,463 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-08 17:35:58,620 - INFO - 4-Answering question... 1. ÓÃps/top/jps²éÕÒjava½ø³Ì
         2. ÓÃjmapµ¼³öÄÚ´æĞÅÏ¢
         3. ÓÃjvisialvm/mat·ÖÎö
         4. Ê¹ÓÃjca·ÖÎöÏß³Ì
2023-07-08 17:35:58,623 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-08 17:36:18,514 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:36:18,516 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:36:18,517 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:36:20,032 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:36:20,034 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:36:20,035 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:36:20,038 - INFO - 0-Loading...Ìá¹©ÏÂJavaÅÅÕÏµÄ¼¸¸ö·½·¨£¬²¢Ìá¹©ÏêÏ¸ÄÚÈİ
2023-07-08 17:36:20,039 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:36:20,040 - INFO - self.temperature£º0.5
2023-07-08 17:36:20,041 - INFO - self.max_context_tokens£º-1
2023-07-08 17:36:20,042 - INFO - self.file_chunk_size£º200
2023-07-08 17:36:20,042 - INFO - self.api_key£º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
2023-07-08 17:36:20,043 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 17:36:20,044 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-08 17:36:20,046 - INFO - username:pfile
2023-07-08 17:36:20,047 - INFO - folder_path£ºdbf/pfile
2023-07-08 17:36:21,847 - INFO - 2-Searching for similar documents...[Document(page_content='id: 375\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JavaÅÅÕÏÈı°å¸«\nslug: special/jvm-troubleshoot-methods/\ncontent: = Èı°å¸«\n\n- ½â¾ö `CPU` ¹ı¸ß\n- ½â¾öËÀËø£¬`deadlock`\n- ½â¾öÄÚ´æĞ¹Â¶\n\n= ½â¾ö `CPU` ¹ı¸ß', metadata={'source': 'data/file\\wiki.csv', 'row': 20}), Document(page_content='id: 376\nversion: 4\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JavaÅÅÕÏÈı°å¸«\nslug: troubleshot/jvm-troubleshoot-methods/\ncontent: \ndateCreated: 1642381272\ndateModified: 1642381272\ndescription: \nchangeType: 3\nchangeRef: 118\nphid: PHID-WRDS-57mhrxdndtsijjljtl3x\ndocumentPHID: PHID-WIKI-7nbw3nmbzjtdifykzqky', metadata={'source': 'data/file\\wiki.csv', 'row': 26}), Document(page_content='1. ÓÃps/top/jps²éÕÒjava½ø³Ì\n2. ÓÃjmapµ¼³öÄÚ´æĞÅÏ¢\n3. ÓÃjvisialvm/mat·ÖÎö\n\n= ×Ü½á\n\nÕâĞ©·½·¨ÆäÊµ¶¼±È½Ï¼òµ¥£¬Ò²±È½Ï³õ¼¶¡£ÓĞĞ©ÎÊÌâÄÜÍ¨¹ıÕâĞ©·½·¨½â¾ö£¬ÓĞĞ©Ö»ÄÜ¸ø³ö·½Ïò£¬ĞèÒª½øÒ»²½·ÖÎö¡£\n\nÁí£¬Õâ¶¼ÊÇ `Oracle JDK` µÄ·¨×Ó£¬`IBM JDK` ¹¤¾ßÊÇÁíÒ»Ì×£º\n\n- jca£¬·ÖÎöÏß³Ì {F343813}', metadata={'source': 'data/file\\wiki.csv', 'row': 20})]
2023-07-08 17:36:21,849 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-08 17:36:24,903 - INFO - 4-Answering question...
        1. ÓÃps/top/jps²éÕÒjava½ø³Ì
        2. ÓÃjmapµ¼³öÄÚ´æĞÅÏ¢
        3. ÓÃjvisialvm/mat·ÖÎö
        4. ÓÃjca·ÖÎöÏß³Ì
2023-07-08 17:36:24,905 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-08 17:37:02,687 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:37:02,690 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:37:02,690 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:37:04,294 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-08 17:37:04,296 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-08 17:37:04,297 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:37:04,299 - INFO - 0-Loading...´Ó×ÊÁÏ¿âÀïÕÒµ½JavaÅÅÕÏµÄ¼¸¸ö·½·¨£¬²¢ËµÃ÷ÏÂÓĞÃ»ÓĞÆäËû¸üºÃµÄ°ì·¨
2023-07-08 17:37:04,300 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-08 17:37:04,301 - INFO - self.temperature£º0.5
2023-07-08 17:37:04,301 - INFO - self.max_context_tokens£º-1
2023-07-08 17:37:04,302 - INFO - self.file_chunk_size£º200
2023-07-08 17:37:04,302 - INFO - self.api_key£º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
2023-07-08 17:37:04,303 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-08 17:37:04,304 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-08 17:37:04,305 - INFO - username:pfile
2023-07-08 17:37:04,306 - INFO - folder_path£ºdbf/pfile
2023-07-08 17:37:06,126 - INFO - 2-Searching for similar documents...[Document(page_content='1. ÓÃps/top/jps²éÕÒjava½ø³Ì\n2. ÓÃjmapµ¼³öÄÚ´æĞÅÏ¢\n3. ÓÃjvisialvm/mat·ÖÎö\n\n= ×Ü½á\n\nÕâĞ©·½·¨ÆäÊµ¶¼±È½Ï¼òµ¥£¬Ò²±È½Ï³õ¼¶¡£ÓĞĞ©ÎÊÌâÄÜÍ¨¹ıÕâĞ©·½·¨½â¾ö£¬ÓĞĞ©Ö»ÄÜ¸ø³ö·½Ïò£¬ĞèÒª½øÒ»²½·ÖÎö¡£\n\nÁí£¬Õâ¶¼ÊÇ `Oracle JDK` µÄ·¨×Ó£¬`IBM JDK` ¹¤¾ßÊÇÁíÒ»Ì×£º\n\n- jca£¬·ÖÎöÏß³Ì {F343813}', metadata={'source': 'data/file\\wiki.csv', 'row': 20}), Document(page_content='id: 375\nversion: 1\nauthorPHID: PHID-USER-3dmom5pwwvmbqkqx24gx\ntitle: JavaÅÅÕÏÈı°å¸«\nslug: special/jvm-troubleshoot-methods/\ncontent: = Èı°å¸«\n\n- ½â¾ö `CPU` ¹ı¸ß\n- ½â¾öËÀËø£¬`deadlock`\n- ½â¾öÄÚ´æĞ¹Â¶\n\n= ½â¾ö `CPU` ¹ı¸ß', metadata={'source': 'data/file\\wiki.csv', 'row': 20}), Document(page_content='Õâ½áÂÛÒ²Å¤×ªÁËÎÒ¶Ô¶àÌ¬ÓÅ»¯´úÂë½á¹¹µÄÇ¿ÆÈÖ¢»òÕßËµÆ«Ö´¡£ÔÚ´Ë×Ü½á£º\n1. ÕæÕıµÄÍòÓÃÁ¼·½£ºÊµÊÂÇóÊÇ£¬¾ßÌåÎÊÌâ¾ßÌå·ÖÎö¡£\n2. ÓÅ»¯²»ÄÜÏëµ±È»£¬±ØĞë»ùÓÚÊı¾İ£¬Êµ¼ÊÔËĞĞµÄÊı¾İ¡£\n3. ÔúÊµµÄ»ù´¡ÖªÊ¶ÄÜ½â´ğĞí¶àÒÔÎª½âÊÍ²»ÁËµÄÎÊÌâ¡£', metadata={'source': 'data/file\\wiki.csv', 'row': 65})]
2023-07-08 17:37:06,128 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-08 17:37:15,769 - INFO - 4-Answering question...
        ÓÃps/top/jps²éÕÒjava½ø³Ì£¬ÓÃjmapµ¼³öÄÚ´æĞÅÏ¢£¬ÓÃjvisialvm/mat·ÖÎö£¬ÕâĞ©·½·¨ÊÇ±È½Ï¼òµ¥µÄ£¬Ò²±È½Ï³õ¼¶£¬µ«ÊÇ¿ÉÒÔ½â¾öÒ»Ğ©ÎÊÌâ£¬Ò²¿ÉÒÔ¸ø³ö·½Ïò¡£ÁíÍâ£¬IBM JDKÓĞÁíÒ»Ì×¹¤¾ß£¬±ÈÈçjca£¬¿ÉÒÔ·ÖÎöÏß³Ì¡£Èç¹ûÏëÒª¸üºÃµÄ°ì·¨£¬¿ÉÒÔ×öÊµ¼ÊÔËĞĞµÄÊı¾İ·ÖÎö£¬²¢ÇÒÔúÊµÕÆÎÕ»ù´¡ÖªÊ¶£¬ÕâÑù¿ÉÒÔ½â¾öĞí¶àÒÔÎª½âÊÍ²»ÁËµÄÎÊÌâ¡£
2023-07-08 17:37:15,772 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-10 23:11:14,818 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:11:14,831 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:11:14,832 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:11:41,702 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:11:41,704 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:11:41,705 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:11:43,587 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:11:43,589 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:11:43,590 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:11:43,592 - INFO - 0-Loading...´°ÍâÓĞÊ²Ã´·ç¾°
2023-07-10 23:11:43,593 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:11:43,594 - INFO - self.temperature£º0.5
2023-07-10 23:11:43,595 - INFO - self.max_context_tokens£º-1
2023-07-10 23:11:43,595 - INFO - self.file_chunk_size£º200
2023-07-10 23:11:43,596 - INFO - self.api_key£º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
2023-07-10 23:11:43,621 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-10 23:11:43,642 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-10 23:11:43,644 - INFO - username:gfile
2023-07-10 23:11:43,644 - INFO - folder_path£ºdbf/gfile
2023-07-10 23:11:43,727 - INFO - Loading faiss with AVX2 support.
2023-07-10 23:11:43,728 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-10 23:11:43,728 - INFO - Loading faiss.
2023-07-10 23:11:43,857 - INFO - Successfully loaded faiss.
2023-07-10 23:11:45,989 - INFO - 2-Searching for similar documents...[Document(page_content='¡¶½ÌÊÒ´°Íâ¡·\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Ò»¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄÃÀÀöĞ£Ô°¡£Ã¿ÌìÀ´µ½ÕâÀï£¬ÎÒÃÇ¶¼³äÂúÁË¶ÔÖªÊ¶µÄºÃÆæºÍ¶ÔÉú»îµÄÈÈ°®¡£ÔÚÕâÀï£¬ÎÒÒªÏò´ó¼Ò½éÉÜÒ»¸öÈÃÎÒÁ÷Á¬Íü·µµÄµØ·½£¬ÄÇ¾ÍÊÇÎÒÃÇ½ÌÊÒ´°ÍâµÄ·ç¾°¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='º¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î¡£\n\n<PAGE BREAK>\n\n¡¶´°ÍâµÄÆæÃîÊÀ½ç¡·\n\nÔÚº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§µÄ½ÌÊÒÀï£¬Ã¿µ±ÎÒÌ§Í·ÍûÏò´°Íâ£¬×Ü»á·¢ÏÖÒ»¸ö³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç¡£ÓÌÈçÒ»·ùÉ«²Ê°ßìµµÄ»­¾í£¬Õ¹ÏÖÔÚÎÒÑÛÇ°¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='´°ÍâµÄ·ç¾°×ÜÊÇÄÇÃ´·á¸»¶à²Ê£¬ÈÃÎÒÃÇÔÚ¿ìÀÖÖĞ³É³¤¡£ËüÃÇ¼ûÖ¤ÁËÎÒÃÇ´ÓÖÉÄÛ×ßÏò³ÉÊìµÄ¹ı³Ì£¬Ò²¼ûÖ¤ÁËÎÒÃÇÓëÊ¦³¤¡¢Í¬°éÖ®¼äÉîºñµÄÓÑÒê¡£ÔÚÕâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°Àï£¬ÎÒÃÇÑ§»áÁËÕäÏ§Ã¿Ò»¸öÃÀºÃË²¼ä£¬¸Ğ¶÷ÕâÒ»ÇĞÅã°éÎÒÃÇ³É³¤µÄÈËºÍÊÂ¡£ÔÚÕâÀï£¬ÎÒÃÇÑ§»áÁËÓÂ¸ÒÃæ¶ÔÀ§ÄÑ£¬°ÑÎÕÃ¿Ò»¸ö»ú»áÈ¥×·ÇóÃÎÏë¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-10 23:11:45,991 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-10 23:11:49,835 - INFO - 4-Answering question... ´°ÍâÓĞÉ«²Ê°ßìµµÄ»­¾í£¬³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç£¬·á¸»¶à²ÊµÄ·ç¾°£¬ÒÔ¼°¼ûÖ¤ÎÒÃÇ´ÓÖÉÄÛ×ßÏò³ÉÊìµÄ¹ı³ÌµÄÓÑÒê¡£
2023-07-10 23:11:49,839 - INFO - Result 1:
2023-07-10 23:11:49,840 - INFO - ¡¶½ÌÊÒ´°Íâ¡·

º¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Ò»¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄÃÀÀöĞ£Ô°¡£Ã¿ÌìÀ´µ½ÕâÀï£¬ÎÒÃÇ¶¼³äÂúÁË¶ÔÖªÊ¶µÄºÃÆæºÍ¶ÔÉú»îµÄÈÈ°®¡£ÔÚÕâÀï£¬ÎÒÒªÏò´ó¼Ò½éÉÜÒ»¸öÈÃÎÒÁ÷Á¬Íü·µµÄµØ·½£¬ÄÇ¾ÍÊÇÎÒÃÇ½ÌÊÒ´°ÍâµÄ·ç¾°¡£
2023-07-10 23:11:49,840 - INFO - Metadata: {'source': 'data/file/×÷ÎÄ.docx'}
2023-07-10 23:11:49,841 - INFO - File Name: ×÷ÎÄ.docx
2023-07-10 23:11:49,841 - INFO - 

2023-07-10 23:11:49,842 - INFO - Result 2:
2023-07-10 23:11:49,842 - INFO - º¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î¡£

<PAGE BREAK>

¡¶´°ÍâµÄÆæÃîÊÀ½ç¡·

ÔÚº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§µÄ½ÌÊÒÀï£¬Ã¿µ±ÎÒÌ§Í·ÍûÏò´°Íâ£¬×Ü»á·¢ÏÖÒ»¸ö³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç¡£ÓÌÈçÒ»·ùÉ«²Ê°ßìµµÄ»­¾í£¬Õ¹ÏÖÔÚÎÒÑÛÇ°¡£
2023-07-10 23:11:49,843 - INFO - Metadata: {'source': 'data/file/×÷ÎÄ.docx'}
2023-07-10 23:11:49,843 - INFO - File Name: ×÷ÎÄ.docx
2023-07-10 23:11:49,844 - INFO - 

2023-07-10 23:11:49,844 - INFO - Result 3:
2023-07-10 23:11:49,845 - INFO - ´°ÍâµÄ·ç¾°×ÜÊÇÄÇÃ´·á¸»¶à²Ê£¬ÈÃÎÒÃÇÔÚ¿ìÀÖÖĞ³É³¤¡£ËüÃÇ¼ûÖ¤ÁËÎÒÃÇ´ÓÖÉÄÛ×ßÏò³ÉÊìµÄ¹ı³Ì£¬Ò²¼ûÖ¤ÁËÎÒÃÇÓëÊ¦³¤¡¢Í¬°éÖ®¼äÉîºñµÄÓÑÒê¡£ÔÚÕâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°Àï£¬ÎÒÃÇÑ§»áÁËÕäÏ§Ã¿Ò»¸öÃÀºÃË²¼ä£¬¸Ğ¶÷ÕâÒ»ÇĞÅã°éÎÒÃÇ³É³¤µÄÈËºÍÊÂ¡£ÔÚÕâÀï£¬ÎÒÃÇÑ§»áÁËÓÂ¸ÒÃæ¶ÔÀ§ÄÑ£¬°ÑÎÕÃ¿Ò»¸ö»ú»áÈ¥×·ÇóÃÎÏë¡£
2023-07-10 23:11:49,845 - INFO - Metadata: {'source': 'data/file/×÷ÎÄ.docx'}
2023-07-10 23:11:49,846 - INFO - File Name: ×÷ÎÄ.docx
2023-07-10 23:11:49,846 - INFO - 

2023-07-10 23:11:49,848 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-10 23:13:57,322 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-10 23:13:57,322 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-10 23:13:57,325 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:13:57,325 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:13:57,326 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:13:57,326 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:14:13,138 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-10 23:14:13,138 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-10 23:14:13,141 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:14:13,141 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:14:13,142 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:14:13,142 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:14:14,733 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-10 23:14:14,733 - INFO - »¶Ó­»ØÀ´£¬pfile£¡
2023-07-10 23:14:14,735 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:14:14,735 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:14:14,736 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:14:14,736 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:14:14,738 - INFO - 0-Loading...Á÷¶¯ĞÔ¸²¸ÇÂÊµÄ¹«Ê½
2023-07-10 23:14:14,738 - INFO - 0-Loading...Á÷¶¯ĞÔ¸²¸ÇÂÊµÄ¹«Ê½
2023-07-10 23:14:14,740 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:14:14,740 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:14:14,741 - INFO - self.temperature£º0.5
2023-07-10 23:14:14,741 - INFO - self.temperature£º0.5
2023-07-10 23:14:14,742 - INFO - self.max_context_tokens£º-1
2023-07-10 23:14:14,742 - INFO - self.max_context_tokens£º-1
2023-07-10 23:14:14,743 - INFO - self.file_chunk_size£º200
2023-07-10 23:14:14,743 - INFO - self.file_chunk_size£º200
2023-07-10 23:14:14,744 - INFO - self.api_key£º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
2023-07-10 23:14:14,744 - INFO - self.api_key£º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
2023-07-10 23:14:14,745 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-10 23:14:14,745 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-10 23:14:14,747 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-10 23:14:14,747 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-10 23:14:14,748 - INFO - username:pfile
2023-07-10 23:14:14,748 - INFO - username:pfile
2023-07-10 23:14:14,749 - INFO - folder_path£ºdbf/pfile
2023-07-10 23:14:14,749 - INFO - folder_path£ºdbf/pfile
2023-07-10 23:14:17,255 - INFO - 2-Searching for similar documents...[Document(page_content='= ·ÖÎö', metadata={'source': 'data/file\\wiki.csv', 'row': 75}), Document(page_content='**Ö¸±ê½âÊÍ**', metadata={'source': 'data/file\\wiki.csv', 'row': 77}), Document(page_content='== ·ÖÎö', metadata={'source': 'data/file\\wiki.csv', 'row': 70})]
2023-07-10 23:14:17,255 - INFO - 2-Searching for similar documents...[Document(page_content='= ·ÖÎö', metadata={'source': 'data/file\\wiki.csv', 'row': 75}), Document(page_content='**Ö¸±ê½âÊÍ**', metadata={'source': 'data/file\\wiki.csv', 'row': 77}), Document(page_content='== ·ÖÎö', metadata={'source': 'data/file\\wiki.csv', 'row': 70})]
2023-07-10 23:14:17,256 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-10 23:14:17,256 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-10 23:14:18,152 - INFO - 4-Answering question...
ÎÒ²»ÖªµÀ¡£
2023-07-10 23:14:18,152 - INFO - 4-Answering question...
ÎÒ²»ÖªµÀ¡£
2023-07-10 23:14:18,153 - INFO - Result 1:
2023-07-10 23:14:18,153 - INFO - Result 1:
2023-07-10 23:14:18,155 - INFO - = ·ÖÎö
2023-07-10 23:14:18,155 - INFO - = ·ÖÎö
2023-07-10 23:14:18,156 - INFO - Metadata: {'source': 'data/file\\wiki.csv', 'row': 75}
2023-07-10 23:14:18,156 - INFO - Metadata: {'source': 'data/file\\wiki.csv', 'row': 75}
2023-07-10 23:14:18,157 - INFO - File Name: file\wiki.csv
2023-07-10 23:14:18,157 - INFO - File Name: file\wiki.csv
2023-07-10 23:14:18,158 - INFO - 

2023-07-10 23:14:18,158 - INFO - 

2023-07-10 23:14:18,158 - INFO - Result 2:
2023-07-10 23:14:18,158 - INFO - Result 2:
2023-07-10 23:14:18,159 - INFO - **Ö¸±ê½âÊÍ**
2023-07-10 23:14:18,159 - INFO - **Ö¸±ê½âÊÍ**
2023-07-10 23:14:18,159 - INFO - Metadata: {'source': 'data/file\\wiki.csv', 'row': 77}
2023-07-10 23:14:18,159 - INFO - Metadata: {'source': 'data/file\\wiki.csv', 'row': 77}
2023-07-10 23:14:18,160 - INFO - File Name: file\wiki.csv
2023-07-10 23:14:18,160 - INFO - File Name: file\wiki.csv
2023-07-10 23:14:18,161 - INFO - 

2023-07-10 23:14:18,161 - INFO - 

2023-07-10 23:14:18,162 - INFO - Result 3:
2023-07-10 23:14:18,162 - INFO - Result 3:
2023-07-10 23:14:18,162 - INFO - == ·ÖÎö
2023-07-10 23:14:18,162 - INFO - == ·ÖÎö
2023-07-10 23:14:18,163 - INFO - Metadata: {'source': 'data/file\\wiki.csv', 'row': 70}
2023-07-10 23:14:18,163 - INFO - Metadata: {'source': 'data/file\\wiki.csv', 'row': 70}
2023-07-10 23:14:18,164 - INFO - File Name: file\wiki.csv
2023-07-10 23:14:18,164 - INFO - File Name: file\wiki.csv
2023-07-10 23:14:18,164 - INFO - 

2023-07-10 23:14:18,164 - INFO - 

2023-07-10 23:14:18,168 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-10 23:14:18,168 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-10 23:14:57,023 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:14:57,023 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:14:57,025 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:14:57,025 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:14:57,027 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:14:57,027 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:15:03,275 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:15:03,275 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:15:03,278 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:15:03,278 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:15:03,279 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:15:03,279 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:15:04,781 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:15:04,781 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:15:04,783 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:15:04,783 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:15:04,784 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:15:04,784 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:15:04,786 - INFO - 0-Loading...Á÷¶¯ĞÔ¸²¸ÇÂÊµÄ¹«Ê½
2023-07-10 23:15:04,786 - INFO - 0-Loading...Á÷¶¯ĞÔ¸²¸ÇÂÊµÄ¹«Ê½
2023-07-10 23:15:04,788 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:15:04,788 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:15:04,789 - INFO - self.temperature£º0.5
2023-07-10 23:15:04,789 - INFO - self.temperature£º0.5
2023-07-10 23:15:04,790 - INFO - self.max_context_tokens£º-1
2023-07-10 23:15:04,790 - INFO - self.max_context_tokens£º-1
2023-07-10 23:15:04,790 - INFO - self.file_chunk_size£º200
2023-07-10 23:15:04,790 - INFO - self.file_chunk_size£º200
2023-07-10 23:15:04,791 - INFO - self.api_key£º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
2023-07-10 23:15:04,791 - INFO - self.api_key£º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
2023-07-10 23:15:04,792 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-10 23:15:04,792 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-10 23:15:04,793 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-10 23:15:04,793 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-10 23:15:04,795 - INFO - username:gfile
2023-07-10 23:15:04,795 - INFO - username:gfile
2023-07-10 23:15:04,795 - INFO - folder_path£ºdbf/gfile
2023-07-10 23:15:04,795 - INFO - folder_path£ºdbf/gfile
2023-07-10 23:15:06,507 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-10 23:15:06,507 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-10 23:15:08,546 - INFO - 4-Answering question... Á÷¶¯ĞÔÆ¥ÅäÂÊ=¼ÓÈ¨×Ê½ğÀ´Ô´/¼ÓÈ¨×Ê½ğÔËÓÃ¡Á100%
2023-07-10 23:15:08,546 - INFO - 4-Answering question... Á÷¶¯ĞÔÆ¥ÅäÂÊ=¼ÓÈ¨×Ê½ğÀ´Ô´/¼ÓÈ¨×Ê½ğÔËÓÃ¡Á100%
2023-07-10 23:15:08,547 - INFO - Result 1:
2023-07-10 23:15:08,547 - INFO - Result 1:
2023-07-10 23:15:08,548 - INFO - Á÷¶¯ĞÔÆ¥ÅäÂÊ¼ÆÁ¿±ê×¼

Ò»¡¢Á÷¶¯ĞÔÆ¥ÅäÂÊ

Á÷¶¯ĞÔÆ¥ÅäÂÊºâÁ¿ÉÌÒµÒøĞĞÖ÷Òª×Ê²úÓë¸ºÕ®µÄÆÚÏŞÅäÖÃ½á¹¹£¬Ö¼ÔÚÒıµ¼ÉÌÒµÒøĞĞºÏÀíÅäÖÃ³¤ÆÚÎÈ¶¨¸ºÕ®¡¢¸ßÁ÷¶¯ĞÔ»ò¶ÌÆÚ×Ê²ú£¬±ÜÃâ¹ı¶ÈÒÀÀµ¶ÌÆÚ×Ê½ğÖ§³Ö³¤ÆÚÒµÎñ·¢Õ¹£¬Ìá¸ßÁ÷¶¯ĞÔ·çÏÕµÖÓùÄÜÁ¦¡£

Á÷¶¯ĞÔÆ¥ÅäÂÊ=¼ÓÈ¨×Ê½ğÀ´Ô´/¼ÓÈ¨×Ê½ğÔËÓÃ¡Á100%

¶ş¡¢¼ÓÈ¨×Ê½ğÀ´Ô´
2023-07-10 23:15:08,548 - INFO - Á÷¶¯ĞÔÆ¥ÅäÂÊ¼ÆÁ¿±ê×¼

Ò»¡¢Á÷¶¯ĞÔÆ¥ÅäÂÊ

Á÷¶¯ĞÔÆ¥ÅäÂÊºâÁ¿ÉÌÒµÒøĞĞÖ÷Òª×Ê²úÓë¸ºÕ®µÄÆÚÏŞÅäÖÃ½á¹¹£¬Ö¼ÔÚÒıµ¼ÉÌÒµÒøĞĞºÏÀíÅäÖÃ³¤ÆÚÎÈ¶¨¸ºÕ®¡¢¸ßÁ÷¶¯ĞÔ»ò¶ÌÆÚ×Ê²ú£¬±ÜÃâ¹ı¶ÈÒÀÀµ¶ÌÆÚ×Ê½ğÖ§³Ö³¤ÆÚÒµÎñ·¢Õ¹£¬Ìá¸ßÁ÷¶¯ĞÔ·çÏÕµÖÓùÄÜÁ¦¡£

Á÷¶¯ĞÔÆ¥ÅäÂÊ=¼ÓÈ¨×Ê½ğÀ´Ô´/¼ÓÈ¨×Ê½ğÔËÓÃ¡Á100%

¶ş¡¢¼ÓÈ¨×Ê½ğÀ´Ô´
2023-07-10 23:15:08,550 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:15:08,550 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:15:08,550 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:15:08,550 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:15:08,551 - INFO - 

2023-07-10 23:15:08,551 - INFO - 

2023-07-10 23:15:08,551 - INFO - Result 2:
2023-07-10 23:15:08,551 - INFO - Result 2:
2023-07-10 23:15:08,552 - INFO - ÆäÖĞ£¬ÆäËûÍ¶×ÊÖ¸Õ®È¯Í¶×Ê¡¢¹ÉÆ±Í¶×ÊÍâµÄ±íÄÚÍ¶×Ê£¬°üÀ¨µ«²»ÏŞÓÚÌØ¶¨Ä¿µÄÔØÌåÍ¶×Ê£¨ÈçÉÌÒµÒøĞĞÀí²Æ²úÆ·¡¢ĞÅÍĞÍ¶×Ê¼Æ»®¡¢Ö¤È¯Í¶×Ê»ù½ğ¡¢Ö¤È¯¹«Ë¾×Ê²ú¹ÜÀí¼Æ»®¡¢»ù½ğ¹ÜÀí¹«Ë¾¼°×Ó¹«Ë¾×Ê²ú¹ÜÀí¼Æ»®¡¢±£ÏÕÒµ×Ê²ú¹ÜÀí»ú¹¹×Ê²ú¹ÜÀí²úÆ·µÈ£©¡£

7ÌìÒÔÄÚµÄ´æ·ÅÍ¬Òµ¡¢²ğ·ÅÍ¬Òµ¼°ÂòÈë·µÊÛµÄÕÛËãÂÊÎª0%¡£

Á÷¶¯ĞÔÆ¥ÅäÂÊÏîÄ¿±í
2023-07-10 23:15:08,552 - INFO - ÆäÖĞ£¬ÆäËûÍ¶×ÊÖ¸Õ®È¯Í¶×Ê¡¢¹ÉÆ±Í¶×ÊÍâµÄ±íÄÚÍ¶×Ê£¬°üÀ¨µ«²»ÏŞÓÚÌØ¶¨Ä¿µÄÔØÌåÍ¶×Ê£¨ÈçÉÌÒµÒøĞĞÀí²Æ²úÆ·¡¢ĞÅÍĞÍ¶×Ê¼Æ»®¡¢Ö¤È¯Í¶×Ê»ù½ğ¡¢Ö¤È¯¹«Ë¾×Ê²ú¹ÜÀí¼Æ»®¡¢»ù½ğ¹ÜÀí¹«Ë¾¼°×Ó¹«Ë¾×Ê²ú¹ÜÀí¼Æ»®¡¢±£ÏÕÒµ×Ê²ú¹ÜÀí»ú¹¹×Ê²ú¹ÜÀí²úÆ·µÈ£©¡£

7ÌìÒÔÄÚµÄ´æ·ÅÍ¬Òµ¡¢²ğ·ÅÍ¬Òµ¼°ÂòÈë·µÊÛµÄÕÛËãÂÊÎª0%¡£

Á÷¶¯ĞÔÆ¥ÅäÂÊÏîÄ¿±í
2023-07-10 23:15:08,553 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:15:08,553 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:15:08,553 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:15:08,553 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:15:08,554 - INFO - 

2023-07-10 23:15:08,554 - INFO - 

2023-07-10 23:15:08,555 - INFO - Result 3:
2023-07-10 23:15:08,555 - INFO - Result 3:
2023-07-10 23:15:08,563 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:15:08,563 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:15:08,564 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:15:08,564 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:15:08,565 - INFO - 

2023-07-10 23:15:08,565 - INFO - 

2023-07-10 23:15:08,568 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-10 23:15:08,568 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-10 23:16:53,120 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:16:53,120 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:16:53,123 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:16:53,123 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:16:53,124 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:16:53,124 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:17:02,921 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:17:02,921 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:17:02,923 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:17:02,923 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:17:02,924 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:17:02,924 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:17:04,943 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:17:04,943 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:17:04,946 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:17:04,946 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:17:04,946 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:17:04,946 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:17:04,949 - INFO - 0-Loading...Á÷¶¯ĞÔ¸²¸ÇÂÊµÄ¹«Ê½
2023-07-10 23:17:04,949 - INFO - 0-Loading...Á÷¶¯ĞÔ¸²¸ÇÂÊµÄ¹«Ê½
2023-07-10 23:17:04,950 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:17:04,950 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:17:04,952 - INFO - self.temperature£º0.5
2023-07-10 23:17:04,952 - INFO - self.temperature£º0.5
2023-07-10 23:17:04,953 - INFO - self.max_context_tokens£º-1
2023-07-10 23:17:04,953 - INFO - self.max_context_tokens£º-1
2023-07-10 23:17:04,953 - INFO - self.file_chunk_size£º200
2023-07-10 23:17:04,953 - INFO - self.file_chunk_size£º200
2023-07-10 23:17:04,954 - INFO - self.api_key£º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
2023-07-10 23:17:04,954 - INFO - self.api_key£º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
2023-07-10 23:17:04,986 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-10 23:17:04,986 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-10 23:17:04,988 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-10 23:17:04,988 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-10 23:17:04,990 - INFO - username:gfile
2023-07-10 23:17:04,990 - INFO - username:gfile
2023-07-10 23:17:04,991 - INFO - folder_path£ºdbf/gfile
2023-07-10 23:17:04,991 - INFO - folder_path£ºdbf/gfile
2023-07-10 23:17:05,076 - INFO - Loading faiss with AVX2 support.
2023-07-10 23:17:05,076 - INFO - Loading faiss with AVX2 support.
2023-07-10 23:17:05,077 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-10 23:17:05,077 - INFO - Could not load library with AVX2 support due to:
ModuleNotFoundError("No module named 'faiss.swigfaiss_avx2'")
2023-07-10 23:17:05,078 - INFO - Loading faiss.
2023-07-10 23:17:05,078 - INFO - Loading faiss.
2023-07-10 23:17:05,154 - INFO - Successfully loaded faiss.
2023-07-10 23:17:05,154 - INFO - Successfully loaded faiss.
2023-07-10 23:17:06,868 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-10 23:17:06,868 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-10 23:17:09,360 - INFO - 4-Answering question... Á÷¶¯ĞÔÆ¥ÅäÂÊ=¼ÓÈ¨×Ê½ğÀ´Ô´/¼ÓÈ¨×Ê½ğÔËÓÃ¡Á100%
2023-07-10 23:17:09,360 - INFO - 4-Answering question... Á÷¶¯ĞÔÆ¥ÅäÂÊ=¼ÓÈ¨×Ê½ğÀ´Ô´/¼ÓÈ¨×Ê½ğÔËÓÃ¡Á100%
2023-07-10 23:17:09,362 - INFO - Result 1:
2023-07-10 23:17:09,362 - INFO - Result 1:
2023-07-10 23:17:09,363 - INFO - Á÷¶¯ĞÔÆ¥ÅäÂÊ¼ÆÁ¿±ê×¼

Ò»¡¢Á÷¶¯ĞÔÆ¥ÅäÂÊ

Á÷¶¯ĞÔÆ¥ÅäÂÊºâÁ¿ÉÌÒµÒøĞĞÖ÷Òª×Ê²úÓë¸ºÕ®µÄÆÚÏŞÅäÖÃ½á¹¹£¬Ö¼ÔÚÒıµ¼ÉÌÒµÒøĞĞºÏÀíÅäÖÃ³¤ÆÚÎÈ¶¨¸ºÕ®¡¢¸ßÁ÷¶¯ĞÔ»ò¶ÌÆÚ×Ê²ú£¬±ÜÃâ¹ı¶ÈÒÀÀµ¶ÌÆÚ×Ê½ğÖ§³Ö³¤ÆÚÒµÎñ·¢Õ¹£¬Ìá¸ßÁ÷¶¯ĞÔ·çÏÕµÖÓùÄÜÁ¦¡£

Á÷¶¯ĞÔÆ¥ÅäÂÊ=¼ÓÈ¨×Ê½ğÀ´Ô´/¼ÓÈ¨×Ê½ğÔËÓÃ¡Á100%

¶ş¡¢¼ÓÈ¨×Ê½ğÀ´Ô´
2023-07-10 23:17:09,363 - INFO - Á÷¶¯ĞÔÆ¥ÅäÂÊ¼ÆÁ¿±ê×¼

Ò»¡¢Á÷¶¯ĞÔÆ¥ÅäÂÊ

Á÷¶¯ĞÔÆ¥ÅäÂÊºâÁ¿ÉÌÒµÒøĞĞÖ÷Òª×Ê²úÓë¸ºÕ®µÄÆÚÏŞÅäÖÃ½á¹¹£¬Ö¼ÔÚÒıµ¼ÉÌÒµÒøĞĞºÏÀíÅäÖÃ³¤ÆÚÎÈ¶¨¸ºÕ®¡¢¸ßÁ÷¶¯ĞÔ»ò¶ÌÆÚ×Ê²ú£¬±ÜÃâ¹ı¶ÈÒÀÀµ¶ÌÆÚ×Ê½ğÖ§³Ö³¤ÆÚÒµÎñ·¢Õ¹£¬Ìá¸ßÁ÷¶¯ĞÔ·çÏÕµÖÓùÄÜÁ¦¡£

Á÷¶¯ĞÔÆ¥ÅäÂÊ=¼ÓÈ¨×Ê½ğÀ´Ô´/¼ÓÈ¨×Ê½ğÔËÓÃ¡Á100%

¶ş¡¢¼ÓÈ¨×Ê½ğÀ´Ô´
2023-07-10 23:17:09,364 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:17:09,364 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:17:09,365 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:17:09,365 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:17:09,365 - INFO - 

2023-07-10 23:17:09,365 - INFO - 

2023-07-10 23:17:09,366 - INFO - Result 2:
2023-07-10 23:17:09,366 - INFO - Result 2:
2023-07-10 23:17:09,367 - INFO - ÆäÖĞ£¬ÆäËûÍ¶×ÊÖ¸Õ®È¯Í¶×Ê¡¢¹ÉÆ±Í¶×ÊÍâµÄ±íÄÚÍ¶×Ê£¬°üÀ¨µ«²»ÏŞÓÚÌØ¶¨Ä¿µÄÔØÌåÍ¶×Ê£¨ÈçÉÌÒµÒøĞĞÀí²Æ²úÆ·¡¢ĞÅÍĞÍ¶×Ê¼Æ»®¡¢Ö¤È¯Í¶×Ê»ù½ğ¡¢Ö¤È¯¹«Ë¾×Ê²ú¹ÜÀí¼Æ»®¡¢»ù½ğ¹ÜÀí¹«Ë¾¼°×Ó¹«Ë¾×Ê²ú¹ÜÀí¼Æ»®¡¢±£ÏÕÒµ×Ê²ú¹ÜÀí»ú¹¹×Ê²ú¹ÜÀí²úÆ·µÈ£©¡£

7ÌìÒÔÄÚµÄ´æ·ÅÍ¬Òµ¡¢²ğ·ÅÍ¬Òµ¼°ÂòÈë·µÊÛµÄÕÛËãÂÊÎª0%¡£

Á÷¶¯ĞÔÆ¥ÅäÂÊÏîÄ¿±í
2023-07-10 23:17:09,367 - INFO - ÆäÖĞ£¬ÆäËûÍ¶×ÊÖ¸Õ®È¯Í¶×Ê¡¢¹ÉÆ±Í¶×ÊÍâµÄ±íÄÚÍ¶×Ê£¬°üÀ¨µ«²»ÏŞÓÚÌØ¶¨Ä¿µÄÔØÌåÍ¶×Ê£¨ÈçÉÌÒµÒøĞĞÀí²Æ²úÆ·¡¢ĞÅÍĞÍ¶×Ê¼Æ»®¡¢Ö¤È¯Í¶×Ê»ù½ğ¡¢Ö¤È¯¹«Ë¾×Ê²ú¹ÜÀí¼Æ»®¡¢»ù½ğ¹ÜÀí¹«Ë¾¼°×Ó¹«Ë¾×Ê²ú¹ÜÀí¼Æ»®¡¢±£ÏÕÒµ×Ê²ú¹ÜÀí»ú¹¹×Ê²ú¹ÜÀí²úÆ·µÈ£©¡£

7ÌìÒÔÄÚµÄ´æ·ÅÍ¬Òµ¡¢²ğ·ÅÍ¬Òµ¼°ÂòÈë·µÊÛµÄÕÛËãÂÊÎª0%¡£

Á÷¶¯ĞÔÆ¥ÅäÂÊÏîÄ¿±í
2023-07-10 23:17:09,367 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:17:09,367 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:17:09,368 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:17:09,368 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:17:09,369 - INFO - 

2023-07-10 23:17:09,369 - INFO - 

2023-07-10 23:17:09,369 - INFO - Result 3:
2023-07-10 23:17:09,369 - INFO - Result 3:
2023-07-10 23:17:09,378 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:17:09,378 - INFO - Metadata: {'source': 'data/file/liudongxingpipei.docx'}
2023-07-10 23:17:09,379 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:17:09,379 - INFO - File Name: liudongxingpipei.docx
2023-07-10 23:17:09,380 - INFO - 

2023-07-10 23:17:09,380 - INFO - 

2023-07-10 23:17:09,383 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-10 23:17:09,383 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-10 23:19:32,220 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:19:32,220 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:19:32,220 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:19:32,222 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:19:32,222 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:19:32,222 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:19:32,224 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:32,224 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:32,224 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:36,192 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:19:36,192 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:19:36,192 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:19:36,194 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:19:36,194 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:19:36,194 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:19:36,196 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:36,196 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:36,196 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:39,133 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:19:39,133 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:19:39,133 - INFO - »¶Ó­»ØÀ´£¬gfile£¡
2023-07-10 23:19:39,136 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:19:39,136 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:19:39,136 - INFO - Ê¹ÓÃ¾«È·ËÑË÷·½Ê½
2023-07-10 23:19:39,137 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:39,137 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:39,137 - INFO - Use the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:39,140 - INFO - 0-Loading...´°ÍâÓĞÊ²Ã´
2023-07-10 23:19:39,140 - INFO - 0-Loading...´°ÍâÓĞÊ²Ã´
2023-07-10 23:19:39,140 - INFO - 0-Loading...´°ÍâÓĞÊ²Ã´
2023-07-10 23:19:39,141 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:39,141 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:39,141 - INFO - self.prompt_template£ºUse the following pieces of context to answer the question at the end. 
        If you don't know the answer, just say that you don't know, don't try to make up an answer.
        the answer must be chinese.
        {context}

        Question: {question}
        Answer:
        
2023-07-10 23:19:39,143 - INFO - self.temperature£º0.5
2023-07-10 23:19:39,143 - INFO - self.temperature£º0.5
2023-07-10 23:19:39,143 - INFO - self.temperature£º0.5
2023-07-10 23:19:39,145 - INFO - self.max_context_tokens£º-1
2023-07-10 23:19:39,145 - INFO - self.max_context_tokens£º-1
2023-07-10 23:19:39,145 - INFO - self.max_context_tokens£º-1
2023-07-10 23:19:39,146 - INFO - self.file_chunk_size£º200
2023-07-10 23:19:39,146 - INFO - self.file_chunk_size£º200
2023-07-10 23:19:39,146 - INFO - self.file_chunk_size£º200
2023-07-10 23:19:39,146 - INFO - self.api_key£º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
2023-07-10 23:19:39,146 - INFO - self.api_key£º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
2023-07-10 23:19:39,146 - INFO - self.api_key£º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
2023-07-10 23:19:39,148 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-10 23:19:39,148 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-10 23:19:39,148 - INFO - input_variables=['context', 'question'] output_parser=None partial_variables={} template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        " template_format='f-string' validate_template=True
2023-07-10 23:19:39,150 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-10 23:19:39,150 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-10 23:19:39,150 - INFO - 1-Loading question answering chain...[1mOpenAI[0m
Params: {'model_name': 'text-davinci-003', 'temperature': 0.5, 'max_tokens': -1, 'top_p': 1, 'frequency_penalty': 0, 'presence_penalty': 0, 'n': 1, 'request_timeout': None, 'logit_bias': {}}
2023-07-10 23:19:39,151 - INFO - username:gfile
2023-07-10 23:19:39,151 - INFO - username:gfile
2023-07-10 23:19:39,151 - INFO - username:gfile
2023-07-10 23:19:39,152 - INFO - folder_path£ºdbf/gfile
2023-07-10 23:19:39,152 - INFO - folder_path£ºdbf/gfile
2023-07-10 23:19:39,152 - INFO - folder_path£ºdbf/gfile
2023-07-10 23:19:40,867 - INFO - 2-Searching for similar documents...[Document(page_content='¡¶½ÌÊÒ´°Íâ¡·\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Ò»¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄÃÀÀöĞ£Ô°¡£Ã¿ÌìÀ´µ½ÕâÀï£¬ÎÒÃÇ¶¼³äÂúÁË¶ÔÖªÊ¶µÄºÃÆæºÍ¶ÔÉú»îµÄÈÈ°®¡£ÔÚÕâÀï£¬ÎÒÒªÏò´ó¼Ò½éÉÜÒ»¸öÈÃÎÒÁ÷Á¬Íü·µµÄµØ·½£¬ÄÇ¾ÍÊÇÎÒÃÇ½ÌÊÒ´°ÍâµÄ·ç¾°¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='ÔÙÍùÇ°¿´£¬´°ÍâÊÇÄÇÌõÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ë®ÖĞµÄĞ¡Óã¶ù»¶¿ìµØÓÎ¶¯×Å£¬ÈÃÈËÌÕ×íÆäÖĞ¡£Ã¿µ±¿Î¼äĞİÏ¢£¬ÎÒÃÇ»áºÍÍ¬Ñ§ÃÇÒ»Æğ×ßµ½´°Íâ£¬ĞÀÉÍÕâĞ©ÃÀÀöµÄ¾°Îï£¬Ì¸ÂÛ×ÅÑ§Ï°ºÍÉú»îµÄÈ¤ÊÂ¡£\n\n´°Íâ»¹ÓĞÄÇ¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ÕâÀï²¼ÂúÁËÃûÑÔ¾¯¾ä£¬Ê±¿ÌÌáĞÑ×ÅÎÒÃÇÒªÇÚ·ÜÑ§Ï°£¬³ÉÎªµÂÖÇÌåÃÀÈ«Ãæ·¢Õ¹µÄÈË¡£³¤ÀÈÅÔ±ß±ãÊÇÄÇÉ«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö£¬É¢·¢×Åµ­µ­µÄ·Ò·¼£¬ÈÃÈËĞÄ¿õÉñâù¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='º¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î¡£\n\n<PAGE BREAK>\n\n¡¶´°ÍâµÄÆæÃîÊÀ½ç¡·\n\nÔÚº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§µÄ½ÌÊÒÀï£¬Ã¿µ±ÎÒÌ§Í·ÍûÏò´°Íâ£¬×Ü»á·¢ÏÖÒ»¸ö³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç¡£ÓÌÈçÒ»·ùÉ«²Ê°ßìµµÄ»­¾í£¬Õ¹ÏÖÔÚÎÒÑÛÇ°¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-10 23:19:40,867 - INFO - 2-Searching for similar documents...[Document(page_content='¡¶½ÌÊÒ´°Íâ¡·\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Ò»¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄÃÀÀöĞ£Ô°¡£Ã¿ÌìÀ´µ½ÕâÀï£¬ÎÒÃÇ¶¼³äÂúÁË¶ÔÖªÊ¶µÄºÃÆæºÍ¶ÔÉú»îµÄÈÈ°®¡£ÔÚÕâÀï£¬ÎÒÒªÏò´ó¼Ò½éÉÜÒ»¸öÈÃÎÒÁ÷Á¬Íü·µµÄµØ·½£¬ÄÇ¾ÍÊÇÎÒÃÇ½ÌÊÒ´°ÍâµÄ·ç¾°¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='ÔÙÍùÇ°¿´£¬´°ÍâÊÇÄÇÌõÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ë®ÖĞµÄĞ¡Óã¶ù»¶¿ìµØÓÎ¶¯×Å£¬ÈÃÈËÌÕ×íÆäÖĞ¡£Ã¿µ±¿Î¼äĞİÏ¢£¬ÎÒÃÇ»áºÍÍ¬Ñ§ÃÇÒ»Æğ×ßµ½´°Íâ£¬ĞÀÉÍÕâĞ©ÃÀÀöµÄ¾°Îï£¬Ì¸ÂÛ×ÅÑ§Ï°ºÍÉú»îµÄÈ¤ÊÂ¡£\n\n´°Íâ»¹ÓĞÄÇ¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ÕâÀï²¼ÂúÁËÃûÑÔ¾¯¾ä£¬Ê±¿ÌÌáĞÑ×ÅÎÒÃÇÒªÇÚ·ÜÑ§Ï°£¬³ÉÎªµÂÖÇÌåÃÀÈ«Ãæ·¢Õ¹µÄÈË¡£³¤ÀÈÅÔ±ß±ãÊÇÄÇÉ«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö£¬É¢·¢×Åµ­µ­µÄ·Ò·¼£¬ÈÃÈËĞÄ¿õÉñâù¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='º¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î¡£\n\n<PAGE BREAK>\n\n¡¶´°ÍâµÄÆæÃîÊÀ½ç¡·\n\nÔÚº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§µÄ½ÌÊÒÀï£¬Ã¿µ±ÎÒÌ§Í·ÍûÏò´°Íâ£¬×Ü»á·¢ÏÖÒ»¸ö³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç¡£ÓÌÈçÒ»·ùÉ«²Ê°ßìµµÄ»­¾í£¬Õ¹ÏÖÔÚÎÒÑÛÇ°¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-10 23:19:40,867 - INFO - 2-Searching for similar documents...[Document(page_content='¡¶½ÌÊÒ´°Íâ¡·\n\nº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Ò»¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄÃÀÀöĞ£Ô°¡£Ã¿ÌìÀ´µ½ÕâÀï£¬ÎÒÃÇ¶¼³äÂúÁË¶ÔÖªÊ¶µÄºÃÆæºÍ¶ÔÉú»îµÄÈÈ°®¡£ÔÚÕâÀï£¬ÎÒÒªÏò´ó¼Ò½éÉÜÒ»¸öÈÃÎÒÁ÷Á¬Íü·µµÄµØ·½£¬ÄÇ¾ÍÊÇÎÒÃÇ½ÌÊÒ´°ÍâµÄ·ç¾°¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='ÔÙÍùÇ°¿´£¬´°ÍâÊÇÄÇÌõÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ë®ÖĞµÄĞ¡Óã¶ù»¶¿ìµØÓÎ¶¯×Å£¬ÈÃÈËÌÕ×íÆäÖĞ¡£Ã¿µ±¿Î¼äĞİÏ¢£¬ÎÒÃÇ»áºÍÍ¬Ñ§ÃÇÒ»Æğ×ßµ½´°Íâ£¬ĞÀÉÍÕâĞ©ÃÀÀöµÄ¾°Îï£¬Ì¸ÂÛ×ÅÑ§Ï°ºÍÉú»îµÄÈ¤ÊÂ¡£\n\n´°Íâ»¹ÓĞÄÇ¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬ÕâÀï²¼ÂúÁËÃûÑÔ¾¯¾ä£¬Ê±¿ÌÌáĞÑ×ÅÎÒÃÇÒªÇÚ·ÜÑ§Ï°£¬³ÉÎªµÂÖÇÌåÃÀÈ«Ãæ·¢Õ¹µÄÈË¡£³¤ÀÈÅÔ±ß±ãÊÇÄÇÉ«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö£¬É¢·¢×Åµ­µ­µÄ·Ò·¼£¬ÈÃÈËĞÄ¿õÉñâù¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'}), Document(page_content='º¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§£¬Õâ¸ö³äÂúÍ¯ĞÄ¡¢Í¯ÄêºÍÍ¯»°µÄĞ£Ô°£¬½«ÓÀÔ¶ÁôÔÚÎÒÃÇĞÄÖĞ¡£¶ø½ÌÊÒ´°ÍâµÄ·ç¾°£¬Ò²½«³ÉÎªÎÒÃÇÓÀÔ¶Õä²ØµÄÃÀºÃ»ØÒä£¬Åã°éÎÒÃÇ×ß¹ıÈËÉúµÄÃ¿Ò»¸ö½×¶Î¡£\n\n<PAGE BREAK>\n\n¡¶´°ÍâµÄÆæÃîÊÀ½ç¡·\n\nÔÚº¼ÖİÊĞÊ¡¸®Â·Ğ¡Ñ§µÄ½ÌÊÒÀï£¬Ã¿µ±ÎÒÌ§Í·ÍûÏò´°Íâ£¬×Ü»á·¢ÏÖÒ»¸ö³äÂú¾ªÏ²ºÍ»îÁ¦µÄÆæÃîÊÀ½ç¡£ÓÌÈçÒ»·ùÉ«²Ê°ßìµµÄ»­¾í£¬Õ¹ÏÖÔÚÎÒÑÛÇ°¡£', metadata={'source': 'data/file/×÷ÎÄ.docx'})]
2023-07-10 23:19:40,869 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-10 23:19:40,869 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-10 23:19:40,869 - INFO - 3-Answering question...memory=None callbacks=None callback_manager=None verbose=True tags=None input_key='input_documents' output_key='output_text' llm_chain=LLMChain(memory=None, callbacks=None, callback_manager=None, verbose=True, tags=None, prompt=PromptTemplate(input_variables=['context', 'question'], output_parser=None, partial_variables={}, template="Use the following pieces of context to answer the question at the end. \n        If you don't know the answer, just say that you don't know, don't try to make up an answer.\n        the answer must be chinese.\n        {context}\n\n        Question: {question}\n        Answer:\n        ", template_format='f-string', validate_template=True), llm=OpenAI(cache=None, verbose=False, callbacks=None, callback_manager=None, tags=None, client=<class 'openai.api_resources.completion.Completion'>, model_name='text-davinci-003', temperature=0.5, max_tokens=-1, top_p=1, frequency_penalty=0, presence_penalty=0, n=1, best_of=1, model_kwargs={}, openai_api_key='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', openai_api_base='', openai_organization='', openai_proxy='', batch_size=20, request_timeout=None, logit_bias={}, max_retries=6, streaming=False, allowed_special=set(), disallowed_special='all'), output_key='text', output_parser=NoOpOutputParser(), return_final_only=True, llm_kwargs={}) document_prompt=PromptTemplate(input_variables=['page_content'], output_parser=None, partial_variables={}, template='{page_content}', template_format='f-string', validate_template=True) document_variable_name='context' document_separator='\n\n'
2023-07-10 23:19:45,874 - INFO - 4-Answering question... ´°ÍâÓĞÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ğ¡Óã¶ù»¶¿ìµØÓÎ¶¯£»¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬²¼ÂúÁËÃûÑÔ¾¯¾ä£»É«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö¡£
2023-07-10 23:19:45,874 - INFO - 4-Answering question... ´°ÍâÓĞÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ğ¡Óã¶ù»¶¿ìµØÓÎ¶¯£»¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬²¼ÂúÁËÃûÑÔ¾¯¾ä£»É«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö¡£
2023-07-10 23:19:45,874 - INFO - 4-Answering question... ´°ÍâÓĞÇå³º¼ûµ×µÄ¡°Ô´Í·Ë®¡±£¬Ğ¡Óã¶ù»¶¿ìµØÓÎ¶¯£»¶À¾ß½³ĞÄµÄ¡°ÂÌÉ«ÎÄ»¯³¤ÀÈ¡±£¬²¼ÂúÁËÃûÑÔ¾¯¾ä£»É«²Ê°ßìµµÄĞ¡»¨Ì³£¬Îå²Ê°ßìµµÄ»¨¶ä¶ùÔÚÑô¹âÏÂÕùÑŞ¶·Àö¡£
2023-07-10 23:19:45,878 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-10 23:19:45,878 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
2023-07-10 23:19:45,878 - WARNING - 'zh-cn' has been deprecated, falling back to 'zh-CN'. This fallback will be removed in a future version.
